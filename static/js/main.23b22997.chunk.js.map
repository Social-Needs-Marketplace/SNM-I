{"version":3,"sources":["store/defaults.js","store/actions/needActions.js","store/actions/authAction.js","store/reducers/authReducer.js","store/actions/ontologyActions.js","store/reducers/ontologyReducers.js","store/actions/clientActions.js","store/actions/serviceActions.js","store/actions/providerActions.js","store/actions/goodActions.js","store/reducers.js","store/reducers/serviceReducer.js","store/reducers/clientReducer.js","store/reducers/goodReducer.js","store/reducers/needReducers.js","store/reducers/providerReducers.js","store.js","components/shared/GoogleMap.js","components/shared/CSVUploadModal.js","components/shared/DeleteModal.js","components/shared/DropdownMenu.js","components/shared/GenericPage.js","components/shared/FormStepper.js","components/shared/FieldsWrapper.js","components/shared/fields/GeneralField.js","constants/index.js","components/shared/fields/SelectField.js","components/shared/LocationFieldGroup.js","helpers/operation_hour_helpers.js","helpers/formulaHelpers.js","helpers/index.js","constants/provider_fields.js","constants/default_fields.js","components/shared/OtherLocationsFields.js","components/shared/Table/EnhancedTableHead.js","components/shared/Table/EnhancedTableToolbar.js","components/shared/Table/index.js","components/shared/index.js","components/layouts/TopNavbar.js","components/layouts/Footer.js","components/Landing.js","components/Login.js","components/LoginPane.js","components/Dashboard.js","helpers/location_helpers.js","helpers/phone_number_helpers.js","components/Clients.js","components/client_needs/NeedGroupPanel.js","components/ClientNeeds.js","components/shared/TR.js","stylesheets/profile-table.js","components/clients/client_table/ClientInfoTable.js","components/appointments/AppointmentRow.js","api/index.js","api/settingApi.js","constants/client_fields.js","api/eligibilityApi.js","components/clients/client_form/FamilyFields.js","components/shared/fields/RadioField.js","components/shared/fields/CheckboxField.js","components/shared/fields/MultiSelectField.js","components/shared/FieldGroup.js","helpers/client_verify_form.js","components/clients/ClientForm.js","api/userApi.js","constants/userFields.js","components/users/UserForm.js","components/client_needs/NeedForm.js","helpers/select_field_helpers.jsx","components/appointments/AppointmentModal.js","store/actions/appointmentActions.js","components/client_needs/MatchedServices.js","components/client_needs/ServiceListItem.js","components/client_needs/ServiceList.js","components/client_needs/ServiceSearchBar.js","components/client_needs/Need.js","components/routes/PrivateRoute.js","components/routes/AdminRoute.js","components/Providers.js","components/providers/AddServicePrompt.js","helpers/provider_verify_form.js","components/shared/OperationHoursFieldGroup.js","components/providers/ProviderForm.js","components/providers/provider_table/ProviderInfoTable.js","components/providers/ProviderRatingForm.js","components/Services.js","helpers/eligibility_condition_helpers.js","components/services/Service.js","components/services/conditionConfig.js","components/services/EligibilityCondition.js","api/formulaApi.js","components/services/ServiceForm.js","components/Goods.js","components/goods/Good.js","components/goods/GoodForm.js","api/adminLogApi.js","components/AdminLogs.js","components/Reporting.js","components/additionalFIelds/Eligibilities.js","api/questionApi.js","components/settings/ManageFields.js","components/additionalFIelds/Questions.js","routes.js","components/clients/Client.js","components/users/User.js","components/Users.js","components/providers/ProviderProfile.js","App.js","index.js"],"names":["serverHost","window","location","hostname","module","exports","Object","freeze","torontoCoordinates","lat","lng","countryOptions","languageOptions","genderOptions","maritalStatusOptions","statusInCanadaOptions","educationLevelOptions","incomeSourceOptions","matchStatusOptions","familyRelationshipOptions","needStatusOptions","serviceTypeOptions","serviceSharedWithOptions","provinceOptions","ACTION_SUCCESS","ACTION_ERROR","RECEIVE_CLIENT_NEEDS","RECEIVE_CLIENT_NEED","REMOVE_CLIENT_NEED","REQUEST_NEED","REQUEST_NEEDS","RECEIVE_NEEDS","RECEIVE_CLIENT_NEED_GROUP","RECEIVE_CLIENT_NEED_INFO","receiveClientNeed","clientId","need","needGroup","type","receiveClientNeedInfo","needId","updateClientNeedGroup","needGroupId","params","dispatch","url","fetch","method","body","JSON","stringify","headers","localStorage","getItem","then","response","json","receiveClientNeedGroup","deleteClientNeed","status","removeClientNeed","fetchNeed","callback","client_id","id","LOGIN_SUCCESS","LOGIN_FAILURE","LOGGED_OUT","UPDATE_ORGANIZATION","login","console","log","a","error","Error","decoded_token","jwt_decode","token","user","user_id","username","email","is_admin","organization","provider_id","name","organization_name","setItem","login_success","catch","err","alert","message","login_failure","logout","sessionExpired","logged_out","removeItem","DEFAULT_STATE","currentUser","isLoggedin","RECEIVE_CATEGORIES","fetchOntologyCategories","categories","category_type","receiveCategories","DEFAULT_CATEGORY_STATE","loaded","REQUEST_CLIENT","RECEIVE_CLIENT","REQUEST_CLIENTS","REMOVE_CLIENT","RECEIVE_CLIENTS","SEARCH_CLIENTS","receiveClient","client","receiveClients","clients","fetchClient","requestClient","needGroups","needs","receiveClientNeeds","fetchClients","deleteClient","removeClient","REQUEST_SERVICE","RECEIVE_SERVICE","REQUEST_SERVICES","REMOVE_SERVICE","RECEIVE_SERVICES","SEARCH_SERVICES","receiveService","service","receiveServices","services","fetchService","requestService","fetchServices","deleteService","removeService","REQUEST_PROVIDERS","RECEIVE_PROVIDERS","REMOVE_PROVIDER","RECEIVE_PROVIDER","REQUEST_PROVIDER","SEARCH_PROVIDERS","receiveProvider","provider","receiveProviders","providers","receivedAt","Date","now","fetchProvider","requestProvider","fetchProviders","createProvider","updateAuthOrganization","deleteProvider","removeProvider","REQUEST_GOOD","RECEIVE_GOOD","REQUEST_GOODS","RECEIVE_ALL_GOODS","REMOVE_GOOD","RECEIVE_GOODS","GOOD_ERROR","GOOD_SUCCESS","SEARCH_GOODS","receiveGood","good","receiveGoods","goods","fetchGood","requestGood","fetchGoods","deleteGood","removeGood","appReducer","combineReducers","nextById","sortedServices","nextIndex","state","index","filteredServices","servicesLoaded","byId","action","newServicesById","_","keyBy","clone","remove","n","sortType","sort","b","toLowerCase","localeCompare","profile","first_name","desc","category","searchValue","searchType","filter","includes","company","last_name","sortedClients","filteredClients","clientsLoaded","newClientsById","reverse","address","sortedGoods","filteredGoods","goodsLoaded","newGoodsById","nextNeedGroup","needGroupIndex","map","indexOf","toString","need_group_id","needIndex","length","splice","sortedProviders","providersByType","providerLoaded","value","filteredProviders","providersById","displayType","primary_phone_number","auth","assign","ontology","languages","initialState","persistConfig","key","storage","persistedReducer","persistReducer","authMiddleware","store","next","getState","expired_at","google","maps","Map","Marker","InfoWindow","Size","createInfoWindow","markerElement","marker","history","idx","infoWindow","content","position","pixelOffset","addListener","e","render","ReactInfoWindow","document","getElementById","clicked","show","querySelector","open","close","event","title","link","Link","style","cursor","onClick","push","Typography","color","GoogleMap","props","useHistory","defaultCenter","useMemo","zoom","center","markers","useState","setMap","useEffect","i","currMarker","Paper","elevation","width","height","marginTop","info","CSVUploadModal","onHide","submit","Dialog","onClose","DialogTitle","DialogContent","InputBase","DialogActions","Button","DeleteModal","objectId","reason","form","setForm","fullWidth","TextField","variant","label","onChange","target","delete","DropdownMenu","urlPrefix","handleDelete","hideViewOption","anchorEl","setAnchorEl","Boolean","handleClose","handleLink","IconButton","currentTarget","size","MoreVert","Menu","keepMounted","PaperProps","maxHeight","ITEM_HEIGHT","MenuItem","ListItemIcon","OpenInBrowser","fontSize","Edit","Delete","GenericPage","fetchData","deleteItem","generateMarkers","nameFormatter","columnsWithoutOptions","charAt","toUpperCase","slice","useDispatch","showUploadDialog","showDeleteDialog","deleteId","deleteDialogTitle","data","pageNumber","rowsPerPage","loading","setState","hideDialog","useCallback","item","columns","tableOptions","customToolbar","CustomToolbar","handleAdd","handleUpload","onDelete","ids","onChangePage","onChangeRowsPerPage","Loading","Fade","in","Container","file","contentType","useStyles","makeStyles","theme","buttons","margin","paddingTop","paddingBottom","button","marginRight","spacing","backButton","FormStepper","stepNames","handleFinish","getStepContent","classes","React","activeStep","setActiveStep","Stepper","alternativeLabel","nonLinear","Step","StepButton","step","className","Alert","severity","disabled","prevActiveStep","root","paper","display","paddingLeft","minWidth","children","gutterBottom","dateFormat","textField","formControl","top","GeneralField","parse","setValue","handleChange","val","format","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","inputFormat","date","renderInput","TimePicker","time","InputLabelProps","UN_SET","defaultField","component","validator","required","SelectField","options","noDefaultStyle","noEmpty","controlled","defaultOptionTitle","formControlProps","helperText","undefined","FormControl","InputLabel","Select","Array","isArray","option","entries","FormHelperText","LocationFieldGroup","errMsg","apt_number","street_address","city","province","postal_code","defaultTimeSlot","defaultOperationHour","mapping","hour","hourStringam","minutes","timeSlot","operationHourMapping","operationHourListToObject","operation_hour_list","operation_hours","each","operation_hour","weekday","start_time","end_time","OperationHourTable","operationHourObj","times","day","transformToFrontendType","condition_clauses","condition","clauses","field_name","left_operand","right_operand","operator","escapeString","string","replace","unescapeList","array","recursiveAssign","obj","forEach","isFieldEmpty","field","isAvailabilityEmpty","availability","keys","time_slot","verifyAddressField","result","fieldName","verifyOtherAddressesFields","validateAddressPostalCode","errsContainer","parentField","test","verifyEmail","concat","verifyPhoneNumber","validateContactFormat","alt_phone_number","verifyFamilyFields","families","family","emailRegex","phoneNumberRegex","passwordRegex","postalCodeRegex","Validator","phone","password","postalCode","providerFormTypes","allForms","providerCategoryValue2Key","ret","objectFlip","providerFields","commitment","gender","main_address","notes","other_addresses","own_car","primary_contact","reference1_email","reference1_name","reference1_phone","reference2_email","reference2_name","reference2_phone","referrer","secondary_contact","skills","start_date","visibility","sponsor","defaultProfileFields","middle_name","preferred_name","birth_date","defaultContactFields","defaultLocationFields","defaultUserFields","is_superuser","LocationFields","handleRemove","update","FormLabel","FieldsWrapper","OtherLocationsFields","otherLocations","forceUpdate","EnhancedTableHead","onSelectAllClick","order","orderBy","numSelected","rowCount","onRequestSort","TableHead","TableRow","TableCell","padding","Checkbox","indeterminate","checked","inputProps","headCell","sortDirection","sortBy","TableSortLabel","active","direction","getFieldValueFn","sortSpan","useToolbarStyles","paddingRight","highlight","palette","mode","primary","main","backgroundColor","lighten","light","text","secondary","dark","flex","EnhancedTableToolbar","Toolbar","clsx","Tooltip","descendingComparator","getValue","extraData","getComparator","stableSort","comparator","stabilizedThis","el","table","visuallyHidden","tableRow","EnhancedTable","rowsPerPageOptions","idField","defaultOrderBy","rowStyle","setOrder","setOrderBy","selected","setSelected","page","setPage","setRowsPerPage","findIndex","_id","emptyRows","Math","max","TableContainer","Table","stickyHeader","TableBody","row","isItemSelected","isSelected","hover","role","tabIndex","selectedIndex","newSelected","handleClick","cell","colSpan","TablePagination","count","onPageChange","newPage","onRowsPerPageChange","parseInt","textDecorationLine","linkWithHover","fontWeight","progress","chipButton","marginLeft","Chip","icon","Add","formType","textAlign","CircularProgress","StyledTabs","withStyles","indicator","justifyContent","transition","Tabs","StyledTab","textTransform","typography","fontWeightRegular","pxToRem","to","Tab","appBar","whiteSpace","rightButtons","TopNavBar","useSelector","tabNames","pathname","AppBar","newValue","href","Landing","Component","container","maxWidth","Login","Grid","alignItems","marginBottom","LoginPane","prev","onKeyPress","Divider","NavButton","startIcon","Dashboard","Create","People","formatLocation","format_location","formatPhoneNumber","number","codes","match","TYPE","NeedGroupPanel","needGroupCategory","handleShow","hasUrgentNeed","anyUrgentNeed","needsUnderCat","innerBox","xs","is_urgent","Box","flexDirection","Alarm","highPriority","description","need_group","changeNeedGroupCategoryStatus","Accordion","panel","AccordionSummary","expandIcon","ExpandMoreOutlined","column","heading","PriorityHigh","secondaryHeading","AccordionDetails","panelDetail","outerBox","flexBasis","ClientNeeds","selectedId","needGroupData","showDeletedDiaglog","needsByNeedGroup","deleteNeedInData","copy","need_cat","TR","scope","align","useProfileTableStyles","title2","ClientInfoTable","rowTitle","rowValue","infoFields","clientFields","infoRows","infoField","join","AppointmentRow","appointment","this","normalizeError","getJson","sendJson","rawResponse","postJson","putJson","deleteJson","fetchClientFields","updateClientFields","fetchProviderFields","reformat","providerType","formStructure","form_structure","stepName","fields","updateProviderFields","arrival_date","completed_education_level","country_of_last_residence","country_of_origin","current_education_level","ngo_conditions","file_id","first_language","has_children","immigration_doc_number","income_source","landing_date","marital_status","num_of_children","num_of_dependants","other_languages","pr_number","status_in_canada","fetchEligibilities","deleteEligibility","FamilyMemberFields","member","handleRemoveFamily","handleChangeMember","person","relationship","FamilyFields","members","formControlRow","labelRow","RadioField","noStar","parentValue","tryCastBool","RadioGroup","FormControlLabel","control","Radio","labelPlacement","CheckboxField","optionsArray","values","FormGroup","chips","flexWrap","chip","zIndex","select","search","verticalAlign","searchIcon","fill","overflow","MenuProps","getContentAnchorEl","anchorOrigin","vertical","horizontal","MenuListProps","autoFocus","getStyles","fontWeightMedium","background","Dropdown","filteredOptions","setValues","setOpen","useTheme","handleItemClick","removeValue","handleSearch","l","renderValue","multiple","input","Input","onOpen","tagName","placeholder","onKeyDown","stopPropagation","FieldGroup","client_verify_form","steps","format_messages","verifyFormFormat","required_field_msg","step_page_fields","verifyRequiredField","ClientForm","useParams","all_ngo_conditions","dispatchErrorMsg","fieldErrorMsg","generateClientField","promises","steps_order","Promise","all","splits","split","parent","isProfile","updateClient","updateUser","fetchUser","deleteUser","userFormFields","Yes","No","UserForm","errors","validate","isEmpty","msg","handleSubmit","NeedForm","need_id","needsById","needed_by","formValChange","bind","handleMultiSelectChange","nextForm","selectedOption","actionMeta","preValue","removedValue","newMultiSelectFieldValue","needInfo","createClientNeed","p","formTitle","Row","Col","sm","Form","controlId","componentClass","Check","defaultChecked","inline","needsCategories","languagesCategories","multiline","smOffset","connect","categoriesLoaded","withRouter","AppointmentModal","serviceId","Modal","bsSize","Header","closeButton","Title","service_id","Body","reminder_type","reminder_frequency","Footer","MatchedServices","activeKey","matchStatusForm","noteForm","modalShow","appointmentServiceId","handleSelect","matchStatusChange","textAreaChange","submitMatchStatus","submitNote","handleModalHide","handleModalShow","matchId","updateMatchStatus","object_id","model","modalshow","matches","Card","eventKey","bsStyle","toggle","Label","Collapse","collapsible","defaultValue","note","ServiceListItem","matchClientNeed","ListGroupItem","round","distance","GMap","withGoogleMap","latlng","parseFloat","ServiceList","containerElement","mapElement","ServiceSearchBar","queryTerm","handleFormValChange","InputGroup","enableQueryTerm","Addon","Need","searchResult","recommendedServices","recommended_services","handleSearchService","handleSearchRecommendedServices","Headers","DeletedLabel","is_deleted","UrgentLabel","striped","bordered","condensed","defaultActiveKey","rest","isAdmin","formatProviderName","viewColumns","searchable","customBodyRender","rowData","AddServicePrompt","provider_verify_form","verifyContactEmptiness","verifyRequiredFieldByFormType","contactType","alignSelf","arrow","OperationHoursFieldGroup","operationHours","operationDates","handleOperationHourOnClick","weekDay","pop","slotIndex","startDate","endDate","end_date","timeSlots","addressPaper","ProviderForm","eligibilities","providerCategory","operation_dates","responses","generateProviderFields","load","errorMessage","cat","contactField","fieldProps","newForm","operation_hour_obj","week_day","operationHourObjectToList","updateProvider","ProviderInfoTable","fieldId","find","question_id","ProviderRatingForm","handleStarSelection","handleCommentChange","handleTextRating","rating","comment","nextValue","rateProvider","starCount","onStarClick","indexLoaded","formatProvider","formatEligibilityConditions","condType","condValue","Service","servicesById","print","Print","eligibility","available_from","available_to","max_capacity","current_capacity","frequency","billable","price","method_of_delivery","method_of_registration","registration","omit","eligibility_conditions","lower_age_limit","upper_age_limit","is_public","share_with","serviceLoaded","compareOps","IN","defaultConfig","operators","eligibilityConditionHideItems","eligibilityConditionConfigs","age","multipleSelect","CustomEligibilityField","rightOperand","list","leftOperand","changes","config","ops","EligibilityCondition","originalValue","setFields","fieldsObj","dynamic_fields","functions","m","handleFieldChange","clause","handleAddField","handleRemoveField","conditionIdx","fieldIdx","handleRemoveCondition","conditionComponents","field_components","float","ServiceForm","eligibility_criteria","conditionClauses","conditionClause","transformToBackendType","validateForm","createService","formIsValid","location_same_as_provider","provider_locations","isNaN","Number","locations","location2Obj","loc","showAlert","error_messages","divider","reduce","errorText","servicesCategories","min","Online","Group","immigration_status","languagesLoaded","providersLoaded","providerIndex","Good","goodsById","transportation","material","quantity","diameter","goodLoaded","GoodForm","goodId","is_provider_location","locationChange","indicatorChange","titleizedField","createGood","object_url","toLocaleString","objectRepr","START_YEARS","Report","total_clients","number_of_clients_by_gender","number_of_clients_by_birth_year","number_of_clients_by_marital_status","number_of_clients_by_language","number_of_providers_by_status","number_of_providers_by_type","number_of_individual_providers_by_category","selectedCategory","selectedAttribute","handleSelectChange","barChartDataBirthYear","labels","start_year","datasets","barChartOptions","scales","yAxes","ticks","beginAtZero","barChartDataLanguage","pieChartDataGender","pieChartDataProviderStatus","pieChartDataIndividualProviderCategory","pieChartDataProviderType","barChartDataMaritalStatus","pieChartOptions","maintainAspectRatio","responsive","legend","boxWidth","GenderStats","totalClientsCount","ClientsCountByGender","LanguageStats","ClientsCountByLanguage","MaritalStatusStats","ClientsCountByMaritalStatus","BirthYearStats","ClientsCountByBirthYear","ProviderStatusStats","ProvidersCountByStatus","ProviderTypeStats","ProvidersCountByType","IndividualProviderCategoryStats","IndividualProvidersCountByCategory","startYear","ADD_TITLE","AddEditDialog","handleConfirm","setErr","newErr","check","fetchQuestions","deleteQuestion","droppable","submitButton","radioButtonOptions","StepFields","stepFields","handleRadioChange","handleDeleteField","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","isDragging","EDIT_TITLE","contentTypeOptions","content_type","routes","exact","path","CF","CN","need_groups","appointments","setLoading","setUser","download","rowIndex","selectableRows","setData","fetchAdminLogs","formSetting","reviewValue","reviews","review","first","second","RateReview","mb","borderColor","Rating","Reporting","dialogTitle","showAddEditDialog","shoeEditDialog","showAddDialog","newItem","handleEdit","setCellHeaderProps","showEditDialog","stepToAdd","selectedStep","selectedField","questions","stepsOrder","stepsList","submitFunction","newFormStructure","initialOptions","fieldOptions","availableOptions","curr_field","handleRemoveStep","newStepComponent","newFieldComponent","fieldsComponents","droppableId","droppableProps","onDragEnd","source","destination","targetStepName","sourceStepName","sourceSteps","targetSteps","removed","startIndex","endIndex","reorder","createTheme","adaptV4Theme","blue","pink","App","StyledEngineProvider","injectFirst","ThemeProvider","TopNavbar","preloadedState","createStore","applyMiddleware","thunkMiddleware","persistor","persistStore","configureStore","ReactDOM"],"mappings":"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","file":"static/js/main.23b22997.chunk.js","sourcesContent":["const hostname = window && window.location && window.location.hostname;\n\nlet serverHost;\nif (hostname === 'jias.snmi.ca') {\n  // serverHost = 'https://3.97.37.175:8000';\n  // Obsolete\n  serverHost = 'https://jias-server.snmi.ca';\n}\nelse {\n  serverHost = 'http://127.0.0.1:8000';\n  // serverHost = 'https://3.97.37.175:8000';\n  // serverHost = 'https://jias-server.snmi.ca';\n}\n\n\nconst ACTION_SUCCESS = 'ACTION_SUCCESS';\nconst ACTION_ERROR = 'ACTION_ERROR';\n\nconst torontoCoordinates = { lat: 43.6497, lng: -79.3763 };\n\nconst countryOptions = ['Afghanistan', 'Åland Islands', 'Albania', 'Algeria', 'American Samoa', 'Andorra',\n  'Angola', 'Anguilla', 'Antarctica', 'Antigua & Barbuda', 'Argentina', 'Armenia', 'Aruba', 'Ascension Island',\n  'Australia', 'Austria', 'Azerbaijan', 'Bahamas', 'Bahrain', 'Bangladesh', 'Barbados', 'Belarus', 'Belgium',\n  'Belize', 'Benin', 'Bermuda', 'Bhutan', 'Bolivia', 'Bosnia & Herzegovina', 'Botswana', 'Brazil',\n  'British Indian Ocean Territory', 'British Virgin Islands', 'Brunei', 'Bulgaria', 'Burkina Faso', 'Burundi',\n  'Cambodia', 'Cameroon', 'Canada', 'Canary Islands', 'Cape Verde', 'Caribbean Netherlands', 'Cayman Islands',\n  'Central African Republic', 'Ceuta & Melilla', 'Chad', 'Chile', 'China', 'Christmas Island', 'Cocos (Keeling) Islands',\n  'Colombia', 'Comoros', 'Congo - Brazzaville', 'Congo - Kinshasa', 'Cook Islands', 'Costa Rica', 'Côte d’Ivoire',\n  'Croatia', 'Cuba', 'Curaçao', 'Cyprus', 'Czechia', 'Denmark', 'Diego Garcia', 'Djibouti', 'Dominica',\n  'Dominican Republic', 'Ecuador', 'Egypt', 'El Salvador', 'Equatorial Guinea', 'Eritrea', 'Estonia', 'Eswatini',\n  'Ethiopia', 'Falkland Islands', 'Faroe Islands', 'Fiji', 'Finland', 'France', 'French Guiana', 'French Polynesia',\n  'French Southern Territories', 'Gabon', 'Gambia', 'Georgia', 'Germany', 'Ghana', 'Gibraltar', 'Greece', 'Greenland',\n  'Grenada', 'Guadeloupe', 'Guam', 'Guatemala', 'Guernsey', 'Guinea', 'Guinea-Bissau', 'Guyana', 'Haiti', 'Honduras',\n  'Hong Kong SAR China', 'Hungary', 'Iceland', 'India', 'Indonesia', 'Iran', 'Iraq', 'Ireland', 'Isle of Man', 'Israel',\n  'Italy', 'Jamaica', 'Japan', 'Jersey', 'Jordan', 'Kazakhstan', 'Kenya', 'Kiribati', 'Kosovo', 'Kuwait', 'Kyrgyzstan',\n  'Laos', 'Latvia', 'Lebanon', 'Lesotho', 'Liberia', 'Libya', 'Liechtenstein', 'Lithuania', 'Luxembourg',\n  'Macao SAR China', 'Madagascar', 'Malawi', 'Malaysia', 'Maldives', 'Mali', 'Malta', 'Marshall Islands', 'Martinique',\n  'Mauritania', 'Mauritius', 'Mayotte', 'Mexico', 'Micronesia', 'Moldova', 'Monaco', 'Mongolia', 'Montenegro',\n  'Montserrat', 'Morocco', 'Mozambique', 'Myanmar (Burma)', 'Namibia', 'Nauru', 'Nepal', 'Netherlands', 'New Caledonia',\n  'New Zealand', 'Nicaragua', 'Niger', 'Nigeria', 'Niue', 'Norfolk Island', 'North Korea', 'North Macedonia',\n  'Northern Mariana Islands', 'Norway', 'Oman', 'Pakistan', 'Palau', 'Palestinian Territories', 'Panama',\n  'Papua New Guinea', 'Paraguay', 'Peru', 'Philippines', 'Pitcairn Islands', 'Poland', 'Portugal', 'Pseudo-Accents',\n  'Pseudo-Bidi', 'Puerto Rico', 'Qatar', 'Réunion', 'Romania', 'Russia', 'Rwanda', 'Samoa', 'San Marino',\n  'São Tomé & Príncipe', 'Saudi Arabia', 'Senegal', 'Serbia', 'Seychelles', 'Sierra Leone', 'Singapore', 'Sint Maarten',\n  'Slovakia', 'Slovenia', 'Solomon Islands', 'Somalia', 'South Africa', 'South Georgia & South Sandwich Islands',\n  'South Korea', 'South Sudan', 'Spain', 'Sri Lanka', 'St. Barthélemy', 'St. Helena', 'St. Kitts & Nevis', 'St. Lucia',\n  'St. Martin', 'St. Pierre & Miquelon', 'St. Vincent & Grenadines', 'Sudan', 'Suriname', 'Svalbard & Jan Mayen', 'Sweden',\n  'Switzerland', 'Syria', 'Taiwan', 'Tajikistan', 'Tanzania', 'Thailand', 'Timor-Leste', 'Togo', 'Tokelau', 'Tonga',\n  'Trinidad & Tobago', 'Tristan da Cunha', 'Tunisia', 'Turkey', 'Turkmenistan', 'Turks & Caicos Islands', 'Tuvalu',\n  'U.S. Outlying Islands', 'U.S. Virgin Islands', 'Uganda', 'Ukraine', 'United Arab Emirates', 'United Kingdom',\n  'United States', 'Uruguay', 'Uzbekistan', 'Vanuatu', 'Vatican City', 'Venezuela', 'Vietnam', 'Wallis & Futuna',\n  'Western Sahara', 'Yemen', 'Zambia', 'Zimbabwe']\n\nconst languageOptions = ['Abkhazian (ab)', 'Achinese (ace)', 'Acoli (ach)', 'Adangme (ada)', 'Adyghe (ady)',\n  'Afar (aa)', 'Afrihili (afh)', 'Afrikaans (af)', 'Aghem (agq)', 'Ainu (ain)', 'Akan (ak)', 'Akkadian (akk)',\n  'Akoose (bss)', 'Alabama (akz)', 'Albanian (sq)', 'Aleut (ale)', 'Algerian Arabic (arq)', 'American English (en_US)',\n  'American Sign Language (ase)', 'Amharic (am)', 'Ancient Egyptian (egy)', 'Ancient Greek (grc)', 'Angika (anp)',\n  'Ao Naga (njo)', 'Arabic (ar)', 'Aragonese (an)', 'Aramaic (arc)', 'Araona (aro)', 'Arapaho (arp)', 'Arawak (arw)',\n  'Armenian (hy)', 'Aromanian (rup)', 'Arpitan (frp)', 'Assamese (as)', 'Asturian (ast)', 'Asu (asa)', 'Atsam (cch)',\n  'Australian English (en_AU)', 'Austrian German (de_AT)', 'Avaric (av)', 'Avestan (ae)', 'Awadhi (awa)', 'Aymara (ay)',\n  'Azerbaijani (az)', 'Badaga (bfq)', 'Bafia (ksf)', 'Bafut (bfd)', 'Bakhtiari (bqi)', 'Balinese (ban)', 'Baluchi (bal)',\n  'Bambara (bm)', 'Bamun (bax)', 'Banjar (bjn)', 'Basaa (bas)', 'Bashkir (ba)', 'Basque (eu)', 'Batak Toba (bbc)',\n  'Bavarian (bar)', 'Beja (bej)', 'Belarusian (be)', 'Bemba (bem)', 'Bena (bez)', 'Bengali (bn)', 'Betawi (bew)',\n  'Bhojpuri (bho)', 'Bikol (bik)', 'Bini (bin)', 'Bishnupriya (bpy)', 'Bislama (bi)', 'Blin (byn)', 'Blissymbols (zbl)',\n  'Bodo (brx)', 'Bosnian (bs)', 'Brahui (brh)', 'Braj (bra)', 'Brazilian Portuguese (pt_BR)', 'Breton (br)', \n  'British English (en_GB)', 'Buginese (bug)', 'Bulgarian (bg)', 'Bulu (bum)', 'Buriat (bua)', 'Burmese (my)',\n  'Caddo (cad)', 'Cajun French (frc)', 'Canadian English (en_CA)', 'Canadian French (fr_CA)', 'Cantonese (yue)',\n  'Capiznon (cps)', 'Carib (car)', 'Catalan (ca)', 'Cayuga (cay)', 'Cebuano (ceb)', 'Central Atlas Tamazight (tzm)',\n  'Central Dusun (dtp)', 'Central Kurdish (ckb)', 'Central Yupik (esu)', 'Chadian Arabic (shu)', 'Chagatai (chg)',\n  'Chamorro (ch)', 'Chechen (ce)', 'Cherokee (chr)', 'Cheyenne (chy)', 'Chibcha (chb)', 'Chiga (cgg)',\n  'Chimborazo Highland Quichua (qug)', 'Chinese (zh)', 'Chinook Jargon (chn)', 'Chipewyan (chp)', 'Choctaw (cho)',\n  'Church Slavic (cu)', 'Chuukese (chk)', 'Chuvash (cv)', 'Classical Newari (nwc)', 'Classical Syriac (syc)',\n  'Colognian (ksh)', 'Comorian (swb)', 'Congo Swahili (swc)', 'Coptic (cop)', 'Cornish (kw)', 'Corsican (co)',\n  'Cree (cr)', 'Creek (mus)', 'Crimean Turkish (crh)', 'Croatian (hr)', 'Czech (cs)', 'Dakota (dak)', 'Danish (da)',\n  'Dargwa (dar)', 'Dazaga (dzg)', 'Delaware (del)', 'Dinka (din)', 'Divehi (dv)', 'Dogri (doi)', 'Dogrib (dgr)',\n  'Duala (dua)', 'Dutch (nl)', 'Dyula (dyu)', 'Dzongkha (dz)', 'Eastern Frisian (frs)', 'Efik (efi)',\n  'Egyptian Arabic (arz)', 'Ekajuk (eka)', 'Elamite (elx)', 'Embu (ebu)', 'Emilian (egl)', 'English (en)',\n  'Erzya (myv)', 'Esperanto (eo)', 'Estonian (et)', 'European Portuguese (pt_PT)', 'European Spanish (es_ES)',\n  'Ewe (ee)', 'Ewondo (ewo)', 'Extremaduran (ext)', 'Fang (fan)', 'Fanti (fat)', 'Faroese (fo)', 'Fiji Hindi (hif)',\n  'Fijian (fj)', 'Filipino (fil)', 'Finnish (fi)', 'Flemish (nl_BE)', 'Fon (fon)', 'Frafra (gur)', 'French (fr)',\n  'Friulian (fur)', 'Fulah (ff)', 'Ga (gaa)', 'Gagauz (gag)', 'Galician (gl)', 'Gan Chinese (gan)', 'Ganda (lg)',\n  'Gayo (gay)', 'Gbaya (gba)', 'Geez (gez)', 'Georgian (ka)', 'German (de)', 'Gheg Albanian (aln)', 'Ghomala (bbj)',\n  'Gilaki (glk)', 'Gilbertese (gil)', 'Goan Konkani (gom)', 'Gondi (gon)', 'Gorontalo (gor)', 'Gothic (got)',\n  'Grebo (grb)', 'Greek (el)', 'Guarani (gn)', 'Gujarati (gu)', 'Gusii (guz)', 'Gwichʼin (gwi)', 'Haida (hai)',\n  'Haitian (ht)', 'Hakka Chinese (hak)', 'Hausa (ha)', 'Hawaiian (haw)', 'Hebrew (he)', 'Herero (hz)',\n  'Hiligaynon (hil)', 'Hindi (hi)', 'Hiri Motu (ho)', 'Hittite (hit)', 'Hmong (hmn)', 'Hungarian (hu)',\n  'Hupa (hup)', 'Iban (iba)', 'Ibibio (ibb)', 'Icelandic (is)', 'Ido (io)', 'Igbo (ig)', 'Iloko (ilo)',\n  'Inari Sami (smn)', 'Indonesian (id)', 'Ingrian (izh)', 'Ingush (inh)', 'Interlingua (ia)', \n  'Interlingue (ie)', 'Inuktitut (iu)', 'Inupiaq (ik)', 'Irish (ga)', 'Italian (it)', 'Jamaican Creole English (jam)',\n  'Japanese (ja)', 'Javanese (jv)', 'Jju (kaj)', 'Jola-Fonyi (dyo)', 'Judeo-Arabic (jrb)', 'Judeo-Persian (jpr)',\n  'Jutish (jut)', 'Kabardian (kbd)', 'Kabuverdianu (kea)', 'Kabyle (kab)', 'Kachin (kac)', 'Kaingang (kgp)', 'Kako (kkj)',\n  'Kalaallisut (kl)', 'Kalenjin (kln)', 'Kalmyk (xal)', 'Kamba (kam)', 'Kanembu (kbl)', 'Kannada (kn)',\n  'Kanuri (kr)', 'Kara-Kalpak (kaa)', 'Karachay-Balkar (krc)', 'Karelian (krl)', 'Kashmiri (ks)', 'Kashubian (csb)',\n  'Kawi (kaw)', 'Kazakh (kk)', 'Kenyang (ken)', 'Khasi (kha)', 'Khmer (km)', 'Khotanese (kho)', 'Khowar (khw)',\n  'Kikuyu (ki)', 'Kimbundu (kmb)', 'Kinaray-a (krj)', 'Kinyarwanda (rw)', 'Kirmanjki (kiu)', 'Klingon (tlh)',\n  'Kom (bkm)', 'Komi (kv)', 'Komi-Permyak (koi)', 'Kongo (kg)', 'Konkani (kok)', 'Korean (ko)', 'Koro (kfo)',\n  'Kosraean (kos)', 'Kotava (avk)', 'Koyra Chiini (khq)', 'Koyraboro Senni (ses)', 'Kpelle (kpe)', 'Krio (kri)',\n  'Kuanyama (kj)', 'Kumyk (kum)', 'Kurdish (ku)', 'Kurukh (kru)', 'Kutenai (kut)', 'Kwasio (nmg)', 'Kyrgyz (ky)',\n  'Kʼicheʼ (quc)', 'Ladino (lad)', 'Lahnda (lah)', 'Lakota (lkt)', 'Lamba (lam)', 'Langi (lag)', 'Lao (lo)',\n  'Latgalian (ltg)', 'Latin (la)', 'Latin American Spanish (es_419)', 'Latvian (lv)', 'Laz (lzz)', 'Lezghian (lez)',\n  'Ligurian (lij)', 'Limburgish (li)', 'Lingala (ln)', 'Lingua Franca Nova (lfn)', 'Literary Chinese (lzh)',\n  'Lithuanian (lt)', 'Livonian (liv)', 'Lojban (jbo)', 'Lombard (lmo)', 'Low German (nds)', 'Lower Silesian (sli)',\n  'Lower Sorbian (dsb)', 'Lozi (loz)', 'Luba-Katanga (lu)', 'Luba-Lulua (lua)', 'Luiseno (lui)', 'Lule Sami (smj)',\n  'Lunda (lun)', 'Luo (luo)', 'Luxembourgish (lb)', 'Luyia (luy)', 'Maba (mde)', 'Macedonian (mk)', 'Machame (jmc)',\n  'Madurese (mad)', 'Mafa (maf)', 'Magahi (mag)', 'Main-Franconian (vmf)', 'Maithili (mai)', 'Makasar (mak)',\n  'Makhuwa-Meetto (mgh)', 'Makonde (kde)', 'Malagasy (mg)', 'Malay (ms)', 'Malayalam (ml)', 'Maltese (mt)', 'Manchu (mnc)',\n  'Mandar (mdr)', 'Mandingo (man)', 'Manipuri (mni)', 'Manx (gv)', 'Maori (mi)', 'Mapuche (arn)', 'Marathi (mr)',\n  'Mari (chm)', 'Marshallese (mh)', 'Marwari (mwr)', 'Masai (mas)', 'Mazanderani (mzn)', 'Medumba (byv)', 'Mende (men)',\n  'Mentawai (mwv)', 'Meru (mer)', 'Metaʼ (mgo)', 'Mexican Spanish (es_MX)', 'Micmac (mic)', 'Middle Dutch (dum)',\n  'Middle English (enm)', 'Middle French (frm)', 'Middle High German (gmh)', 'Middle Irish (mga)', 'Min Nan Chinese (nan)',\n  'Minangkabau (min)', 'Mingrelian (xmf)', 'Mirandese (mwl)', 'Mizo (lus)', 'Modern Standard Arabic (ar_001)',\n  'Mohawk (moh)', 'Moksha (mdf)', 'Moldavian (ro_MD)', 'Mongo (lol)', 'Mongolian (mn)', 'Morisyen (mfe)',\n  'Moroccan Arabic (ary)', 'Mossi (mos)', 'Multiple Languages (mul)', 'Mundang (mua)', 'Muslim Tat (ttt)', 'Myene (mye)',\n  'Nama (naq)', 'Nauru (na)', 'Navajo (nv)', 'Ndonga (ng)', 'Neapolitan (nap)', 'Nepali (ne)', 'Newari (new)',\n  'Ngambay (sba)', 'Ngiemboon (nnh)', 'Ngomba (jgo)', 'Nheengatu (yrl)', 'Nias (nia)', 'Niuean (niu)',\n  'No linguistic content (zxx)', 'Nogai (nog)', 'North Ndebele (nd)', 'Northern Frisian (frr)', 'Northern Sami (se)',\n  'Northern Sotho (nso)', 'Norwegian (no)', 'Norwegian Bokmål (nb)', 'Norwegian Nynorsk (nn)', 'Novial (nov)',\n  'Nuer (nus)', 'Nyamwezi (nym)', 'Nyanja (ny)', 'Nyankole (nyn)', 'Nyasa Tonga (tog)', 'Nyoro (nyo)', 'Nzima (nzi)',\n  'NʼKo (nqo)', 'Occitan (oc)', 'Ojibwa (oj)', 'Old English (ang)', 'Old French (fro)', 'Old High German (goh)',\n  'Old Irish (sga)', 'Old Norse (non)', 'Old Persian (peo)', 'Old Provençal (pro)', 'Oriya (or)', 'Oromo (om)',\n  'Osage (osa)', 'Ossetic (os)', 'Ottoman Turkish (ota)', 'Pahlavi (pal)', 'Palatine German (pfl)', 'Palauan (pau)',\n  'Pali (pi)', 'Pampanga (pam)', 'Pangasinan (pag)', 'Papiamento (pap)', 'Pashto (ps)', 'Pennsylvania German (pdc)',\n  'Persian (fa)', 'Phoenician (phn)', 'Picard (pcd)', 'Piedmontese (pms)', 'Plautdietsch (pdt)', 'Pohnpeian (pon)',\n  'Polish (pl)', 'Pontic (pnt)', 'Portuguese (pt)', 'Prussian (prg)', 'Punjabi (pa)', 'Quechua (qu)', 'Rajasthani (raj)',\n  'Rapanui (rap)', 'Rarotongan (rar)', 'Riffian (rif)', 'Romagnol (rgn)', 'Romanian (ro)', 'Romansh (rm)', 'Romany (rom)',\n  'Rombo (rof)', 'Root (root)', 'Rotuman (rtm)', 'Roviana (rug)', 'Rundi (rn)', 'Russian (ru)', 'Rusyn (rue)', 'Rwa (rwk)',\n  'Saho (ssy)', 'Sakha (sah)', 'Samaritan Aramaic (sam)', 'Samburu (saq)', 'Samoan (sm)', 'Samogitian (sgs)',\n  'Sandawe (sad)', 'Sango (sg)', 'Sangu (sbp)', 'Sanskrit (sa)', 'Santali (sat)', 'Sardinian (sc)', 'Sasak (sas)',\n  'Sassarese Sardinian (sdc)', 'Saterland Frisian (stq)', 'Saurashtra (saz)', 'Scots (sco)', 'Scottish Gaelic (gd)',\n  'Selayar (sly)', 'Selkup (sel)', 'Sena (seh)', 'Seneca (see)', 'Serbian (sr)', 'Serbo-Croatian (sh)', 'Serer (srr)',\n  'Seri (sei)', 'Shambala (ksb)', 'Shan (shn)', 'Shona (sn)', 'Sichuan Yi (ii)', 'Sicilian (scn)', 'Sidamo (sid)',\n  'Siksika (bla)', 'Silesian (szl)', 'Simplified Chinese (zh_Hans)', 'Sindhi (sd)', 'Sinhala (si)', 'Skolt Sami (sms)',\n  'Slave (den)', 'Slovak (sk)', 'Slovenian (sl)', 'Soga (xog)', 'Sogdien (sog)', 'Somali (so)', 'Soninke (snk)',\n  'South Azerbaijani (azb)', 'South Ndebele (nr)', 'Southern Altai (alt)', 'Southern Sami (sma)', 'Southern Sotho (st)',\n  'Spanish (es)', 'Sranan Tongo (srn)', 'Standard Moroccan Tamazight (zgh)', 'Sukuma (suk)', 'Sumerian (sux)',\n  'Sundanese (su)', 'Susu (sus)', 'Swahili (sw)', 'Swati (ss)', 'Swedish (sv)', 'Swiss French (fr_CH)', 'Swiss German (gsw)',\n  'Swiss High German (de_CH)', 'Syriac (syr)', 'Tachelhit (shi)', 'Tagalog (tl)', 'Tahitian (ty)', 'Taita (dav)',\n  'Tajik (tg)', 'Talysh (tly)', 'Tamashek (tmh)', 'Tamil (ta)', 'Taroko (trv)', 'Tasawaq (twq)', 'Tatar (tt)', \n  'Telugu (te)', 'Tereno (ter)', 'Teso (teo)', 'Tetum (tet)', 'Thai (th)', 'Tibetan (bo)', 'Tigre (tig)', 'Tigrinya (ti)',\n  'Timne (tem)', 'Tiv (tiv)', 'Tlingit (tli)', 'Tok Pisin (tpi)', 'Tokelau (tkl)', 'Tongan (to)', 'Tornedalen Finnish (fit)',\n  'Traditional Chinese (zh_Hant)', 'Tsakhur (tkr)', 'Tsakonian (tsd)', 'Tsimshian (tsi)', 'Tsonga (ts)', 'Tswana (tn)',\n  'Tulu (tcy)', 'Tumbuka (tum)', 'Tunisian Arabic (aeb)', 'Turkish (tr)', 'Turkmen (tk)', 'Turoyo (tru)', 'Tuvalu (tvl)',\n  'Tuvinian (tyv)', 'Twi (tw)', 'Tyap (kcg)', 'Udmurt (udm)', 'Ugaritic (uga)', 'Ukrainian (uk)', 'Umbundu (umb)',\n  'Unknown Language (und)', 'Upper Sorbian (hsb)', 'Urdu (ur)', 'Uyghur (ug)', 'Uzbek (uz)', 'Vai (vai)', 'Venda (ve)',\n  'Venetian (vec)', 'Veps (vep)', 'Vietnamese (vi)', 'Volapük (vo)', 'Võro (vro)', 'Votic (vot)', 'Vunjo (vun)',\n  'Walloon (wa)', 'Walser (wae)', 'Waray (war)', 'Warlpiri (wbp)', 'Washo (was)', 'Wayuu (guc)', 'Welsh (cy)',\n  'West Flemish (vls)', 'Western Frisian (fy)', 'Western Mari (mrj)', 'Wolaytta (wal)', 'Wolof (wo)', 'Wu Chinese (wuu)',\n  'Xhosa (xh)', 'Xiang Chinese (hsn)', 'Yangben (yav)', 'Yao (yao)', 'Yapese (yap)', 'Yemba (ybb)', 'Yiddish (yi)',\n  'Yoruba (yo)', 'Zapotec (zap)', 'Zarma (dje)', 'Zaza (zza)', 'Zeelandic (zea)', 'Zenaga (zen)', 'Zhuang (za)', \n  'Zoroastrian Dari (gbz)', 'Zulu (zu)', 'Zuni (zun)']\n\nconst genderOptions = [\n  'Female',\n  'Male',\n  'Other'\n]\n\nconst maritalStatusOptions = [\n  'Common Law',\n  'Divorced',\n  'Married',\n  'Other',\n  'Separated',\n  'Single',\n  'Widowed'\n]\n\nconst statusInCanadaOptions = [\n  'Application in Process - Family',\n  'Application in Process - Humanitarian and Compassionate',\n  'Application in Process - Independent',\n  'Application in Process - Refugee',\n  'Canadian Citizen',\n  'Immigrant',\n  'Other',\n  'Permanent Resident - Business Class',\n  'Permanent Resident - Canadian Experience Class',\n  'Permanent Resident - Family Class',\n  'Permanent Resident -  Humanitarian and Compassionate',\n  'Permanent Resident - Live-in Caregiver',\n  'Permanent Resident - Provincial Nominee',\n  'Permanent Resident - Refugees',\n  'Permanent Resident - Skilled Worker and Skilled Trades',\n  'Temporary Resident',\n  'Visitors Visa',\n  'Work Permit'\n]\n\nconst educationLevelOptions = [\n  'College',\n  'Elementary',\n  'Post Graduate',\n  'Secondary',\n  'University'\n]\n\nconst incomeSourceOptions = [\n 'Crowd Ward',\n 'Dependent of OW/ODSP',\n 'Employment',\n 'Employment Insurance',\n 'Family Members Income',\n 'None',\n 'Ontario Disability Support Program',\n 'Ontario Works',\n 'Other',\n 'Pension',\n 'Unknown',\n 'Workers Safety and Insurance'\n]\n\nconst matchStatusOptions = [\n  'Contacted',\n  'Matched',\n  'Referred',\n  'Selected'\n]\n\nconst familyRelationshipOptions = [\n  'Child',\n  'Parent',\n  'Sibling',\n  'Spouse'\n]\n\nconst needStatusOptions = [\n  'Fulfilled',\n  'In Progress',\n  'Matched',\n  'Pending',\n  'Unmatched'\n]\n\nconst serviceTypeOptions = [\n  'External',\n  'Internal',\n  'Professional/Community',\n  'Volunteer based'\n]\n\nconst serviceSharedWithOptions = [\n  \"Children's Aid Society of Toronto\",\n  \"Durham Children's Aid Society\",\n  \"Eva's Initiatives\",\n  'Abrigo Centre',\n  'Adventist community services',\n  'AIDS Committee of Durham Region',\n  'Albion Neighbourhood Services',\n  'Alexandra Park Community Centre',\n  'Applegrove Community Complex',\n  'Arab Community Centre of Toronto',\n  'Aurora Food Pantry',\n  'Barbra Schlifer Commemorative Clinic',\n  'Bluffs Food Bank',\n  'Boost Child & Youth Advocacy Centre',\n  'Brock Community Food Bank',\n  'Central Toronto Youth Services',\n  'Covenant House Toronto',\n  'Durham Rape Crisis Centre',\n  'Durham Youth Housing and Support Services',\n  'Horizons for Youth',\n  'Kababayan Multicultural Centre',\n  'Markham Food Bank',\n  'Parkdale Community Food Bank',\n  'Pediatric Oncology Group of Ontario',\n  'Private',\n  'Public'\n]\n\nconst provinceOptions = [\n  'Alberta',\n  'British Columbia',\n  'Manitoba',\n  'New Brunswick',\n  'Newfoundland and Labrador',\n  'Nova Scotia',\n  'Ontario',\n  'Prince Edward Island',\n  'Quebec',\n  'Saskatchewan'\n]\n\nmodule.exports = Object.freeze({\n  serverHost: serverHost,\n  torontoCoordinates: torontoCoordinates,\n  countryOptions: countryOptions,\n  languageOptions: languageOptions,\n  genderOptions: genderOptions,\n  maritalStatusOptions: maritalStatusOptions,\n  statusInCanadaOptions: statusInCanadaOptions,\n  educationLevelOptions: educationLevelOptions,\n  incomeSourceOptions: incomeSourceOptions,\n  matchStatusOptions: matchStatusOptions,\n  familyRelationshipOptions: familyRelationshipOptions,\n  needStatusOptions: needStatusOptions,\n  serviceTypeOptions: serviceTypeOptions,\n  serviceSharedWithOptions: serviceSharedWithOptions,\n  provinceOptions: provinceOptions,\n  ACTION_SUCCESS: ACTION_SUCCESS,\n  ACTION_ERROR: ACTION_ERROR\n});\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../defaults.js';\n\nexport const RECEIVE_CLIENT_NEEDS = 'RECEIVE_CLIENT_NEEDS';\nexport const RECEIVE_CLIENT_NEED = 'RECEIVE_CLIENT_NEED';\nexport const REMOVE_CLIENT_NEED = 'REMOVE_CLIENT_NEED';\nexport const REQUEST_NEED = 'REQUEST_NEED';\nexport const REQUEST_NEEDS = 'REQUEST_NEEDS';\nexport const RECEIVE_NEEDS = 'RECEIVE_NEEDS';\nexport const RECEIVE_CLIENT_NEED_GROUP = 'RECEIVE_CLIENT_NEED_GROUP';\nexport const RECEIVE_CLIENT_NEED_INFO = ' RECEIVE_CLIENT_NEED_INFO';\nexport const ERROR = 'ERROR';\n\nfunction requestNeeds(json) {\n  return {\n    type: REQUEST_NEEDS,\n    needs: json\n  }\n}\n\nfunction receiveNeeds(json) {\n  return {\n    type: RECEIVE_NEEDS,\n    needs: json\n  }\n}\n\nexport function receiveClientNeeds(clientId, json, needGroups) {\n  return {\n    type: RECEIVE_CLIENT_NEEDS,\n    clientId: clientId,\n    needs: json,\n    needGroups: needGroups\n  }\n}\n\nfunction receiveClientNeed(clientId, need, needGroup) {\n  return {\n    type: RECEIVE_CLIENT_NEED,\n    clientId: clientId,\n    need: need,\n    needGroup: needGroup\n  }\n}\n\nfunction receiveClientNeedInfo(clientId, needId, need) {\n  return {\n    type: RECEIVE_CLIENT_NEED_INFO,\n    clientId: clientId,\n    needId: needId,\n    need: need\n  }\n}\n\nfunction removeClientNeed(clientId, needId) {\n  return {\n    type: REMOVE_CLIENT_NEED,\n    clientId: clientId,\n    needId: needId\n  }\n}\n\nfunction receiveClientNeedGroup(clientId, needGroup) {\n  return {\n    type: RECEIVE_CLIENT_NEED_GROUP,\n    clientId: clientId,\n    needGroup: needGroup\n  }\n}\n\nfunction requestNeed(id) {\n  return {\n    type: REQUEST_NEED,\n    needId: id\n  }\n}\n\nexport function createClientNeed(clientId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/needs/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(needInfo =>\n      dispatch(receiveClientNeed(clientId, needInfo.need, needInfo.need_group))\n    );\n  }\n}\n\nexport function updateClientNeed(clientId, needId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/needs/' + needId + '/';\n\n    return fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n      .then(needInfo => dispatch(receiveClientNeed(clientId, needInfo.need, needInfo.need_group)));\n  }\n}\n\nexport function updateClientNeedGroup(clientId, needGroupId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/need_groups/' + needGroupId + '/';\n\n    return fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n      .then(needGroup => dispatch(receiveClientNeedGroup(clientId, needGroup)));\n  }\n}\n\nexport function matchClientNeed(needId, params) {\n  return dispatch => {\n    const url = serverHost + '/needs/' + needId + '/matches/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n      .then(need => {\n        dispatch(receiveClientNeedInfo(need.client_id, needId, need))\n      });\n  }\n}\n\nexport function deleteClientNeed(clientId, needId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/needs/' + needId + '/';\n    return fetch(url, {\n      method: \"DELETE\",\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => {\n      if (response.status === 204) {\n        dispatch(removeClientNeed(clientId, needId))\n      }\n    });\n  }\n}\n\nexport function fetchNeed(needId, callback) {\n  return dispatch => {\n    dispatch(requestNeed(needId))\n    const url = serverHost + '/needs/' + needId;\n\n    return fetch(url, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(need => {\n      dispatch(receiveClientNeedInfo(need.client_id, need.id, need))\n      callback(need)\n    });\n  }\n}\n\nexport function fetchNeeds() {\n  return dispatch => {\n    dispatch(requestNeeds())\n    const url = serverHost + '/needs/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveNeeds(json))\n      })\n  }\n}\n\nexport function updateMatchStatus(matchId, params) {\n  return dispatch => {\n    const url = serverHost + '/matches/' + matchId + '/';\n\n    return fetch(url, {\n      method: 'PATCH',\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(need => dispatch(receiveClientNeedInfo(need.client_id, need.id, need)));\n  }\n}\n\nexport function createMatchNote(params) {\n  return dispatch => {\n    const url = serverHost + '/notes/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(need => dispatch(receiveClientNeedInfo(need.client_id, need.id, need)));\n  }\n}\n","import { serverHost } from '../defaults.js';\nimport jwt_decode from 'jwt-decode';\n\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport const LOGGED_OUT = 'LOGGED_OUT';\nexport const UPDATE_ORGANIZATION = 'UPDATE_ORGANIZATION';\n\nfunction login_success(user, organization) {\n  console.log(\"File: authActions.js - Function: login_success - Parameters: user, organization. - Values: \", user, organization);\n  return {\n    type: LOGIN_SUCCESS,\n    user: user,\n    organization: organization\n  }\n}\n\nfunction login_failure(alert) {\n  console.log(\"File: authActions.js -  Function: login_failure - Parameters: alert - Values:  \", alert);\n  return {\n    type: LOGIN_FAILURE,\n    alert\n  }\n}\n\nfunction logged_out(sessionExpired) {\n  console.log(\"File: authActions.js -  Function: logged_out - Parameters: sessionExpired - Values: \", sessionExpired);\n  return {\n    type: LOGGED_OUT,\n    alert: sessionExpired && 'Your session has expired. Please login again.'\n  }\n}\n\nexport function updateAuthOrganization(provider) {\n  console.log(\"File: authActions.js -  Function: updateAuthOrganization - Parameters: provider - Values:\", provider);\n  return {\n    type: UPDATE_ORGANIZATION,\n    provider: provider\n  }\n}\n\nexport function login(params) {\n  console.log(\"File: authActions.js -  Function: login -  Parameters: params - Values:  \", params);\n  return dispatch => {\n    const url = serverHost + '/api-token-auth/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return response.json()\n      }\n      else {\n        const error = await response.json();\n        throw new Error(JSON.stringify(error['non_field_errors']))\n      }\n    })\n    .then(json => {\n      console.log(\"File: authActions.js -  Function: login - Step 2  json:  \", json);\n      const decoded_token = jwt_decode(json.token);\n      let user = (({ user_id, username, email }) => ({ user_id, username, email }))(decoded_token);\n      user['expired_at'] = decoded_token['exp'] * 1000;\n      user['is_admin'] = json.is_admin;\n      const organization = {\n        id: json.provider_id,\n        name: json.organization_name\n      };\n      localStorage.setItem('jwt_token', json.token);\n      dispatch(login_success(user, organization));\n      return {status: LOGIN_SUCCESS}\n    }).catch(err => {\n      let alert;\n      if (err.message === \"Failed to fetch\") {\n        alert = 'Server is unavailable due to a temporary outage.'\n      }\n      else {\n        alert = 'The username or password you entered is incorrect. Please try again.'\n      }\n      dispatch(login_failure(alert));\n      return {status: LOGIN_FAILURE, message: alert};\n    })\n  }\n}\n\nexport function logout(sessionExpired) {\n  return dispatch => {\n    dispatch(logged_out(sessionExpired))\n    localStorage.removeItem('jwt_token');\n  }\n}\n","import { LOGIN_SUCCESS, LOGGED_OUT, UPDATE_ORGANIZATION, LOGIN_FAILURE} from '../actions/authAction.js';\n\nconst DEFAULT_STATE = {\n  currentUser: null,\n  isLoggedin: false,\n  organization: { id: null, name: null },\n  alert: null\n}\n\nexport function auth(state = DEFAULT_STATE, action) {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      console.log(\"File: authReducer.js, Function: auth, case LOGIN_SUCCESS, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        currentUser: action.user,\n        isLoggedin: true,\n        organization: action.organization,\n        alert: null\n      })\n    case LOGIN_FAILURE:\n      console.log(\"File: authReducer.js, Function: auth, case LOGIN_FAILURE, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        alert: action.alert\n      })\n    case LOGGED_OUT:\n      console.log(\"File: authReducer.js, Function: auth, case LOGGED_OUT, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        currentUser: null,\n        isLoggedin: false,\n        organization: { id: null, name: null },\n        alert: action.alert\n      })\n    case UPDATE_ORGANIZATION:\n      console.log(\"File: authReducer.js, Function: auth, case UPDATE_ORGANIZATION, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        organization: {\n          id: action.provider.id,\n          name: action.provider.company\n        }\n      })\n    default:\n      return state\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../defaults.js';\n\nexport const RECEIVE_CATEGORIES = 'RECEIVE_CATEGORIES'\n\n\nexport function receiveCategories(type, categories) {\n  return {\n    type: RECEIVE_CATEGORIES,\n    category_type: type,\n    categories: categories\n  }\n}\n\nexport function fetchOntologyCategories(type) {\n  return dispatch => {\n    const url = serverHost + '/categories/' + type + '/';\n    return fetch(url, { method: \"GET\" })\n      .then(response => response.json())\n      .then(json => {\n        dispatch(receiveCategories(type, json['categories']));\n        return json.categories;\n      });\n  }\n}\n","import { RECEIVE_CATEGORIES } from '../actions/ontologyActions.js';\n\nconst DEFAULT_CATEGORY_STATE = { categories: [], loaded: false }\n\nexport function ontology(state = { needs: DEFAULT_CATEGORY_STATE,\n                                   services: DEFAULT_CATEGORY_STATE,\n                                   languages: DEFAULT_CATEGORY_STATE },\n                         action) {\n  switch (action.type) {\n    case RECEIVE_CATEGORIES:\n      return {...state, [action.category_type]: { categories: action.categories.sort(), loaded: true } }\n    default:\n      return state\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\n\nimport { receiveClientNeeds } from './needActions'\n\nexport const REQUEST_CLIENT = 'REQUEST_CLIENT';\nexport const RECEIVE_CLIENT = 'RECEIVE_CLIENT';\nexport const REQUEST_CLIENTS = 'REQUEST_CLIENTS';\nexport const REMOVE_CLIENT = 'REMOVE_CLIENT';\nexport const RECEIVE_CLIENTS = 'RECEIVE_CLIENTS';\nexport const SEARCH_CLIENTS = 'SEARCH_CLIENTS';\n\n\nfunction requestClient(id) {\n  return {\n    type: REQUEST_CLIENT,\n    id: id\n  }\n}\n\nfunction receiveClient(id, json) {\n  return {\n    type: RECEIVE_CLIENT,\n    id: id,\n    client: json\n  }\n}\n\nfunction requestClients(json) {\n  return {\n    type: REQUEST_CLIENTS,\n    clients: json\n  }\n}\n\nfunction receiveClients(json) {\n  return {\n    type: RECEIVE_CLIENTS,\n    clients: json\n  }\n}\n\nfunction removeClient(id) {\n  return {\n    type: REMOVE_CLIENT,\n    id: id\n  }\n}\n\nexport function searchClients(searchValue, searchType, sortType) {\n  return {\n    type: SEARCH_CLIENTS,\n    searchValue: searchValue,\n    searchType: searchType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchClient(id) {\n  return dispatch => {\n    dispatch(requestClient(id))\n    const url = serverHost + '/client/' + id + '/';\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveClient(id, json));\n        dispatch(receiveClientNeeds(id, json['needs'], json['need_groups']));\n        return json;\n      });\n  }\n}\n\nexport function fetchClients() {\n  return dispatch => {\n    dispatch(requestClients())\n    let url = serverHost + '/clients/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      })\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json()\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(json => {\n        dispatch(receiveClients(json));\n        return json;\n      })\n      .catch(err => {\n        return ACTION_ERROR;\n      })\n  }\n}\n\n\nexport function deleteClient(id, params) {\n  return dispatch => {\n    const url = serverHost + '/client/' + id + '/';\n    return fetch(url, {\n      method: 'DELETE',\n      body: JSON.stringify(params),\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`,\n        'Content-Type': 'application/json'\n      },\n    })\n    .then(response => {\n      if (response.status === 204) {\n        dispatch(removeClient(id));\n        return ACTION_SUCCESS;\n      }\n      else {\n        return ACTION_ERROR;\n      }\n    })\n  }\n}\n\nexport function createClient(params, callback) {\n  console.log(\"createClient params\", params);\n\n  return dispatch => {\n    const url = serverHost + '/clients/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      console.log(\"createClient response.status\", response.status);\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(client => {\n      dispatch(receiveClient(client.id, client))\n      callback(ACTION_SUCCESS, null, client.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n\nexport function createClients(file) {\n  const formData  = new FormData();\n  formData.append('file', file)\n\n  return dispatch => {\n    const url = serverHost + '/clients.csv';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(clients => {\n      dispatch(receiveClients(clients))\n      return ACTION_SUCCESS;\n    })\n    .catch(err => {\n      // dispatch(createFailure(err))\n      return ACTION_ERROR;\n    })\n  }\n}\n\nexport function updateClient(id, params, callback) {\n  console.log(\"updateClient id, params\", id, params);\n  return dispatch => {\n    const url = serverHost + '/client/' + id + '/';\n\n    return fetch(url, {\n      method: 'PUT',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return response.json();\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(client => {\n      dispatch(receiveClient(client.id, client))\n      callback(ACTION_SUCCESS, null, client.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\n\nexport const REQUEST_SERVICE = 'REQUEST_SERVICE';\nexport const RECEIVE_SERVICE = 'RECEIVE_SERVICE';\nexport const REQUEST_SERVICES = 'REQUEST_SERVICES';\nexport const REMOVE_SERVICE = 'REMOVE_SERVICE';\nexport const RECEIVE_SERVICES = 'RECEIVE_SERVICES';\nexport const SEARCH_SERVICES = 'SEARCH_SERVICES';\n\n\nfunction requestService(id) {\n  return {\n    type: REQUEST_SERVICE,\n    id: id\n  }\n}\n\nfunction receiveService(id, json) {\n  return {\n    type: RECEIVE_SERVICE,\n    id: id,\n    service: json\n  }\n}\n\nfunction requestServices(json) {\n  return {\n    type: REQUEST_SERVICES,\n    services: json\n  }\n}\n\nfunction receiveServices(json) {\n  return {\n    type: RECEIVE_SERVICES,\n    services: json\n  }\n}\n\nfunction removeService(id) {\n  return {\n    type: REMOVE_SERVICE,\n    id: id\n  }\n}\n\nexport function searchServices(searchValue, searchType, sortType) {\n  return {\n    type: SEARCH_SERVICES,\n    searchValue: searchValue,\n    searchType: searchType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchService(id) {\n  return dispatch => {\n    dispatch(requestService(id))\n    const url = serverHost + '/service/' + id + '/';\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveService(id, json))\n      })\n  }\n}\n\nexport function fetchServices() {\n  return dispatch => {\n    dispatch(requestServices())\n    const url = serverHost + '/services/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(async(response) => {\n        if (response.status === 200) {\n          return response.json()\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(json => {\n        dispatch(receiveServices(json))\n        return json;\n      })\n      .catch(err => {\n        return ACTION_ERROR;\n      })\n  }\n\n}\n\nexport function deleteService(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/service/' + id + '/';\n    return fetch(url, {\n      method: 'DELETE',\n      body: JSON.stringify(params),\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`,\n        'Content-Type': 'application/json'\n      },\n    }).then(response => {\n      if (response.status === 204) {\n        dispatch(removeService(id))\n        return ACTION_SUCCESS;\n      }\n      else {\n        return ACTION_ERROR;\n      }\n    })\n  }\n}\n\nexport function createService(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/services/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(service => {\n      dispatch(receiveService(service.id, service))\n      callback(ACTION_SUCCESS, null, service.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n\nexport function createServices(file) {\n  const formData  = new FormData();\n  formData.append('file', file)\n\n  return dispatch => {\n    const url = serverHost + '/services.csv';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(services => {\n      dispatch(receiveServices(services))\n      return ACTION_SUCCESS\n    })\n    .catch(err => {\n      return ACTION_ERROR\n    })\n  }\n}\n\nexport function updateService(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/service/' + id + '/';\n\n    return fetch(url, {\n      method: 'PUT',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json();\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(service => {\n        dispatch(receiveService(service.id, service))\n        callback(ACTION_SUCCESS, null, service.id);\n      }).catch(err => {\n        callback(ACTION_ERROR, err);\n      })\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\nimport { updateAuthOrganization } from './authAction.js'\n\nexport const REQUEST_PROVIDERS = 'REQUEST_PROVIDERS';\nexport const RECEIVE_PROVIDERS = 'RECEIVE_PROVIDERS';\nexport const REMOVE_PROVIDER = 'REMOVE_PROVIDER';\nexport const RECEIVE_PROVIDER = 'RECEIVE_PROVIDER';\nexport const REQUEST_PROVIDER = 'REQUEST_PROVIDER';\nexport const SEARCH_PROVIDERS = 'SEARCH_PROVIDERS';\n\n\nfunction requestProviders(json) {\n  return {\n    type: REQUEST_PROVIDERS,\n    providers: json\n  }\n}\n\nfunction requestProvider(id) {\n  console.log(\"requestProvider id\", id);\n  return {\n    type: REQUEST_PROVIDER,\n    id: id\n  }\n}\n\nfunction receiveProvider(id, json) {\n  console.log(\"receiveProvider json\", json);\n  return {\n    type: RECEIVE_PROVIDER,\n    provider: json,\n    id: id\n  }\n}\n\nfunction receiveProviders(json) {\n  console.log(\"receiveProviders json\", json);\n  return {\n    type: RECEIVE_PROVIDERS,\n    providers: json,\n    receivedAt: Date.now(),\n  }\n}\n\nfunction removeProvider(id) {\n  return {\n    type: REMOVE_PROVIDER,\n    id: id\n  }\n}\n\n\nexport function searchProviders(searchValue, searchType, searchProviderType, sortType) {\n  return {\n    type: SEARCH_PROVIDERS,\n    searchValue: searchValue,\n    searchType: searchType,\n    displayType: searchProviderType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchProvider(id) {\n  return dispatch => {\n    console.log(\"fetchProvider, id\", id);\n    dispatch(requestProvider(id))\n    const url = serverHost + '/provider/' + id + '/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveProvider(id, json))\n        return json;\n      })\n  }\n}\n\nexport function fetchProviders() {\n  return dispatch => {\n    dispatch(requestProviders())\n    const url = serverHost + '/providers/';\n\n    return fetch(url, {\n        method: 'get',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      })\n    //.then(response => response.json())\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json()\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(json => {\n        dispatch(receiveProviders(json));\n        return json;\n      })\n      .catch(err => {\n        return ACTION_ERROR;\n      })\n  }\n}\n\nexport function createProvider(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/providers/';\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(provider => {\n      dispatch(receiveProvider(provider.id, provider))\n      if (provider.status === 'Home Agency') {\n        dispatch(updateAuthOrganization(provider))\n      }\n      callback(ACTION_SUCCESS, null, provider.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n\nexport function createProviderWithCSV(file) {\n  const formData  = new FormData();\n  formData.append('file', file);\n\n  return dispatch => {\n    const url = serverHost + '/providers/new/upload';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(providers => {\n      dispatch(receiveProviders(providers))\n      return ACTION_SUCCESS;\n    })\n      .catch(err => {\n      return ACTION_ERROR;\n    })\n  }\n}\n\nexport function updateProvider(id, params, callback) {\n  console.log(\"updateProvider id, params\", id, params);\n  return dispatch => {\n    const url = serverHost + '/provider/' + id + '/';\n\n    return fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return await response.json();\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n      .then(provider => {\n        console.log(\"updateProvider provider.id, provider\", provider.id, provider);\n        dispatch(receiveProvider(provider.id, provider))\n /*       if (provider.status === 'Home Agency') {\n          dispatch(updateAuthOrganization(provider.id, provider))\n        } */\n        callback(ACTION_SUCCESS, null, provider.id);\n      }).catch(err => {\n        callback(ACTION_ERROR, err);\n    })\n  }\n}\n\n/*\n.then(client => {\n      dispatch(receiveClient(client.id, client))\n      callback(ACTION_SUCCESS, null, client.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n\n*/\n\nexport function deleteProvider(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/provider/' + id + '/';\n\n    return fetch(url, {\n      method: \"DELETE\",\n      body: JSON.stringify(params),\n      headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n    }).then(response => {\n      if (response.status === 204) {\n        dispatch(removeProvider(id));\n        return ACTION_SUCCESS;\n      }\n      else {\n        return ACTION_ERROR;\n      }\n    })\n  }\n}\n\nexport function rateProvider(id, params) {\n  return dispatch => {\n    const url = serverHost + '/provider/' + id + '/rate';\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../defaults.js';\n\nexport const REQUEST_GOOD = 'REQUEST_GOOD';\nexport const RECEIVE_GOOD = 'RECEIVE_GOOD';\nexport const REQUEST_GOODS = 'REQUEST_GOODS';\nexport const RECEIVE_ALL_GOODS = 'RECEIVE_ALL_GOODS';\nexport const REMOVE_GOOD = 'REMOVE_GOOD';\nexport const RECEIVE_GOODS = 'RECEIVE_GOODS';\nexport const GOOD_ERROR = 'GOOD_ERROR';\nexport const GOOD_SUCCESS = 'GOOD_SUCCESS';\nexport const SEARCH_GOODS = 'SEARCH_GOODS';\n\n\nfunction requestGood(id) {\n  return {\n    type: REQUEST_GOOD,\n    id: id\n  }\n}\n\nfunction receiveGood(id, json) {\n  return {\n    type: RECEIVE_GOOD,\n    id: id,\n    good: json\n  }\n}\n\nfunction requestGoods(json) {\n  return {\n    type: REQUEST_GOODS,\n    goods: json\n  }\n}\n\nfunction receiveGoods(json) {\n  return {\n    type: RECEIVE_GOODS,\n    goods: json\n  }\n}\n\nfunction removeGood(id) {\n  return {\n    type: REMOVE_GOOD,\n    id: id\n  }\n}\n\nexport function searchGoods(searchValue, searchType, sortType) {\n  return {\n    type: SEARCH_GOODS,\n    searchValue: searchValue,\n    searchType: searchType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchGood(id) {\n  return dispatch => {\n    dispatch(requestGood(id))\n    const url = serverHost + '/good/' + id + '/';\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveGood(id, json))\n      })\n  }\n}\n\nexport function fetchGoods() {\n  return dispatch => {\n    dispatch(requestGoods())\n    const url = serverHost + '/goods/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveGoods(json));\n        return json;\n      })\n  }\n}\n\nexport function deleteGood(id, params) {\n  return dispatch => {\n    const url = serverHost + '/good/' + id + '/';\n\n    return fetch(url, {\n      method: 'DELETE',\n      body: JSON.stringify(params),\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`,\n        'Content-Type': 'application/json'\n      },\n    })\n    .then(response => {\n      if (response.status === 204) {\n        dispatch(removeGood(id))\n        return GOOD_SUCCESS\n      }\n      else {\n        return GOOD_ERROR\n      }\n    });\n  }\n}\n\nexport function createGood(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/goods/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(good => {\n      dispatch(receiveGood(good.id, good))\n      callback(GOOD_SUCCESS, null, good.id);\n    }).catch(err => {\n      callback(GOOD_ERROR, err);\n    })\n  }\n}\n\nexport function createGoods(file) {\n  const formData  = new FormData();\n  formData.append('file', file)\n\n  return dispatch => {\n    const url = serverHost + '/goods.csv';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(goods => {\n      dispatch(receiveGoods(goods))\n      return GOOD_SUCCESS\n    })\n    .catch(err => {\n      return GOOD_ERROR\n    })\n  }\n}\n\nexport function updateGood(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/good/' + id + '/';\n\n    return fetch(url, {\n      method: 'PUT',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json();\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(good => {\n        dispatch(receiveGood(good.id, good))\n        callback(GOOD_SUCCESS, null, good.id);\n      }).catch(err => {\n        callback(GOOD_ERROR, err);\n      })\n  }\n}\n","import { combineReducers } from 'redux'\nimport { needs } from './reducers/needReducers.js';\nimport { auth } from './reducers/authReducer.js';\nimport { ontology } from './reducers/ontologyReducers.js';\nimport { clients } from './reducers/clientReducer.js';\nimport { services } from './reducers/serviceReducer.js';\nimport { providers } from './reducers/providerReducers.js';\nimport { goods } from './reducers/goodReducer.js';\n\n\nconst appReducer = combineReducers({\n  services,\n  clients,\n  goods,\n  needs,\n  providers,\n  auth,\n  ontology,\n});\n\nconst initialState = appReducer({}, {});\n\nexport const rootReducer = (state, action) => {\n  if (action.type === 'LOGGED_OUT') {\n    state = initialState\n  }\n\n  return appReducer(state, action);\n};\n","import { REQUEST_SERVICES, RECEIVE_SERVICES, SEARCH_SERVICES, REMOVE_SERVICE,\n         REQUEST_SERVICE, RECEIVE_SERVICE } from '../actions/serviceActions.js';\nimport _ from 'lodash';\n\n\nexport function services(state = {index: [], filteredServices: [], servicesLoaded: false, byId: {} }, action) {\n  let nextById, sortedServices, services, nextIndex;\n  switch (action.type) {\n    case REQUEST_SERVICES:\n    // should be for fetching all serves in componentWillMount\n      return {...state, servicesLoaded: false }\n    case RECEIVE_SERVICES:\n      console.log(\"reducer check: \", action);\n    // should be for fetching all serves in componentWillMount\n      const newServicesById = _.keyBy(action.services, service => service.id);\n      nextById = { ...state.byId, ...newServicesById }\n      return {...state, byId: nextById, servicesLoaded: true, index: action.services, filteredServices:action.services }\n    case REMOVE_SERVICE:\n    // should be for delete function\n      nextIndex = _.clone(state.index);\n      _.remove(nextIndex, (n) => { return n.id === action.id });\n      return { ...state, index: nextIndex, filteredServices: nextIndex }\n    case REQUEST_SERVICE:\n    // for single servce viewing\n      nextById = { ...state.byId, [action.id]: { servicesLoaded: false } }\n      return {...state, byId: nextById }\n    case RECEIVE_SERVICE:\n    // same as above\n      nextById = {...state.byId, [action.id]: { ...action.service, servicesLoaded: true }}\n      return {...state, byId: nextById }\n\n    case SEARCH_SERVICES:\n    // for search bar\n      if (action.sortType === '' || action.sortType === \"name\") {\n        console.log(\"service reducer :\", [...state.index]);\n        sortedServices = [...state.index].sort((a, b) => (a.name ? a.name.toLowerCase(): \"\").localeCompare(b.name ? b.name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"provider\") {\n        sortedServices = [...state.index].sort((a, b) => (a.provider.profile.first_name?a.provider.profile.first_name.toLowerCase():\"\").localeCompare(b.provider.profile.first_name?b.provider.profile.first_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"description\") {\n        sortedServices = [...state.index].sort((a, b) => (a.desc?a.desc:\"\").localeCompare(b.desc?b.desc:\"\"));\n      }\n      else if (action.sortType === \"category\") {\n        sortedServices = [...state.index].sort((a, b) => (a.category? a.category:\"\").localeCompare(b.category?b.category:\"\"));\n      }\n\n      if (action.searchValue === '') {\n        return {index: sortedServices, filteredServices: sortedServices, servicesLoaded: true}\n      }\n      else if (action.searchType === \"name\") {\n        services = sortedServices.filter((service) => ((service.name?service.name.toLowerCase():\"\").includes(action.searchValue) ));\n        console.log(\"service reducer return: \", {index: [...state.index], filteredServices: services, servicesLoaded: true});\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      else if (action.searchType === \"provider\") {\n        services = sortedServices.filter((service) => (service.provider.company ? (service.provider.company).includes(action.searchValue) : \"\")\n        || ((service.provider.profile.first_name ? service.provider.profile.first_name.toLowerCase() : \"\")\n         + \" \" +\n         (service.provider.profile.last_name ? service.provider.profile.last_name.toLowerCase().includes(action.searchValue): \"\")));\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      else if (action.searchType === \"description\") {\n        services = sortedServices.filter((service) => ((service.desc).includes(action.searchValue) ));\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      else if (action.searchType === \"category\") {\n        services = sortedServices.filter((service) => ((service.category).includes(action.searchValue) ));\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      break;\n    default:\n      return state\n  }\n}\n","import { REQUEST_CLIENTS, RECEIVE_CLIENTS, REMOVE_CLIENT, REQUEST_CLIENT,\n         RECEIVE_CLIENT, SEARCH_CLIENTS } from '../actions/clientActions.js';\nimport _ from 'lodash';\n\n\nexport function clients(state = {index: [], filteredClients: [], clientsLoaded: false, byId: {} }, action) {\n  let nextById, clients, nextIndex, sortedClients;\n  switch (action.type) {\n    case REQUEST_CLIENTS:\n      console.log()\n      return {...state, clientsLoaded: false }\n    case RECEIVE_CLIENTS:\n      console.log(RECEIVE_CLIENTS);\n      const newClientsById = _.keyBy(action.clients, client => client.id);\n      nextById = { ...state.byId, ...newClientsById }\n      return {...state, byId: nextById, clientsLoaded: true, index: action.clients, filteredClients: action.clients }\n    case REMOVE_CLIENT:\n      nextIndex = _.clone(state.index);\n      _.remove(nextIndex, (n) => { return n.id === action.id });\n      return { ...state, index: nextIndex, filteredClients: nextIndex }\n    case REQUEST_CLIENT:\n      nextById = { ...state.byId, [action.id]: { clientsLoaded: false } }\n      return {...state, byId: nextById }\n    case RECEIVE_CLIENT:\n      console.log(RECEIVE_CLIENT);\n      nextById = {...state.byId, [action.id]: { ...action.client, clientsLoaded: true }}\n      return {...state, byId: nextById }\n\n    case SEARCH_CLIENTS:\n    // for search bar\n      if (action.sortType === '' || action.sortType === \"first_name\") {\n        console.log(\"client reducer :\", [...state.index]);\n        sortedClients = [...state.index].sort((a, b) => (a.profile.first_name ? a.profile.first_name.toLowerCase(): \"\").localeCompare(b.profile.first_name ? b.profile.first_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"-first_name\") {\n        sortedClients = [...state.index].sort((a, b) => (a.profile.first_name ? a.profile.first_name.toLowerCase(): \"\").localeCompare(b.profile.first_name ? b.profile.first_name.toLowerCase():\"\"));\n        sortedClients = sortedClients.reverse();\n      }\n      else if (action.sortType === \"last_name\") {\n        sortedClients = [...state.index].sort((a, b) => (a.profile.last_name ? a.profile.last_name.toLowerCase(): \"\").localeCompare(b.profile.last_name ? b.profile.last_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"-last_name\") {\n        sortedClients = [...state.index].sort((a, b) => (a.profile.last_name ? a.profile.last_name.toLowerCase(): \"\").localeCompare(b.profile.last_name ? b.profile.last_name.toLowerCase():\"\"));\n        sortedClients = sortedClients.reverse();\n      }\n\n      if (action.searchValue === ''){\n        return {index: sortedClients, filteredClients: sortedClients, clientsLoaded: true}\n      }\n      else if (action.searchType === 'first_name') {\n        console.log(\"clients: \", sortedClients);\n        clients = sortedClients.filter((client) => ((client.profile.first_name?client.profile.first_name.toLowerCase():\"\").includes(action.searchValue)));\n        console.log(\"client reducer return: \", {index: [...state.index], filteredClients: clients, clientsLoaded: true});\n        return {index: [...state.index], filteredClients: clients, clientsLoaded: true}\n      }\n      else if (action.searchType === 'last_name') {\n        clients = sortedClients.filter((client) => ((client.profile.last_name?client.profile.last_name.toLowerCase():\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredClients: clients, clientsLoaded: true}\n      }\n      else if (action.searchType === 'address') {\n        clients = sortedClients.filter((client) => ((client.address?client.address.toLowerCase():\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredClients: clients, clientsLoaded: true}\n      }\n      break;\n\n    default:\n      return state\n\n  }\n}\n","import { REQUEST_GOODS, RECEIVE_GOODS, RECEIVE_ALL_GOODS, SEARCH_GOODS, REMOVE_GOOD,\n         REQUEST_GOOD, RECEIVE_GOOD } from '../actions/goodActions.js';\nimport _ from 'lodash';\n\n\nexport function goods(state = {index: [], filteredGoods: [], goodsLoaded: false, byId: {} }, action) {\n  let nextById, sortedGoods, goods;\n  switch (action.type) {\n    case REQUEST_GOODS:\n      return {...state, goodsLoaded: false }\n    case RECEIVE_GOODS:\n      const newGoodsById = _.keyBy(action.goods, good => good.id);\n      nextById = { ...state.byId, ...newGoodsById }\n      return {...state, byId: nextById, goodsLoaded: true, index: action.goods, filteredGoods:action.goods }\n    case RECEIVE_ALL_GOODS:\n      nextById = _.keyBy(action.goods, good => good.id);\n      return {...state, byId: nextById, goodsLoaded: true, index: action.goods, filteredGoods:action.goods }\n    case REMOVE_GOOD:\n      nextById = _.clone(state.byId);\n      delete nextById[action.id]\n      return { ...state, byId: nextById }\n    case REQUEST_GOOD:\n      nextById = { ...state.byId, [action.id]: { goodsLoaded: false } }\n      return {...state, byId: nextById }\n    case RECEIVE_GOOD:\n      nextById = {...state.byId, [action.id]: { ...action.good, goodsLoaded: true }}\n      return {...state, byId: nextById }\n    case SEARCH_GOODS:\n      if (action.sortType === '') {\n        sortedGoods = [...state.index];\n      }\n      else if (action.sortType === \"name\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.name).localeCompare(b.name));\n      }\n      else if (action.sortType === \"provider\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.provider.profile.first_name).localeCompare(b.provider.profile.first_name));\n      }\n      else if (action.sortType === \"description\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.desc).localeCompare(b.desc));\n      }\n      else if (action.sortType === \"category\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.category).localeCompare(b.category));\n      }\n\n      if (action.searchValue === '') {\n        return {index: sortedGoods, filteredGoods: sortedGoods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"name\") {\n        goods = sortedGoods.filter((good) => ((good.name).includes(action.searchValue) ));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"provider\") {\n        goods = sortedGoods.filter((good) => ((good.provider.company).includes(action.searchValue)) || ((good.provider.profile.first_name + \" \" + good.provider.profile.last_name).includes(action.searchValue)));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"description\") {\n        goods = sortedGoods.filter((good) => ((good.desc).includes(action.searchValue) ));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"category\") {\n        goods = sortedGoods.filter((good) => ((good.category).includes(action.searchValue) ));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      break;\n    default:\n      return state\n  }\n}\n","import { RECEIVE_CLIENT_NEEDS, RECEIVE_CLIENT_NEED, REQUEST_NEED, REQUEST_NEEDS, RECEIVE_NEEDS,\n         REMOVE_CLIENT_NEED, RECEIVE_CLIENT_NEED_GROUP, RECEIVE_CLIENT_NEED_INFO } from '../actions/needActions.js';\nimport _ from 'lodash';\n\nexport function needs(state = { byId: {}, needGroups: [], clientId: null, loaded: false, needs: [] }, action) {\n  let nextById, nextNeedGroup, needGroupIndex;\n  switch (action.type) {\n    case REQUEST_NEEDS:\n      return {...state, loaded: false }\n    case RECEIVE_NEEDS:\n      return {...state, needs: action.needs, loaded: true }\n    case RECEIVE_CLIENT_NEEDS:\n      if (action.needs){\n        nextById = _.keyBy(action.needs, need => need.id);\n        return {...state, byId: nextById, needGroups: action.needGroups, loaded: true, clientId: action.clientId}\n      } else {\n        return {...state, needGroups: action.needGroups, loaded: true, clientId: action.clientId}\n      }\n    case RECEIVE_CLIENT_NEED:\n      nextById = {...state.byId, [action.need.id]: { ...action.need, loaded: true }}\n      nextNeedGroup = _.clone(state.needGroups)\n      needGroupIndex = nextNeedGroup.map(needGroup => needGroup.id).indexOf(action.needGroup.id);\n      if (needGroupIndex >= 0) {\n        nextNeedGroup[needGroupIndex] = action.needGroup;\n      }\n      else {\n        nextNeedGroup = [...nextNeedGroup, action.needGroup]\n      }\n      return {...state, needGroups: nextNeedGroup, byId: nextById, clientId: action.clientId}\n    case RECEIVE_CLIENT_NEED_INFO:\n      nextById = {...state.byId, [action.needId]: { ...action.need, loaded: true }}\n      nextNeedGroup = _.clone(state.needGroups)\n      needGroupIndex = nextNeedGroup.map(needGroup => needGroup.id.toString()).indexOf(action.need.need_group_id);\n      if (needGroupIndex >= 0) {\n        const needIndex = nextNeedGroup[needGroupIndex].needs.map(need => need.id).indexOf(action.needId);\n        (nextNeedGroup[needGroupIndex].needs)[needIndex] = action.need;\n        return {...state, needGroups: nextNeedGroup, byId: nextById, clientId: action.clientId}\n      }\n      return {...state, byId: nextById, clientId: action.clientId}\n    case REMOVE_CLIENT_NEED:\n      const need = state.byId[action.needId];\n      nextById = _.clone(state.byId);\n      delete nextById[action.needId]\n\n      nextNeedGroup = _.clone(state.needGroups);\n      needGroupIndex = nextNeedGroup.map(needGroup => (needGroup.id).toString()).indexOf(need.need_group_id);\n      _.remove(nextNeedGroup[needGroupIndex].needs, (need) => {return need.id === action.needId });\n      if (nextNeedGroup[needGroupIndex].needs.length === 0) {\n        nextNeedGroup.splice(needGroupIndex, 1);\n      }\n      return { ...state, byId: nextById, needGroups: nextNeedGroup }\n    case REQUEST_NEED:\n      nextById = {...state.byId, [action.needId]: { ...action.need, loaded: false }}\n      return {...state, byId: nextById }\n    case RECEIVE_CLIENT_NEED_GROUP:\n      nextNeedGroup = _.clone(state.needGroups)\n      needGroupIndex = nextNeedGroup.map(needGroup => needGroup.id).indexOf(action.needGroup.id);\n      nextNeedGroup[needGroupIndex] = action.needGroup;\n      return {...state, needGroups: nextNeedGroup }\n    default:\n      return state\n  }\n}\n","import _ from 'lodash';\n\nimport { RECEIVE_PROVIDER, REQUEST_PROVIDER, REQUEST_PROVIDERS, RECEIVE_PROVIDERS,\n         SEARCH_PROVIDERS, REMOVE_PROVIDER } from '../actions/providerActions.js'\n\n\nexport function providers(state = {index: [], byId: {}, providerLoaded: false, value: '', filteredProviders: []}, action) {\n  let nextIndex, nextById, providers, sortedProviders, providersByType;\n\n  switch (action.type) {\n    case REQUEST_PROVIDERS:\n      return {...state, providerLoaded: false};\n    case RECEIVE_PROVIDERS:\n      const providersById = _.keyBy(action.providers, provider => provider.id);\n      nextById = {...state.byId, providersById}\n      return {...state, byId: nextById, index: action.providers, filteredProviders: action.providers, providerLoaded: true};\n    case REMOVE_PROVIDER:\n      nextIndex = _.clone(state.index);\n      _.remove(nextIndex, (n) => { return n.id === action.id });\n      return {...state, index: nextIndex, filteredProviders: nextIndex}\n    case RECEIVE_PROVIDER:\n      nextById = {...state.byId, [action.id]: { ...action.provider, providerLoaded: true }}\n      if (action.provider.provider) {\n        nextById.providersById = {...nextById.providersById, [action.id]: { ...action.provider.provider}}\n      }\n      console.log(\"ProviderReducer.js - RECEIVE_PROVIDER state\", state);\n      console.log(\"ProviderReducer.js - RECEIVE_PROVIDER nextById\", nextById);\n      return {...state, byId: nextById }\n    case REQUEST_PROVIDER:\n      nextById = { ...state.byId, [action.id]: { providerLoaded: false } }\n      return {...state, byId: nextById }\n    case SEARCH_PROVIDERS:\n      // for search bar\n      console.log(\"ProviderReducer.js  - index.providers: \", state.index.providers);\n      console.log(\"ProviderReducer.js  - action: \", action);\n\n\n      //action.sortType\n      if (action.sortType === '' || action.sortType === \"name\") {\n\n         console.log(\"ProviderReducer.js  - index.providers 2: \", state.index.providers);\n         console.log(\"ProviderReducer.js  - state: \", state);\n\n         sortedProviders = [...state.index].sort((a, b) => (a.profile.first_name ? a.profile.first_name.toLowerCase(): \"\").localeCompare(b.profile.first_name ? b.profile.first_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType ==='type'){\n        sortedProviders = [...state.index].sort((a, b) => (a.type? a.type:\"\").localeCompare(b.type?b.type:\"\"));\n      }\n\n      console.log(\"ProviderReducer.js  - sortedProviders: \", sortedProviders);\n\n      //action.displayType\n      if (action.displayType === 'Individual' || action.displayType === 'Organization'){\n        providersByType = sortedProviders.filter((provider) => ((provider.type).includes(action.displayType)));\n      }\n      else {\n        providersByType = sortedProviders;\n      }\n\n      console.log(\"ProviderReducer.js  -  providersByType: \", providersByType);\n\n      //action.searchValue\n      if (action.searchValue === ''){\n        return {index: providersByType, filteredProviders: providersByType, providerLoaded: true}\n      }\n      else if (action.searchType === 'name') {\n\n        console.log(\"ProviderReducer.js  - state.index: \", state.index);\n        console.log(\"ProviderReducer.js  - providersByType: \", providersByType);\n\n        providers = providersByType.filter((provider) => (((provider.profile.first_name ? provider.profile.first_name.toLowerCase() : \"\")\n         + \" \" +\n         (provider.profile.last_name ? provider.profile.last_name.toLowerCase():\"\")).includes(action.searchValue)));\n        console.log(\"providersByType -  returned data : \", {index: [...state.index], filteredProviders: providers, providerLoaded: true});\n        return {index: [...state.index], filteredProviders: providers, providerLoaded: true}\n      }\n      else if (action.searchType === 'email') {\n        providers = providersByType.filter((providers) => ((providers.email?providers.email.toLowerCase():\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredProviders: providers, providerLoaded: true}\n      }\n      else if (action.searchType === 'phone'){\n        providers = providersByType.filter((providers) => ((providers.primary_phone_number?providers.primary_phone_number:\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredProviders: providers, providerLoaded: true}\n      }\n      break;\n    default:\n      return state\n  }\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport thunkMiddleware from 'redux-thunk'\nimport { rootReducer } from './store/reducers.js'\nimport storage from 'redux-persist/lib/storage' // defaults to localStorage for web\nimport { logout } from './store/actions/authAction.js';\n\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\nconst authMiddleware = store => next => action => {\n  const user = store.getState()['auth']['currentUser']\n  if (action.type !== 'LOGGED_OUT' && user && new Date() > user.expired_at) {\n    store.dispatch(logout(true))\n  }\n  return next(action);\n}\n\nexport default function configureStore(preloadedState) {\n  console.log(\"File: store.js - Function: configureStore  Parameters: preloadedState ->  \", preloadedState) \n  let store = createStore(\n    persistedReducer,\n    preloadedState,\n    applyMiddleware(thunkMiddleware, authMiddleware)\n  )\n  let persistor = persistStore(store)\n  return { store, persistor }\n}\n","/**\n * Use Google Maps in React without custom libraries.\n * Some of the ideas are from\n * https://cuneyt.aliustaoglu.biz/en/using-google-maps-in-react-without-custom-libraries/\n */\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Paper, Typography, Link } from \"@material-ui/core\";\nimport { render } from 'react-dom';\nimport { useHistory } from \"react-router-dom\";\n\nconst Google = window.google || {maps: {}};\nconst {Map, Marker, InfoWindow, Size} = Google.maps;\n\n// Mount a react component into uncontrolled component\nconst createInfoWindow = (map, markerElement, marker, history, idx) => {\n  const infoWindow = new InfoWindow({\n    content: `<div id=\"infoWindow-${idx}\" />`,\n    position: marker.position,\n    pixelOffset: new Size(0, -42),\n  });\n  infoWindow.addListener('domready', e => {\n    render(\n      <ReactInfoWindow history={history} marker={marker}/>,\n      document.getElementById(`infoWindow-${idx}`))\n  });\n  // 'clicked' and 'show' act as an instance variable.\n  let clicked = false, show = false;\n  document.querySelector(`infoWindow-${idx} button`);\n  markerElement.addListener('mouseover', e => {\n    infoWindow.open(map);\n    show = true;\n    markerElement.addListener('mouseout', e => {\n      show && !clicked && infoWindow.close();\n      if (show) show = false;\n    });\n    markerElement.addListener('click', e => {\n      clicked = true;\n      infoWindow.open(map);\n    });\n    window.google.maps.event.addListener(infoWindow, 'closeclick', e => {\n      clicked = false;\n    });\n  });\n  return infoWindow;\n};\n\nfunction ReactInfoWindow({marker, history}) {\n  const {title, link, content} = marker;\n  return (\n    <>\n      <Link style={{cursor: 'pointer'}} onClick={() => link ? history.push(link) : null}>\n        <Typography>\n          {title}\n        </Typography>\n      </Link>\n      <Typography color=\"textSecondary\">\n        {content}\n      </Typography>\n    </>\n  );\n}\n\nlet GoogleMap;\n\n// Export empty div if no network to load google maps.\nif (Map) {\n  // Google map in each pages, native Google API implementation\n  // (without any react wrapper, library)\n  GoogleMap = function (props) {\n    const history = useHistory();\n    const defaultCenter = useMemo(() => ({lat: 43.6870, lng: -79.4132}), []);\n    const {\n      zoom = 11,\n      center = defaultCenter, // Toronto\n      markers = [],\n    } = props;\n    const [map, setMap] = useState(null);\n\n    useEffect(() => {\n      setMap(new Map(document.getElementById('map'), {\n        center: center,\n        zoom: zoom\n      }));\n    }, [zoom, center]);\n\n    useEffect(() => {\n      for (let i = 0; i < markers.length; i++) {\n        const marker = markers[i];\n        const currMarker = new Marker({\n          position: marker.position,\n          map: map,\n          title: marker.title,\n        });\n        // Info window is opened when mouse over the marker.\n        // It also stays open after the marker is clicked.\n        createInfoWindow(map, currMarker, marker, history, i);\n      }\n    }, [markers, map, history]);\n\n    return useMemo(() =>\n        <Paper elevation={5} style={{width: '100%', height: '40vh', marginTop: 5}} id=\"map\"/>\n      , []);\n  }\n} else {\n  GoogleMap = function () {\n    console.info('Google maps javascript is not loaded. Are you offline?');\n    return <Paper elevation={5} style={{width: '100%', height: '40vh', marginTop: 5}}/>\n  }\n}\n\nexport default GoogleMap;\n","import React from 'react';\nimport { InputBase, Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core\";\n\nexport default function CSVUploadModal({show, onHide, submit}) {\n  return (\n    <Dialog\n      open={show}\n      onClose={onHide}\n    >\n      <DialogTitle id=\"form-dialog-title\">Upload CSV</DialogTitle>\n      <DialogContent>\n        <InputBase type=\"file\"/>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={submit}>Submit</Button>\n        <Button onClick={onHide}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport { TextField, Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core\";\n\nexport default function DeleteModal({show, onHide, title, objectId, ...props}) { // cannot use keyword \"delete\"\n  const [form, setForm] = useState({reason: ''});\n\n  return (\n    <Dialog\n      open={show}\n      onClose={onHide}\n      fullWidth\n    >\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <TextField variant=\"standard\" value={form.reason} label=\"Reason\"\n                   onChange={e => setForm({reason: e.target.value})} fullWidth/>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"secondary\" onClick={() => props.delete(objectId, form)}>Confirm</Button>\n        <Button onClick={onHide}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { IconButton, Menu, MenuItem, ListItemIcon, Typography } from \"@material-ui/core\";\nimport { MoreVert as MoreVertIcon, Edit, Delete, OpenInBrowser } from '@material-ui/icons';\n\nconst ITEM_HEIGHT = 48;\n\nexport default function DropdownMenu({urlPrefix, objectId, handleDelete, hideViewOption}) {\n  const history = useHistory();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLink = link => () => {\n    history.push(link);\n  };\n\n  return (\n    <div>\n      <IconButton\n        onClick={handleClick}\n        size=\"small\"\n      >\n        <MoreVertIcon/>\n      </IconButton>\n      <Menu\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n        PaperProps={{\n          style: {\n            maxHeight: ITEM_HEIGHT * 4.5,\n            width: 150,\n          },\n        }}\n      >\n        {!hideViewOption &&\n        <MenuItem onClick={handleLink(`/${urlPrefix}/${objectId}`)}>\n          <ListItemIcon>\n            <OpenInBrowser fontSize=\"small\" color=\"primary\"/>\n          </ListItemIcon>\n          <Typography variant=\"inherit\">View</Typography>\n\n        </MenuItem>\n        }\n\n        <MenuItem onClick={handleLink(`/${urlPrefix}/${objectId}/edit`)}>\n          <ListItemIcon>\n            <Edit fontSize=\"small\" color=\"primary\"/>\n          </ListItemIcon>\n          Edit\n        </MenuItem>\n\n        <MenuItem onClick={() => {\n          handleClose();\n          handleDelete(objectId);\n        }}>\n          <ListItemIcon>\n            <Delete fontSize=\"small\" color=\"secondary\"/>\n          </ListItemIcon>\n          Delete\n        </MenuItem>\n\n      </Menu>\n    </div>\n  );\n}\n","import { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { ACTION_ERROR } from \"../../store/defaults\";\nimport { CSVUploadModal, CustomToolbar, DeleteModal, DropdownMenu, GoogleMap, Loading, DataTable } from \"./index\";\nimport { Container, Fade } from \"@material-ui/core\";\n\n/**\n * Generate markers on google map.\n * @function GenerateMarkers\n * @param data: Array\n * @param pageNumber: Number\n * @param rowsPerPage: Number\n */\n\n/**\n * A generic page component for clients, services, goods, providers.\n * @param props {{fetchData, deleteItem, generateMarkers: GenerateMarkers, tableOptions?: {},\n * type: (\"clients\", \"services\", \"goods\", \"providers\"), nameFormatter, columnsWithoutOptions}}\n */\nexport default function GenericPage(props) {\n  const {\n    fetchData, deleteItem, generateMarkers, type,\n    nameFormatter, columnsWithoutOptions\n  } = props;\n  const title = type.charAt(0).toUpperCase() + type.slice(1);\n\n  // redux hooks\n  const dispatch = useDispatch();\n\n  // react hooks\n  const history = useHistory();\n  const [state, setState] = useState({\n    showUploadDialog: false,\n    showDeleteDialog: false,\n    deleteId: null,\n    deleteDialogTitle: '',\n    data: [], // providers\n    pageNumber: 1,\n    rowsPerPage: 10,\n    loading: true,\n  });\n\n  // useEffect with empty dependencies is something like componentWillMount\n  useEffect(() => {\n    dispatch(fetchData()).then(data => setState(state => ({...state, data, loading: false})))\n  }, [dispatch, fetchData]);\n\n  const hideDialog = () => {\n    setState(state => ({\n      ...state,\n      showUploadDialog: false,\n      showDeleteDialog: false,\n    }));\n  };\n\n  const handleDelete = useCallback(async (id, form) => {\n    const status = await dispatch(deleteItem(id, form));\n    if (status === ACTION_ERROR) {\n      // do something\n    } else {\n      hideDialog();\n      setState(state => ({\n        ...state,\n        data: state.data.filter(item => item.id !== state.deleteId)\n      }));\n    }\n  }, [dispatch, deleteItem]);\n\n  const showDeleteDialog = useCallback((idx) => {\n    const item = state.data[idx];\n    setState(state => ({\n      ...state,\n      showDeleteDialog: true,\n      deleteId: item.id,\n      deleteDialogTitle: `Delete ${title} ` + nameFormatter(item),\n    }));\n  }, [state.data, nameFormatter, title]);\n\n  // TODO: implement upload CSV\n  const handleUpload = file => {\n\n  };\n\n  const columns = useMemo(() => {\n    return [\n      ...columnsWithoutOptions,\n      {\n        label: ' ',\n        body: ({id}) => (\n          <DropdownMenu urlPrefix={type} objectId={id} handleDelete={showDeleteDialog}/>\n        )\n      },\n    ]\n  }, [showDeleteDialog, columnsWithoutOptions, type]);\n\n  const tableOptions = {\n    customToolbar:\n      <CustomToolbar\n        type={type}\n        handleAdd={() => history.push(`/${type}/new`)}\n        handleUpload={() => setState(state => ({...state, showUploadDialog: true}))}\n      />,\n    onDelete: async (ids) => {\n      // TODO: Lester 8/30/2021\n      showDeleteDialog(ids);\n      return false;\n    },\n\n    // These listeners are required for displaying pin on Google Map\n    onChangePage: pageNumber => setState(state => ({...state, pageNumber})),\n    onChangeRowsPerPage: rowsPerPage => setState(state => ({...state, rowsPerPage})),\n    ...props.tableOptions,\n  };\n\n  // This also filters out providers without lat / lng.\n  const markers = useMemo(() => generateMarkers(state.data, state.pageNumber, state.rowsPerPage),\n    [generateMarkers, state.data, state.pageNumber, state.rowsPerPage]);\n\n  if (state.loading)\n    return <Loading message={`Loading ${title}...`}/>;\n\n  return (\n    <Fade in>\n      <Container>\n        <DataTable\n          columns={columns}\n          data={state.data}\n          title={title}\n          {...tableOptions}\n        />\n\n        <CSVUploadModal\n          show={state.showUploadDialog}\n          onHide={hideDialog}\n          submit={handleUpload}\n        />\n        <DeleteModal\n          contentType=\"Provider\"\n          objectId={state.deleteId}\n          title={state.deleteDialogTitle}\n          show={state.showDeleteDialog}\n          onHide={hideDialog}\n          delete={handleDelete}\n        />\n        <GoogleMap markers={markers}/>\n      </Container>\n    </Fade>\n  )\n}\n","import React from 'react';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Stepper, Step, StepButton, Button, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  buttons: {\n    width: '80%',\n    margin: 'auto',\n    paddingTop: 20,\n    paddingBottom: 40,\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  backButton: {\n    marginRight: theme.spacing(1),\n  },\n  alert: {\n    width: '80%',\n    margin: 'auto',\n  },\n  title: {\n    color: '#4b4b4b',\n    width: '80%',\n    margin: 'auto',\n  }\n}));\n\nexport default function FormStepper({stepNames, handleFinish, getStepContent, error, title}) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n\n  const handleStep = step => () => {\n    setActiveStep(step);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  const handleNext = () => {\n    if (activeStep === stepNames.length - 1) {\n      handleFinish();\n      return;\n    }\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  return (\n    <div>\n      <Stepper alternativeLabel nonLinear activeStep={activeStep}>\n        {stepNames.map((label, index) => (\n          <Step key={label}>\n            <StepButton\n              onClick={handleStep(index)}\n            >\n              {label}\n            </StepButton>\n          </Step>\n        ))}\n      </Stepper>\n      <div>\n        {title && <Typography color=\"textSecondary\" variant=\"h6\" className={classes.title}>\n          {title}\n        </Typography>}\n        {error && error.map((err, index) =>\n          <Alert key={index} className={classes.alert} severity=\"error\">{err}</Alert>)}\n        {getStepContent(activeStep)}\n        <div className={classes.buttons}>\n          <Button\n            disabled={activeStep === 0}\n            onClick={handleBack}\n            className={classes.backButton}\n          >\n            Back\n          </Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleNext}>\n            {activeStep === stepNames.length - 1 ? 'Finish' : 'Next'}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Paper, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: 16,\n  },\n  paper: {\n    display: 'inline-block',\n    position: 'relative',\n    paddingLeft: 28,\n    paddingBottom: 20,\n    minWidth: 380,\n  }\n}));\n\nexport default function ({label, children}) {\n  const classes = useStyles();\n  return (\n    <div className={label && classes.root}>\n      {label && <Typography color=\"textSecondary\" variant=\"body1\" gutterBottom>\n        {label}\n      </Typography>}\n      <Paper variant=\"outlined\" className={classes.paper}>\n        {children}\n      </Paper>\n    </div>\n  )\n}\n","import React, { useCallback, useState } from 'react';\nimport AdapterDateFns from '@material-ui/lab/AdapterDateFns';\nimport { format, parse } from 'date-fns';\nimport { TextField } from '@material-ui/core'\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport {\n  LocalizationProvider,\n  TimePicker,\n  DatePicker,\n} from '@material-ui/lab';\n\nexport const dateFormat = 'yyyy-MM-dd';\n\nconst useStyles = makeStyles(theme => ({\n  textField: {\n    // margin: theme.spacing(1),\n    minWidth: 350,\n  },\n  formControl: {\n    position: 'relative',\n    top: 16,\n  }\n}));\n\nexport default function GeneralField({type, onChange, ...props}) {\n  const classes = useStyles();\n  // duplicate the state, the drawback is much smaller than re-render all the form.\n  const [value, setValue] = useState(() => {\n    if (type === 'date') {\n      if (props.value)\n        return parse(props.value, dateFormat, new Date());\n      else\n        return null;\n    }\n    return props.value || '';\n  });\n\n  const handleChange = useCallback(e => {\n    const val = e.target.value;\n    setValue(val);\n    onChange({target: {value: type === 'date' ? format(val, dateFormat) : val}});\n  }, [onChange, type]);\n\n  const onChangeDate = date => {\n    setValue(date);\n    try {\n      onChange({target: {value: format(date, dateFormat)}})\n    } catch (e) {\n    }\n  };\n\n  if (type === 'date')\n    return (\n      <div>\n        <LocalizationProvider dateAdapter={AdapterDateFns}>\n          <DatePicker\n            value={value}\n            inputFormat=\"yyyy-MM-dd\"\n            onChange={onChangeDate}\n            renderInput={(params) =>\n              <TextField {...params}\n                         className={classes.textField}\n                         margin=\"normal\"/>\n            }\n            {...props}\n          />\n        </LocalizationProvider>\n      </div>\n    );\n  else if (type === 'time')\n    return (\n      <div>\n        <LocalizationProvider dateAdapter={AdapterDateFns}>\n          <TimePicker\n            value={value}\n            onChange={time => handleChange({target: {value: time}})}\n            renderInput={(params) =>\n              <TextField {...params}\n                         className={classes.textField}\n                         margin=\"normal\"/>\n            }\n            {...props}\n          />\n        </LocalizationProvider>\n      </div>);\n  else\n    return (\n      <div>\n        <TextField\n          InputLabelProps={{classes: {formControl: classes.formControl}}}\n          className={classes.textField}\n          // margin=\"dense\"\n          type={type}\n          {...props}\n          onChange={handleChange}\n          value={value}\n        />\n      </div>\n    );\n}\n","import GeneralField from \"../components/shared/fields/GeneralField\";\n\nexport const UN_SET = 'UN_SET';\nexport const REQUIRED_HELPER_TEXT = 'This field is required';\n\nexport const defaultField = {\n  label: '',\n  type: 'text',\n  component: GeneralField,\n  validator: null,\n  required: false,\n};","import React, { useCallback, useEffect, useState } from 'react';\nimport { FormControl, InputLabel, Select, MenuItem, FormHelperText } from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nimport { UN_SET } from '../../../constants';\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: '16px 0 0',\n    minWidth: 350,\n  },\n}));\n\n/**\n *\n * @param label\n * @param InputLabelProps\n * @param className\n * @param options\n * @param noDefaultStyle\n * @param noEmpty\n * @param controlled {boolean=false} - Controlled by the parent component.\n *                                     Set it to true if you dynamically update options\n * @param defaultOptionTitle\n * @param onChange\n * @param formControlProps\n * @param helperText\n * @returns {*}\n * @constructor\n */\nexport default function SelectField({\n                                      label, InputLabelProps, className, options, noDefaultStyle, noEmpty, controlled,\n                                      defaultOptionTitle = 'Not Set', onChange, formControlProps, helperText, ...props\n                                    }) {\n  const classes = useStyles();\n  const [value, setValue] = useState(noEmpty ? '' : UN_SET);\n  const handleChange = useCallback(e => {\n    const val = e.target.value;\n    setValue(val);\n    onChange({target: {value: val === UN_SET ? undefined : val}});\n  }, [onChange]);\n\n  useEffect(() => {\n    setValue(props.value === undefined ? UN_SET : props.value);\n  }, [props.value]);\n\n  return (\n    <div>\n      <FormControl className={(noDefaultStyle || className) ? className : classes.formControl}\n                   error={props.error}\n                   required={props.required}\n                   {...formControlProps}>\n        {label && <InputLabel {...InputLabelProps}>{label}</InputLabel>}\n        <Select\n          margin=\"none\"\n          {...props}\n          value={controlled ? props.value : value}\n          onChange={controlled ? onChange : handleChange}\n        >\n          {!noEmpty && <MenuItem key=\"key0\" value={UN_SET}>{defaultOptionTitle}</MenuItem>}\n          {Array.isArray(options)\n            ? options.map(option => <MenuItem key={option} value={option}>{option}</MenuItem>)\n            : Object.entries(options).map(([key, value]) => <MenuItem key={key} value={key}>{value}</MenuItem>)}\n        </Select>\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </div>\n  );\n}\n","import React from 'react';\nimport GeneralField from './fields/GeneralField';\nimport SelectField from './fields/SelectField';\nimport { provinceOptions } from '../../store/defaults';\n\nexport default function LocationFieldGroup({address, required, errMsg = {}}) {\n  const handleChange = name => e => address[name] = e.target.value;\n  return (\n    <div>\n      <GeneralField\n        label=\"Apt. #\"\n        type=\"text\"\n        value={address.apt_number}\n        onChange={handleChange('apt_number')}\n        error={!!errMsg['apt_number']}\n        helperText={errMsg['apt_number']}\n      />\n      <GeneralField\n        label=\"Street Address\"\n        type=\"text\"\n        value={address.street_address}\n        onChange={handleChange('street_address')}\n        required={required}\n        error={!!errMsg['street_address']}\n        helperText={errMsg['street_address']}\n      />\n      <GeneralField\n        label=\"City\"\n        type=\"text\"\n        value={address.city}\n        onChange={handleChange('city')}\n        required={required}\n        error={!!errMsg['city']}\n        helperText={errMsg['city']}\n      />\n      <SelectField\n        label=\"Province\"\n        value={address.province}\n        options={provinceOptions}\n        onChange={handleChange('province')}\n        required={required}\n        error={!!errMsg['province']}\n        helperText={errMsg['province']}\n      />\n      <GeneralField\n        label=\"Postal Code\"\n        type=\"text\"\n        value={address.postal_code}\n        onChange={handleChange('postal_code')}\n        required={required}\n        error={!!errMsg['postal_code']}\n        helperText={errMsg['postal_code']}\n      />\n    </div>\n  );\n}\n","import _ from 'lodash';\nimport React from 'react';\n\nexport const defaultTimeSlot = {'start_time': '', 'end_time': ''};\nexport const defaultOperationHour = {\n  'Monday': [{...defaultTimeSlot}],\n  'Tuesday': [{...defaultTimeSlot}],\n  'Wednesday': [{...defaultTimeSlot}],\n  'Thursday': [{...defaultTimeSlot}],\n  'Friday': [{...defaultTimeSlot}],\n  'Saturday': [{...defaultTimeSlot}],\n  'Sunday': [{...defaultTimeSlot}],\n};\n\nlet mapping = {};\nfor (let hour = 1; hour <= 12; hour++) {\n  const hourStringam = (hour / 10 < 1) ? '0' + hour : hour;\n  for (let minutes = 0; minutes <= 45; minutes += 30) {\n    const minuteString = (minutes === 0) ? '00' : minutes;\n    const timeSlot = hourStringam + ':' + minuteString\n    mapping[hour * 100 + minutes] = timeSlot + ' AM'\n  }\n}\n\nfor (let hour = 1; hour <= 12; hour++) {\n  for (let minutes = 0; minutes <= 45; minutes += 30) {\n    const hourStringpm = (hour / 10 < 1) ? '0' + hour : hour;\n    const minuteString = (minutes === 0) ? '00' : minutes;\n    const timeSlot = hourStringpm + ':' + minuteString;\n    mapping[(hour + 12) * 100 + minutes] = timeSlot + ' PM'\n  }\n}\n\nexport const operationHourMapping = mapping;\n\nexport function operationHourListToObject(operation_hour_list) {\n  let operation_hours = {}\n  _.each(operation_hour_list, operation_hour => {\n    const weekday = operation_hour['week_day']\n    if (!operation_hours[weekday]) {\n      operation_hours[weekday] = []\n    }\n    operation_hours[weekday].push({\n      start_time: operation_hour['start_time'],\n      end_time: operation_hour['end_time']\n    })\n  })\n  return operation_hours\n}\n\nexport function operationHourObjectToList(operation_hour_obj) {\n  let operation_hours = []\n  _.each(operation_hour_obj, (times, day) => {\n    _.each(times, time => {\n      operation_hours.push({\n        week_day: day,\n        start_time: time.start_time,\n        end_time: time.end_time\n      })\n    })\n  })\n  return operation_hours\n}\n\nexport function OperationHourTable({operationHourObj}) {\n  return (\n    <table className=\"operation-hour-table\">\n      <tbody>\n      {_.map(operationHourObj, (times, day) => {\n        return (\n          <tr key={day}>\n            <td>{day}</td>\n            <td>\n              {_.map(times, (time, _) => {\n                return (\n                  <div key={day + time.start_time}>\n                    {`${operationHourMapping[time.start_time]} -\n                        ${operationHourMapping[time.end_time]}`}\n                  </div>\n                )\n              })}\n            </td>\n          </tr>\n        )\n      })}\n      </tbody>\n    </table>\n  )\n}\n","export const titleCase = text => {\n  text = text.replace(/(^\\w|_\\w)/g, m => {\n    return m.toUpperCase().replace('_', ' ')\n  });\n  return text.replace('In', 'in').replace('Of', 'of');\n};\n\n/**\n * @param data {[{condition_clauses: [{field_name, clauses: [{left_operand, right_operand, operator}]}]}]}\n **/\nexport const transformToFrontendType = data => {\n  const val = [];\n\n  // return empty array when create a new service\n  if (!data) return val;\n\n  for (const {condition_clauses} of data) {\n    const condition = [];\n    val.push(condition);\n    for (const {field_name, clauses} of condition_clauses) {\n      for (const {left_operand, right_operand, operator} of clauses) {\n        condition.push([left_operand, operator, right_operand]);\n      }\n    }\n  }\n  return val;\n};\n\n/**\n * @param data {[[]]}\n */\nexport const transformToBackendType = data => {\n  const val = [];\n  for (const condition of data) {\n    const conditionClauses = [];\n    val.push({condition_clauses: conditionClauses});\n\n    for (const [left_operand, operator, right_operand] of condition) {\n      // search for existing field_name\n      const idx = conditionClauses.findIndex(conditionClause => conditionClause.field_name === left_operand);\n      if (idx !== -1) {\n        conditionClauses[idx].clauses.push({left_operand, right_operand, operator});\n      } else {\n        conditionClauses.push({\n          field_name: left_operand,\n          clauses: [{left_operand, right_operand, operator}]\n        })\n      }\n    }\n  }\n  return val;\n};\n\n/**\n *\n * @param string {string}\n * @returns {*}\n */\nexport function escapeString(string) {\n  return '\"' + string.replace(/[\\\\\"]/g, '\\\\$&') + '\"'; // $& means the whole matched string\n}\n\n/**\n *\n * @param string {string}\n * @returns {*}\n */\nexport function unescapeString(string) {\n  return string.slice(1, -1).replace(/\\\\([\\\\\"])/g, '$1');\n}\n\nexport function escapeList(list) {\n  return JSON.stringify(list);\n}\n\nexport function unescapeList(string) {\n  try {\n    const array = JSON.parse(string);\n    return Array.isArray(array) ? array : [];\n  } catch (e) {\n    return [];\n  }\n}\n","import {titleCase} from './formulaHelpers';\nexport {titleCase}\n/**\n * Flip object key value pairs\n * @param obj\n * @returns {{}}\n */\nexport const objectFlip = (obj) => {\n  const ret = {};\n  Object.keys(obj).forEach(key => {\n    ret[obj[key]] = key;\n  });\n  return ret;\n};\n\n/**\n * Recursively assign obj to target.\n * Similar to Object.assign(obj1, obj2), or {...obj1, ...obj2} but also assign nested objects.\n * @param target\n * @param obj\n * @returns {*}\n */\nexport const recursiveAssign = (target, obj) => {\n  Object.entries(obj).forEach(([key, value]) => {\n    if (typeof value === 'object' && value != null && target[key])\n      return recursiveAssign(target[key], value);\n    else if (value != null)\n      target[key] = value;\n  });\n  return target;\n};\n\n/**\n * return true if the field is empty\n * @param field\n * @returns {boolean}\n */\n\nexport function isFieldEmpty(field) {\n  if (field == null) {\n    return true;\n  } else {\n    return field.length === 0;\n  }\n}\n\n/**\n * return true if the field availability is empty\n * @param availability\n * @returns {boolean}\n */\n\nexport function isAvailabilityEmpty(availability) {\n  if (availability == null) {\n    return true;\n  } else {\n    for (const day of Object.keys(availability)) {\n      for (const time_slot of availability[day]) {\n        if (time_slot['start_time'].length > 0 && time_slot['end_time'].length > 0) {\n          //time slot is filled in\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n}\n\n/**\n * Verify the address fields and set the given result.\n * @param location {{apt_number, }}\n * @param result\n */\nexport function verifyAddressField(location, result) {\n  for (const [fieldName, value] of Object.entries(location)) {\n    // apartment number is not required\n    if (fieldName === 'apt_number')\n      continue;\n    if (isFieldEmpty(value))\n      result[fieldName] = 'This field is required'\n  }\n}\n\n/**\n * Verify the other address fields and set the corresponding errors if there are any.\n * @param location []\n * @param result\n */\nexport function verifyOtherAddressesFields(location, result) {\n  let i = 0;\n  for (const address of location) {\n    result[i] = {};\n    verifyAddressField(address, result[i]);\n    if (Object.entries(result[i]).length === 0) {\n      delete result[i];\n    }\n    i++;\n  }\n}\n\n/**\n * Validate postal code in parentField, put error message in errsContainer if there is one.\n * @param field\n * @param errsContainer\n * @param parentField\n */\nexport function validateAddressPostalCode(field, errsContainer, parentField) {\n  if (field) {\n    const postal_code_regex = /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/;\n    const is_postal_code_valid = postal_code_regex.test(field);\n    if (!is_postal_code_valid) {\n      errsContainer[parentField] = {\n        ...errsContainer[parentField],\n        'postal_code': \"Invalid postal code! They are in the format A1A 1A1, \" +\n          \"where A is a letter and 1 is a digit\"\n      };\n    }\n  }\n}\n\nexport function verifyEmail(field, fieldName, errsContainer){\n  const email_regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  if (!email_regex.test(field)) {\n    errsContainer[fieldName] = \"Invalid email! \".concat(\"They are in the format of jsmith@example.com\");\n  }\n}\n\nexport function verifyPhoneNumber(field, fieldName, errsContainer){\n  const phone_number_regex = /^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/;\n  if (field && !phone_number_regex.test(field)){\n    errsContainer[fieldName] = \"Invalid phone number! They are in the format of NPA-NXX-XXXX \".concat(\n      \"where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number\"\n    )\n  }\n}\nexport function validateContactFormat(profile, errsContainer) {\n  // Verify email\n  if (profile.email) {\n    verifyEmail(profile.email,'email', errsContainer)\n  }\n  // Verify Phone number\n  if (profile.primary_phone_number || profile.alt_phone_number) {\n    verifyPhoneNumber(profile.primary_phone_number, 'primary_phone_number', errsContainer);\n    verifyPhoneNumber(profile.alt_phone_number, 'alt_phone_number', errsContainer);\n  }\n}\n\n/**\n * Verify the family fields and set the corresponding errors if there are any.\n * @param families []\n * @param result\n */\nexport function verifyFamilyFields(families, result) {\n  let i = 0;\n  for (const family of families) {\n    result[i] = {};\n    if (isFieldEmpty(family['relationship'])) {\n      result[i]['relationship'] = \"This field is required\";\n    }\n    for (const [field, value] of Object.entries(family['person'])) {\n      if (isFieldEmpty(value)) {\n        result[i][field] = \"This field is required\";\n      }\n    }\n    if (Object.entries(result[i]).length === 0) {\n      delete result[i];\n    }\n    i++;\n  }\n}\n\nconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nconst phoneNumberRegex = /^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/;\nconst passwordRegex = /^.*(?=.{8,})((?=.*[!@#$%^&*()\\-_=+{};:,<.>]){1})(?=.*\\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/;\nconst postalCodeRegex = /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/;\n\nconst EMAIL_ERR_MSG = \"Invalid email! They are in the format of jsmith@example.com\";\nconst PHONE_ERR_MSH = \"Invalid phone number! They are in the format of NPA-NXX-XXXX \" +\n  \"where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number\";\nconst PASSWORD_ERR_MSG = \"Please enter a secure and strong password\";\nconst POSTAL_CODE_ERR_MSG = \"Invalid postal code! They are in the format A1A 1A1, \" +\n  \"where A is a letter and 1 is a digit\";\n\nexport const Validator = {\n  /**\n   * @param email\n   * @returns {string|void} Return string iff fails. Otherwise return undefined.\n   */\n  email: email => {\n    if (!emailRegex.test(email)) {\n      return EMAIL_ERR_MSG;\n    }\n  },\n\n  phone: phone => {\n    if (!phoneNumberRegex.test(phone))\n      return PHONE_ERR_MSH;\n  },\n\n  password: password => {\n    if (!passwordRegex.test(password))\n      return PASSWORD_ERR_MSG;\n  },\n\n  postalCode: postalCode => {\n    if (!postalCodeRegex.test(postalCode))\n    return POSTAL_CODE_ERR_MSG;\n  }\n};\n","import { genderOptions } from '../store/defaults.js';\nimport { objectFlip } from '../helpers';\n\n// const providerTypeOptions = ['Individual', 'Organization']\n// const IndividualProviderOptions = ['Volunteer', 'Goods Donor', 'Professional Service Provider']\nexport const providerFormTypes = {\n  'organization': 'Organization',\n  'volunteer': 'Volunteer',\n  'goods_donor': 'Goods Donor',\n  'professional_service_provider': 'Professional Service Provider',\n};\n\nexport const allForms = {\n  client: 'Client',\n  ...providerFormTypes\n};\n\nexport const providerCategoryValue2Key = objectFlip(providerFormTypes);\n// const phoneTypes = ['Home', 'Cell', 'Work']\nconst providerStatus = ['External', 'Internal', 'Home Agency']\nconst commitmentOptions = ['Short term', 'Six months', 'One year']\n\nexport const providerFields = {\n  alt_phone_number: {component: 'GeneralField', type: 'tel', label: 'Alternative phone number'},\n  availability: {label: 'Availability'},\n  commitment: {component: 'SelectField', label: 'Commitment length', options: commitmentOptions},\n  company: {component: 'GeneralField', type: 'text', label: 'Company/Organization Name'},\n  email: {component: 'GeneralField', type: 'email', label: 'Email'},\n  first_name: {component: 'GeneralField', type: 'text', label: 'First Name'},\n  gender: {component: 'SelectField', label: 'Gender', options: genderOptions},\n  languages: {component: 'MultiSelectField', label: 'Languages'},\n  last_name: {component: 'GeneralField', type: 'text', label: 'Last Name'},\n  main_address: {label: 'Address'},\n  notes: {component: 'GeneralField', type: 'text', label: 'Additional notes '},\n  other_addresses: {label: 'Other Addresses'},\n  own_car: {component: 'RadioField', label: 'Own a car?', options: {'Yes': true, 'No': false}},\n  primary_contact: {label: 'Primary Contact'},\n  primary_phone_number: {component: 'GeneralField', type: 'tel', label: 'Primary phone number'},\n  reference1_email: {component: 'GeneralField', type: 'text', label: 'Reference 1 Email'},\n  reference1_name: {component: 'GeneralField', type: 'text', label: 'Reference 1 Name'},\n  reference1_phone: {component: 'GeneralField', type: 'text', label: 'Reference 1 phone'},\n  reference2_email: {component: 'GeneralField', type: 'text', label: 'Reference 2 Email'},\n  reference2_name: {component: 'GeneralField', type: 'text', label: 'Reference 2 Name'},\n  reference2_phone: {component: 'GeneralField', type: 'text', label: 'Reference 2 phone'},\n  referrer: {component: 'GeneralField', type: 'text', label: 'Referrer'},\n  secondary_contact: {label: 'Secondary Contact'},\n  skills: {component: 'GeneralField', type: 'text', label: 'Skills'},\n  start_date: {component: 'GeneralField', type: 'date', label: 'Start date for availability'},\n  status: {component: 'SelectField', label: 'Status', options: providerStatus},\n  visibility: {\n    component: 'RadioField',\n    label: 'Allow other agencies to see this provider?',\n    options: {'Yes': true, 'No': false}\n  },\n  sponsor: {component: 'GeneralField', type: 'text', label: 'Sponsor'}\n}\n","import { defaultOperationHour, operationHourListToObject } from \"../helpers/operation_hour_helpers\";\nimport { recursiveAssign } from \"../helpers\";\nimport { providerFormTypes } from \"./provider_fields\";\n\nexport const defaultProfileFields = {\n  first_name: '',\n  middle_name: '',\n  last_name: '',\n  preferred_name: '',\n  gender: '',\n  birth_date: null,\n  email: '',\n  primary_phone_number: '',\n  alt_phone_number: '',\n};\n\nexport const defaultContactFields = {\n  first_name: '',\n  last_name: '',\n  email: '',\n  primary_phone_number: '',\n  alt_phone_number: '',\n};\n\nexport const defaultLocationFields = {\n  street_address: '',\n  apt_number: '',\n  city: '',\n  province: '',\n  postal_code: ''\n};\n\nexport const defaultUserFields = {\n  first_name: '',\n  last_name: '',\n  username: '',\n  email: '',\n  is_superuser: false,\n  primary_phone_number: '',\n  alt_phone_number: '',\n  password: ''\n};\n\n/**\n * @typedef SNMClient {{address: {street_address, province, city, apt_number, postal_code},\n * num_of_dependants: string, has_children: boolean, immigration_doc_number: string,\n * country_of_last_residence: string, profile: {primary_phone_number, gender,\n * alt_phone_number, birth_date, last_name, middle_name, first_name, preferred_name,\n * email}, other_languages: Array, income_source: string, country_of_origin: string,\n * completed_education_level: string, landing_date: string, marital_status: string,\n * eligibilities: Array, current_education_level: string, first_language: string,\n * file_id: string, num_of_children: string, pr_number: string, family: {members: Array},\n * arrival_date: string, status_in_canada: string}}\n *\n */\n\n/**\n *\n * @param client\n * @returns SNMClient\n */\nexport const generateClientField = (client) => {\n  const fields = {\n    profile: {...defaultProfileFields},\n    address: {...defaultLocationFields},\n    family: {members: []},\n    marital_status: '',\n    has_children: false,\n    num_of_children: '',\n    country_of_origin: '',\n    country_of_last_residence: '',\n    first_language: '',\n    other_languages: [],\n    pr_number: '',\n    immigration_doc_number: '',\n    landing_date: null, // make sure date and time has default null or new Date()\n    arrival_date: null,\n    status_in_canada: '',\n    income_source: '',\n    current_education_level: '',\n    completed_education_level: '',\n    num_of_dependants: '',\n    file_id: '',\n    ngo_conditions: [],\n  };\n\n  if (client) {\n    return recursiveAssign(fields, client);\n  }\n\n  return fields;\n};\n\nexport const generateProviderFields = (providerType, providerCategory, provider) => {\n  // operationHourListToObject(provider.operation_hours)\n  const fields = {\n    type: providerType,\n    category: providerFormTypes[providerCategory] || '',\n    languages: [],\n    company: '',\n    email: '',\n    primary_phone_number: '',\n    alt_phone_number: '',\n    primary_contact: {profile: {...defaultContactFields}},\n    secondary_contact: {profile: {...defaultContactFields}},\n    main_address: {...defaultLocationFields},\n    other_addresses: [],\n    operation_hours: {...defaultOperationHour},\n    operation_dates: [{start_date: null, end_date: null}],\n    profile: {...defaultProfileFields},\n    referrer: '',\n    own_car: false,\n    skills: '',\n    visibility: false,\n    status: '',\n    notes: '',\n    commitment: '',\n    start_date: '',\n    reference1_name: '',\n    reference1_phone: '',\n    reference1_email: '',\n    reference2_name: '',\n    reference2_phone: '',\n    reference2_email: '',\n    responses: []\n  };\n  if (provider) {\n    const data = {...recursiveAssign(fields, provider)};\n    data.operation_hours = {...defaultOperationHour, ...operationHourListToObject(provider.operation_hours)};\n    // const responses = {};\n    // data.responses.forEach(({}) => {});\n    // data.responses = data\n    console.log(data);\n    return data;\n  }\n  return fields;\n};\n","import React, { useState } from 'react';\nimport { Button, FormLabel } from '@material-ui/core';\nimport { FieldsWrapper } from \"./index\";\nimport LocationFieldGroup from \"./LocationFieldGroup\";\nimport { defaultLocationFields } from \"../../constants/default_fields\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Alert } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: '10px 0',\n  }\n}));\n\nfunction LocationFields({index, location, handleRemove, required, errMsg = {}}) {\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(true);\n  const forceUpdate = () => update(!state);\n\n  const handleChange = name => e => {\n    location[name] = e.target.value;\n  };\n\n  return (\n    <div style={{paddingBottom: 10}}>\n      <FormLabel component=\"legend\">\n        Other address #{index + 1 + '  '}\n        <Button\n          onClick={e => {\n            handleRemove(index);\n            forceUpdate();\n          }}\n          color=\"secondary\"\n        >\n          Remove\n        </Button>\n      </FormLabel>\n      <FieldsWrapper key=\"main_address\">\n        <LocationFieldGroup\n          address={location}\n          handleChange={handleChange}\n          required={required}\n          errMsg={errMsg}\n        />\n      </FieldsWrapper>\n    </div>\n  )\n}\n\nexport default function OtherLocationsFields({otherLocations, clientId, required, errMsg = {}}) {\n  const classes = useStyles();\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(otherLocations);\n  const forceUpdate = () => update(!state);\n\n  const handleAdd = () => {\n    otherLocations.push({...defaultLocationFields});\n    forceUpdate();\n  };\n\n  const handleRemove = (index) => {\n    console.log('remove', index, otherLocations[index])\n    otherLocations.splice(index, 1);\n    forceUpdate();\n  };\n\n  return (\n    <div>\n      {errMsg && typeof errMsg === 'string' &&\n        <Alert severity=\"error\">{errMsg}</Alert>}\n      {otherLocations.map((location, index) => {\n        return (\n          <LocationFields\n            key={index}\n            index={index}\n            location={location}\n            clientId={clientId}\n            handleRemove={handleRemove}\n            required={required}\n            size={otherLocations.length}\n            errMsg = {errMsg[index]}\n          />\n        )\n      })}\n      <Button className={classes.button} onClick={handleAdd} variant=\"outlined\">\n        Add other address\n      </Button>\n\n    </div>\n  );\n}\n","import { Checkbox, TableCell, TableHead, TableRow, TableSortLabel } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport function EnhancedTableHead(props) {\n  const {\n    classes, onSelectAllClick, order, orderBy, numSelected,\n    rowCount, onRequestSort, columns\n  } = props;\n  const createSortHandler = (getFieldValueFn) => (event) => {\n    onRequestSort(event, getFieldValueFn);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\" key={0}>\n          <Checkbox\n            color=\"primary\"\n            indeterminate={numSelected > 0 && numSelected < rowCount}\n            checked={rowCount > 0 && numSelected === rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{\n              'aria-label': 'select all desserts',\n            }}\n          />\n        </TableCell>\n        {columns.map((headCell, idx) => (\n          <TableCell\n            key={idx + 1}\n            style={headCell.style}\n            sortDirection={orderBy === (headCell.sortBy || headCell.body) ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === (headCell.sortBy || headCell.body)}\n              direction={orderBy === (headCell.sortBy || headCell.body) ? order : 'asc'}\n              onClick={createSortHandler(headCell.sortBy || headCell.body)}\n            >\n              {headCell.label}\n              {orderBy === headCell.label ? (\n                <span className={classes.sortSpan}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.func.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n","import { IconButton, lighten, Toolbar, Tooltip, Typography } from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport clsx from \"clsx\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n  },\n  highlight:\n    theme.palette.mode === 'light'\n      ? {\n        color: theme.palette.primary.main,\n        backgroundColor: lighten(theme.palette.primary.light, 0.85),\n      }\n      : {\n        color: theme.palette.text.primary,\n        backgroundColor: theme.palette.secondary.dark,\n      },\n  title: {\n    flex: '1 1 100%',\n  },\n}));\n\nexport const EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const {numSelected, title, onDelete, customToolbar} = props;\n\n  return (\n    <Toolbar\n      className={clsx(classes.root, {\n        [classes.highlight]: numSelected > 0,\n      })}\n    >\n      {numSelected > 0 ? (\n        <Typography\n          className={classes.title}\n          color=\"inherit\"\n          variant=\"subtitle1\"\n          component=\"div\"\n        >\n          {numSelected} selected\n        </Typography>\n      ) : (\n        <Typography\n          className={classes.title}\n          variant=\"h6\"\n          id=\"tableTitle\"\n          component=\"div\"\n        >\n          {title}\n        </Typography>\n      )}\n\n      {numSelected > 0 && (\n        <Tooltip title=\"Delete\">\n          <IconButton aria-label=\"delete\" onClick={onDelete} size=\"large\">\n            <DeleteIcon/>\n          </IconButton>\n        </Tooltip>\n      )}\n\n      <Tooltip title=\"Search\">\n        <IconButton aria-label=\"search list\" size=\"large\">\n          <SearchIcon/>\n        </IconButton>\n      </Tooltip>\n      {customToolbar}\n    </Toolbar>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  onDelete: PropTypes.func,\n};\n","import React from \"react\";\nimport {\n  Checkbox,\n  lighten,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n} from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { visuallyHidden } from \"@material-ui/utils\";\nimport { EnhancedTableHead } from \"./EnhancedTableHead\";\nimport { EnhancedTableToolbar } from \"./EnhancedTableToolbar\";\n\nfunction descendingComparator(a, b, getValue, extraData) {\n  b = getValue(b, extraData) || '';\n  a = getValue(a, extraData) || '';\n  if (b < a) {\n    return -1;\n  }\n  if (b > a) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator(order, orderBy, extraData) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy, extraData)\n    : (a, b) => -descendingComparator(a, b, orderBy, extraData);\n}\n\nfunction stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    width: '100%',\n  },\n  table: {\n    minWidth: 750,\n  },\n  // TODO fix #20379.\n  sortSpan: visuallyHidden,\n  tableRow: {\n    '&.Mui-selected': {\n      backgroundColor: lighten(theme.palette.primary.light, 0.85),\n    },\n    '&.Mui-selected:hover': {\n      backgroundColor: lighten(theme.palette.primary.light, 0.80),\n    }\n  }\n}));\n\nexport function EnhancedTable({data, title, columns, height, ...props}) {\n  const {\n    rowsPerPageOptions = [10, 25, 100],\n    idField = '_id',\n    defaultOrderBy = columns[0].sortBy || columns[0].body,\n    extraData = {},\n    rowStyle,\n    onDelete,\n    onChangePage, onChangeRowsPerPage,\n    customToolbar\n  } = props;\n  const classes = useStyles();\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(() => defaultOrderBy);\n  const [selected, setSelected] = React.useState([]);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(rowsPerPageOptions[0]);\n\n  const handleRequestSort = (event, getFieldValueFn) => {\n    const isAsc = orderBy === getFieldValueFn && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(() => getFieldValueFn);\n  };\n\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      setSelected(data.map(item => item[idField]));\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (event, id) => {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1),\n      );\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n\n    // Invoke listeners\n    onChangePage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    const rowsPerPage = parseInt(event.target.value, 10);\n    setRowsPerPage(rowsPerPage);\n    setPage(0);\n\n    // Invoke listeners\n    onChangePage(0);\n    onChangeRowsPerPage(rowsPerPage)\n  };\n\n  const isSelected = (id) => selected.indexOf(id) !== -1;\n\n  const handleDelete = async () => {\n    // TODO: Show delete progressively.\n    if (onDelete) {\n      await onDelete(selected);\n      for (const id of selected) {\n        data.splice(data.findIndex(item => item._id === id), 1);\n      }\n      setSelected([]);\n    }\n  }\n\n  // Avoid a layout jump when reaching the last page with empty rows.\n  const emptyRows =\n    page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\n\n  return (\n    <Paper elevation={5} className={classes.paper}>\n      <EnhancedTableToolbar title={title} numSelected={selected.length} onDelete={handleDelete}\n                            customToolbar={customToolbar}/>\n      <TableContainer style={{maxHeight: height || 'calc(100vh - 228px)'}}>\n        <Table\n          stickyHeader\n          className={classes.table}\n          size=\"medium\"\n        >\n          <EnhancedTableHead\n            classes={classes}\n            numSelected={selected.length}\n            order={order}\n            orderBy={orderBy}\n            onSelectAllClick={handleSelectAllClick}\n            onRequestSort={handleRequestSort}\n            rowCount={data.length}\n            columns={columns}\n          />\n          <TableBody>\n            {stableSort(data, getComparator(order, orderBy, extraData))\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map((row) => {\n                const id = row[idField];\n                const isItemSelected = isSelected(id);\n                return (\n                  <TableRow\n                    className={classes.tableRow}\n                    hover\n                    role=\"checkbox\"\n                    aria-checked={isItemSelected}\n                    tabIndex={-1}\n                    key={id}\n                    selected={isItemSelected}\n                    style={rowStyle && rowStyle(row)}\n                  >\n                    <TableCell padding=\"checkbox\" key={0}>\n                      <Checkbox\n                        color=\"primary\"\n                        onClick={(event) => handleClick(event, id)}\n                        checked={isItemSelected}\n                      />\n                    </TableCell>\n                    {columns.map((cell, idx) => <TableCell style={cell.style}\n                                                           key={idx + 1}>{cell.body(row, extraData)}</TableCell>)}\n                  </TableRow>\n                );\n              })}\n            {emptyRows > 0 && (\n              <TableRow\n                style={{\n                  height: 53 * emptyRows,\n                }}\n              >\n                <TableCell colSpan={6}/>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={rowsPerPageOptions}\n        component=\"div\"\n        count={data.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Paper>\n  );\n}\n","import React, { useState } from 'react';\nimport { Menu, MenuItem, CircularProgress, Typography, Chip } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Link as DomLink, useHistory } from 'react-router-dom';\nimport { Add as AddIcon, CloudUpload as UploadIcon } from '@material-ui/icons';\nimport GoogleMap from './GoogleMap';\nimport CSVUploadModal from './CSVUploadModal';\nimport DeleteModal from './DeleteModal';\nimport DropdownMenu from './DropdownMenu';\nimport GenericPage from './GenericPage';\nimport FormStepper from './FormStepper';\nimport FieldsWrapper from \"./FieldsWrapper\";\nimport OtherLocationsFields from \"./OtherLocationsFields\";\n\nimport { providerFormTypes } from '../../constants/provider_fields.js'\n\nconst useStyles = makeStyles((theme) => ({\n  link: {\n    color: 'inherit',\n    textDecorationLine: 'none',\n  },\n  linkWithHover: {\n    fontWeight: 500,\n    color: 'inherit',\n    // textDecorationLine: 'none',\n    '&:hover': {\n      textDecorationLine: 'underline',\n      color: '#2f5ac7'\n    }\n  },\n  progress: {\n    margin: theme.spacing(2),\n    marginTop: 50,\n  },\n  chipButton: {\n    paddingLeft: 6,\n    marginLeft: 6,\n  }\n}));\n\nexport function Link({className = '', color, ...props}) {\n  const classes = useStyles();\n  return <DomLink {...props} className={color ? classes.linkWithHover : classes.link + ' ' + className}/>\n}\n\n/**\n * Used by mui-datatables. Add \"add button\" and \"upload by CSV button\"\n * @param onClick\n * @returns {*}\n * @constructor\n */\nexport function CustomToolbar({handleAdd, handleUpload, type}) {\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLink = link => () => {\n    history.push(link);\n  };\n\n  return (\n    <>\n      <Chip onClick={handleUpload}\n            color=\"default\"\n            icon={<UploadIcon/>}\n            label=\"Upload\"\n            variant=\"outlined\"\n            className={classes.chipButton}\n      />\n      <Chip onClick={type === 'providers' ? handleClick : handleAdd}\n            color=\"primary\"\n            icon={<AddIcon/>}\n            label=\"Add\"\n            variant=\"outlined\"\n            className={classes.chipButton}\n      />\n\n      {/*For Providers */}\n      {type === 'providers' &&\n      <Menu\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        {Object.entries(providerFormTypes).map(([value, formType]) =>\n          <MenuItem key={formType} onClick={handleLink(`/providers/${value}/new`)}>\n            {formType}\n          </MenuItem>)\n        }\n      </Menu>\n      }\n    </>\n  );\n}\n\nexport function Loading({message = 'Loading Components...'}) {\n  const classes = useStyles();\n  return (\n    <div style={{textAlign: 'center'}}>\n      <CircularProgress className={classes.progress}/>\n      <Typography variant=\"subtitle2\" color={\"textSecondary\"}>\n        {message}\n      </Typography>\n    </div>\n  );\n}\n\n\nexport {\n  GoogleMap, CSVUploadModal, DeleteModal, DropdownMenu, GenericPage, FormStepper, FieldsWrapper,\n  OtherLocationsFields\n}\nexport {EnhancedTable as DataTable} from './Table';\n","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { AppBar, Toolbar, Typography, Button, Tabs, Tab } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport withStyles from '@material-ui/styles/withStyles';\nimport { Link } from \"../shared\";\n\n// redux\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logout } from '../../store/actions/authAction.js';\n\nconst StyledTabs = withStyles({\n  indicator: {\n    display: 'flex',\n    justifyContent: 'center',\n    backgroundColor: '#ccc',\n    transition: 'none',\n  },\n})(props => <Tabs {...props} />);\n\nconst StyledTab = withStyles(theme => ({\n  root: {\n    textTransform: 'none',\n    fontWeight: theme.typography.fontWeightRegular,\n    fontSize: theme.typography.pxToRem(15),\n    marginRight: theme.spacing(1),\n    minWidth: 60,\n  },\n}))(({to, ...props}) => <Tab {...props}/>);\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    backgroundColor: 'rgb(39, 44, 52)'\n  },\n  title: {\n    paddingRight: 20,\n    whiteSpace: 'pre',\n    color: 'white',\n    textDecorationLine: 'none',\n  },\n  rightButtons: {\n    marginLeft: 'auto',\n    textDecorationLine: 'none',\n    whiteSpace: 'pre'\n  },\n}));\n\nfunction TopNavBar() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {isLoggedin} = useSelector(state => state.auth);\n  const tabNames = ['/clients', '/services', '/goods', '/providers', '/reporting'];\n  const [value, setValue] = useState(\n    tabNames.indexOf(history.location.pathname) !== -1 ? history.location.pathname : false,\n  );\n\n  useEffect(() => {\n    setValue(tabNames.indexOf(history.location.pathname) !== -1 ? history.location.pathname : false);\n  }, [history.location.pathname, tabNames]);\n\n  const tabOnChange = (e, newValue) => {\n    setValue(newValue);\n    history.push(newValue);\n  };\n\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar variant=\"dense\">\n        <Link to={isLoggedin ? \"/dashboard\" : \"/\"} className={classes.title}>\n          <Typography variant=\"h6\">\n            Dashboard\n          </Typography>\n        </Link>\n\n        {isLoggedin ? (\n          <StyledTabs value={value} onChange={tabOnChange} variant=\"scrollable\">\n            <StyledTab label=\"Clients\" value=\"/clients\"/>\n            <StyledTab label=\"Services\" value=\"/services\"/>\n            <StyledTab label=\"Goods\" value=\"/goods\"/>\n            <StyledTab label=\"Providers\" value=\"/providers\"/>\n            <StyledTab label=\"Reporting\" value=\"/reporting\"/>\n          </StyledTabs>\n        ) : null}\n\n        <Button color=\"inherit\" className={classes.rightButtons}\n                onClick={() => isLoggedin ? dispatch(logout()) : history.push('/login')}>\n          {isLoggedin ? 'Log out' : 'Login'}\n        </Button>\n\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default TopNavBar;\n","import React from 'react';\nimport { Typography, Link } from \"@material-ui/core\";\n\nexport default function () {\n  return (\n    <div className=\"footer\">\n      <Typography variant=\"caption\">\n        <Link href=\"http://csse.utoronto.ca/\" target=\"_blank\" style={{color: \"#ababab\"}}>\n          Centre for Social Services Engineering\n        </Link>, University of Toronto\n      </Typography>\n    </div>\n  );\n};\n","import React, { Component } from 'react'\n\nclass Landing extends Component {\n  render() {\n    return(\n      <div className=\"landing\">\n        <div className=\"container\">\n          <div className=\"intro-placeholder\">\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Landing;\n","import React from 'react'\nimport { Typography, Button, Container, Grid } from \"@material-ui/core\";\nimport { Link } from './shared';\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingTop: 80,\n    maxWidth: '500px',\n  },\n  button: {\n    width: 300,\n  },\n}));\n\nfunction Login() {\n  const classes = useStyles();\n  return (\n    <Container className={classes.container}>\n      <Grid container direction=\"column\" spacing={3} alignItems=\"center\">\n        <Grid item>\n          <Typography variant=\"h5\">\n            Log in to your Dashboard\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Link to={`/login-pane`}>\n            <Button variant=\"outlined\" className={classes.button}>\n              Sign in with SNM account\n            </Button>\n          </Link>\n        </Grid>\n        <Grid item>\n          <Link to={`/login-pane`}>\n            <Button color=\"primary\" variant=\"outlined\" className={classes.button}>\n              Facebook\n            </Button>\n          </Link>\n        </Grid>\n        <Grid item>\n          <Link to={`/login-pane`}>\n            <Button color=\"secondary\" variant=\"outlined\" className={classes.button}>\n              Google\n            </Button>\n          </Link>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default Login;\n","import React, { useState } from 'react'\nimport { useHistory } from \"react-router\";\n\nimport { TextField, Container, Paper, Typography, Button, Divider } from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Link } from './shared';\n\nimport { login, LOGIN_SUCCESS } from '../store/actions/authAction';\nimport { useDispatch } from \"react-redux\";\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingTop: 80,\n    maxWidth: '500px'\n  },\n  paper: {\n    padding: 30,\n  },\n  item: {\n    marginTop: 20,\n  },\n  button: {\n    marginTop: 30,\n    marginBottom: 20,\n  },\n  link: {\n    marginTop: 10,\n    color: '#007dff',\n  }\n}));\n\nfunction LoginPane() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [form, setForm] = useState({username: '', password: '', alert: ''});\n\n  const onChange = name => e => {\n    const value = e.target.value;\n    setForm(prev => ({...prev, [name]: value}));\n  };\n\n  const submit = async () => {\n    const {status, message} = await dispatch(login(form));\n    if (status === LOGIN_SUCCESS) {\n      history.push('/dashboard');\n    } else {\n      setForm(prev => ({...prev, alert: message}));\n    }\n  };\n\n  const onKeyPress = event => {\n    if (event.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  return (\n    <Container className={classes.container} onKeyPress={onKeyPress}>\n      <Paper elevation={5} className={classes.paper}>\n        <Typography variant=\"h6\">\n          Sign in\n        </Typography>\n        <TextField\n          fullWidth\n          variant=\"outlined\"\n          label=\"Username\"\n          type=\"text\"\n          value={form.username}\n          onChange={onChange('username')}\n          className={classes.item}\n        />\n        <br/>\n        <TextField\n          fullWidth\n          variant=\"outlined\"\n          label=\"Password\"\n          type=\"password\"\n          value={form.password}\n          onChange={onChange('password')}\n          className={classes.item}\n        />\n        <br/>\n        <Typography variant=\"caption\">\n          <span style={{color: 'red'}}>{form.alert}</span>\n        </Typography>\n        <br/>\n        <Button variant=\"outlined\" color=\"primary\" className={classes.button} onClick={submit}> Log in</Button>\n        <Divider/>\n        <Link to={'/login-pane'}>\n          <Typography variant=\"body2\" className={classes.link}>\n            Don't have an account?\n          </Typography>\n        </Link>\n\n        <Link to={'/login-pane'}>\n          <Typography variant=\"body2\" className={classes.link}>\n            Forget password?\n          </Typography>\n        </Link>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default LoginPane;\n","import React from 'react';\nimport { Link } from './shared'\n\n// redux\nimport { useSelector } from 'react-redux';\n\nimport { Container, Button } from \"@material-ui/core\";\nimport { Edit, Create, People, ViewHeadline as Log, CheckCircleOutline as Criteria} from \"@material-ui/icons\";\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingTop: 80,\n    textAlign: 'center',\n    maxWidth: 600,\n  },\n  button: {\n    width: 400,\n    height: 50,\n    textTransform: 'none',\n    margin: 5,\n  }\n}));\n\nfunction NavButton({to, text, icon}) {\n  const classes = useStyles();\n  return (\n    <Link to={to}>\n      <Button\n        variant=\"outlined\"\n        className={classes.button}\n        startIcon={icon}\n        size=\"large\">\n        {text}\n      </Button>\n    </Link>\n  );\n}\n\nfunction Dashboard() {\n  const classes = useStyles();\n  const {isLoggedin, currentUser, organization} = useSelector(state => state.auth);\n  if (!isLoggedin || !currentUser.is_admin)\n    return <span>\"You don't have the permission to view this page.\"</span>;\n\n  return (\n    <Container className={classes.container}>\n\n      {!organization.id &&\n      <NavButton to={{pathname: '/providers/organization/new', state: {status: 'Home Agency'}}}\n                 text=\"Create organization profile for home agency\" icon={<Create/>}/>}\n\n      {organization.id &&\n      <NavButton to={`/provider/${organization.id}/edit/organization`} icon={<Edit/>}\n                 text=\"Edit organization profile for home agency\"/>}\n\n      <NavButton to={`/users`} icon={<People/>}\n                 text=\"Manage Users\"/>\n\n      <NavButton to={`/admin-logs`} icon={<Log/>}\n                 text=\"Admin Logs\"/>\n\n      <NavButton to={`/eligibility-criteria`} icon={<Criteria/>}\n                 text=\"Manage Eligibility criteria\"/>\n\n      <NavButton to={'/settings/manage-fields'} icon={<Edit/>}\n                 text=\"Manage Client/Provider Fields\"/>\n\n      <NavButton to={'/questions'} icon={<Edit/>}\n                 text=\"Manage Questions\"/>\n\n    </Container>\n  )\n}\n\nexport default Dashboard;\n","export function formatLocation(location) {\n  if (Object.keys(location).length === 1) {\n    return \"Not Provided\"\n  }\n\n  let format_location = ''\n  if (location.apt_number !== undefined){\n    format_location += `${location.apt_number}-`\n  }\n  if (location.street_address !== undefined){\n    format_location += `${location.street_address}, `\n  }\n  if (location.city !== undefined)\n    format_location += `${location.city}, `\n  if (location.province !== undefined)\n    format_location += `${location.province}, `\n  if (location.postal_code !== undefined)\n    format_location += `${location.postal_code}`\n  return format_location\n}\n","export function formatPhoneNumber(number) {\n  try {\n    const codes = number.match(/^(\\d{3})(\\d{3})(\\d{4})$/);\n    return \"(\" + codes[1] + \") \" + codes[2] + \"-\" + codes[3];\n  } catch (e) {\n    return number;\n  }\n}\n","import React from 'react';\n\n// TODO: createClients  (CSV Upload)\nimport { fetchClients, deleteClient } from '../store/actions/clientActions.js'\n\nimport { formatLocation } from '../helpers/location_helpers'\nimport { formatPhoneNumber } from '../helpers/phone_number_helpers'\n\nimport { GenericPage, Link } from \"./shared\";\n\nconst TYPE = 'clients';\n\n// mui-table column configurations\n// TODO: Add custom print function for address\nconst columnsWithoutOptions = [\n  {\n    label: 'First Name',\n    body: ({id, profile}) => {\n      return <Link color to={`/${TYPE}/${id}`}>{profile.first_name}</Link>\n    }\n  },\n  {\n    label: 'Last Name',\n    body: ({profile}) => {\n      return profile.last_name;\n    }\n  },\n  {\n    name: 'profile.primary_phone_number',\n    label: 'Phone Number',\n    body: ({profile}) => {\n      if (profile.primary_phone_number)\n        return formatPhoneNumber(profile.primary_phone_number);\n      return 'Not Provided';\n    },\n  },\n  {\n    label: 'Email',\n    body: ({profile}) => {\n      return profile.email;\n    }\n  },\n  {\n    label: 'Address',\n    body: ({profile}) => {\n      if (profile.address)\n        return formatLocation(profile.address);\n      return 'Not Provided';\n    }\n  },\n];\n\nexport default function Clients() {\n\n  const nameFormatter = (client) => {\n    return client.profile.first_name + ' ' + client.profile.last_name;\n  };\n\n  const generateMarkers = (clients, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    const currPageClients = clients.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage);\n    return currPageClients.map(client => ({\n      position: {lat: Number(client.address.lat), lng: Number(client.address.lng)},\n      title: nameFormatter(client),\n      link: `/${TYPE}/${client.id}`,\n      content: client.address && formatLocation(client.address),\n    })).filter(client => client.position.lat && client.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchClients}\n      deleteItem={deleteClient}\n      generateMarkers={generateMarkers}\n      nameFormatter={nameFormatter}\n      tableOptions={{\n        idField: 'id'\n      }}\n    />\n  )\n}\n","import React, { useState} from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport Button from '@material-ui/core/Button'\nimport Box from '@material-ui/core/Box';\nimport { Link } from '../shared'\nimport { updateClientNeedGroup } from \"../../store/actions/needActions\";\n\n//icons\nimport { Edit, PriorityHigh, Delete, Alarm, ExpandMoreOutlined} from '@material-ui/icons';\n\n//Expansion Panel\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { Grid } from \"@material-ui/core\";\n\n\n\n\n\nexport default function NeedGroupPanel(props) {\n  const {needGroupCategory, needs, needGroupId, status,\n    clientId, handleShow} = props;\n  const dispatch = useDispatch();\n\n\n  const [state, setState] = useState({\n    status: status,\n    hasUrgentNeed: anyUrgentNeed(needs)\n  })\n  const changeNeedGroupCategoryStatus = () => {\n    const need_group = {\n      category: needGroupCategory,\n      status: (state.status === \"Unmet\") ? \"Met\" : \"Unmet\",\n      client_id: clientId,\n      id: needGroupId\n    }\n    setState(state => ({...state, status: need_group.status}))\n    dispatch(updateClientNeedGroup(clientId, need_group.id, need_group));\n\n  }\n\n  const classes = useStyles();\n\n  const needsUnderCat = needs.map(need =>\n      <Paper key={need.id}\n        variant={\"outlined\"}\n        >\n          <Grid container spacing={3} className={classes.innerBox}>\n            <Grid item xs>\n              <Typography color={'primary'}>{need.type}</Typography>\n            </Grid>\n            <Grid item xs>\n            </Grid>\n            {need.is_urgent && (\n              <Grid item xs>\n                <Box display=\"flex\" flexDirection={\"row\"}>\n                  <Alarm className={classes.highPriority}></Alarm>\n                  <Typography className={classes.highPriority}>Urgent</Typography>\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n\n          <Box className={classes.innerBox}>\n            <Link color to={`/needs/${need.id}`}>\n              Find Services/Goods\n            </Link>\n            <p>{need.description}</p>\n          </Box>\n\n          <Box display = 'flex' className={classes.innerBox}>\n            <Box>\n              <Link to={`/needs/${need.id}/edit`}>\n                <Button\n                  startIcon={<Edit/>}>\n                  Edit\n                </Button>\n              </Link>\n            </Box>\n\n            <Box>\n              <Button\n                startIcon={<Delete/>}\n                onClick={() => handleShow(need.id)}\n              >\n                Delete\n              </Button>\n            </Box>\n\n            <Box>\n              <Button\n                color={\"secondary\"}\n                onClick={() => changeNeedGroupCategoryStatus()}>\n                {state.status}\n              </Button>\n            </Box>\n          </Box>\n\n      </Paper>\n  )\n\n  return (\n    <div>\n      <Accordion className={classes.panel}>\n        <AccordionSummary\n          expandIcon={<ExpandMoreOutlined />}\n          aria-controls={needGroupCategory+\"-content\"}\n          id={needGroupCategory+\"-header\"}\n        >\n          <Box display=\"flex\" flexDirection={\"row\"} className={classes.column}>\n            <Typography className={classes.heading}>{needGroupCategory}</Typography>\n            {state.hasUrgentNeed && <PriorityHigh className={classes.highPriority}></PriorityHigh>}\n          </Box>\n          <div className={classes.column}>\n            <Typography className={classes.secondaryHeading}>{needs.length} need(s) inside </Typography>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails className={classes.panelDetail}>\n          <Box className={classes.outerBox}>\n            {needsUnderCat}\n          </Box>\n        </AccordionDetails>\n      </Accordion>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(theme => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n  },\n  column: {\n    flexBasis: '50%',\n  },\n  panel: {\n    width: '35%',\n  },\n  panelDetail:{\n    padding: 0\n  },\n  outerBox:{\n    width:'100%'\n  },\n  innerBox: {\n    padding: \"10px\"\n  },\n  highPriority: {\n    color: \"#f44336\"\n  },\n\n\n}));\n\nfunction anyUrgentNeed(needs){\n  for (let need of needs){\n    if (need.is_urgent){\n      return true;\n    }\n  }\n  return false;\n}","import React, { useState} from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { deleteClientNeed, ERROR } from \"../store/actions/needActions\";\nimport DeleteModal from \"./shared/DeleteModal\";\nimport NeedGroupPanel from \"./client_needs/NeedGroupPanel\";\n\nexport default function ClientNeeds(props) {\n  const {clientId, needGroups} = props;\n  const dispatch = useDispatch();\n\n  const [state, setState] = useState({\n    show: false,\n    selectedId: null,\n    needGroupData: needGroups,\n  });\n\n  const handleHide = () => {\n    setState( state => ({\n        ...state,\n        showDeletedDiaglog: false\n      }));\n  }\n\n  const handleShow = (id) => {\n    setState(state => ({\n        ...state,\n        showDeletedDiaglog:true,\n        selectedId:id\n      })\n    )\n  }\n\n  const needsByNeedGroup = state.needGroupData.map(need_group =>\n    <NeedGroupPanel\n      key={need_group.id}\n      needGroupCategory={need_group.category}\n      needs={need_group.needs}\n      needGroupId={need_group.id}\n      status={need_group.status}\n      clientId={clientId}\n      handleShow={handleShow}\n    />\n  );\n\n\n  const handleDelete = (id, form) => {\n    dispatch(deleteClientNeed(clientId, id, form)).then((status) => {\n      if (status === ERROR) {\n        // this.setState({ displayError: true });\n      } else {\n        setState( state => ({\n          ...state,\n          showDeletedDiaglog: false,\n          needGroupData: deleteNeedInData(state.selectedId)\n        }));\n      }\n    });\n  }\n\n  const deleteNeedInData = (id) => {\n    let copy = [...state.needGroupData]\n    for (const need_cat of copy){\n      for (const need of need_cat.needs){\n        if(need.id === state.selectedId){\n          //Delete need corresponding to selectedId\n          const idx = need_cat.needs.indexOf(need);\n          if (idx > -1){\n            need_cat.needs.splice(idx,1);\n          }\n        }\n      }\n      if (need_cat.needs.length === 0){\n        //If there are no needs under this category, delete the category as well.\n        const idx = copy.indexOf(need_cat);\n        if (idx > -1){\n          copy.splice(idx,1);\n        }\n      }\n    }\n    return copy;\n  }\n\n  if (state) {\n    return (\n      <div>\n          {needsByNeedGroup}\n        <DeleteModal\n          contentType='Need'\n          objectId={state.selectedId}\n          show={state.showDeletedDiaglog}\n          onHide={handleHide}\n          delete={handleDelete}\n          title = {\"Delete this need?\"}\n        />\n      </div>\n      )\n\n  } else {\n    return '';\n  }\n}\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\n\nexport default function TR({ title, value }) {\n  if (value) {\n    return (\n      <TableRow key={title}>\n        <TableCell component=\"th\" scope=\"row\">\n          {title}\n        </TableCell>\n        <TableCell align=\"left\">{value}</TableCell>\n      </TableRow>\n    );\n  } else {\n    return null;\n  }\n}\n","import makeStyles from '@material-ui/styles/makeStyles';\n\nconst useProfileTableStyles = makeStyles({\n  table: {\n    marginTop: 20,\n    marginBottom: 40,\n    width: '80%'\n  },\n  title: {\n    backgroundColor: '#ececec',\n    width: '30%'\n  },\n\n  title2: {\n    backgroundColor: '#ececec',\n    width: '70%'\n  },\n\n});\n\nexport default useProfileTableStyles;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport TR from '../../shared/TR';\n\nimport { formatLocation } from '../../../helpers/location_helpers';\nimport { formatPhoneNumber } from '../../../helpers/phone_number_helpers';\n\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport useProfileTableStyles from '../../../stylesheets/profile-table'\n\nexport default function ClientInfoTable({ step, client, infoFields, clientFields }) {\n\n  let rowTitle, rowValue;\n  const infoRows = _.map(infoFields, infoField => {\n\n\n    rowTitle = clientFields[infoField].label;\n    // console.log(\"%%%%%%%%% clientFields[infoField].label\", clientFields[infoField].label);\n\n    switch(infoField) {\n        case 'first_name':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client.profile[infoField];\n        // console.log(\"$$$$$$ infoField, rowValue, client.profile  $$ \",infoField, rowValue,  client.profile);\n        }\n        break;\n      case 'middle_name':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile  $$  \", infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'last_name':\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'preferred_name':\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'gender':\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'birth_date':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'email':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'primary_phone_number':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client.profile[infoField];\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        }\n        break;\n      case 'alt_phone_number':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client.profile[infoField] ? formatPhoneNumber(client.profile[infoField]) : 'None provided';\n        }\n        break;\n      case \"address\":\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client[infoField] ? formatLocation(client[infoField]) : \"None provided\";\n        }\n        break;\n\n      case \"has_children\":\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client[infoField] ? 'Yes' : 'No';\n        }\n        break;\n      case \"other_languages\":\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile\",infoField,  client.profile);\n        }\n        rowValue = client.profile[infoField];\n        break;\n      case \"eligibilities\":\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = (client[infoField] || []).join(', ')\n        }\n        break;\n      default:\n        rowValue = client[infoField];\n    }\n    return (\n      <TR\n        key={infoField}\n        title={rowTitle}\n        value={rowValue}\n      />\n    );\n  })\n\n  const classes = useProfileTableStyles()\n  return (\n    <TableContainer className={classes.table} component={Paper}>\n      <Table aria-label=\"Profile table\">\n        <TableHead>\n          <TableRow >\n            <TableCell className={classes.title}>{step}</TableCell>\n            <TableCell className={classes.title2}></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {infoRows}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import React, { Component } from 'react';\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\n\n\nexport default class AppointmentRow extends Component {\n  render() {\n    const appointment = this.props.appointment;\n\n    return(\n      <TableRow>\n        {/*<td>*/}\n        {/*  <Label>{appointment.type}</Label>{' '}*/}\n        {/*  {appointment.category}*/}\n        {/*</td>*/}\n        <TableCell component=\"th\" scope=\"row\">\n          {appointment.category}\n        </TableCell>\n        <TableCell align=\"left\">{appointment.date}</TableCell>\n        <TableCell align=\"left\">{`${appointment.start_time} - ${appointment.end_time}`}</TableCell>\n        <TableCell align=\"left\">{appointment.description}</TableCell>\n      </TableRow>\n    )\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../store/defaults.js';\nimport { resolve } from \"chart.js/helpers\";\n\nexport const ACTION_SUCCESS = 'ACTION_SUCCESS';\nexport const ACTION_ERROR = 'ACTION_ERROR';\n\nexport const headers = {\n  Authorization: `JWT ${localStorage.getItem('jwt_token')}`\n};\n\nconst normalizeError = (err) => {\n  for (const [key, value] of Object.entries(err)) {\n    if (value != null && typeof value === 'object' && !Array.isArray(value)) {\n      err[key] = normalizeError(value);\n    } else {\n      err[key] = value[0];\n    }\n  }\n  return err;\n};\n\nexport async function getJson(url) {\n  url = serverHost + url;\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n    },\n  });\n  if (response.status >= 400 && response.status < 600) {\n    const e = new Error(\"Bad response from server: \" + response.status);\n    e.json = normalizeError(await response.json());\n    throw e;\n  }\n  return response.json();\n}\n\nasync function sendJson(url, body, method, rawResponse = false) {\n  url = serverHost + url;\n  const response = await fetch(url, {\n    method,\n    body: JSON.stringify(body),\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n    },\n  });\n  if (response.status >= 400 && response.status < 600) {\n    const e = new Error(\"Bad response from server: \" + response.status);\n    e.json = normalizeError(await response.json());\n    throw e;\n  }\n  if (rawResponse)\n    return response;\n  return response.json();\n}\n\nexport async function postJson(url, body) {\n  return sendJson(url, body, 'POST');\n}\n\nexport async function putJson(url, body) {\n  return sendJson(url, body, 'PUT');\n}\n\n// return raw response\nexport async function deleteJson(url, body) {\n  return sendJson(url, body, 'DELETE', true);\n}\n\nexport function sleep(milliseconds) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, milliseconds)\n  })\n}","import { getJson, postJson } from \"./index\";\n\n\nexport function fetchClientFields() {\n  return getJson('/settings/get_client_fields/');\n}\n\nexport function updateClientFields(params) {\n  return postJson('/settings/update_client_fields/', params);\n}\n\nexport async function fetchProviderFields(reformat = true) {\n  const data = await getJson('/settings/get_provider_fields/');\n  if (reformat) {\n    // transform to the same object as client fields\n    Object.keys(data).forEach(providerType => {\n      const formStructure = data[providerType].form_structure;\n      Object.keys(formStructure).forEach(stepName => {\n        const fields = formStructure[stepName];\n        formStructure && Object.keys(fields).forEach(fieldName => {\n          // skip questions\n          if (fields[fieldName].type !== 'field') return;\n          fields[fieldName] = fields[fieldName].required;\n        })\n      })\n    });\n  }\n  return data;\n}\n\nexport function updateProviderFields(params) {\n  return postJson('/settings/update_provider_fields/', params);\n}","import { maritalStatusOptions, statusInCanadaOptions, educationLevelOptions, genderOptions,\n         incomeSourceOptions } from '../store/defaults.js';\n\nexport const clientFields = {\n  address: { label: 'Address' },\n  alt_phone_number: { component: 'GeneralField', type: 'tel', label: 'Alternative Phone Number' },\n  arrival_date: { component: 'GeneralField', type: 'date', label: 'Arrival Date (if different from landing_date)' },\n  birth_date: { component: 'GeneralField', type: 'date', label: 'Date of Birth' },\n  completed_education_level: { component: 'SelectField', label: 'Completed Education Level', options: educationLevelOptions },\n  country_of_last_residence: { component: 'GeneralField', type: 'text', label: 'Country of Last Residence' },\n  country_of_origin: { component: 'GeneralField', type: 'text', label: 'Country of Origin' },\n  current_education_level: { component: 'SelectField', label: 'Current Education Level', options: educationLevelOptions },\n  ngo_conditions: { component: 'CheckboxField', label: 'NGO Conditions' },\n  email: { component: 'GeneralField', type: 'email', label: 'Email' },\n  family: { label: 'Family' },\n  file_id: { component: 'GeneralField', type: 'text', label: 'File ID' },\n  first_language: { component: 'SelectField', label: 'First Language' },\n  first_name: { component: 'GeneralField', type: 'text', label: 'First Name' },\n  gender: { component: 'SelectField', label: 'Gender', options: genderOptions },\n  has_children: { component: 'RadioField', label: 'Do you have children?', options: { 'Yes': true, 'No': false } },\n  immigration_doc_number: { component: 'GeneralField', type: 'text', label: 'Immigration Document Number (if different from PR card)' },\n  income_source: { component: 'SelectField', label: 'Income Source', options: incomeSourceOptions },\n  landing_date: { component: 'GeneralField', type: 'date', label: 'Landing Date' },\n  last_name: { component: 'GeneralField', type: 'text', label: 'Last Name' },\n  marital_status: { component: 'SelectField', label: 'Marital Status', options: maritalStatusOptions },\n  middle_name: { component: 'GeneralField', type: 'text', label: 'Middle Name' },\n  num_of_children: { component: 'GeneralField', type: 'number', label: 'Number of Children' },\n  num_of_dependants: { component: 'GeneralField', type: 'number', label: 'Number of Dependants' },\n  other_languages: { component: 'MultiSelectField', label: 'Other languages' },\n  preferred_name: { component: 'GeneralField', type: 'text', label: 'Preferred Name' },\n  primary_phone_number: { component: 'GeneralField', type: 'tel', label: 'Telephone' },\n  pr_number: { component: 'GeneralField', type: 'text', label: 'Permanent Residence Card Number (PR card)' },\n  status_in_canada: { component: 'SelectField', label: 'Status in Canada', options: statusInCanadaOptions }\n}\n","import { postJson, putJson, getJson, deleteJson } from \"./index\";\n\nexport function createEligibility(params) {\n  return postJson('/eligibility_criteria/', params);\n}\n\nexport function updateEligibility(id, params) {\n  return putJson('/eligibility_criteria/' + id + '/', params);\n}\n\nexport function fetchEligibility(id) {\n  return getJson('/eligibility_criteria/' + id + '/');\n}\n\nexport function fetchEligibilities() {\n  return getJson('/eligibility_criteria/');\n}\n\nexport async function deleteEligibility(id, params) {\n  const response = await deleteJson('/eligibility_criteria/' + id + '/', params);\n  if (response.status !== 204)\n    throw Error('Server does not return correct code.');\n}\n","import React, { useState } from 'react';\nimport GeneralField from '../../shared/fields/GeneralField'\nimport SelectField from '../../shared/fields/SelectField'\nimport { genderOptions, familyRelationshipOptions } from '../../../store/defaults.js';\nimport { Paper, Button, FormLabel } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Alert } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  paper: {\n    position: 'relative',\n    paddingLeft: 28,\n    paddingBottom: 20,\n    marginBottom: 20,\n    width: 380,\n  }\n}));\n\nfunction FamilyMemberFields({index, clientId, member, handleRemoveFamily, errMsg = {}}) {\n  const classes = useStyles();\n\n  const handleChangeMember = name => e => {\n    member.person[name] = e.target.value;\n  };\n\n  // What does this mean?\n  const disabled = clientId && member.person.id === clientId;\n  return (\n    <div className={classes.root}>\n      <FormLabel component=\"legend\">\n        Family Member #{index + 1 + '  '}\n        <Button\n          disabled={disabled}\n          onClick={e => handleRemoveFamily(index)}\n          color=\"secondary\"\n        >\n          Remove\n        </Button>\n      </FormLabel>\n      <Paper variant=\"outlined\" className={classes.paper}>\n        <GeneralField\n          type=\"text\"\n          onChange={handleChangeMember('first_name')}\n          value={member.person.first_name}\n          label=\"First name\"\n          disabled={disabled}\n          error={!!errMsg['first_name']}\n          helperText={errMsg['first_name']}\n        />\n        <GeneralField\n          type=\"text\"\n          value={member.person.last_name}\n          onChange={handleChangeMember('last_name')}\n          label=\"Last name\"\n          disabled={disabled}\n          error={!!errMsg['last_name']}\n          helperText={errMsg['last_name']}\n        />\n        <GeneralField\n          type=\"date\"\n          value={member.person.birth_date}\n          onChange={handleChangeMember('birth_date')}\n          label=\"Birth date\"\n          disabled={disabled}\n          error={!!errMsg['birth_date']}\n          helperText={errMsg['birth_date']}\n        />\n        <SelectField\n          options={genderOptions}\n          value={member.person.gender}\n          onChange={handleChangeMember('gender')}\n          label=\"Gender\"\n          disabled={disabled}\n          error={!!errMsg['gender']}\n          helperText={errMsg['gender']}\n        />\n        <SelectField\n          options={familyRelationshipOptions}\n          value={member.relationship}\n          onChange={e => member.relationship = e.target.value}\n          label={(clientId && member.person.id === clientId) ? 'Self' : 'Relationship'}\n          disabled={disabled}\n          error={!!errMsg['relationship']}\n          helperText={errMsg['relationship']}\n        />\n      </Paper>\n    </div>\n  )\n}\n\nexport default function FamilyFields({family, clientId, errMsg = {}}) {\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(true);\n  const forceUpdate = () => update(!state);\n\n  const handleAddFamily = () => {\n    family.members.push({\n      person: {\n        first_name: '',\n        last_name: '',\n        birth_date: null,\n        gender: ''\n      },\n      relationship: ''\n    });\n    forceUpdate();\n  };\n\n  const handleRemoveFamily = (index) => {\n    family.members.splice(index, 1);\n    forceUpdate();\n  };\n\n  return (\n    <div>\n      {errMsg && typeof errMsg === 'string' &&\n        <Alert severity=\"error\">{errMsg}</Alert>}\n      {family.members.map((member, index) => {\n        return (\n          <FamilyMemberFields\n            key={index}\n            index={index}\n            member={member}\n            clientId={clientId}\n            handleRemoveFamily={handleRemoveFamily}\n            errMsg = {errMsg[index]}\n          />\n        )\n      })}\n      <Button onClick={handleAddFamily} variant=\"outlined\">\n        Add Family Member\n      </Button>\n    </div>\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport { RadioGroup, Radio, FormControlLabel, FormControl, FormLabel, FormHelperText } from '@material-ui/core'\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { UN_SET } from '../../../constants';\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    position: 'relative',\n    top: 16,\n  },\n  formControlRow: {\n    position: 'relative',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  labelRow: {\n    width: 200,\n    marginRight: 20,\n  }\n}));\n\nconst tryCastBool = val => val === 'true' ? true : (val === 'false' ? false : val);\n\nexport default function RadioField({row, noStar, label, required, options, onChange, value: parentValue = UN_SET, helperText, ...props}) {\n  const classes = useStyles();\n  const [value, setValue] = useState(parentValue);\n\n  const handleChange = useCallback(e => {\n    const val = tryCastBool(e.target.value);\n    setValue(val);\n    onChange({target: {value: val === UN_SET ? null : val}});\n  }, [onChange]);\n\n  return (\n    <FormControl className={row ? classes.formControlRow : classes.formControl}  error={props.error}>\n      <FormLabel className={row && classes.labelRow} required={required && !noStar} component=\"legend\">{label}</FormLabel>\n      <RadioGroup value={value} onChange={handleChange} row>\n        {/*{!required && <FormControlLabel*/}\n        {/*  key={UN_SET}*/}\n        {/*  value={UN_SET}*/}\n        {/*  control={<Radio color=\"primary\"/>}*/}\n        {/*  label={'N/A'}*/}\n        {/*  labelPlacement=\"end\"*/}\n        {/*/>}*/}\n        {Object.entries(options).map((([label, value]) =>\n            <FormControlLabel\n              key={value}\n              value={value}\n              control={<Radio color=\"primary\"/>}\n              label={label}\n              labelPlacement=\"end\"\n            />\n        ))}\n      </RadioGroup>\n      {helperText && <FormHelperText>{helperText}</FormHelperText>}\n    </FormControl>\n  );\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { FormLabel, FormControl, FormGroup, FormControlLabel, Checkbox, FormHelperText } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    // position: 'relative',\n    marginTop: 16,\n    // marginBottom: 8,\n  },\n}));\n\nexport default function CheckboxField({label, required, options, onChange, helperText, ...props}) {\n  const optionsArray = useMemo(() =>\n    Array.isArray(options) ? options : Object.values(options), [options]);\n\n  const [value, setValue] = useState(() => {\n    const data = {};\n    optionsArray.forEach(option => {\n      data[option] = props.value.includes(option);\n    });\n    return data;\n  });\n\n  const handleChange = useCallback(name => e => {\n    const checked = e.target.checked;\n    const newValue = {\n      ...value,\n      [name]: checked\n    };\n    setValue(newValue);\n    const parentValue = [];\n    Object.entries(newValue).forEach(([name, checked]) => {\n      if (checked) parentValue.push(name);\n    });\n    onChange({target: {value: parentValue}});\n  }, [onChange, value]);\n\n  const classes = useStyles();\n  return (\n    <FormControl component=\"fieldset\" className={classes.formControl} error={props.error}>\n      <FormLabel required={required} component=\"legend\">{label}</FormLabel>\n      <FormGroup row>\n        {optionsArray.map(name =>\n          <FormControlLabel\n            key={name}\n            label={name}\n            control={<Checkbox color=\"primary\" checked={value[name]} onChange={handleChange(name)}/>}\n          />\n        )}\n      </FormGroup>\n      {helperText && <FormHelperText>{helperText}</FormHelperText>}\n    </FormControl>\n  );\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  InputLabel,\n  Select,\n  Input,\n  Chip,\n  MenuItem,\n  InputBase,\n  FormControl,\n  FormHelperText\n} from \"@material-ui/core\";\nimport { useTheme } from '@material-ui/core/styles';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: 18,\n    paddingBottom: 8,\n    width: '100%',\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n    zIndex: 100000,\n  },\n  select: {\n    whiteSpace: 'initial',\n    minWidth: 326,\n    // minHeight: 36,\n  },\n  search: {\n    padding: 4,\n    paddingBottom: 6,\n    width: '80%',\n    verticalAlign: 'middle',\n  },\n  searchIcon: {\n    marginLeft: 16,\n    marginRight: 4,\n    fill: '#787878',\n    verticalAlign: 'middle',\n  },\n  options: {\n    overflow: 'auto',\n    maxHeight: '70vh',\n  }\n}));\n\nconst MenuProps = {\n  getContentAnchorEl: null,\n  anchorOrigin: {\n    vertical: \"bottom\",\n    horizontal: \"left\",\n  },\n  PaperProps: {\n    style: {\n      maxHeight: null,\n      minWidth: null,\n    },\n  },\n  MenuListProps: {\n    autoFocus: false\n  }\n};\n\nfunction getStyles(name, selected, theme) {\n  const isSelected = selected.indexOf(name) !== -1;\n  return {\n    fontWeight:\n      isSelected ? theme.typography.fontWeightMedium : theme.typography.fontWeightRegular,\n    background: isSelected ? '#ccc' : '',\n  };\n}\n\nexport default function Dropdown(props) {\n  // options is [value1, value2, ...]\n  const {options, label, value, onChange, helperText} = props;\n\n  const [values, setValues] = useState({\n    selected: value ? value : [],\n    filteredOptions: options ? [...options] : [],\n    searchValue: '',\n  });\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  const theme = useTheme();\n\n  useEffect(() => {\n    setValues(values => ({\n      ...values,\n      searchValue: '',\n      selected: [],\n      filteredOptions: options ? [...options] : []}))\n  }, [options]);\n\n  const handleChange = useCallback((name, value) => {\n    setValues(values => ({...values, [name]: value}));\n    if (name === 'selected' && onChange)\n      onChange({target: {value}});\n  }, [onChange]);\n\n  const handleItemClick = (value) => () => {\n    const index = values.selected.indexOf(value);\n    if (index === -1)\n      handleChange('selected', [...values.selected, value]);\n    else\n      handleDelete(value)();\n  };\n\n  const handleDelete = useCallback(removeValue => () => {\n    handleChange('selected', values.selected.filter(value => value !== removeValue));\n  }, [handleChange, values.selected]);\n\n  const handleSearch = useCallback(event => {\n    handleChange('searchValue', event.target.value);\n    let value = event.target.value || '';\n    value = value.toLowerCase();\n    const result = [];\n    for (let i = 0, l = options.length; i < l; i++) {\n      const option = options[i];\n      // search engine here\n      if (option.toLowerCase().includes(value))\n        result.push(option);\n    }\n    handleChange('filteredOptions', result);\n  }, [handleChange, options]);\n\n  const renderValue = useCallback((selected) => {\n    const values = [];\n    options.forEach(value => {\n      if (selected.indexOf(value) !== -1)\n        values.push(\n          <Chip key={value} label={value} className={classes.chip} onDelete={handleDelete(value)}/>)\n    });\n    return values;\n  }, [classes.chip, handleDelete, options]);\n\n  const renderMenu = () => {\n    return (\n      <div>\n        <SearchIcon className={classes.searchIcon}/>\n        <InputBase\n          autoFocus\n          className={classes.search}\n          placeholder=\"Search\"\n          value={values.searchValue}\n          onChange={handleSearch}\n          onKeyDown={e => {\n            e.stopPropagation()\n          }} // fix bugs\n        />\n        <div className={classes.options}>\n          {values.filteredOptions.map((value, index) => (\n              <MenuItem key={index} value={value} onClick={handleItemClick(value)}\n                        style={getStyles(value, values.selected, theme)}>\n                {value}\n              </MenuItem>\n            )\n          )}\n        </div>\n      </div>\n    )\n  };\n\n  return (\n    <div className={classes.root}>\n      <FormControl error={props.error}>\n        <InputLabel>{label}</InputLabel>\n        <Select\n          multiple\n          value={values.selected}\n          input={<Input/>}\n          renderValue={renderValue}\n          MenuProps={MenuProps}\n          classes={{select: classes.select}}\n          open={open}\n          onOpen={e => {\n            // do not open the select when click on the delete icon\n            const {tagName} = e.target;\n            if (tagName !== 'svg' && tagName !== 'path') {\n              setOpen(true);\n            }\n          }}\n          onClose={() => setOpen(false)}\n        >\n          {renderMenu()}\n        </Select>\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </div>\n  )\n}\n","import React from 'react';\n\nimport GeneralField from './fields/GeneralField';\nimport SelectField from './fields/SelectField';\nimport RadioField from './fields/RadioField';\nimport CheckboxField from './fields/CheckboxField';\nimport MultiSelectField from './fields/MultiSelectField';\n\nexport default function FieldGroup({ component, options, value, ...props }) {\n  if (component === 'GeneralField') {\n    return (\n      <GeneralField\n        {...props}\n        value={value}\n      />\n    );\n  }\n  else if (component === 'SelectField') {\n    return (\n      <SelectField\n        options={options}\n        {...props}\n        value={value}\n      />\n    );\n  }\n  else if (component === 'MultiSelectField') {\n    return (\n      <MultiSelectField\n        options={options}\n        value={value}\n        {...props}\n      />\n    );\n  }\n  else if (component === 'RadioField') {\n    return (\n      <RadioField\n        options={options}\n        value={value}\n        {...props}\n      />\n    );\n  }\n  // return null;\n  else if (component === 'CheckboxField') {\n    return (\n      <CheckboxField\n        options={options}\n        value={value}\n        {...props}\n      />\n    );\n  }\n  return <div>Unknown field {component}</div>;\n}\n","import {\n  recursiveAssign,\n  isFieldEmpty,\n  verifyAddressField,\n  validateAddressPostalCode,\n  validateContactFormat,\n  verifyFamilyFields,\n} from \"./index\";\n\n// Verify the params filled in client form\nexport function client_verify_form(form, steps) {\n  const format_messages = verifyFormFormat(form);\n  const required_field_msg = verifyRequiredField(form, steps);\n  return recursiveAssign(required_field_msg, format_messages);\n}\n\n/**\n * verify if every required field is filled in\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyRequiredField(form, steps) {\n  let result = {};\n  for (const step_page_fields of steps) {\n    // traverse each step page in steps\n    for (const [field, required] of Object.entries(step_page_fields)) {\n      if (required) {\n        if (field in form && isFieldEmpty(form[field])) {\n          //  key in form\n          result[field] = 'This field is required';\n        } else if (field in form.profile && isFieldEmpty(form.profile[field])) {\n          result[field] = 'This field is required';\n        } else if (field === 'family' && field in form) {\n          if (form[field].length === 0){\n            result['family'] = \"Please add at least one family member!\";\n          } else{\n            // Some fields in family are not filled in\n            result[field] = {}\n            verifyFamilyFields(form[field]['members'], result[field])\n            if (Object.entries(result[field]).length === 0) {\n              delete result[field];\n            }\n          }\n\n        } else if (field === 'address') {\n          result[field] = {};\n          verifyAddressField(form[field], result[field]);\n          if(Object.entries(result[field]).length === 0){\n            delete result[field];\n          }\n        }\n      }\n    }\n  }\n  return result\n}\n\n/**\n * verify format for various field\n * @param form\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyFormFormat(form) {\n  let result = {}\n  // Verify postal code\n  validateAddressPostalCode(form.address.postal_code, result, 'address')\n\n  // verify profile\n  if(form.profile){\n    validateContactFormat(form.profile, result)\n  }\n  return result;\n}\n","import React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport { useParams, useHistory } from 'react-router';\nimport { ACTION_SUCCESS } from '../../store/defaults.js';\nimport { clientFields } from '../../constants/client_fields.js'\nimport { defaultProfileFields, generateClientField } from '../../constants/default_fields.js'\n\n// redux\nimport { useDispatch } from 'react-redux';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { createClient, updateClient, fetchClient } from '../../store/actions/clientActions.js';\nimport { fetchEligibilities } from '../../api/eligibilityApi';\nimport { fetchClientFields } from '../../api/settingApi';\n\n// components\nimport LocationFieldGroup from '../shared/LocationFieldGroup';\nimport FamilyFields from './client_form/FamilyFields';\nimport FieldGroup from '../shared/FieldGroup';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Container } from '@material-ui/core';\nimport { Loading, FormStepper } from \"../shared\";\nimport { client_verify_form } from '../../helpers/client_verify_form.js';\n\nconst useStyles = makeStyles(theme => ({\n  content: {\n    width: '80%',\n    margin: 'auto',\n    paddingBottom: 10,\n  }\n}));\n\nexport default function ClientForm() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {id} = useParams();\n  const mode = id ? 'edit' : 'new';\n  const [state, setState] = useState({\n    loading: true,\n    languageOptions: [],\n    all_ngo_conditions: [],\n    stepNames: [],\n    steps: [],\n    client: null,\n    dispatchErrorMsg: [],\n    fieldErrorMsg: {},\n  });\n\n  // DO NOT store form as state, it degrades the performance as all form got rendered every time user type anything.\n  // Instead, for large form like this page, store the form as a variable and pass it to child components (input)\n  const form = useMemo(() => generateClientField(state.client), [state.client]);\n\n  // const [form, setForm] = useState(generateClientField());\n\n  useEffect(() => {\n    const promises = [];\n    promises.push(dispatch(fetchOntologyCategories('languages'))\n      .then(data => setState(state => ({...state, languageOptions: data}))));\n    promises.push(fetchEligibilities()\n      .then(data => {\n        setState(state => ({...state, all_ngo_conditions: data.map(data => data.title)}))\n      }));\n    promises.push(fetchClientFields()\n      .then(data => {\n        if (data == null || data.steps_order.length === 0\n          || Object.values(data.form_structure).length === 0) {\n          setState(state => ({...state, loading: true, dispatchErrorMsg: ['No fields are available.']}));\n        } else {\n          setState(state => ({\n            ...state,\n            stepNames: data.steps_order,\n            steps: Object.values(data.form_structure)\n          }));\n        }\n      }));\n    id && promises.push(dispatch(fetchClient(id))\n      .then(data => setState(state => ({...state, client: data}))));\n    Promise.all(promises).then(() => setState(state => ({...state, loading: false})));\n  }, [dispatch, id]);\n\n  const handleFinish = () => {\n    // TODO: pretty error message\n    const fieldErrorMsg = client_verify_form(form, state.steps);\n    if (Object.keys(fieldErrorMsg).length !== 0) {\n      setState(state => ({...state, fieldErrorMsg}));\n      return;\n    }\n    if (mode === 'edit') {\n      dispatch(\n        updateClient(id, form, (status, err, clientId) => {\n          if (status === ACTION_SUCCESS) {\n            history.push(`/clients/${clientId}`)\n          } else {\n            setState(state => ({...state, dispatchErrorMsg: [err.toString()]}));\n          }\n        })\n      );\n    } else {\n      dispatch(\n        createClient(form, (status, err, clientId) => {\n          if (status === ACTION_SUCCESS) {\n            history.push('/clients/' + clientId)\n          } else {\n            setState(state => ({...state, dispatchErrorMsg: [err.toString()]}));\n          }\n        }));\n\n    }\n  };\n\n  /**\n   * Handle changes in form\n   * @param name {string}\n   * @returns {Function}\n   */\n  const handleChange = useCallback(name => e => {\n    const {value} = e.target;\n    const splits = name.split('.');\n    if (splits.length === 1) {\n      form[name] = value;\n    } else {\n      let parent = form;\n      for (let i = 0; i < splits.length - 1; i++) {\n        parent = parent[splits[i]];\n      }\n      parent[splits[splits.length - 1]] = value || '';\n    }\n  }, [form]);\n\n  const getStepContent = idx => {\n    const step = state.steps[idx];\n    return <div className={classes.content}>\n      {Object.entries(step).map(([field, required]) => {\n        let options;\n        // console.log(field)\n        let errMsg = state.fieldErrorMsg[field];\n        if (field === 'first_language') {\n          options = state.languageOptions;\n        } else if (field === 'other_languages') {\n          options = state.languageOptions.filter(\n            category => category !== form.first_language)\n        } else if (field === 'ngo_conditions') {\n          options = state.all_ngo_conditions;\n        }\n\n        if (field === 'address') {\n          return (\n            <LocationFieldGroup\n              key=\"address\"\n              address={form.address}\n              required={required}\n              errMsg={errMsg}\n            />\n          );\n        } else if (field === 'family') {\n          return (\n            <FamilyFields\n              key=\"family\"\n              family={form.family}\n              clientId={id}\n              required={required}\n              errMsg={errMsg}\n            />\n          );\n        } else {\n          const isProfile = Object.keys(defaultProfileFields).includes(field);\n          return (\n            <FieldGroup\n              key={field}\n              label={clientFields[field].label}\n              type={clientFields[field].type}\n              component={clientFields[field].component}\n              value={isProfile ? form.profile[field] : form[field]}\n              onChange={handleChange(isProfile ? 'profile.' + field : field)}\n              required={required}\n              options={clientFields[field].options || options}\n              error={errMsg != null}\n              helperText={errMsg}\n            />\n          );\n        }\n      })}\n    </div>\n  };\n\n  if (state.loading)\n    return <Loading message={`Loading...`}/>;\n\n  return (\n    <Container>\n      <FormStepper\n        getStepContent={getStepContent}\n        handleFinish={handleFinish}\n        stepNames={state.stepNames}\n        error={state.dispatchErrorMsg}\n      />\n    </Container>\n  );\n}\n","import { deleteJson, getJson, postJson, putJson } from \"./index\";\n\nexport function createUser(params) {\n  return postJson('/users/', params);\n}\n\nexport function createUsers(params) {\n  // TODO: implement backend?\n  return postJson('/users/', {csv: params});\n}\n\nexport function updateUser(id, params) {\n  return putJson('/user/' + id + '/', params);\n}\n\nexport function fetchUser(id) {\n  return getJson('/user/' + id + '/');\n}\n\nexport function fetchUsers() {\n  return getJson('/users/');\n}\n\nexport function deleteUser(id, params, callback) {\n  const response = deleteJson('/user/' + id + '/');\n  if (response.status !== 204)\n    throw Error('Server does not return correct code.');\n}\n","import RadioField from \"../components/shared/fields/RadioField\";\nimport { Validator } from \"../helpers\";\nimport { defaultField } from \"./index\";\n\nexport const userFormFields = {\n  is_superuser: {\n    ...defaultField,\n    label: 'Admin?',\n    component: RadioField,\n    options: {Yes: true, No: false},\n    required: true,\n  },\n  username: {\n    ...defaultField,\n    label: 'Username',\n    required: true,\n  },\n  password: {\n    ...defaultField,\n    label: 'Password',\n    type: 'password',\n    required: true,\n    validator: Validator.password\n  },\n  first_name: {\n    ...defaultField,\n    label: 'First name',\n  },\n  last_name: {\n    ...defaultField,\n    label: 'Last name',\n  },\n  email: {\n    ...defaultField,\n    label: 'Email',\n    type: 'email',\n    validator: Validator.email,\n  },\n  primary_phone_number: {\n    ...defaultField,\n    label: 'Telephone',\n    validator: Validator.phone\n  },\n  alt_phone_number: {\n    ...defaultField,\n    label: 'Alternate phone number',\n    validator: Validator.phone\n  }\n};","import React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from \"react-router\";\n\nimport { defaultUserFields } from \"../../constants/default_fields\";\nimport { Button, Container, Typography } from \"@material-ui/core\";\nimport { userFormFields } from \"../../constants/userFields\";\nimport { fetchUser, updateUser, createUser } from \"../../api/userApi\";\nimport { Loading } from \"../shared\"\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { isFieldEmpty } from \"../../helpers\";\nimport { REQUIRED_HELPER_TEXT } from \"../../constants\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '80%'\n  },\n  button: {\n    marginTop: 12,\n    marginBottom: 12,\n  }\n}));\n\nexport default function UserForm() {\n  const classes = useStyles();\n  const history = useHistory();\n  const {id} = useParams();\n  const mode = id == null ? 'new' : 'edit';\n  const [state, setState] = useState({\n    form: {\n      ...defaultUserFields\n    },\n    errors: {},\n    loading: true,\n  });\n\n  useEffect(() => {\n    if (mode === 'edit') {\n      fetchUser(id).then(user => {\n        setState(state => ({\n          ...state,\n          form: {\n            ...state.form,\n            ...user\n          },\n          loading: false,\n        }))\n      })\n    } else\n      setState(state => ({...state, loading: false}));\n  }, [mode, id]);\n\n  /**\n   * @returns {boolean} true if valid.\n   */\n  const validate = () => {\n    const errors = {};\n    for (const [field, option] of Object.entries(userFormFields)) {\n      const isEmpty = isFieldEmpty(state.form[field]);\n      if (option.required && isEmpty) {\n        errors[field] = REQUIRED_HELPER_TEXT;\n      }\n      let msg;\n      if (!isEmpty && option.validator && (msg = option.validator(state.form[field]))) {\n        errors[field] = msg;\n      }\n    }\n    if (Object.keys(errors).length !== 0) {\n      setState(state => ({...state, errors}));\n      return false\n    }\n    return true;\n  };\n\n  const handleSubmit = async () => {\n    if (validate()) {\n      try {\n        if (mode === 'new') {\n          await createUser(state.form);\n          history.push('/users/');\n        } else {\n          await updateUser(id, state.form);\n          history.push('/users/' + id);\n        }\n      } catch (e) {\n        if (e.json) {\n          setState(state => ({...state, errors: e.json}));\n        }\n      }\n    }\n  };\n\n  if (state.loading)\n    return <Loading message={`Loading user form...`}/>;\n\n  return (\n    <Container className={classes.root}>\n      <Typography variant=\"h5\">\n        {mode === 'new' ? 'Create new user' : 'Edit user'}\n      </Typography>\n      {Object.entries(userFormFields).map(([field, option]) => {\n        return (\n          <option.component\n            key={field}\n            label={option.label}\n            type={option.type}\n            options={option.options}\n            value={state.form[field]}\n            required={option.required}\n            onChange={e => state.form[field] = e.target.value}\n            error={!!state.errors[field]}\n            helperText={state.errors[field]}\n          />\n        )\n      })}\n      <Button variant=\"contained\" color=\"primary\" className={classes.button} onClick={handleSubmit}>\n        Submit\n      </Button>\n    </Container>\n  )\n}","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport GeneralField from '../shared/fields/GeneralField'\nimport SelectField from '../shared/fields/SelectField'\nimport MultiSelectField from '../shared/fields/MultiSelectField';\nimport { newMultiSelectFieldValue } from '../../helpers/select_field_helpers';\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { createClientNeed, updateClientNeed } from '../../store/actions/needActions.js'\n\nimport { Button, Form, FormGroup, FormLabel, Col, Row } from 'react-bootstrap';\n\nclass NeedForm extends Component {\n  constructor(props) {\n    super(props);\n    let need = {};\n\n    if (this.props.match.params.need_id) {\n      need = this.props.needsById[this.props.match.params.need_id]\n    }\n\n    this.state = {\n      needId: need.id,\n      mode: (need.id) ? 'edit' : 'new',\n      form: {\n        type: need.type || undefined,\n        category: need.category || '',\n        description: need.description || '',\n        needed_by: need.needed_by || '',\n        condition: need.condition || '',\n        status: need.status || '',\n        is_urgent: need.is_urgent || false,\n        languages: need.languages || []\n      }\n    }\n\n    this.formValChange = this.formValChange.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleMultiSelectChange = this.handleMultiSelectChange.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.dispatch(fetchOntologyCategories('needs'));\n  }\n\n  formValChange(e, id=e.target.id, value=e.target.value) {\n    let nextForm = {...this.state.form, [id]: value};\n    this.setState({ form: nextForm });\n  }\n\n  handleMultiSelectChange(id, selectedOption, actionMeta) {\n    const preValue = this.state.form[id]\n    const newValue = newMultiSelectFieldValue(preValue, selectedOption, actionMeta)\n\n    this.setState({\n      form: {\n        ...this.state.form,\n        [id]: newValue\n      }\n    });\n  }\n\n  submit() {\n    if (this.state.mode === 'edit') {\n      this.props.dispatch(updateClientNeed(this.props.clientId, this.state.needId, this.state.form));\n    } else {\n      this.props.dispatch(createClientNeed(this.props.clientId, this.state.form));\n    }\n    this.props.history.push(`/clients/${this.props.clientId}`)\n  }\n\n  render() {\n    const p = this.props;\n    const formTitle = (this.state.mode === 'edit') ? 'Edit Need' : 'Create Need'\n\n    if (this.state.form.type === undefined) {\n      return (\n        <div className=\"outer\">\n          <div className=\"middle\">\n            <div className=\"need-type-buttons\">\n              <Button onClick={e => this.formValChange(e, 'type', 'Good')}>\n                Goods\n              </Button>\n              <Button onClick={e => this.formValChange(e, 'type', 'Service')}>\n                Service\n              </Button>\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <Row className=\"content\">\n          <Col sm={12}>\n            <h3>{formTitle}</h3>\n            <hr />\n          </Col>\n          <Col sm={12}>\n            <Form horizontal>\n              <FormGroup controlId=\"type\">\n                <Col componentClass={FormLabel} sm={3}>\n                  Type\n                </Col>\n                <Col sm={9}>\n                  <div className=\"need-type\">\n                    {this.state.form.type}\n                  </div>\n                </Col>\n              </FormGroup>\n              <FormGroup controlId=\"is_urgent\">\n                <Col componentClass={FormLabel} sm={3}>\n                  Urgent?\n                </Col>\n                <Col sm={9}>\n                  <Form.Check\n                    name=\"radioGroup\"\n                    value=\"1\"\n                    onChange={e => this.formValChange(e, 'is_urgent')}\n                    defaultChecked={this.state.form.is_urgent === true}\n                    type=\"radio\"\n                    inline\n                  >\n                    Yes\n                  </Form.Check>{' '}\n                  <Form.Check\n                    name=\"radioGroup\"\n                    value=\"0\"\n                    onChange={e => this.formValChange(e, 'is_urgent')}\n                    defaultChecked={this.state.form.is_urgent === false}\n                    type=\"radio\"\n                    inline\n                  >\n                    No{this.state.form.is_urgent === false}\n                  </Form.Check>{' '}\n                </Col>\n              </FormGroup>\n              <SelectField\n                label=\"Category\"\n                options={p.needsCategories}\n                value={this.state.form.category}\n                onChange={e => this.formValChange(e, 'category')}\n                required = {true}\n              />\n              <GeneralField\n                label=\"Needed By\"\n                type=\"date\"\n                value={this.state.form.needed_by}\n                onChange={e => this.formValChange(e, 'needed_by')}\n              />\n              <MultiSelectField\n                label=\"Languages\"\n                options={p.languagesCategories}\n                value={this.state.form.languages}\n                onChange={e => this.handleMultiSelectChange(e, null, null)}\n              />\n              <GeneralField\n                label=\"Description\"\n                value={this.state.form.description}\n                onChange={e => this.formValChange(e, 'description')}\n                required={true}\n                multiline = {true}\n                fullWidth = {true}\n              />\n              {this.state.form.type === 'Good' &&\n                <GeneralField\n                  label=\"Condition\"\n                  type=\"textarea\"\n                  value={this.state.form.condition}\n                  onChange={e => this.formValChange(e, 'condition')}\n                />\n              }\n              <FormGroup>\n                <Col smOffset={3} sm={9}>\n                  <Button onClick={this.submit}>\n                    Submit\n                  </Button>\n                </Col>\n              </FormGroup>\n            </Form>\n          </Col>\n        </Row>\n      );\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    needsById: state.needs.byId,\n    clientId: state.needs.clientId,\n    needsCategories: state.ontology.needs.categories,\n    languagesCategories: state.ontology.languages.categories,\n    categoriesLoaded: state.ontology.needs.loaded\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(NeedForm));\n","import _ from 'lodash';\n\nexport function newMultiSelectFieldValue(preValue,\n                                         selectedOption,\n                                         actionMeta) {\n  let newValue;\n  switch (actionMeta.action) {\n    case 'pop-value':\n    case 'remove-value':\n       _.remove(preValue, (value) => {\n        return value === actionMeta.removedValue.value\n      });\n      newValue = preValue\n      break;\n    case 'clear':\n      newValue = []\n      break;\n    default:\n      preValue.push(actionMeta.option.value)\n      newValue = preValue\n  }\n  return newValue;\n}\n","import React, { Component } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport GeneralField from '../shared/fields/GeneralField';\nimport SelectField from '../shared/fields/SelectField';\n\n// redux\nimport { connect } from 'react-redux'\nimport { createAppointment } from '../../store/actions/appointmentActions.js'\n\nclass AppointmentModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      form: {\n        'type': '',\n        'category': '',\n        'status': '',\n        'description': '',\n        'date': '',\n        'start_time': '',\n        'end_time': '',\n        'reminder_type': '',\n        'reminder_frequency': '',\n      }\n    };\n\n    this.formValChange = this.formValChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit() {\n    let form = Object.assign({}, this.state.form);\n    form['service_id'] = this.props.serviceId;\n    form['client_id'] = this.props.clientId;\n\n    this.props.dispatch(\n      createAppointment(form, (status, err, appointment) => {\n        this.props.onHide()\n      })\n    );\n  }\n\n  formValChange(e, id=e.target.id) {\n    let nextForm = { ...this.state.form, [id]: e.target.value };\n    this.setState({ form: nextForm });\n  }\n\n  render() {\n    return (\n      <Modal\n        show={this.props.show}\n        onHide={this.props.onHide}\n        bsSize=\"large\"\n        aria-labelledby=\"contained-modal-title-sm\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-sm\">\n            Appointment\n            {this.state.form.service_id}\n            {this.state.form.provider_id}\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form horizontal>\n            <SelectField\n              id=\"type\"\n              label=\"Type\"\n              options={['External', 'Internal']}\n              componentClass=\"select\"\n              value={this.state.form.type}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"category\"\n              label=\"Category\"\n              type=\"text\"\n              value={this.state.form.category}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"status\"\n              label=\"Status\"\n              type=\"text\"\n              value={this.state.form.status}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"description\"\n              label=\"Description\"\n              type=\"text\"\n              value={this.state.form.description}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"date\"\n              label=\"Date\"\n              type=\"date\"\n              value={this.state.form.date}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"start_time\"\n              label=\"Start Time\"\n              type=\"time\"\n              value={this.state.form.start_time}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"end_time\"\n              label=\"End Time\"\n              type=\"time\"\n              value={this.state.form.end_time}\n              onChange={this.formValChange}\n              required\n            />\n            <SelectField\n              id=\"reminder_type\"\n              label=\"Reminder Type\"\n              options={['Email', 'Text', 'Phone']}\n              componentClass=\"select\"\n              value={this.state.form.reminder_type}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"reminder_frequency\"\n              label=\"Reminder Frequecy\"\n              type=\"text\"\n              value={this.state.form.reminder_frequency}\n              onChange={this.formValChange}\n            />\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.handleSubmit}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default connect()(AppointmentModal);\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\n\n\nexport function createAppointment(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/appointments/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(appointment => {\n      callback(ACTION_SUCCESS, null, appointment);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport AppointmentModal from '../appointments/AppointmentModal';\nimport { matchStatusOptions } from '../../store/defaults.js';\nimport { updateMatchStatus, createMatchNote } from '../../store/actions/needActions.js'\n\nimport { Col, Accordion, Card, Form, FormGroup, FormLabel,\n  FormControl, Button } from 'react-bootstrap';\n\nclass MatchedServices extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeKey: null,\n      matchStatusForm: {},\n      noteForm: {},\n      modalShow: false,\n      appointmentServiceId: null\n    }\n\n    this.handleSelect = this.handleSelect.bind(this);\n\n    this.matchStatusChange = this.matchStatusChange.bind(this);\n    this.textAreaChange = this.textAreaChange.bind(this);\n    this.submitMatchStatus = this.submitMatchStatus.bind(this);\n    this.submitNote = this.submitNote.bind(this);\n\n    this.handleModalHide = this.handleModalHide.bind(this);\n    this.handleModalShow = this.handleModalShow.bind(this);\n  }\n\n  submitMatchStatus(matchId) {\n    this.props.dispatch(updateMatchStatus(matchId, this.state.matchStatusForm[matchId]));\n  }\n\n  submitNote(matchId) {\n    let form = {...this.state.noteForm[matchId], object_id: matchId, model: 'match' }\n    this.props.dispatch(createMatchNote(form));\n  }\n\n  matchStatusChange(e, matchId) {\n    const nextForm = { ...this.state.matchStatusForm, [matchId]: { status: e.target.value }}\n    this.setState({\n      matchStatusForm: nextForm\n    });\n  }\n\n  textAreaChange(e, matchId) {\n    const nextForm = { ...this.state.noteForm, [matchId]: { text: e.target.value }}\n    this.setState({\n      noteForm: nextForm\n    });\n  }\n\n  handleModalHide() {\n    this.setState({ modalshow: false });\n  }\n\n  handleModalShow(serviceId) {\n    this.setState({\n      modalshow: true,\n      appointmentServiceId: serviceId\n    })\n  }\n\n  handleSelect(activeKey) {\n    this.setState({\n      activeKey: activeKey,\n    });\n  }\n\n  render() {\n    const matches = this.props.matches;\n    return (\n      <div>\n        <Col sm={12}>\n          <h3>Matched Services</h3>\n        </Col>\n        <Col sm={12}>\n          <Accordion\n            id=\"accordion\"\n            activeKey={this.state.activeKey}\n          >\n            {\n              _.map(matches, (match, index) => {\n                return (\n                  <Card key={match.id} eventKey={match.id} bsStyle=\"info\">\n                    <Card.Header onClick={() => this.handleSelect(index)}>\n                      <Col sm={11}>\n                        <Card.Title toggle>\n                          {index+1}. {match.service.name}\n                          {' '}\n                        </Card.Title>\n                      </Col>\n                      <Form.Label bsStyle=\"primary\">\n                        {match.status}\n                      </Form.Label>\n                    </Card.Header>\n                    <Accordion.Collapse eventKey={index}>\n                      <Card.Body collapsible>\n                        <Col sm={8}>\n                          <FormGroup controlId=\"match_status\">\n                            <Col componentClass={FormLabel} sm={3}>\n                              Status\n                            </Col>\n                            <Col sm={6}>\n                              <FormControl\n                                componentClass=\"select\"\n                                placeholder=\"select\"\n                                defaultValue={match.status}\n                                onChange={e => this.matchStatusChange(e, match.id)}\n                              >\n                                <option value=\"select\">--- Not Set ---</option>\n                                {matchStatusOptions.map(status =>\n                                  <option key={status} value={status}>{status}</option>\n                                )}\n                              </FormControl>\n                            </Col>\n                            <Col sm={3}>\n                              <Button\n                                disabled={this.state.activeKey !== match.id || !this.state.matchStatusForm[match.id]}\n                                onClick={e => this.submitMatchStatus(match.id)}\n                              >\n                                Update Status\n                              </Button>\n                            </Col>\n                          </FormGroup>\n                          <Form.Label className='note-form'>\n                            <FormGroup controlId=\"notes\">\n                              <Col componentClass={FormLabel} sm={3}>\n                                Notes\n                              </Col>\n                              <Col sm={9}>\n                                {\n                                  _.map(match.notes, (note, index) => {\n                                    return (\n                                      <div key={index}>\n                                        {note}\n                                      </div>\n                                    )\n                                  })\n                                }\n                                <FormControl\n                                  componentClass=\"textarea\"\n                                  onChange={e => this.textAreaChange(e, match.id)}\n                                />\n                              </Col>\n                            </FormGroup>\n                            <FormGroup>\n                              <Col smOffset={3} sm={9}>\n                                <Button\n                                  disabled={this.state.activeKey !== match.id || !this.state.noteForm[match.id]}\n                                  onClick={e => this.submitNote(match.id)}\n                                >\n                                  Add Note\n                                </Button>\n                              </Col>\n                            </FormGroup>\n                          </Form.Label>\n                          <Button bsStyle=\"default\"  onClick={e => this.handleModalShow(match.service.id)}>\n                            Add appointment\n                          </Button>\n                        </Col>\n                        <Col sm={4}>\n                          <Link to={`/service/${match.service.id}`} target=\"_blank\">\n                            <h5>View Service Detail</h5>\n                          </Link>\n                          <Link to={`/provider/${match.service.provider.id}`} target=\"_blank\">\n                            <h5>View Provider Detail</h5>\n                          </Link>\n                        </Col>\n                      </Card.Body>\n                    </Accordion.Collapse>\n                  </Card>\n                )\n              })\n            }\n          </Accordion>\n        </Col>\n        <AppointmentModal\n          clientId={this.props.clientId}\n          serviceId={this.state.appointmentServiceId}\n          show={this.state.modalshow}\n          onHide={this.handleModalHide}\n        />\n      </div>\n    )\n  }\n}\n\nexport default connect()(withRouter(MatchedServices));\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { formatLocation } from '../../helpers/location_helpers'\n\nimport { connect } from 'react-redux'\nimport { ListGroupItem, Row, Col, Button } from 'react-bootstrap';\nimport { matchClientNeed } from '../../store/actions/needActions.js'\nimport { Typography } from \"@material-ui/core\";\n\nclass ServiceListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  submit(needId, serviceId) {\n    const form = {\n      service_id: serviceId\n    }\n    this.props.dispatch(\n      matchClientNeed(needId, form)\n    );\n  }\n\n  render() {\n    const service = this.props.service,\n          needId = this.props.needId,\n          label = this.props.label;\n\n    return (\n      <ListGroupItem className=\"recommended-service\">\n        <Row>\n          <Col sm={8}>\n            <h5>{label}.</h5>\n            <Link to={`/service/${service.id}`}>\n              <h5>{service.name}</h5>\n            </Link>\n            <Typography>{service.category}</Typography>\n            {' '}\n            <Typography>{Math.round(service.distance * 100) / 100} km</Typography>\n            <p>{service.desc}</p>\n            <p>{formatLocation(service.location)}</p>\n          </Col>\n          <Col sm={4}>\n            <h5>Provider</h5>\n            <Typography color=\"primary\">{service.provider.type}</Typography>\n            <Link to={`/provider/${service.provider.id}`}>\n              { (service.provider.type === \"Individual\") ? (\n                  <p>{`${service.provider.profile.first_name} ${service.provider.profile.last_name}`}</p>\n                ) : (\n                  <p>{service.provider.company}</p>\n                )\n              }\n            </Link>\n          </Col>\n          <Col sm={12}>\n            <Button bsStyle=\"default\" onClick={e => this.submit(needId, service.id)}>\n              Select\n            </Button>\n          </Col>\n        </Row>\n      </ListGroupItem>\n    )\n  }\n}\n\nexport default connect()(withRouter(ServiceListItem));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { withGoogleMap, GoogleMap, Marker } from 'react-google-maps';\nimport ServiceListItem from './ServiceListItem';\n\nimport { Row, Col } from 'react-bootstrap';\n\n\nconst GMap = withGoogleMap(props => (\n  <GoogleMap\n    zoom={10}\n    center={props.latlng}>\n    {_.map(props.services, (service, index) => {\n      return (\n        <Marker\n          key={service.id}\n          label={(index+1).toString()}\n          position={{ lat: parseFloat(service.location.lat), lng: parseFloat(service.location.lng)}}\n        />\n      )\n    })}\n  </GoogleMap>\n));\n\nexport default function ServiceList({ need, services, latlng }) {\n  return (\n    <Row>\n      <Col sm={8}>\n        {_.map(services, (service, index) => {\n          return (\n            <ServiceListItem\n              key={service.id}\n              needId={need.id}\n              label={index+1}\n              service={service}\n            />\n          )\n        })}\n      </Col>\n      <Col sm={4}>\n        <div style={{ width: '100%', height: '400px' }}>\n          <GMap\n            containerElement={\n              <div style={{ height: `100%` }} />\n            }\n            mapElement={\n              <div style={{ height: `100%` }} />\n            }\n            latlng={latlng}\n            services={services}\n          />\n        </div>\n      </Col>\n    </Row>\n  )\n}\n","import React, { Component } from 'react';\n\nimport { Col, Form, FormGroup, InputGroup, Button, FormControl } from 'react-bootstrap';\n\n\nexport default class ServiceSearchBar  extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      queryTerm: '',\n      location: props.location.street_address\n    }\n\n    this.handleFormValChange = this.handleFormValChange.bind(this);\n  }\n\n  handleFormValChange(e, id=e.target.id) {\n    this.setState({ [id] : e.target.value });\n  }\n\n  render() {\n    return (\n      <Form horizontal>\n        <FormGroup>\n          <Col sm={12}>\n            <InputGroup>\n              {this.props.enableQueryTerm &&\n                <InputGroup.Addon>Find</InputGroup.Addon>\n              }\n              {this.props.enableQueryTerm &&\n                <FormControl\n                  type=\"text\"\n                  value={this.state.queryTerm}\n                  onChange={e => this.handleFormValChange(e, 'queryTerm')}\n                  placeholder=\"Dental service, language class...\"\n                />\n              }\n              <InputGroup.Addon>Near</InputGroup.Addon>\n              <FormControl\n                type=\"text\"\n                value={this.state.location}\n                onChange={e => this.handleFormValChange(e, 'location')}\n              />\n              <InputGroup.Button>\n                {this.props.enableQueryTerm ? (\n                  <Button\n                    onClick={e => this.props.search(this.state.queryTerm, this.state.location)}\n                  >\n                    Search\n                  </Button>\n                ) : (\n                  <Button\n                    onClick={e => this.props.search(this.state.location, this.props.needId)}\n                  >\n                    Search\n                  </Button>\n                )}\n              </InputGroup.Button>\n            </InputGroup>\n          </Col>\n        </FormGroup>\n      </Form>\n    );\n  }\n};\n","import React, { Component } from 'react';\nimport TR from '../shared/TR';\n\nimport { torontoCoordinates, serverHost } from '../../store/defaults.js';\n\nimport MatchedServices from './MatchedServices';\nimport ServiceList from './ServiceList';\nimport ServiceSearchBar from './ServiceSearchBar';\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchNeed } from '../../store/actions/needActions.js'\n\nimport { Container, Row, Col, Table, Tabs, Tab } from 'react-bootstrap';\n// import { Grid, Table, Tabs, Tab } from \"@material-ui/core\";\n// import { Col, Label, Row} from 'react-bootstrap';\n// import SearchTabs from './NeedSearchTabs'\n\n// import PropTypes from 'prop-types';\n// import { makeStyles } from '@material-ui/core/styles';\n// import AppBar from '@material-ui/core/AppBar';\n// import { Typography } from '@material-ui/core';\n// import Box from '@material-ui/core/Box';\n\n\nclass Need extends Component {\n  constructor(props) {\n    super(props);\n\n    const need = props.needsById[props.match.params.need_id];\n    this.state = {\n      searchResult: [],\n      location: props.client.address ? { lat: parseFloat(props.client.address.lat), lng: parseFloat(props.client.address.lng) }: torontoCoordinates,\n      recommendedServices: (need && need.recommended_services) || []\n    }\n\n    this.handleSearchService = this.handleSearchService.bind(this);\n    this.handleSearchRecommendedServices = this.handleSearchRecommendedServices.bind(this);\n  }\n\n  componentWillMount() {\n    const id = this.props.match.params.need_id\n    this.props.dispatch(fetchNeed(id, need => {\n      this.setState({ recommendedServices: need.recommended_services })\n    }));\n  }\n\n  handleSearchService(queryTerm, location) {\n    const url = serverHost + '/services/search?query_term=' + queryTerm + '&location=' + location;\n    fetch(url, {\n        method: 'get',\n        headers: new Headers({\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        }),\n      })\n      .then(response => response.json())\n      .then(json => {\n        this.setState({ searchResult: json.data, location: json.location })\n      }\n    );\n  }\n\n  handleSearchRecommendedServices(location, needId) {\n    const url = serverHost + '/needs/' + needId + '/recommended_services?location=' + location;\n    fetch(url, {\n        method: 'get',\n        headers: new Headers({\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        }),\n      })\n      .then(response => response.json())\n      .then(json => {\n        this.setState({ recommendedServices: json.data, location: json.location })\n      }\n    );\n  }\n\n  render() {\n    const p = this.props,\n          id = p.match.params.need_id,\n          need = p.needsById[id],\n          client = p.client\n\n    function DeletedLabel({ is_deleted }) {\n      if (is_deleted) {\n        return (\n          <h4>\n            <div style={{color: 'rgb(213,87,79)'}}>Deleted</div>\n          </h4>\n        );\n      } else {\n        return null;\n      }\n    }\n\n    function UrgentLabel({ is_urgent }) {\n      if (is_urgent) {\n        return (\n          <h4>\n            <div style={{color: 'rgb(213,87,79)'}}>Urgent</div>\n          </h4>\n        );\n      } else {\n        return null;\n      }\n    }\n\n    // function TabPanel(props) {\n    //   const { children, value, index, ...other } = props;\n    \n    //   return (\n    //     <div\n    //       role=\"tabpanel\"\n    //       hidden={value !== index}\n    //       id={`simple-tabpanel-${index}`}\n    //       aria-labelledby={`simple-tab-${index}`}\n    //       {...other}\n    //     >\n    //       {value === index && (\n    //         <Box p={3}>\n    //           <Typography>{children}</Typography>\n    //         </Box>\n    //       )}\n    //     </div>\n    //   );\n    // }\n    \n    // TabPanel.propTypes = {\n    //   children: PropTypes.node,\n    //   index: PropTypes.any.isRequired,\n    //   value: PropTypes.any.isRequired,\n    // };\n    \n    // function a11yProps(index) {\n    //   return {\n    //     id: `simple-tab-${index}`,\n    //     'aria-controls': `simple-tabpanel-${index}`,\n    //   };\n    // }\n    \n    // const useStyles = makeStyles((theme) => ({\n    //   root: {\n    //     flexGrow: 1,\n    //     backgroundColor: theme.palette.background.paper,\n    //   },\n    // }));\n    \n    // function SearchTabs() {\n    //   const classes = useStyles();\n    //   const [value, setValue] = React.useState(0);\n    \n    //   const handleChange = (event, newValue) => {\n    //     setValue(newValue);\n    //   };\n    \n    //   return (\n    //     <div className={classes.root}>\n    //       <AppBar position=\"static\">\n    //         <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\n    //           <Tab label=\"Recommended Services\" {...a11yProps(0)} />\n    //           <Tab label=\"Search for Services\" {...a11yProps(1)} />\n    //         </Tabs>\n    //       </AppBar>\n    //       <TabPanel value={value} index={0}>\n    //         recommended_services\n    //       </TabPanel>\n    //       <TabPanel value={value} index={1}>\n    //         Search for Services content\n    //       </TabPanel>\n    //     </div>\n    //   );\n    // }\n\n    // return (\n      \n    //   <Grid className=\"content\">\n    //     { need && need.loaded &&\n    //     <React.Fragment>\n    //       <Grid container>\n    //         <DeletedLabel is_deleted={need.is_deleted} />\n    //         <UrgentLabel is_urgent={need.is_urgent} />\n    //         <Table striped bordered condensed hover>\n    //           <tbody>\n    //             <TR\n    //               title=\"Type\"\n    //               value={need.type + need.matches.length}\n    //             />\n    //             <TR\n    //               title=\"Category\"\n    //               value={need.category}\n    //             />\n    //             <TR\n    //               title=\"Needed By\"\n    //               value={need.needed_by}\n    //             />\n    //             <TR\n    //               title=\"Description\"\n    //               value={need.description}\n    //             />\n    //             <TR\n    //               title=\"Condition\"\n    //               value={need.condition}\n    //             />\n    //             <TR\n    //               title=\"Status\"\n    //               value={need.status}\n    //             />\n    //             <TR\n    //               title=\"Languages\"\n    //               value={(need.languages || []).join(', ')}\n    //             />\n    //           </tbody>\n    //         </Table>\n    //       </Grid>\n    //       <div>\n    //       {(need.matches.length > 0) &&\n    //         <MatchedServices\n    //           clientId={client.id}\n    //           matches={need.matches}\n    //         />\n    //       }\n    //       </div>\n    //       <Grid container>\n    //         <SearchTabs />\n    //       </Grid>\n    //     </React.Fragment>\n    //     }\n    //   </Grid>\n    // )\n\n    return (\n      <Container className=\"content\">\n        { need && need.loaded &&\n          <Row>\n            <Col sm={12}>\n              <h3>Need</h3>\n            </Col>\n            <Col sm={12}>\n              <DeletedLabel is_deleted={need.is_deleted} />\n              <UrgentLabel is_urgent={need.is_urgent} />\n              <Table striped bordered condensed hover>\n                <tbody>\n                  <TR\n                    title=\"Type\"\n                    value={need.type}\n                  />\n                  <TR\n                    title=\"Category\"\n                    value={need.category}\n                  />\n                  <TR\n                    title=\"Needed By\"\n                    value={need.needed_by}\n                  />\n                  <TR\n                    title=\"Description\"\n                    value={need.description}\n                  />\n                  <TR\n                    title=\"Condition\"\n                    value={need.condition}\n                  />\n                  <TR\n                    title=\"Status\"\n                    value={need.status}\n                  />\n                  <TR\n                    title=\"Languages\"\n                    value={(need.languages || []).join(', ')}\n                  />\n                </tbody>\n              </Table>\n            </Col>\n            {(need.matches.length > 0) &&\n              <MatchedServices\n                clientId={client.id}\n                matches={need.matches}\n              />\n            }\n            <Col sm={12}>\n              <Tabs defaultActiveKey={1} id=\"serviceList\">\n                <Tab eventKey={1} title=\"RecommendedServices\">\n                  <ServiceSearchBar\n                    search={this.handleSearchRecommendedServices}\n                    location={client.address}\n                    needId={need.id}\n                  />\n                  {need.recommended_services && need.recommended_services.length > 0 &&\n                    <ServiceList\n                      need={need}\n                      services={this.state.recommendedServices}\n                      latlng={this.state.location}\n                    />\n                  }\n                </Tab>\n                <Tab eventKey={2} title=\"Search for Services\">\n                  <ServiceSearchBar\n                    search={this.handleSearchService}\n                    location={client.address}\n                    enableQueryTerm\n                  />\n                  {this.state.searchResult && this.state.searchResult.length > 0 &&\n                    <ServiceList\n                      need={need}\n                      services={this.state.searchResult}\n                      latlng={this.state.location}\n                    />\n                  }\n                </Tab>\n              </Tabs>\n            </Col>\n          </Row>\n        }\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    needsById: state.needs.byId,\n    client: state.clients.byId[state.needs.clientId]\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Need);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst PrivateRoute = ({ component: Component, isLoggedin, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      isLoggedin === true ? (\n        <Component {...props} />\n      ) : (\n        <Redirect to=\"/login-pane\" />\n      )\n    }\n  />\n);\n\nconst mapStateToProps = (state) => {\n  return {\n    isLoggedin: state.auth.isLoggedin\n  }\n}\n\nexport default connect(mapStateToProps)(PrivateRoute);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst AdminRoute = ({ component: Component, isLoggedin, isAdmin, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      (isLoggedin === true && isAdmin === true) ? (\n        <Component {...props} />\n      ) : (\n        <Redirect to=\"/login-pane\" />\n      )\n    }\n  />\n);\n\nconst mapStateToProps = (state) => {\n  return {\n    isAdmin: state.auth.currentUser && state.auth.currentUser.is_admin,\n    isLoggedin: state.auth.isLoggedin\n  }\n}\n\nexport default connect(mapStateToProps) (AdminRoute);\n","import React from 'react';\n// TODO: createProviderWithCSV  (CSV Upload)\nimport { fetchProviders, deleteProvider } from '../store/actions/providerActions.js'\n\nimport { formatLocation } from '../helpers/location_helpers'\nimport { formatPhoneNumber } from '../helpers/phone_number_helpers'\n\nimport { GenericPage, Link } from \"./shared\";\n\nconst TYPE = 'providers';\n\nconst formatProviderName = provider => {\n  const {profile} = provider;\n  if (provider.type === 'Individual')\n    return profile && profile.first_name + \" \" + profile.last_name;\n  else\n    return provider.company;\n};\n\n// mui-table column configurations\n// TODO: Add custom print function for address\nconst columnsWithoutOptions = [\n  {\n    name: 'id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'company',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'profile',\n    label: 'Name',\n    options: {\n      sort: true,\n      customBodyRender: (profile, {rowData}) => {\n        return (\n          <Link color to={`/${TYPE}/${rowData[0]}`}>\n            {formatProviderName({\n              company: rowData[1],\n              type: rowData[3],\n              profile,\n            })}\n          </Link>\n        );\n      }\n    }\n  },\n  {\n    name: 'type',\n    label: 'Type',\n    options: {\n      sort: true,\n    }\n  },\n  {\n    name: 'profile.email',\n    label: 'Email',\n  },\n  {\n    name: 'profile.primary_phone_number',\n    label: 'Phone Number',\n    options: {\n      customBodyRender: data => {\n        if (data)\n          return formatPhoneNumber(data);\n        return 'Not Provided';\n      },\n    },\n  },\n\n  {\n    name: 'main_address',\n    label: 'Address',\n    options: {\n      sort: false,\n      customBodyRender: data => {\n        if (data)\n          return formatLocation(data);\n        return 'Not Provided';\n      },\n    },\n  },\n];\n\nexport default function Providers() {\n\n  const generateMarkers = (data, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    const currPageProviders = data.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage);\n    return currPageProviders.map(provider => ({\n      position: {lat: Number(provider.main_address.lat), lng: Number(provider.main_address.lng)},\n      title: formatProviderName(provider),\n      link: `/${TYPE}/${provider.id}`,\n      content: provider.main_address && formatLocation(provider.main_address),\n    })).filter(provider => provider.position.lat && provider.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchProviders}\n      deleteItem={deleteProvider}\n      generateMarkers={generateMarkers}\n      nameFormatter={formatProviderName}\n    />\n  )\n}\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Button } from 'react-bootstrap';\n\nexport default class AddServicePrompt extends Component {\n  render() {\n    return(\n      <Row className=\"content\">\n        <Col sm={12}>\n          <h2>Would you like to add a service for this provider?</h2>\n          <hr />\n          <Link to=\"/service/new\">\n            <Button bsStyle=\"default\">\n              Yes\n            </Button>\n          </Link>{' '}\n          <Link to=\"/providers\">\n            <Button bsStyle=\"default\">\n              No\n            </Button>\n          </Link>\n        </Col>\n      </Row>\n    )\n  }\n}\n","import { recursiveAssign, isFieldEmpty, isAvailabilityEmpty, verifyAddressField,\n  verifyOtherAddressesFields, validateAddressPostalCode, validateContactFormat,\n  verifyEmail, verifyPhoneNumber} from \"./index\";\n\n\n// Verify the params filled in client form\nexport function provider_verify_form(form, steps) {\n  const format_messages = verifyFormFormat(form);\n  // const format_messages = {}\n  const required_field_msg = verifyRequiredField(form, steps);\n  return recursiveAssign(required_field_msg, format_messages);\n}\n\n/**\n * verify if every required field is filled in\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyRequiredField(form, steps) {\n  let result = {};\n  for (const step_page_fields of steps) {\n    // traverse each step page in steps\n    for (const [field, required] of Object.entries(step_page_fields)) {\n      if (required) {\n        if (field === 'availability' && isAvailabilityEmpty(form['operation_hours'])) {\n          result['availability'] = \"Please fill in at least one availability time slot!\";\n        } else if (field === 'main_address') {\n          result[field] = {};\n          verifyAddressField(form[field], result[field]);\n          if (Object.entries(result[field]).length === 0) {\n            delete result[field];\n          }\n        } else if (field === 'other_addresses') {\n          if (form[field].length === 0) {\n            // The user did not create an other address\n            result[field] = \"Please create at least one other address form!\"\n          } else {\n            // Some fields in other address are not filled in\n            result[field] = {};\n            verifyOtherAddressesFields(form[field], result[field])\n            if (Object.entries(result[field]).length === 0) {\n              delete result[field];\n            }\n          }\n        } else if (field === \"primary_contact\"){\n          verifyContactEmptiness(field, form, result, 'primary_contact')\n        } else if (field === 'secondary_contact'){\n          verifyContactEmptiness(field, form, result, 'secondary_contact')\n        } else {\n          verifyRequiredFieldByFormType(field, form, result)\n        }\n      }\n    }\n  }\n  return result\n}\n\n/**\n * verify format for various field\n * @param form\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyFormFormat(form) {\n  let result = {}\n  // Verify postal code\n  validateAddressPostalCode(form.main_address.postal_code, result, 'main_address')\n  if (form.other_addresses.length > 0){\n    result['other_addresses'] = {};\n    let i = 0;\n    for (const address of form.other_addresses){\n      validateAddressPostalCode(address.postal_code, result['other_addresses'], i);\n      i++;\n    }\n    if (Object.entries(result['other_addresses']).length === 0) {\n      delete result['other_addresses'];\n    }\n  }\n\n  if(form.primary_contact.profile){\n    if (!!!result['primary_contact']){\n      // if field secondary_contact doesn't exist, create one first\n      result['primary_contact'] = {};\n    }\n    validateContactFormat(form.primary_contact.profile, result['primary_contact'])\n    if (Object.entries(result['primary_contact']).length === 0) {\n      delete result['primary_contact'];\n    }\n  }\n\n  if(form.secondary_contact.profile){\n    if (!!!result['secondary_contact']){\n      // if field secondary_contact doesn't exist, create one first\n      result['secondary_contact'] = {};\n    }\n    validateContactFormat(form.secondary_contact.profile, result['secondary_contact'])\n    if (Object.entries(result['secondary_contact']).length === 0) {\n      delete result['secondary_contact'];\n    }\n  }\n\n  if(form.reference1_email.length !== 0){\n    verifyEmail(form.reference1_email, 'reference1_email', result);\n  }\n  if(form.reference2_email.length !== 0){\n    verifyEmail(form.reference2_email, 'reference2_email', result);\n  }\n  if(form.reference1_phone.length !== 0){\n    verifyPhoneNumber(form.reference1_phone, 'reference1_phone', result);\n  }\n  if(form.reference2_phone.length !== 0){\n    verifyPhoneNumber(form.reference2_phone, 'reference2_phone', result);\n  }\n\n  if(form.type === \"Individual\"){\n    //check fields in form.profile\n    if(form.profile.email.length !== 0){\n      verifyEmail(form.profile.email, 'email', result);\n    }\n    if(form.profile.primary_phone_number.length !== 0){\n      verifyPhoneNumber(form.profile.primary_phone_number, 'primary_phone_number', result);\n    }\n    if(form.profile.alt_phone_number.length !== 0){\n      verifyPhoneNumber(form.profile.alt_phone_number, 'alt_phone_number', result);\n    }\n  }\n  return result;\n}\n\n/**\n * Check the field in contact emptiness and generate error message for the corresponding field\n * @param field\n * @param form\n * @param result\n * @param contactType Can be either \"primary_contact\" or \"secondary_contact\"\n */\nfunction verifyContactEmptiness(field, form, result, contactType){\n  for (const field of Object.keys(form[contactType]['profile'])){\n    if(isFieldEmpty(form[contactType]['profile'][field])){\n      if (!!!result[contactType]){\n        // if field contactType doesn't exist, create one first\n        result[contactType] = {};\n      }\n      result[contactType][field] = \"This field is required\"\n    }\n  }\n}\n\n/**\n * Verify required fields that are depends on form type, form type can either be \"Individual\" or \"Organization\".\n * @param field\n * @param form\n * @param result\n */\nfunction verifyRequiredFieldByFormType(field, form, result){\n  const org_ignore_fields = [\"email\", \"primary_phone_number\", \"alt_phone_number\", \"profile\"]\n  const individual_ignore_fields = [\"email\", \"primary_phone_number\", \"alt_phone_number\"]\n  if (form.type === \"Individual\"){\n    if (field in form['profile'] && isFieldEmpty(form['profile'][field])){\n      result[field] = 'This field is required';\n    } else if (field in form && !individual_ignore_fields.includes(field) && isFieldEmpty(form[field])) {\n      result[field] = 'This field is required';\n    }\n  } else if (form.type === 'Organization'){\n    if (field in form && !org_ignore_fields.includes(field) && isFieldEmpty(form[field])) {\n      result[field] = 'This field is required';\n    }\n  }\n}","import React, { useState } from 'react';\nimport { operationHourMapping, defaultTimeSlot } from '../../helpers/operation_hour_helpers'\n\nimport { IconButton, Typography, Grid } from '@material-ui/core';\nimport { Delete, Add, ArrowRightAltOutlined as Arrow } from '@material-ui/icons';\nimport { FieldsWrapper } from \"./index\";\nimport SelectField from \"./fields/SelectField\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Alert } from '@material-ui/core';\n\nimport { format } from 'date-fns';\nimport GeneralField, {dateFormat} from './fields/GeneralField.js'\n\nconst useStyles = makeStyles(theme => ({\n  weekday: {\n    minWidth: 110,\n    alignSelf: 'start',\n    top: 28,\n    position: 'relative',\n  },\n  day: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  times: {\n    display: 'flex',\n    minWidth: 350,\n    alignItems: 'start',\n    flexDirection: 'column'\n  },\n  date: {\n    display: 'flex',\n    width: 170,\n  },\n  time: {\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'row'\n  },\n  select: {\n    minWidth: 120,\n    margin: 10,\n  },\n  button: {\n    position: 'relative',\n    top: 8,\n  },\n  arrow: {\n    paddingTop: 24,\n    marginLeft: 12,\n    marginRight: 12\n  }\n}));\n\nexport default function OperationHoursFieldGroup({operationHours, operationDates, errMsg}) {\n  const classes = useStyles();\n  // console.log(operationHours)\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(true);\n  const forceUpdate = () => update(!state);\n\n  const handleOperationHourOnClick = (e, weekDay, action) => {\n    if (action === 'add') {\n      operationHours[weekDay].push({...defaultTimeSlot})\n    } else {\n      operationHours[weekDay].pop()\n    }\n    forceUpdate();\n  };\n\n  const handleChange = (e, weekDay, slotIndex, id) => {\n    const value = e.target.value;\n    operationHours[weekDay][slotIndex][id] = value == null ? '' : value;\n    forceUpdate();\n  };\n\n  return (\n    <FieldsWrapper label=\"Availability\">\n\n      {operationDates.map(({start_date: startDate, end_date: endDate}, idx) => {\n        // default is today\n        if (startDate == null) startDate = operationDates[idx].start_date = format(new Date(), dateFormat);\n\n        return (\n          <Grid container direction=\"row\" alignItems=\"center\" key={idx}>\n            <GeneralField\n              label=\"Start Date\"\n              className={classes.date}\n              type=\"date\"\n              value={startDate}\n              onChange={e => operationDates[idx].start_date = e.target.value}\n            />\n            <Arrow className={classes.arrow}/>\n            <GeneralField\n              label=\"End Date\"\n              className={classes.date}\n              type=\"date\"\n              value={endDate}\n              onChange={e => operationDates[idx].end_date = e.target.value}\n              helperText={\"leave empty if not sure\"}\n            />\n            {idx === (operationDates.length - 1) &&\n            <IconButton\n              className={classes.button}\n              onClick={e => {\n                operationDates.push({start_date: null, end_date: null});\n                forceUpdate();\n              }}\n              size=\"large\">\n              <Add/>\n            </IconButton>\n            }\n            {idx !== 0 && idx === (operationDates.length - 1) &&\n            <IconButton\n              className={classes.button}\n              onClick={e => {\n                operationDates.splice(idx, 1);\n                forceUpdate();\n              }}\n              size=\"large\">\n              <Delete/>\n            </IconButton>\n            }\n          </Grid>\n        );\n      })}\n\n\n      {Object.entries(operationHours).map(([weekDay, timeSlots]) => {\n        return (\n          <div key={weekDay} className={classes.day}>\n            <Typography color=\"textSecondary\" variant=\"subtitle1\" className={classes.weekday}>\n              {weekDay}\n            </Typography>\n            <div className={classes.times}>\n              {timeSlots.map((time, idx) => {\n                return (\n                  <div key={idx} className={classes.time}>\n                    <SelectField\n                      className={classes.select}\n                      value={time.start_time}\n                      label=\"Start\"\n                      options={operationHourMapping}\n                      onChange={e => handleChange(e, weekDay, idx, 'start_time', 'change')}\n                      // InputLabelProps={{ shrink: true }}\n                      // variant=\"outlined\"\n                    />\n                    <SelectField\n                      className={classes.select}\n                      value={time.end_time}\n                      label=\"End\"\n                      options={operationHourMapping}\n                      onChange={e => handleChange(e, weekDay, idx, 'end_time')}\n                      // InputLabelProps={{ shrink: true }}\n                    />\n                    {idx === (timeSlots.length - 1) &&\n                    <IconButton\n                      className={classes.button}\n                      onClick={e => handleOperationHourOnClick(e, weekDay, 'add')}\n                      size=\"large\">\n                      <Add/>\n                    </IconButton>\n                    }\n                    {idx !== 0 && idx === (timeSlots.length - 1) &&\n                    <IconButton\n                      className={classes.button}\n                      onClick={e => handleOperationHourOnClick(e, weekDay, 'remove')}\n                      size=\"large\">\n                      <Delete/>\n                    </IconButton>\n                    }\n                  </div>\n                );\n              })}\n            </div>\n\n          </div>\n        );\n      })}\n      {errMsg &&\n      <Alert severity=\"error\">{errMsg}</Alert>}\n    </FieldsWrapper>\n  );\n}\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { providerFields, providerFormTypes, providerCategoryValue2Key } from '../../constants/provider_fields.js'\nimport { defaultProfileFields, defaultContactFields } from '../../constants/default_fields.js'\nimport {\n  operationHourObjectToList\n} from '../../helpers/operation_hour_helpers';\nimport { provider_verify_form } from \"../../helpers/provider_verify_form\";\n\n// redux\nimport { useHistory, useParams } from 'react-router';\nimport { useDispatch } from 'react-redux'\nimport { ACTION_SUCCESS } from '../../store/defaults.js';\nimport { createProvider, updateProvider } from '../../store/actions/providerActions.js'\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { fetchProviderFields } from '../../api/settingApi';\n\n// components\nimport FieldGroup from '../shared/FieldGroup';\nimport OperationHoursFieldGroup from '../shared/OperationHoursFieldGroup';\nimport LocationFieldGroup from '../shared/LocationFieldGroup';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { generateProviderFields } from \"../../constants/default_fields\";\nimport { FormStepper, Loading, FieldsWrapper, OtherLocationsFields } from \"../shared\";\nimport { Container } from \"@material-ui/core\";\nimport { fetchProvider } from \"../../store/actions/providerActions\";\nimport GeneralField from \"../shared/fields/GeneralField\";\n\nconst useStyles = makeStyles(theme => ({\n  content: {\n    width: '80%',\n    margin: 'auto',\n    paddingBottom: 10,\n  },\n  addressPaper: {\n    position: 'relative',\n    paddingLeft: 28,\n    paddingBottom: 20,\n    width: 380,\n  }\n}));\n\nexport default function ProviderForm() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {id, formType: category} = useParams();\n  const mode = id ? 'edit' : 'new';\n  const [state, setState] = useState({\n    loading: true,\n    category: category,\n    languageOptions: [],\n    eligibilities: [],\n    stepNames: [],\n    steps: [],\n    provider: null,\n    dispatchErrorMsg: [],\n    fieldErrorMsg: {},\n  });\n\n  /**\n   * Provider Type\n   * @type {('Organization', 'Individual')}\n   */\n  const providerType = useMemo(() => {\n    if (mode === 'new')\n      return category === 'organization' ? 'Organization' : 'Individual';\n    else {\n      if (state.provider) return state.provider.category === 'organization' ? 'Organization' : 'Individual';\n    }\n  }, [state.provider, category, mode]);\n\n  // DO NOT store form as state, it degrades the performance as all form got rendered every time user type anything.\n  // Instead, for large form like this page, store the form as a variable and pass it to child components (input)\n  const form = useMemo(() =>\n      generateProviderFields(providerType, state.category, state.provider),\n    [providerType, state.category, state.provider]);\n\n  const load = useCallback((category) => {\n    console.log(category);\n    const promises = [];\n    promises.push(dispatch(fetchOntologyCategories('languages'))\n      .then(data => setState(state => ({...state, languageOptions: data}))));\n    promises.push(fetchProviderFields()\n      .then(data => {\n        // no fields is available\n        if (data[category] == null || data[category].steps_order.length === 0\n          || Object.values(data[category].form_structure).length === 0) {\n          setState(state => ({...state, loading: true, errorMessage: ['No fields are available.']}));\n        } else {\n          setState(state => ({\n            ...state,\n            stepNames: data[category].steps_order,\n            steps: Object.values(data[category].form_structure)\n          }));\n        }\n      }));\n    Promise.all(promises).then(() => setState(state => ({...state, loading: false})));\n  }, [dispatch]);\n\n  useEffect(() => {\n    // load provider first if editing\n    if (id) {\n      dispatch(fetchProvider(id))\n        .then(({provider}) => {\n          const cat = provider.type === 'Organization' ? 'organization' : providerCategoryValue2Key[provider.category];\n          setState(state => ({...state, provider: provider, category: cat}));\n          load(cat);\n        });\n    } else {\n      load(category);\n    }\n  }, [dispatch, id, category, load]);\n\n  const handleFinish = () => {\n    const newForm = {...form};\n    newForm['operation_hours'] = operationHourObjectToList(newForm['operation_hours']);\n    if (newForm.status === '') newForm.status = undefined;\n    console.log(newForm);\n    // TODO: pretty error message\n    const fieldErrorMsg = provider_verify_form(form, state.steps);\n    if (Object.keys(fieldErrorMsg).length !== 0) {\n      setState(state => ({...state, fieldErrorMsg}));\n      return;\n    }\n    if (mode === 'edit') {\n      dispatch(\n        updateProvider(id, newForm, (status, err, id) => {\n          if (status === ACTION_SUCCESS) {\n            history.push(`/providers/${id}`)\n          } else {\n            setState(state => ({...state, errorMessage: [err.toString()]}));\n          }\n        })\n      );\n    } else {\n      dispatch(\n        createProvider(newForm, (status, err, id) => {\n          if (status === ACTION_SUCCESS) {\n            history.push('/providers/' + id)\n          } else {\n            setState(state => ({...state, errorMessage: [err.toString()]}));\n          }\n        }));\n\n    }\n  };\n\n  /**\n   * Handle changes in form\n   * @param name {string}\n   * @returns {Function}\n   */\n  const handleChange = useCallback(name => e => {\n    const {value} = e.target;\n    const splits = name.split('.');\n    if (splits.length === 1) {\n      form[name] = value;\n    } else {\n      let parent = form;\n      for (let i = 0; i < splits.length - 1; i++) {\n        parent = parent[splits[i]];\n      }\n      parent[splits[splits.length - 1]] = value || '';\n    }\n  }, [form]);\n\n  const getStepContent = idx => {\n    const step = state.steps[idx];\n    if (!step) return null;\n    return <div className={classes.content}>\n      {Object.entries(step).map(([field, required]) => {\n        // The field is not a normal field, i.e. questions\n        // const isQuestion = typeof required === 'object';\n\n        let options;\n        const errMsg = state.fieldErrorMsg[field];\n        if (field === 'languages') {\n          options = state.languageOptions;\n        }\n\n        if (field === 'main_address') {\n          return (\n            <FieldsWrapper label=\"Main address\" key={field}>\n              <LocationFieldGroup\n                address={form.main_address}\n                required={required}\n                errMsg={errMsg}\n              />\n            </FieldsWrapper>\n          );\n        } else if (field === 'other_addresses') {\n          return (\n            <OtherLocationsFields\n              key={field}\n              otherLocations={form.other_addresses}\n              required={required}\n              errMsg={errMsg}\n            />\n          );\n        } else if (field === 'primary_contact' || field === 'secondary_contact') {\n          return (\n            <FieldsWrapper key={field} label={providerFields[field].label}>\n              {Object.keys(defaultContactFields).map(contactField => {\n                return (\n                  <FieldGroup\n                    key={contactField}\n                    label={providerFields[contactField]['label']}\n                    type={providerFields[contactField]['type']}\n                    component={providerFields[contactField]['component']}\n                    value={form[field]['profile'][contactField]}\n                    onChange={handleChange(field + '.' + contactField)}\n                    error={errMsg == null? false : errMsg[contactField] != null}\n                    helperText={!!errMsg? errMsg[contactField] : null}\n                  />\n                )\n              })}\n            </FieldsWrapper>\n          )\n        } else if (field === 'availability') {\n          return (\n            <OperationHoursFieldGroup\n              key={field}\n              operationHours={form.operation_hours}\n              operationDates={form.operation_dates}\n              errMsg={errMsg}\n            />\n          )\n        } else if (field === 'notes') {\n          return (\n            <GeneralField\n              key={field}\n              label={providerFields[field].label}\n              value={form[field]}\n              onChange={handleChange(field)}\n              required={required}\n              multiline\n              variant=\"outlined\"\n              fullWidth\n              error={errMsg != null}\n              helperText={errMsg}\n            />\n          )\n        } else {\n          const isProfile = Object.keys(defaultProfileFields).includes(field);\n          // only individual has field \"profile\"\n          if (isProfile && providerType !== \"Individual\") return null;\n          let fieldProps = providerFields[field];\n          if (fieldProps == null) fieldProps = {};\n          return (\n            <FieldGroup\n              key={field}\n              label={providerFields[field].label}\n              type={providerFields[field].type}\n              component={providerFields[field].component}\n              value={isProfile ? form.profile[field] : form[field]}\n              onChange={handleChange(isProfile ? 'profile.' + field : field)}\n              required={required}\n              options={providerFields[field].options || options}\n              error={errMsg != null}\n              helperText={errMsg}\n            />\n          );\n        }\n      })}\n    </div>\n  };\n\n  if (state.loading)\n    return <Loading message={`Loading...`}/>;\n\n  console.log(state.category);\n  return (\n    <Container>\n      <FormStepper\n        getStepContent={getStepContent}\n        handleFinish={handleFinish}\n        stepNames={state.stepNames}\n        error={state.dispatchErrorMsg}\n        title={(mode === 'new' ? 'Create ' : 'Edit ') + providerFormTypes[state.category]}\n      />\n    </Container>\n  );\n}\n","import React from 'react';\nimport _ from 'lodash';\n\nimport TR from '../../shared/TR';\nimport { defaultContactFields } from '../../../constants/default_fields.js'\nimport { formatLocation } from '../../../helpers/location_helpers';\nimport { formatPhoneNumber } from '../../../helpers/phone_number_helpers';\nimport { operationHourListToObject, OperationHourTable }\n  from '../../../helpers/operation_hour_helpers';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport useProfileTableStyles from '../../../stylesheets/profile-table'\n\nexport default function ProviderInfoTable({ step, provider, infoFields, providerFields }) {\n  let rowTitle, rowValue;\n  const infoRows = _.map(infoFields, (data, fieldId) => {\n    if (data.type === 'field') {\n      rowTitle = providerFields[fieldId].label;\n      switch(fieldId) {\n        case 'first_name':\n        case 'middle_name':\n        case 'last_name':\n        case 'preferred_name':\n        case 'gender':\n        case 'birth_date':\n        case 'email':\n          if (provider.type === 'Individual') {\n            rowValue = provider.profile[fieldId];\n          } else {\n            rowValue = provider[fieldId];\n          }\n          break;\n        case 'primary_phone_number':\n        case 'alt_phone_number':\n          if (provider.type === 'Individual') {\n            rowValue = provider.profile[fieldId] ? formatPhoneNumber(provider.profile[fieldId]) : 'None provided';\n          } else {\n            rowValue = provider[fieldId] ? formatPhoneNumber(provider[fieldId]) : 'None provided';\n          }\n          break;\n        case \"main_address\":\n          rowValue = provider[fieldId] ? formatLocation(provider[fieldId]) : \"None provided\";\n          break;\n        case \"other_addresses\":\n          if (provider[fieldId]) {\n            rowValue = _.map(provider[fieldId], (address, index) =>\n              <p key={index}>{formatLocation(address)}</p>)\n          }\n          else {\n            rowValue = null;\n          }\n          break;\n        case \"languages\":\n          rowValue = (provider[fieldId] || []).join(', ')\n          break;\n        case \"availability\":\n          const operation_hours = operationHourListToObject(provider.operation_hours)\n          rowValue = <OperationHourTable operationHourObj={operation_hours} />\n          break;\n        case 'primary_contact':\n        case 'secondary_contact':\n          if (provider[fieldId]) {\n            rowValue = _.map(_.keys(defaultContactFields), contactField => {\n              if (provider[fieldId]['profile'][contactField]) {\n                return (\n                  <li key={contactField}>\n                    {`${providerFields[contactField]['label']}: ${provider[fieldId]['profile'][contactField]}`}\n                  </li>\n                )\n              }\n            })\n          }\n          else {\n            rowValue = null;\n          }\n          break;\n\n        default:\n          rowValue = provider[fieldId];\n      }\n    }\n    else if (data.type === 'question') {\n      rowTitle = fieldId;\n      const response = _.find(provider.responses, response => {\n        return response.question_id === data.id.toString()\n      })\n      if (response) {\n        rowValue = response.text\n      }\n      else {\n        rowValue = null;\n      }\n    }\n    return (\n      <TR\n        key={fieldId}\n        title={rowTitle}\n        value={rowValue}\n      />\n    );\n  })\n\n  const classes = useProfileTableStyles()\n  return (\n    <TableContainer className={classes.table} component={Paper}>\n      <Table aria-label=\"Profile table\">\n        <TableHead>\n          <TableRow >\n            <TableCell className={classes.title}>{step}</TableCell>\n            <TableCell className={classes.title2}></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {infoRows}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import React, { Component } from 'react';\n\nimport { Button, FormGroup, FormControl, FormLabel, Col } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { rateProvider } from '../../store/actions/providerActions.js';\nimport StarRatingComponent from 'react-star-rating-component';\n\nclass ProviderRatingForm extends Component {\n  constructor(props) {\n\t\tsuper(props);\n    this.handleStarSelection=this.handleStarSelection.bind(this);\n\t\tthis.handleCommentChange=this.handleCommentChange.bind(this);\n    this.handleSubmit=this.handleSubmit.bind(this);\n    this.handleTextRating=this.handleTextRating.bind(this);\n    const id = this.props.match.params.id\n    this.state = {\n      id: id,\n\t\t\trating: 0,\n      comment: ''\n    }\n  }\n\n  handleStarSelection(nextValue, name) {\n    this.setState({rating: nextValue});\n  }\n\n  handleTextRating(e) {\n    this.setState({rating: e.target.value});\n  }\n  handleCommentChange(e) {\n    this.setState({comment: e.target.value});\n  }\n  handleSubmit(e) {\n    const id = this.props.match.params.id\n    this.props.dispatch(rateProvider(id, this.state));\n    this.props.history.push('/provider/' + id);\n  }\n\n  render() {\n    return (\n      <div className=\"content\">\n        <Col sm={9}>\n          <h3> Rate Provider </h3>\n          <hr/>\n        </Col>\n\n        <FormGroup controlId=\"rating\">\n          <Col componentClass={FormLabel} sm={5}>\n            Rate this provider (0-5)\n          </Col>\n          <Col sm={9}>\n            <FormControl\n              type=\"text\"\n              placeholder=\"A number between 0 and 5\"\n              value={this.state.rating}\n              onChange={this.handleTextRating}\n            />\n          </Col>\n        </FormGroup>\n        <Col sm={9}>\n          <StarRatingComponent\n            name=\"rating\"\n            starCount={5}\n            value={this.state.rating}\n            onStarClick={this.handleStarSelection}\n          />\n        </Col>\n        <Col sm={9}>\n          <hr/>\n          <FormGroup controlId=\"comments\">\n            <FormLabel>Comments</FormLabel>\n            <FormControl\n              componentClass=\"textarea\"\n              placeholder=\"Comments about this provider...\"\n              onChange={this.handleCommentChange}\n            />\n          </FormGroup>\n        </Col>\n        <Col sm={9}>\n          <Button type=\"submit\" onClick={this.handleSubmit}> Submit </Button>\n        </Col>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    providersById: state.providers.byId || {},\n    providerLoaded: state.providers.indexLoaded\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ProviderRatingForm);\n","import React from 'react'\nimport { Link } from './shared';\nimport { fetchServices, deleteService } from '../store/actions/serviceActions.js'\nimport { GenericPage } from \"./shared\";\n\nconst TYPE = 'services';\n\nconst formatProvider = ({provider}) => {\n  return provider.type === 'Organization' ? provider.company\n    : (provider.profile ? `${provider.profile.first_name} ${provider.profile.last_name}` : 'Not provided')\n};\n\nconst columnsWithoutOptions = [\n  {\n    name: 'id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'name',\n    label: 'Name',\n    options: {\n      sort: true,\n      customBodyRender: (data, {rowData}) => {\n        return <Link color to={`/${TYPE}/` + rowData[0]}>{data}</Link>\n      }\n    }\n  },\n  {\n    name: 'provider',\n    label: 'Provider',\n    options: {\n      sort: true,\n      customBodyRender: provider => {\n        return (\n          <Link color to={`/${TYPE}/${provider.id}`}>\n            {formatProvider({provider})}\n          </Link>\n        );\n      }\n    }\n  },\n  {\n    name: 'desc',\n    label: 'Description',\n  },\n  {\n    name: 'category',\n    label: 'Category'\n  }\n];\n\nexport default function Services() {\n\n  const nameFormatter = service => service.name;\n\n  const generateMarkers = (data, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    const currPageServices = data.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage);\n    return currPageServices.map(service => ({\n      position: {lat: Number(service.location.lat), lng: Number(service.location.lng)},\n      title: service.name,\n      link: `/${TYPE}/${service.id}`,\n      content: service.desc,\n    })).filter(service => service.position.lat && service.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchServices}\n      deleteItem={deleteService}\n      generateMarkers={generateMarkers}\n      nameFormatter={nameFormatter}\n    />\n  )\n}\n","export function formatEligibilityConditions(condType, condValue) {\n  if (condValue instanceof Array) {\n    return `${condType}: ${condValue.join(', ')}`\n  }\n  else {\n    return `${condType}: ${condValue}`\n  }\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport TR from '../shared/TR'\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchService } from '../../store/actions/serviceActions.js'\n\nimport { formatLocation } from '../../helpers/location_helpers'\nimport { formatEligibilityConditions } from '../../helpers/eligibility_condition_helpers'\n\nimport { Table, Button } from 'react-bootstrap';\nimport { Print } from \"@material-ui/icons\";\n\nclass Service extends Component {\n  componentWillMount() {\n    const id = this.props.match.params.id\n    this.props.dispatch(fetchService(id));\n  }\n\n  render() {\n    const p = this.props,\n          id = p.match.params.id,\n          service = p.servicesById[id];\n\n    return (\n      <div className=\"content client\">\n        <h3>Service Profile</h3>\n        <Link to={`/services/${service.id}/edit`}>\n          <Button bsStyle=\"primary\">\n            Edit\n          </Button>\n        </Link>{' '}\n        <Button bsStyle=\"primary\" onClick={() => window.print()} className=\"print-button\">\n          <Print fontSize=\"small\"/>\n        </Button>\n\n        { service && service.servicesLoaded &&\n          <Table striped bordered condensed hover>\n            <tbody>\n              <TR\n                title=\"Name\"\n                value={service.name}\n              />\n\n              <TR\n                title=\"Type\"\n                value={service.type}\n              />\n              <TR\n                title=\"Description\"\n                value={service.desc}\n              />\n              <TR\n                title=\"Category\"\n                value={service.category}\n              />\n              <TR\n                title=\"Eligibility\"\n                value={service.eligibility}\n              />\n              <TR\n                title=\"Available from\"\n                value={service.available_from}\n              />\n              <TR\n                title=\"Available until\"\n                value={service.available_to}\n              />\n              <TR\n                title=\"Languages\"\n                value={(service.languages || []).join(', ')}\n              />\n              <TR\n                title=\"Max Capacity\"\n                value={service.max_capacity}\n              />\n              <TR\n                title=\"Current capacity\"\n                value={service.current_capacity}\n              />\n              <TR\n                title=\"Frequency\"\n                value={service.frequency}\n              />\n              <TR\n                title=\"Billable\"\n                value={service.billable}\n              />\n              <TR\n                title=\"Price\"\n                value={service.price}\n              />\n              <TR\n                title=\"Method of delivery\"\n                value={service.method_of_delivery}\n              />\n              <TR\n                title=\"Method of registration\"\n                value={service.method_of_registration}\n              />\n              <TR\n                title=\"Registration\"\n                value={service.registration}\n              />\n              <TR\n                title=\"Contact Person Email\"\n                value={service.email}\n              />\n              <TR\n                title=\"Contact Person Phone\"\n                value={service.primary_phone_number}\n              />\n              <TR\n                title=\"Secondary Phone\"\n                value={service.alt_phone_number}\n              />\n              <tr>\n                <td><b>Location</b></td>\n                <td>{formatLocation(service.location)}</td>\n              </tr>\n\n              {_.keys(_.omit(service.eligibility_conditions, ['lower_age_limit', 'upper_age_limit'])) > 0 &&\n                <tr>\n                  <td><b>Eligibility Conditions</b></td>\n                  <td>\n                    {_.map(\n                        _.omit(service.eligibility_conditions, ['lower_age_limit', 'upper_age_limit']\n                      ), (value, type) => {\n                      return (\n                        <li key={type}>\n                          {formatEligibilityConditions(type, value)}\n                        </li>\n                      );\n                    })}\n                    {service.eligibility_conditions.lower_age_limit &&\n                      <li>\n                        {formatEligibilityConditions('Age greater than' , service.eligibility_conditions.lower_age_limit)}\n                      </li>\n                    }\n                    {service.eligibility_conditions.upper_age_limit &&\n                      <li>\n                        {formatEligibilityConditions('Age less than' , service.eligibility_conditions.upper_age_limit)}\n                      </li>\n                    }\n                  </td>\n                </tr>\n              }\n              <TR\n                title=\"Public?\"\n                value={service.is_public ? 'Yes': 'No'}\n              />\n              <TR\n                title=\"Share with\"\n                value={(service.share_with || []).join(', ')}\n              />\n              <TR\n                title=\"Notes\"\n                value={service.notes}\n              />\n              <tr>\n                <td><b>Provider</b></td>\n                <td>\n                  <Link to={`/provider/${service.provider.id}`}>\n                    {(service.provider.type === 'Organization') ?\n                      service.provider.company\n                    :\n                      `${service.provider.profile.first_name} ${service.provider.profile.last_name}`\n                    }\n                  </Link>\n                </td>\n              </tr>\n            </tbody>\n          </Table>\n        }\n\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    servicesById: state.services.byId,\n    serviceLoaded: state.services.indexLoaded\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Service);\n","import { statusInCanadaOptions, genderOptions, educationLevelOptions, countryOptions, languageOptions, provinceOptions, incomeSourceOptions, maritalStatusOptions} from '../../store/defaults';\nimport React, { useEffect, useState, useMemo, useCallback, Comopnent } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { fetchEligibilities } from '../../api/eligibilityApi';\nimport { serverHost } from '../../store/defaults';\n\n\n// export default function  something() {\n//   // const dispatch = useDispatch();\n//   const [state, setState] = useState({\n//     loading: true,\n//     languageOptions: [],\n//     all_ngo_conditions: [],\n//     stepNames: [],\n//     steps: [],\n//     client: null,\n//     dispatchErrorMsg: [],\n//     fieldErrorMsg: {},\n//   });\n  \n//   // useEffect(() => {\n//     const promises = [];\n//     promises.push(fetchOntologyCategories('languages')\n//       .then(data => setState(state => ({...state, languageOptions: data}))));\n//     promises.push(fetchEligibilities()\n//       .then(data => {\n//         setState(state => ({...state, all_ngo_conditions: data.map(data => data.title)}))\n//       }));\n//     Promise.all(promises).then(() => setState(state => ({...state, loading: false})));\n  \n//     // }, [dispatch]);\n\n//   return promises\n// }\n// const appRes = something()\n// console.log(\"conditionConfig:\", appRes)\n\n\n\n\n// const ontologyCategories = fetchOntologyCategories('languages')\n// console.log(\"conditionConfig: \", ontologyCategories)\n\n\n// const ngoEligibilities = fetchEligibilities('languages')\n// console.log(\"conditionConfig: \", all_ngo_conditions)\n// const all_ngo_conditions= ngoEligibilities.map(data => data.title)\n\n// const ontologyRes = retrieveOnotologyStoreConditionConfig()\n// console.log(\"conditionConfig\", ontologyRes)\n\n\n// const data = await fetchEligibilities().then(data => {return data=> data.title})\n// For reference\nconst conditions = [\"age\", \"alt_phone_number\", \"apt_number\", \"arrival_date\", \"birth_date\", \"city\", \"completed_education_level\",\n  \"country_of_last_residence\", \"country_of_origin\", \"current_education_level\", \"email\", \"first_language\", \"first_name\", \"gender\",\n  \"has_children\", \"immigration_doc_number\", \"income_source\", \"landing_date\", \"last_name\", \"lat\", \"lng\", \"marital_status\", \"middle_name\",\n  \"ngo_conditions\", \"num_of_children\", \"num_of_dependants\", \"other_languages\", \"phone_numbers\", \"postal_code\", \"pr_number\", \"preferred_name\",\n  \"primary_phone_number\", \"province\", \"service_set\", \"status_in_canada\", \"street_address\"]\n\nconst compareOps = ['<', '>', '<=', '>=', '=='];\nconst IN = ['in'];\nconst IS = ['=='];\n\nexport const TYPE = {\n  NUMBER: 1,\n  DATE: 2,  // use case? not implemented.\n  STRING: 3,\n  BOOLEAN: 4,  // use case? not implemented.\n  LIST: 5\n};\n\nexport const defaultConfig = {\n  operators: [...compareOps, ...IN],\n  type: TYPE.STRING\n};\n\nexport const eligibilityConditionHideItems = [\"alt_phone_number\", \"apt_number\", \"city\", \"landing_date\", \"last_name\", \"middle_name\",\n  \"phone_numbers\", \"postal_code\", \"pr_number\", \"preferred_name\", \"primary_phone_number\", \"service_set\", \"street_address\"\n]\n\nexport const eligibilityConditionConfigs = {\n  // NOTE: In alphabetic order\n  age: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  arrival_date: {\n    operators: compareOps,\n    type: TYPE.DATE\n  },\n  birth_date: {\n    operators: compareOps,\n    type: TYPE.DATE\n  },\n  completed_education_level: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: educationLevelOptions,\n    multipleSelect: true\n  },\n  // Where to retrieve coutry options?\n  country_of_last_residence: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: countryOptions,\n    multipleSelect: true\n  }, \n  country_of_origin: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: countryOptions,\n    multipleSelect: true\n  },\n  current_education_level: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: educationLevelOptions,\n    multipleSelect: true\n  },\n  // Where to retrieve language options, Ontology or default.js?\n  first_language: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: [],\n    multipleSelect: true\n  },\n  gender: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: genderOptions,\n    multipleSelect: true,\n  },\n  has_children: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: ['True', 'False'],\n    multipleSelect: true\n  },\n  income_source: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: incomeSourceOptions,\n    multipleSelect: true\n  },\n  landing_date: {\n    operators: compareOps,\n    type: TYPE.DATE\n  },\n  lat: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  lng: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  marital_status: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: maritalStatusOptions,\n    multipleSelect: true\n  },\n  // Get NGO condition\n  ngo_conditions: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: ['example'],\n    multipleSelect: true\n  },\n  num_of_children: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  num_of_dependants: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  other_languages: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: languageOptions,\n    multipleSelect: true\n  },\n  province: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: provinceOptions,\n    multipleSelect: true\n  },\n  status_in_canada: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: statusInCanadaOptions,  // only for list data type\n    multipleSelect: true  // is multiple select?\n  }\n};\n\n\nexport const nameFunc = () => {\n  const languagesUrl = serverHost + '/categories/languages/';\n  const promises = [];\n  promises.push(fetch(languagesUrl)\n    .then(response => response.json())\n    .then(data => {eligibilityConditionConfigs.first_language.options = data.categories;\n      eligibilityConditionConfigs.other_languages.options = data.categories}));\n  promises.push(fetchEligibilities()\n    .then(data => eligibilityConditionConfigs.ngo_conditions.options= data.map(data => data.title)));\n  Promise.all(promises)\n}\n// nameFunc()\n\n","import React, { useEffect, useState } from 'react';\nimport { Paper, TextField, Grid, Button, IconButton } from \"@material-ui/core\";\nimport SelectField from \"../shared/fields/SelectField\";\nimport { Add as AddIcon, Delete as DeleteIcon } from '@material-ui/icons'\n\nimport { fetchFormulaFields } from \"../../api/formulaApi\";\nimport { escapeList, escapeString, titleCase, unescapeList, unescapeString } from \"../../helpers/formulaHelpers\";\nimport { eligibilityConditionConfigs, TYPE, defaultConfig, eligibilityConditionHideItems } from \"./conditionConfig\";\nimport { educationLevelOptions } from \"../../store/defaults\";\nimport MultiSelectField from \"../shared/fields/MultiSelectField\";\n\n\nexport function CustomEligibilityField({value, handleChange, fields, onDelete}) {\n\n  const [state, setState] = useState({\n    operator: value[1] || '', // duplicate state\n    ...(eligibilityConditionConfigs[value[0]] || defaultConfig)\n  });\n\n  const handleLeftOperandChange = e => {\n    const leftOperand = e.target.value;\n    const changes = {leftOperand, rightOperand: ''};\n\n    const config = eligibilityConditionConfigs[leftOperand] || defaultConfig;\n\n    const ops = config.operators;\n    if (!ops.includes(value[1])) {\n      changes.operator = ops[0];\n      setState(state => ({...state, operator: ops[0], ...config}));\n    } else {\n      setState(state => ({...state, ...config}));\n    }\n    handleChange(changes);\n    value[2] = '';\n  };\n  let rightOperand;\n  if (state.type === TYPE.STRING) {\n    rightOperand =\n      <TextField\n        style={{marginLeft: 20}}\n        label=\"Right Operand\"\n        defaultValue={unescapeString(value[2])}\n        onChange={e => handleChange({rightOperand: escapeString(e.target.value)})}/>;\n  } else if (state.type === TYPE.NUMBER) {\n    rightOperand =\n      <TextField\n        style={{marginLeft: 20}}\n        label=\"Right Operand\"\n        defaultValue={typeof + value[2] === \"number\" ? value[2] : 0}\n        onChange={e => handleChange({rightOperand: e.target.value})}/>;\n  } else if (state.type === TYPE.LIST && state.multipleSelect) {\n    rightOperand =\n      <MultiSelectField\n        label=\"Right Operand\"\n        options={state.options}\n        value={unescapeList(value[2]) || []} // warning: this is a list\n        onChange={e => handleChange({rightOperand: escapeList(e.target.value)})}\n        noDefaultStyle\n      />\n  } else if (state.type === TYPE.LIST && !state.multipleSelect) {\n    rightOperand =\n      <SelectField\n        style={{marginRight: 20}}\n        noEmpty\n        noDefaultStyle\n        options={state.options}\n        value={value[2]} // warning: this is a string\n        label=\"Right Operand\"\n        onChange={e => handleChange({rightOperand: e.target.value})}/>\n  } else {\n    rightOperand = 'Not implemented';\n  }\n\n  return (\n    <div style={{padding: 20}}>\n      <Grid container direction=\"row\" spacing={1}>\n        <SelectField\n          style={{marginRight: 20}}\n          noEmpty\n          noDefaultStyle\n          options={fields}\n          value={value[0]}\n          label=\"Field\"\n          onChange={handleLeftOperandChange}/>\n        <SelectField\n          style={{width: 60}}\n          noEmpty\n          noDefaultStyle\n          options={state.operators}\n          label=\"Operator\"\n          value={state.operator}\n          controlled\n          onChange={e => {\n            const operator = e.target.value;\n            setState(state => ({...state, operator}));\n            handleChange({operator});\n          }}/>\n        {rightOperand}\n        <IconButton onClick={onDelete} size=\"large\">\n          <DeleteIcon/>\n        </IconButton>\n      </Grid>\n    </div>\n  );\n}\n\nexport default function EligibilityCondition({value: originalValue, formValChange}) {\n  /**\n   * @type {[{condition_clauses: [field_name, clauses: [{left_operand, right_operand, operator}]]}]}\n   **/\n  const [value, setValue] = useState(originalValue);\n\n  const [fields, setFields] = useState({});\n\n  useEffect(() => {\n    fetchFormulaFields().then(({fields, dynamic_fields, functions}) => {\n      const fieldsObj = {};\n      console.log(fields)\n      fields.forEach(field => {\n        if (!eligibilityConditionHideItems.includes(field))\n          fieldsObj[field] = titleCase(field)\n      });\n      setFields(fieldsObj);\n    })\n  }, []);\n\n  const handleFieldChange = clause => ({leftOperand, operator, rightOperand}) => {\n    clause[0] = leftOperand || clause[0];\n    clause[1] = operator === undefined ? clause[1] : operator;\n    clause[2] = rightOperand || clause[2];\n  };\n\n  const handleAddField = idx => () => {\n    setValue(value => {\n      value[idx].push(['age', '==', '']);\n      formValChange({target: {value}});\n      return [...value];\n    })\n  };\n\n  const handleAddCondition = () => {\n    setValue(value => {\n      value.push([]);\n      formValChange({target: {value}});\n      return [...value];\n    })\n  };\n\n  const handleRemoveField = (conditionIdx, fieldIdx) => () => {\n    setValue(value => {\n      value[conditionIdx].splice(fieldIdx, 1);\n      formValChange({target: {value}});\n      return [...value]\n    })\n  };\n\n  const handleRemoveCondition = (conditionIdx) => () => {\n    setValue(value => {\n      value.splice(conditionIdx, 1);\n      formValChange({target: {value}});\n      return [...value]\n    })\n  };\n\n  const conditionComponents = [];\n  for (let conditionIdx = 0; conditionIdx < value.length; conditionIdx++) {\n    const condition = value[conditionIdx];\n    const field_components = [];\n    conditionComponents.push(field_components);\n\n    for (let fieldIdx = 0; fieldIdx < condition.length; fieldIdx++) {\n      const [leftOperand, operator, rightOperand] = condition[fieldIdx];\n      field_components.push(\n        <Grid item xs={12} key={fieldIdx}>\n          <CustomEligibilityField\n            value={condition[fieldIdx]}\n            handleChange={handleFieldChange(condition[fieldIdx])}\n            fields={fields}\n            onDelete={handleRemoveField(conditionIdx, fieldIdx)}\n          />\n        </Grid>\n      )\n\n    }\n  }\n\n  return (\n    <div>\n      {conditionComponents.map((field_components, idx) =>\n        <Paper variant=\"outlined\" key={idx}>\n          <Grid container>\n            {field_components}\n            <Grid item xs={12}>\n              <Button\n                onClick={handleRemoveCondition(idx)}\n                style={{margin: 12, float: 'right'}}\n                variant=\"contained\"\n                startIcon={<DeleteIcon/>}>\n                Remove\n              </Button>\n              <Button\n                style={{margin: 12, float: 'right'}}\n                variant=\"contained\"\n                startIcon={<AddIcon/>}\n                onClick={handleAddField(idx)}>\n                And\n              </Button>\n            </Grid>\n          </Grid>\n        </Paper>)}\n      <Button\n        style={{margin: 12}}\n        variant=\"contained\"\n        onClick={handleAddCondition}\n        startIcon={<AddIcon/>}>\n        OR\n      </Button>\n    </div>\n  );\n}\n","import { getJson } from \"./index\";\n\nexport function fetchFormulaFields() {\n  return getJson('/formula/fields/');\n}\n\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { Link } from '../shared';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport {\n  statusInCanadaOptions, educationLevelOptions,\n  serviceSharedWithOptions, serviceTypeOptions\n} from '../../store/defaults'\nimport GeneralField from '../shared/fields/GeneralField'\nimport SelectField from '../shared/fields/SelectField'\nimport RadioField from '../shared/fields/RadioField'\nimport MultiSelectField from '../shared/fields/MultiSelectField';\nimport { formatLocation } from '../../helpers/location_helpers.js';\nimport { Validator } from \"../../helpers/index.js\";\n\n// redux\nimport { connect } from 'react-redux'\nimport { createService, updateService } from '../../store/actions/serviceActions.js'\nimport { fetchProviders } from '../../store/actions/providerActions.js';\nimport { ACTION_SUCCESS } from '../../store/defaults.js';\n\nimport { Alert } from '@material-ui/core';\nimport { Container, Divider, Typography, Button } from \"@material-ui/core\";\nimport withStyles from '@material-ui/styles/withStyles';\nimport LocationFieldGroup from \"../shared/LocationFieldGroup\";\nimport EligibilityCondition from './EligibilityCondition'\nimport { transformToBackendType, transformToFrontendType } from '../../helpers/formulaHelpers';\n\nconst styles = {\n  root: {\n    width: '80%'\n  },\n  divider: {\n    margin: '20px 0',\n  },\n  errorText: {\n    color: '#e41919'\n  },\n  title: {\n    fontWeight: 600,\n  }\n};\n\nclass ServiceForm extends Component {\n  constructor(props) {\n    super(props);\n    let service = {};\n    if (this.props.match.params.id) {\n      service = this.props.servicesById[this.props.match.params.id];\n    }\n\n    this.state = {\n      errors: {},\n      serviceId: service.id,\n      mode: (service.id) ? 'edit' : 'new',\n      form: {\n        name: service.name || '',\n        type: service.type || '',\n        desc: service.desc || '',\n        category: service.category || '',\n        available_from: service.available_from || '',\n        available_to: service.available_to || '',\n        languages: service.languages || [],\n        max_capacity: service.max_capacity || '',\n        current_capacity: service.current_capacity || 0,\n        frequency: service.frequency || '',\n        billable: service.billable || 'No',\n        price: service.price || '',\n        method_of_delivery: service.method_of_delivery || '',\n        method_of_registration: service.method_of_registration || '',\n        registration: service.registration || '',\n        email: service.email || '',\n        primary_phone_number: service.primary_phone_number || '',\n        alt_phone_number: service.alt_phone_number || '',\n        location: Object.assign({\n          id: '',\n          street_address: '',\n          apt_number: '',\n          city: '',\n          province: '',\n          postal_code: ''\n        }, service.location),\n        location_same_as_provider: service.location_same_as_provider || false,\n        share_with: service.share_with || [],\n        notes: service.notes || '',\n        eligibility_conditions: Object.assign({\n          'upper_age_limit': '',\n          'lower_age_limit': '',\n          'immigration_status': [],\n          'current_education_level': [],\n          'completed_education_level': []\n        }, service.eligibility_conditions),\n        provider_id: (service.provider && service.provider.id) || '',\n        is_public: service.is_public || false,\n        /**\n         * @type {[{condition_clauses: [field_name, clauses: [{left_operand, right_operand, operator}]]}]}\n         **/\n        eligibility_criteria: transformToFrontendType(service.eligibility_criteria) || []\n      }\n    };\n\n    this.props.dispatch(fetchOntologyCategories('services'));\n    this.props.dispatch(fetchOntologyCategories('languages'));\n    this.props.dispatch(fetchProviders());\n  }\n\n  formValChange = (name, render) => e => {\n    const {value} = e.target;\n    const splits = name.split('.');\n    const {form} = this.state;\n    if (splits.length === 1) {\n      form[name] = value;\n    } else {\n      let parent = this.state.form;\n      for (let i = 0; i < splits.length - 1; i++) {\n        parent = parent[splits[i]];\n      }\n      parent[splits[splits.length - 1]] = value || '';\n    }\n    if (render) this.setState(state => ({form: {...state.form}}));\n  };\n\n  submit = () => {\n    console.log(this.state.form);\n    let form = Object.assign({}, this.state.form);\n    form['eligibility_conditions']['age'] = [\n      form['eligibility_conditions']['lower_age_limit'] || null,\n      form['eligibility_conditions']['upper_age_limit'] || null\n    ];\n    delete form['eligibility_conditions']['lower_age_limit'];\n    delete form['eligibility_conditions']['upper_age_limit'];\n\n    form.eligibility_criteria = transformToBackendType(form.eligibility_criteria);\n\n    if (this.validateForm()) {\n      if (this.state.mode === 'edit') {\n        this.props.dispatch(\n          updateService(this.state.serviceId, form, (status, err, serviceId) => {\n            if (status === ACTION_SUCCESS) {\n              this.props.history.push('/services');\n              this.forceUpdate()\n            }\n          }));\n      } else {\n        this.props.dispatch(\n          createService(this.state.form, (status, err, serviceId) => {\n            this.props.history.push('/services');\n            this.forceUpdate()\n          }));\n      }\n    }\n  };\n\n  validateForm = () => {\n\n    let errors = {};\n    let formIsValid = true;\n    if (!this.state.form.provider_id) {\n      formIsValid = false;\n      errors[\"provider_id\"] = \"*Please enter a provider.\";\n    }\n\n    if (!this.state.form.type) {\n      formIsValid = false;\n      errors[\"type\"] = \"*Please enter the type.\";\n    }\n\n    if (!this.state.form.name) {\n      formIsValid = false;\n      errors[\"name\"] = \"*Please enter the name.\";\n    }\n\n    if (!this.state.form.category) {\n      formIsValid = false;\n      errors[\"category\"] = \"*Please enter the category.\";\n    }\n\n    if (this.state.form.primary_phone_number) {\n      const errMsg = Validator.phone(this.state.form.primary_phone_number);\n      if (errMsg) {\n        errors['primary_phone_number'] = \"*\" + errMsg;\n      }\n    }\n\n    if (this.state.form.alt_phone_number) {\n      const errMsg = Validator.phone(this.state.form.alt_phone_number);\n      if (errMsg) {\n        errors['alt_phone_number'] = \"*\" + errMsg;\n      }\n    }\n\n    if (this.state.form.email) {\n      const errMsg = Validator.email(this.state.form.email);\n      if (errMsg) {\n        errors['email'] = \"*\" + errMsg;\n      }\n    }\n\n    if (this.state.form.location.postal_code) {\n      const errMsg = Validator.postalCode(this.state.form.location.postal_code);\n      if (errMsg) {\n        errors['postal_code'] = \"*\" + errMsg;\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n\n    return formIsValid;\n\n  };\n\n  render() {\n    const {classes} = this.props;\n    const p = this.props;\n    const formTitle = (this.state.mode === 'edit') ?\n      'Edit Service Profile' : 'New Service';\n\n    let provider, provider_locations;\n    if (isInt(this.state.form.provider_id)) {\n      // assumption: this.state.form.provider_id should be an integer\n      // Delete this condition check if the assumption is no longer needed\n      provider = this.props.providersById && this.props.providersById.providersById[this.state.form.provider_id];\n      provider_locations = provider.other_addresses ? provider.other_addresses.concat([provider.main_address]) : []\n    }\n\n    const locations = {}, location2Obj = {};\n    if (provider_locations) provider_locations.forEach((address, index) => {\n      const loc = formatLocation(address);\n      locations[loc] = loc;\n      location2Obj[loc] = address;\n    });\n\n    return (\n      <Container className={classes.root}>\n        <Typography variant=\"h5\" className={classes.title}>\n          {formTitle}\n        </Typography>\n\n        {this.state.showAlert && this.state.error_messages.map((message, index) =>\n          <Alert key={index} severity=\"error\">{message}</Alert>)}\n\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Service Information\n        </Typography>\n        <SelectField\n          label=\"Provider\"\n          options={_.reduce(p.providers, (map, provider) => {\n            if (provider.type === 'Individual') {\n              map[provider.id] = provider.profile && provider.profile.first_name + \" \" + provider.profile.last_name;\n            } else {\n              map[provider.id] = provider.company\n            }\n            return map;\n          }, {})}\n          value={this.state.form.provider_id}\n          onChange={this.formValChange('provider_id')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.provider_id}</div>\n        <Link to={'/providers'} color>\n          <Typography>\n            Add new provider\n          </Typography>\n        </Link>\n        <SelectField\n          label=\"Type\"\n          options={serviceTypeOptions}\n          value={this.state.form.type}\n          onChange={this.formValChange('type')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.type}</div>\n        <GeneralField\n          label=\"Name\"\n          type=\"text\"\n          value={this.state.form.name}\n          onChange={this.formValChange('name')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.name}</div>\n        <GeneralField\n          label=\"Description\"\n          type=\"text\"\n          value={this.state.form.desc}\n          onChange={this.formValChange('desc')}\n        />\n        <SelectField\n          label=\"Category\"\n          options={p.servicesCategories}\n          value={this.state.form.category}\n          onChange={this.formValChange('category')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.category}</div>\n        <GeneralField\n          label=\"Available from\"\n          type=\"date\"\n          value={this.state.form.available_from}\n          onChange={this.formValChange('available_from')}\n        />\n        <GeneralField\n          label=\"Available until\"\n          type=\"date\"\n          value={this.state.form.available_to}\n          onChange={this.formValChange('available_to')}\n        />\n        <MultiSelectField\n          label=\"Languages\"\n          options={p.languagesCategories}\n          value={this.state.form.languages}\n          onChange={this.formValChange('languages')}\n        />\n        <GeneralField\n          label=\"Max Capacity\"\n          type=\"number\"\n          value={this.state.form.max_capacity}\n          min=\"0\"\n          onChange={this.formValChange('max_capacity')}\n        />\n        {parseInt(this.state.form.max_capacity, 10) > 0 &&\n        <GeneralField\n          label=\"Current Capacity\"\n          type=\"number\"\n          value={this.state.form.current_capacity}\n          min=\"0\"\n          onChange={this.formValChange('current_capacity')}\n        />\n        }\n        <SelectField\n          label=\"Frequency\"\n          value={this.state.form.frequency}\n          onChange={this.formValChange('frequency')}\n          options={['Weekly', 'Biweekly', 'Monthly', 'Non-repeated']}\n        />\n        <RadioField\n          label=\"Billable\"\n          value={this.state.form.billable}\n          onChange={this.formValChange('billable', true)}\n          options={{Yes: 'Yes', No: 'No'}}\n        >\n        </RadioField>\n\n        {this.state.form.billable === \"Yes\" &&\n        <GeneralField\n          label=\"Price\"\n          type=\"text\"\n          value={this.state.form.price}\n          onChange={this.formValChange('price')}\n        />}\n\n        <SelectField\n          label=\"Method of delivery\"\n          value={this.state.form.method_of_delivery}\n          onChange={this.formValChange('method_of_delivery')}\n          options={{\n            Online: 'Online',\n            'One on one (In person)': 'One on one (In person)',\n            Group: 'Group (In person)'\n          }} // In person\n        />\n\n        <SelectField\n          label=\"Method of registration\"\n          value={this.state.form.method_of_registration}\n          onChange={this.formValChange('method_of_registration')}\n          options={['Self registration', 'Registration by social worker', 'No registration']}\n        />\n\n        <SelectField\n          label=\"Registration\"\n          placeholder=\"select\"\n          value={this.state.form.registration}\n          onChange={this.formValChange('registration')}\n          options={['Online', 'In person', 'By phone']}\n        />\n\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Eligibility\n        </Typography>\n        <EligibilityCondition\n          value={this.state.form.eligibility_criteria}\n          formValChange={this.formValChange('eligibility_criteria')}\n        />\n        <MultiSelectField\n          label=\"Immigration Status\"\n          options={statusInCanadaOptions}\n          value={this.state.form.eligibility_conditions.immigration_status}\n          onChange={this.formValChange('eligibility_conditions.immigration_status')}\n        />\n        <GeneralField\n          label=\"Age greater than\"\n          type=\"text\"\n          value={this.state.form.eligibility_conditions.lower_age_limit}\n          onChange={this.formValChange('eligibility_conditions.lower_age_limit')}\n        />\n        <GeneralField\n          id=\"upper_age_limit\"\n          label=\"Age less than\"\n          type=\"text\"\n          value={this.state.form.eligibility_conditions.upper_age_limit}\n          onChange={this.formValChange('eligibility_conditions.upper_age_limit')}\n        />\n        <MultiSelectField\n          label=\"Current Education\"\n          options={educationLevelOptions}\n          value={this.state.form.eligibility_conditions.current_education_level}\n          onChange={this.formValChange('eligibility_conditions.current_education_level')}\n        />\n        <MultiSelectField\n          label=\"Completed Education Level\"\n          options={educationLevelOptions}\n          value={this.state.form.eligibility_conditions.completed_education_level}\n          onChange={this.formValChange('eligibility_conditions.completed_education_level')}\n        />\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Contact Information\n        </Typography>\n        <GeneralField\n          label=\"Contact Person Email\"\n          type=\"email\"\n          value={this.state.form.email}\n          onChange={this.formValChange('email')}\n        />\n        <div className={classes.errorText}>{this.state.errors.email}</div>\n        <GeneralField\n          label=\"Telephone\"\n          type=\"tel\"\n          value={this.state.form.primary_phone_number}\n          onChange={this.formValChange('primary_phone_number')}\n        />\n        <div className={classes.errorText}>{this.state.errors.primary_phone_number}</div>\n        <GeneralField\n          label=\"Alternative Phone Number\"\n          type=\"tel\"\n          value={this.state.form.alt_phone_number}\n          onChange={this.formValChange('alt_phone_number')}\n        />\n        <div className={classes.errorText}>{this.state.errors.alt_phone_number}</div>\n        <RadioField\n          label=\"Location\"\n          options={{'Same as provider': true, 'Other': false}}\n          onChange={this.formValChange('location_same_as_provider', true)}\n          value={this.state.form.location_same_as_provider}\n        />\n\n        {this.state.form.location_same_as_provider && this.state.form.provider_id &&\n        <div>\n          <RadioField\n            label=\"Select the location this service is provided at\"\n            value={this.state.form.location}\n            options={locations}\n            onChange={(e) => {\n              const {form} = this.state;\n              form.location = {...locations[e.target.value]};\n              this.formValChange('location');\n            }}\n          />\n          {!_.includes(_.map(provider_locations, 'id'), this.state.form.location.id) &&\n          <Typography style={{marginTop: 10}}>\n            {`The current location of service is at\n                          ${formatLocation(this.state.form.location)}, which has\n                          been removed from provider locations. Please select a\n                          new location.`}\n          </Typography>\n          }\n        </div>\n        }\n        {!this.state.form.location_same_as_provider &&\n        <LocationFieldGroup\n          key=\"address\"\n          address={this.state.form.location}\n          errMsg={this.state.errors}\n        />\n        }\n        <RadioField\n          label=\"Public?\"\n          options={{'Yes': true, 'No': false}}\n          onChange={this.formValChange('is_public')}\n          value={this.state.form.is_public}\n        />\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Other Information\n        </Typography>\n        <MultiSelectField\n          label=\"Share with\"\n          options={serviceSharedWithOptions}\n          value={this.state.form.share_with}\n          onChange={this.formValChange('share_with')}\n        />\n        <GeneralField\n          label=\"Notes\"\n          type=\"text\"\n          value={this.state.form.notes}\n          onChange={this.formValChange('notes')}\n          multiline\n          variant=\"outlined\"\n          fullWidth\n        />\n        <Button onClick={this.submit} variant=\"outlined\" color=\"primary\" style={{margin: '12px 0'}}>\n          Submit\n        </Button>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    servicesById: state.services.byId,\n    servicesCategories: state.ontology.services.categories,\n    categoriesLoaded: state.ontology.services.loaded,\n    languagesCategories: state.ontology.languages.categories,\n    languagesLoaded: state.ontology.languages.loaded,\n    providers: state.providers.filteredProviders || [],\n    providersById: state.providers.byId,\n    providersLoaded: state.providers.loaded,\n    providerIndex: state.providers.index\n  }\n};\n\nfunction isInt(value) {\n  return !isNaN(value) && \n         parseInt(Number(value)) === value && \n         !isNaN(parseInt(value, 10));\n}\n\nexport default connect(mapStateToProps)(withRouter(withStyles(styles)(ServiceForm)));\n","import React from 'react'\nimport { fetchGoods, deleteGood } from '../store/actions/goodActions.js'\nimport { GenericPage, Link } from \"./shared\";\n\nconst TYPE = 'goods';\n\nconst formatProvider = ({provider}) => {\n  return provider.type === 'Organization' ? provider.company\n    : (provider.profile ? `${provider.profile.first_name} ${provider.profile.last_name}` : 'Not provided')\n};\n\n// mui-table column configurations\n// TODO: Add custom print function for address\nconst columnsWithoutOptions = [\n  {\n    name: 'id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'name',\n    label: 'Name',\n    options: {\n      sort: true,\n      customBodyRender: (data, {rowData}) => {\n        return <Link color to={`/${TYPE}/${rowData[0]}`}>{data}</Link>\n      }\n    }\n  },\n  {\n    name: 'provider',\n    label: 'Provider',\n    options: {\n      sort: true,\n      customBodyRender: provider => {\n        return (\n          <Link color to={`/${TYPE}/${provider.id}`}>\n            {formatProvider({provider})}\n          </Link>\n        );\n      }\n    }\n  },\n  {\n    name: 'desc',\n    label: 'Description',\n  },\n  {\n    name: 'category',\n    label: 'Category'\n  }\n];\n\nexport default function Goods() {\n\n  const nameFormatter = good => good.name;\n\n  const generateMarkers = (goods, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    goods.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage)\n      .map(good => ({\n        position: {lat: Number(good.location.lat), lng: Number(good.location.lng)},\n        title: nameFormatter(good),\n        link: `/${TYPE}/${good.id}`,\n        content: good.desc,\n      })).filter(client => client.position.lat && client.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchGoods}\n      deleteItem={deleteGood}\n      generateMarkers={generateMarkers}\n      nameFormatter={nameFormatter}\n    />\n  )\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchGood } from '../../store/actions/goodActions.js'\n\nimport { formatLocation } from '../../helpers/location_helpers'\n\nimport { Table, Button } from 'react-bootstrap';\nimport { Print } from \"@material-ui/icons\";\n\nclass Good extends Component {\n  componentWillMount() {\n    const id = this.props.match.params.id\n    this.props.dispatch(fetchGood(id));\n  }\n\n  render() {\n    const p = this.props,\n          id = p.match.params.id,\n          good = p.goodsById[id];\n\n    return (\n      <div className=\"content client\">\n        <h3>Good Profile</h3>\n        <Link to={`/goods/${good.id}/edit`}>\n          <Button bsStyle=\"primary\">\n            Edit\n          </Button>\n        </Link>{' '}\n        <Button bsStyle=\"primary\" onClick={() => window.print()} className=\"print-button\">\n          <Print fontSize=\"small\"/>\n        </Button>\n\n        { good && good.goodsLoaded &&\n          <Table striped bordered condensed hover>\n            <tbody>\n              <tr>\n                <td><b>Name</b></td>\n                <td>{good.name}</td>\n              </tr>\n              <tr>\n                <td><b>Description</b></td>\n                <td>{good.desc}</td>\n              </tr>\n              <tr>\n                <td><b>Category</b></td>\n                <td>{good.category}</td>\n              </tr>\n              <tr>\n                <td><b>Available from</b></td>\n                <td>{good.available_from}</td>\n              </tr>\n              <tr>\n                <td><b>Available until</b></td>\n                <td>{good.available_to}</td>\n              </tr>\n              <tr>\n                <td><b>Transportation</b></td>\n                <td>{good.transportation}</td>\n              </tr>\n              <tr>\n                <td><b>Condition</b></td>\n                <td>{good.condition}</td>\n              </tr>\n              <tr>\n                <td><b>Material</b></td>\n                <td>{good.material}</td>\n              </tr>\n              <tr>\n                <td><b>Quantity</b></td>\n                <td>{good.quantity}</td>\n              </tr>\n              <tr>\n                <td><b>Length</b></td>\n                <td>{good.length}</td>\n              </tr>\n              <tr>\n                <td><b>Width</b></td>\n                <td>{good.width}</td>\n              </tr>\n              <tr>\n                <td><b>Height</b></td>\n                <td>{good.height}</td>\n              </tr>\n              <tr>\n                <td><b>Diameter</b></td>\n                <td>{good.diameter}</td>\n              </tr>\n              <tr>\n                <td><b>Contact Person Email</b></td>\n                <td>{good.email}</td>\n              </tr>\n              <tr>\n                <td><b>Contact Person Phone</b></td>\n                <td>{good.primary_phone_number}</td>\n              </tr>\n              <tr>\n                <td><b>Secondary Phone</b></td>\n                <td>{good.alt_phone_number}</td>\n              </tr>\n              <tr>\n                <td><b>Location</b></td>\n                <td>{formatLocation(good.location)}</td>\n              </tr>\n              <tr>\n                <td><b>Share with</b></td>\n                <td>{(good.share_with || []).join(', ')}</td>\n              </tr>\n              <tr>\n                <td><b>Notes</b></td>\n                <td>{good.notes}</td>\n              </tr>\n              <tr>\n                <td><b>Provider</b></td>\n                <td>\n                  <Link to={`/provider/${good.provider.id}`}>\n                    {`${good.provider.profile.first_name} ${good.provider.profile.last_name}`}\n                  </Link>\n                </td>\n              </tr>\n            </tbody>\n          </Table>\n        }\n\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return { \n    goodsById: state.goods.byId,\n    goodLoaded: state.goods.indexLoaded \n  }  \n}\n\nexport default connect(\n  mapStateToProps\n)(Good);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport _ from 'lodash';\nimport { provinceOptions } from '../../store/defaults';\n\n// redux\nimport { connect } from 'react-redux'\nimport SelectField from '../shared/fields/SelectField'\nimport GeneralField from '../shared/fields/GeneralField'\nimport { createGood, updateGood, GOOD_SUCCESS } from '../../store/actions/goodActions.js'\nimport { fetchProviders } from '../../store/actions/providerActions.js'\nimport RadioField from '../shared/fields/RadioField'\nimport { formatLocation } from '../../helpers/location_helpers.js';\n\n\nimport { Button, Form, FormGroup, FormControl, FormLabel, Col, Row } from 'react-bootstrap';\n\nclass GoodForm extends Component {\n  constructor(props) {\n    super(props);\n    let good = {};\n    if (this.props.match.params.id) {\n      good = this.props.goodsById[this.props.match.params.id];\n    }\n\n    this.state = {\n      goodId: good.id,\n      mode: (good.id) ? 'edit' : 'new',\n      is_provider_location: false,\n      form: {\n        name: good.name || '',\n        desc: good.desc || '',\n        category: good.category || '',\n        available_from: good.available_from || '',\n        available_to: good.available_to || '',\n        transportation: good.transportation || '',\n        condition: good.condition || '',\n        material: good.material || '',\n        quantity: good.quantity || '',\n        length: good.length || '',\n        width: good.width || '',\n        height: good.height || '',\n        diameter: good.diameter || '',\n        email: good.email || '',\n        primary_phone_number: good.primary_phone_number || '',\n        alt_phone_number: good.alt_phone_number || '',\n        location: Object.assign({\n          street_address: '',\n          apt_number: '',\n          city: '',\n          province: '',\n          postal_code: ''\n        }, good.location),\n        share_with: good.share_with || '',\n        notes: good.notes || '',\n        provider_id: (good.provider && good.provider.id) || ''\n      }\n    }\n\n    this.formValChange = this.formValChange.bind(this);\n    this.locationChange = this.locationChange.bind(this);\n    this.submit = this.submit.bind(this);\n    this.indicatorChange = this.indicatorChange.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.dispatch(fetchOntologyCategories('goods'));\n    this.props.dispatch(fetchProviders());\n  }\n\n  formValChange(e, id=e.target.id) {\n    let nextForm;\n    if (id === 'location') {\n      nextForm = {...this.state.form, [id]: JSON.parse(e.target.value)};\n    }\n    else {\n      nextForm = {...this.state.form, [id]: e.target.value};\n    }\n    this.setState({ form: nextForm });\n  }\n\n  locationChange(e) {\n    let nextForm = _.clone(this.state.form);\n    nextForm['location'][e.target.id] = e.target.value\n    this.setState({ form: nextForm });\n  }\n\n  indicatorChange(e, id) {\n    this.setState({ [id] : JSON.parse(e.target.value) });\n  }\n\n  submit() {\n    let form = Object.assign({}, this.state.form);\n    if (this.state.mode === 'edit') {\n      this.props.dispatch(\n        updateGood(this.state.goodId, form, (status, err, goodId) => {\n        if (status === GOOD_SUCCESS) {\n          this.props.history.push('/goods/')\n        } else {\n          const error_messages =\n            _.reduce(JSON.parse(err.message), (result, error_messages, field) => {\n              const titleizedField = (field.charAt(0).toUpperCase() + field.slice(1))\n                .split('_').join(' ')\n              _.each(error_messages, message => {\n                result.push(message.replace('This field', titleizedField))\n              })\n              return result;\n            }, [])\n          this.setState({ showAlert: true, error_messages: error_messages });\n        }\n      }));\n    } else {\n      this.props.dispatch(\n        createGood(this.state.form, (status, err, goodId) => {\n        if (status === GOOD_SUCCESS) {\n          this.props.history.push('/goods/')\n        } else {\n          const error_messages =\n            _.reduce(JSON.parse(err.message), (result, error_messages, field) => {\n              const titleizedField = (field.charAt(0).toUpperCase() + field.slice(1))\n                .split('_').join(' ')\n              _.each(error_messages, message => {\n                result.push(message.replace('This field', titleizedField))\n              })\n              return result;\n            }, [])\n          this.setState({ showAlert: true, error_messages: error_messages });\n        }\n      }));\n    }\n  }\n\n  render() {\n    const p = this.props;\n\n    const formTitle = (this.state.mode === 'edit') ?\n      'Edit Good Profile' : 'New Good'\n\n    let provider;\n    if (this.state.form.provider_id) {\n      provider = this.props.providersById && this.props.providersById[this.state.form.provider_id];\n    }\n\n    return (\n      <Row className=\"content\">\n        <Col sm={12}>\n          <h3>{formTitle}</h3>\n          <hr />\n        </Col>\n        <Col sm={12}>\n            <Form horizontal>\n            {this.state.showAlert &&\n              <Col sm={12} className=\"flash-error\">\n                {_.map(this.state.error_messages, (message, index) => {\n                  return (\n                    <li key={index}>\n                      {message}\n                    </li>\n                  );\n                })}\n              </Col>\n            }\n            <SelectField\n              id=\"provider_id\"\n              label=\"Provider\"\n              options={_.reduce(p.providers, (map, provider) => {\n                if (provider.type === 'Individual') {\n                  map[provider.id] = provider.profile.first_name + \" \" + provider.profile.last_name;\n                } else {\n                  map[provider.id] = provider.company\n                }\n                return map;\n              }, {})}\n              componentClass=\"select\"\n              value={this.state.form.provider_id}\n              onChange={this.formValChange}\n              required\n            />\n\n            <FormGroup>\n              <Col smOffset={3} sm={9}>\n                <Link to=\"/providers/new\">\n                  <Button>\n                    Add new provider\n                  </Button>\n                </Link>\n              </Col>\n            </FormGroup>\n\n            <GeneralField\n              id=\"name\"\n              label=\"Name\"\n              type=\"text\"\n              value={this.state.form.name}\n              onChange={this.formValChange}\n              required\n            />\n\n            <FormGroup controlId=\"desc\">\n              <Col componentClass={FormLabel} sm={3}>\n                Description\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.desc} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"category\">\n              <Col componentClass={FormLabel} sm={3}>\n                Category *\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  componentClass=\"select\"\n                  placeholder=\"select\"\n                  value={this.state.form.category}\n                  onChange={this.formValChange}\n                  required\n                >\n                  <option value=\"select\">-- Not Set --</option>\n                  <option value=\"Furniture\">Furniture</option>\n                  <option value=\"Food\">Food</option>\n                  <option value=\"Clothing\">Clothing</option>\n                  <option value=\"Utensils\">Utensils</option>\n                  <option value=\"Books\">Books</option>\n                </FormControl>\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"transportation\">\n              <Col componentClass={FormLabel} sm={3}>\n                Transportation\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.transportation} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"available_from\">\n              <Col componentClass={FormLabel} sm={3}>\n                Available from\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"date\"\n                  value={this.state.form.available_from}\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"available_to\">\n              <Col componentClass={FormLabel} sm={3}>\n                Available until\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"date\"\n                  value={this.state.form.available_to}\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"condition\">\n              <Col componentClass={FormLabel} sm={3}>\n                Condition\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.condition} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"material\">\n              <Col componentClass={FormLabel} sm={3}>\n                Material\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.material} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"quantity\">\n              <Col componentClass={FormLabel} sm={3}>\n                Quantity\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.quantity}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"length\">\n              <Col componentClass={FormLabel} sm={3}>\n                Length\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.length}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"width\">\n              <Col componentClass={FormLabel} sm={3}>\n                Width\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.width}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"height\">\n              <Col componentClass={FormLabel} sm={3}>\n                Height\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.height}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"diameter\">\n              <Col componentClass={FormLabel} sm={3}>\n                Diameter\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.diameter}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <GeneralField\n              id=\"email\"\n              label=\"Contact Person Email\"\n              type=\"email\"\n              value={this.state.form.email}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"primary_phone_number\"\n              label=\"Telephone\"\n              type=\"tel\"\n              value={this.state.form.primary_phone_number}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"alt_phone_number\"\n              label=\"Alternative Phone Number\"\n              type=\"tel\"\n              value={this.state.form.alt_phone_number}\n              onChange={this.formValChange}\n              required\n            />\n            <RadioField\n              id=\"is_provider_location\"\n              label=\"Location\"\n              options={{ 'Same as provider': true, 'Other': false }}\n              onChange={this.indicatorChange}\n              defaultChecked={this.state.is_provider_location}\n              required\n            />\n            {this.state.is_provider_location && this.state.form.provider_id &&\n              <div>\n                <FormGroup controlId=\"location\">\n                  <Col className=\"required\" componentClass={FormLabel} sm={3}>\n                    Select the location this good is provided at\n                  </Col>\n                  <Col sm={9}>\n                    <Form.Check\n                      name=\"provider_address\"\n                      value={JSON.stringify(provider.main_address)}\n                      onChange={(e) => this.formValChange(e, 'location')}\n                      type=\"radio\"\n                    >\n                      {formatLocation(provider.main_address)}\n                    </Form.Check>{' '}\n                    { provider.other_addresses.map((address, index) =>\n                    <Form.Check\n                      name=\"provider_address\"\n                      value={JSON.stringify(address)}\n                      onChange={(e) => this.formValChange(e, 'location')}\n                      key={index}\n                      type=\"radio\"\n                      >\n                      {formatLocation(address)}\n                    </Form.Check>\n                    )}\n                  </Col>\n                </FormGroup>\n              </div>\n            }\n            {!this.state.is_provider_location &&\n            <div>\n              <GeneralField\n                id=\"street_address\"\n                label=\"Street Address\"\n                type=\"text\"\n                value={this.state.form.location.street_address}\n                onChange={this.locationChange}\n              />\n              <GeneralField\n                id=\"apt_number\"\n                label=\"Apt. #\"\n                type=\"text\"\n                value={this.state.form.location.apt_number}\n                onChange={this.locationChange}\n              />\n              <GeneralField\n                id=\"city\"\n                label=\"City\"\n                type=\"text\"\n                value={this.state.form.location.city}\n                onChange={this.locationChange}\n              />\n              <SelectField\n                id=\"province\"\n                label=\"Province\"\n                options={provinceOptions}\n                componentClass=\"select\"\n                value={this.state.form.location.province}\n                onChange={this.locationChange}\n              />\n              <GeneralField\n                id=\"postal_code\"\n                label=\"Postal Code\"\n                type=\"text\"\n                value={this.state.form.location.postal_code}\n                onChange={this.locationChange}\n              />\n            </div>\n            }\n\n            <FormGroup controlId=\"share_with\">\n              <Col componentClass={FormLabel} sm={3}>\n                Share with\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  componentClass=\"select\"\n                  placeholder=\"select\"\n                  value={this.state.form.share_with}\n                  onChange={this.formValChange}\n                >\n                  <option value=\"select\">-- Not Set --</option>\n                  <option value=\"Private\">Private</option>\n                  <option value=\"Public\">Public</option>\n                  <option value=\"Boost Child & Youth Advocacy Centre\">Boost Child & Youth Advocacy Centre</option>\n                  <option value=\"Children's Aid Society of Toronto\">Children's Aid Society of Toronto</option>\n                  <option value=\"Abrigo Centre\">Abrigo Centre</option>\n                  <option value=\"Barbra Schlifer Commemorative Clinic\">Barbra Schlifer Commemorative Clinic</option>\n                  <option value=\"Durham Rape Crisis Centre\">Durham Rape Crisis Centre</option>\n                  <option value=\"Durham Children's Aid Society\">Durham Children's Aid Society</option>\n                  <option value=\"Alexandra Park Community Centre\">Alexandra Park Community Centre</option>\n                  <option value=\"Applegrove Community Complex\">Applegrove Community Complex</option>\n                  <option value=\"Albion Neighbourhood Goods\">Albion Neighbourhood Goods</option>\n                  <option value=\"Applegrove Community Complex\">Applegrove Community Complex</option>\n                  <option value=\"Kababayan Multicultural Centre\">Kababayan Multicultural Centre</option>\n                  <option value=\"Central Toronto Youth Goods\">Central Toronto Youth Goods</option>\n                  <option value=\"Covenant House Toronto\">Covenant House Toronto</option>\n                  <option value=\"Durham Youth Housing and Support Goods\">Durham Youth Housing and Support Goods</option>\n                  <option value=\"Eva's Initiatives\">Eva's Initiatives</option>\n                  <option value=\"Horizons for Youth\">Horizons for Youth</option>\n                  <option value=\"AIDS Committee of Durham Region\">AIDS Committee of Durham Region</option>\n                  <option value=\"Arab Community Centre of Toronto\">Arab Community Centre of Toronto</option>\n                  <option value=\"Pediatric Oncology Group of Ontario\">Pediatric Oncology Group of Ontario</option>\n                  <option value=\"Adventist community goods\">Adventist community goods</option>\n                  <option value=\"Aurora Food Pantry\">Aurora Food Pantry</option>\n                  <option value=\"Bluffs Food Bank\">Bluffs Food Bank</option>\n                  <option value=\"Brock Community Food Bank\">Brock Community Food Bank</option>\n                  <option value=\"Markham Food Bank\">Markham Food Bank</option>\n                  <option value=\"Parkdale Community Food Bank\">Parkdale Community Food Bank</option>\n                </FormControl>\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"notes\">\n              <Col componentClass={FormLabel} sm={3}>\n                Notes\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.notes} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup>\n              <Col smOffset={3} sm={9}>\n                <Button onClick={this.submit}>\n                  Submit\n                </Button>\n              </Col>\n            </FormGroup>\n          </Form>\n        </Col>\n      </Row>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    goodsById: state.goods.byId,\n    servicesCategories: state.ontology.services.categories,\n    categoriesLoaded: state.ontology.services.loaded,\n    providers: state.providers.filteredProviders || [],\n    providersById: state.providers.byId,\n    providersLoaded: state.providers.loaded,\n    providerIndex: state.providers.index\n  }\n}\n\nexport default connect(mapStateToProps)(withRouter(GoodForm));\n","import { getJson } from \"./index\";\n\nexport async function fetchAdminLogs() {\n  return getJson('/admin_logs/');\n}\n","import React, { useEffect, useState } from 'react';\n// redux\nimport { fetchAdminLogs } from '../api/adminLogApi';\nimport { Container } from \"@material-ui/core\";\nimport { Link, Loading, DataTable } from \"./shared\";\n\nfunction object_url(contentType, objectId) {\n  if (contentType === 'Person') {\n    return `/clients/${objectId}`\n  } else if (contentType === 'EligibilityCriteria') {\n    return `/eligibility-criteria/${objectId}`\n  }\n  return `/${contentType.toLowerCase()}s/${objectId}`\n}\n\nconst columns = [\n  {\n    name: 'action_time',\n    label: 'Time',\n    options: {\n      customBodyRender: time => {\n        return new Date(time).toLocaleString();\n      }\n    }\n  },\n  {\n    name: 'user',\n    label: 'Username',\n    options: {\n      customBodyRender: user => {\n        return (\n          <Link color to={`/users/${user.id}`}>\n            {user.username}\n          </Link>\n        )\n      }\n    }\n  },\n  {\n    name: 'object_id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'object_repr',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'action',\n    label: 'Action',\n    options: {\n      customBodyRender: (action, {rowData}) => {\n        const objectId = rowData[2];\n        const objectRepr = rowData[3];\n        return (\n          <span>\n            {action + ' '}\n            <Link color to={object_url(objectRepr, objectId)}>\n              {objectId}\n            </Link>\n          </span>\n        )\n      }\n    }\n  },\n  {\n    name: 'change_message',\n    label: 'Message',\n    options: {\n      customBodyRender: msg => {\n        if (msg) {\n          try {\n            msg = JSON.parse(msg);\n            if (msg.reason != null)\n              return 'Reason: ' + msg.reason;\n          } catch (e) {\n          }\n        }\n        return 'N/A';\n      }\n    }\n  }\n];\n\nexport default function AdminLogs() {\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    fetchAdminLogs().then(data => {\n      setData(data);\n      setLoading(false);\n    });\n  }, []);\n\n  if (loading)\n    return <Loading message={`Loading admin logs...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Admin Logs\"}\n        data={data}\n        columns={columns}\n        options={{\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n        }}\n      />\n    </Container>\n  );\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { Bar as BarChart, Pie as PieChart } from 'react-chartjs';\nimport { Table, Button } from 'react-bootstrap';\nimport { Print } from \"@material-ui/icons\";\nimport { serverHost } from '../store/defaults.js';\nimport SelectField from './shared/fields/SelectField';\n// styles\nimport '../stylesheets/Reporting.scss';\n\nconst START_YEARS = [1931, 1941, 1951, 1961, 1971, 1981, 1991, 2001, 2011]\n\nexport default class Report extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      total_clients: 0,\n      number_of_clients_by_gender: {},\n      number_of_clients_by_birth_year: {},\n      number_of_clients_by_marital_status: {},\n      number_of_clients_by_language: {},\n      number_of_providers_by_status: {},\n      number_of_providers_by_type: {},\n      number_of_individual_providers_by_category: {},\n      selectedCategory: '',\n      selectedAttribute: '',\n    }\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n  }\n\n  componentWillMount() {\n    const url = serverHost + '/reporting?years=' + START_YEARS;\n    fetch(url, {\n        method: 'get',\n        headers: new Headers({\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        }),\n      }).then(response => response.json())\n      .then(data => {\n        this.setState({\n          total_clients: data.total_clients,\n          number_of_clients_by_gender: data.number_of_clients_by_gender,\n          number_of_clients_by_birth_year: data.number_of_clients_by_birth_year,\n          number_of_clients_by_marital_status: data.number_of_clients_by_marital_status,\n          number_of_clients_by_language: data.number_of_clients_by_language,\n          number_of_providers_by_status: data.number_of_providers_by_status,\n          number_of_providers_by_type: data.number_of_providers_by_type,\n          number_of_individual_providers_by_category: data.number_of_individual_providers_by_category\n        })\n      }\n    );\n  }\n\n  handleSelectChange(e) {\n    this.setState({ [e.target.id]: e.target.value })\n  }\n\n  render() {\n    const reportingCategoryOptions = ['Clients', 'Providers', 'Services', 'Matches']\n\n    const attributeOptions = {\n      'Clients': ['Birth Year', 'Gender', 'Language', 'Marital Status'],\n      'Providers': ['Individuals by Category', 'Status', 'Type'],\n      'Services': ['Category', 'Type'],\n      'Matches': ['Time between selected and matched', 'Time between selected and fulfilled']\n\n    }\n\n    const year_labels = _.map(START_YEARS, (start_year) => {\n      return `${start_year}-${start_year + 9}`\n    });\n\n    const barChartDataBirthYear = {\n      labels: year_labels,\n      datasets: [{\n        data: Object.values(this.state.number_of_clients_by_birth_year),\n      }]\n    }\n\n    const barChartOptions = {\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero:true\n          }\n        }]\n      }\n    }\n\n    const barChartDataLanguage = {\n      labels: Object.keys(this.state.number_of_clients_by_language),\n      datasets: [{\n        data: Object.values(this.state.number_of_clients_by_language),\n      }]\n    }\n\n    const pieChartDataGender = [\n      {\n        value: this.state.number_of_clients_by_gender[\"Female\"],\n        color:\"#F7464A\",\n        highlight: \"#FF5A5E\",\n        label: \"Female\"\n      },\n      {\n        value: this.state.number_of_clients_by_gender[\"Male\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Male\"\n      },\n      {\n        value: this.state.number_of_clients_by_gender[\"Other\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"Other\"\n      }\n    ]\n\n    const pieChartDataProviderStatus = [\n      {\n        value: this.state.number_of_providers_by_status[\"Internal\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Internal\"\n      },\n      {\n        value: this.state.number_of_providers_by_status[\"External\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"External\"\n      }\n    ]\n\n        const pieChartDataIndividualProviderCategory = [\n      {\n        value: this.state.number_of_individual_providers_by_category[\"Volunteer/Goods Donor\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Volunteer/Goods Donor\"\n      },\n      {\n        value: this.state.number_of_individual_providers_by_category[\"Professional Service Provider\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"Professional Service Provider\"\n      }\n    ]\n\n    const pieChartDataProviderType = [\n      {\n        value: this.state.number_of_providers_by_type[\"Individual\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Individual\"\n      },\n      {\n        value: this.state.number_of_providers_by_type[\"Organization\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"Organization\"\n      }\n    ]\n\n    const barChartDataMaritalStatus = {\n      labels: Object.keys(this.state.number_of_clients_by_marital_status),\n      datasets: [{\n        data: Object.values(this.state.number_of_clients_by_marital_status),\n      }]\n    }\n\n    const pieChartOptions = {\n      maintainAspectRatio: false,\n      responsive: false,\n      legend: {\n        display: true,\n        position: 'right',\n        labels: {\n          boxWidth: 10\n        }\n      }\n    }\n\n    return (\n      <div className=\"content client\">\n        <Button bsStyle=\"primary\" onClick={() => window.print()} className=\"print-button\">\n          <Print fontSize=\"small\"/>\n        </Button>\n        <SelectField\n          id='selectedCategory'\n          componentClass=\"select\"\n          label='Get a report on'\n          value={this.state.selectedCategory}\n          options={reportingCategoryOptions}\n          onChange={this.handleSelectChange}\n        />\n        <br></br>\n        <br></br>\n        <SelectField\n          id='selectedAttribute'\n          componentClass=\"select\"\n          label='Select attribute'\n          value={this.state.selectedAttribute}\n          options={(this.state.selectedCategory !== '')\n            ? attributeOptions[this.state.selectedCategory]\n            : []}\n          onChange={this.handleSelectChange}\n        />\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute === 'Gender') &&\n          <GenderStats\n            data={pieChartDataGender}\n            options={pieChartOptions}\n            totalClientsCount={this.state.total_clients}\n            ClientsCountByGender={this.state.number_of_clients_by_gender}\n          />\n        }\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute ==='Language') &&\n          <LanguageStats\n            data={barChartDataLanguage}\n            options={barChartOptions}\n            totalClientsCount={this.state.total_clients}\n            ClientsCountByLanguage={this.state.number_of_clients_by_language}\n          />\n        }\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute === 'Marital Status') &&\n          <MaritalStatusStats\n            data={barChartDataMaritalStatus}\n            options={barChartOptions}\n            totalClientsCount={this.state.total_clients}\n            ClientsCountByMaritalStatus={this.state.number_of_clients_by_marital_status}\n          />\n        }\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute === 'Birth Year') &&\n          <BirthYearStats\n            data={barChartDataBirthYear}\n            options={barChartOptions}\n            ClientsCountByBirthYear={this.state.number_of_clients_by_birth_year}\n          />\n        }\n        {(this.state.selectedCategory === 'Providers' && this.state.selectedAttribute === 'Status') &&\n          <ProviderStatusStats\n            data={pieChartDataProviderStatus}\n            options={pieChartOptions}\n            ProvidersCountByStatus={this.state.number_of_providers_by_status}\n          />\n        }\n        {(this.state.selectedCategory === 'Providers' && this.state.selectedAttribute === 'Type') &&\n          <ProviderTypeStats\n            data={pieChartDataProviderType}\n            options={pieChartOptions}\n            ProvidersCountByType={this.state.number_of_providers_by_type}\n          />\n        }\n        {(this.state.selectedCategory === 'Providers' && this.state.selectedAttribute === 'Individuals by Category') &&\n          <IndividualProviderCategoryStats\n            data={pieChartDataIndividualProviderCategory}\n            options={pieChartOptions}\n            IndividualProvidersCountByCategory={this.state.number_of_individual_providers_by_category}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nfunction GenderStats({ data, options, totalClientsCount, ClientsCountByGender}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of clients by Gender</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            <div>\n              <b>Total = {totalClientsCount}</b>\n            </div>\n            {\n              _.map(ClientsCountByGender, (count, gender) => {\n                return (\n                  <div key={gender}>\n                    <b>{gender} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction ProviderStatusStats({ data, options, ProvidersCountByStatus}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of providers by Status</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            {\n              _.map(ProvidersCountByStatus, (count, status) => {\n                return (\n                  <div key={status}>\n                    <b>{status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction IndividualProviderCategoryStats({ data, options, IndividualProvidersCountByCategory}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of individual providers by Category</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            {\n              _.map(IndividualProvidersCountByCategory, (count, status) => {\n                return (\n                  <div key={status}>\n                    <b>{status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction ProviderTypeStats({ data, options, ProvidersCountByType}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of providers by type</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            {\n              _.map(ProvidersCountByType, (count, status) => {\n                return (\n                  <div key={status}>\n                    <b>{status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction LanguageStats({ data, options, ClientsCountByLanguage}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of clients by Language</b></td>\n          <td>\n            <BarChart data={data} options={options} />\n            {\n              _.map(ClientsCountByLanguage, (count, first_language) => {\n                return (\n                  <div key={first_language}>\n                    <b>{first_language} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\nfunction MaritalStatusStats({ data, options, ClientsCountByMaritalStatus}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of clients by Marital Status</b></td>\n          <td>\n            <BarChart data={data} options={options} />\n            {\n              _.map(ClientsCountByMaritalStatus, (count, marital_status) => {\n                return (\n                  <div key={marital_status}>\n                    <b>{marital_status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction BirthYearStats({ data, options, ClientsCountByBirthYear }) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Distribution of clients by Birth Year</b></td>\n          <td>\n            <BarChart data={data} options={options} />\n            {\n              _.map(ClientsCountByBirthYear, (count, startYear) => {\n                return (\n                  <div key={startYear}>\n                    <b>\n                      Clients born between {startYear} and {parseInt(startYear, 10) + 9} = {count}\n                    </b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { fetchEligibilities, deleteEligibility, createEligibility, updateEligibility } from '../../api/eligibilityApi';\nimport {\n  Chip, Container, IconButton, Dialog, DialogActions, DialogTitle, DialogContent,\n  Button\n} from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Add as AddIcon, Delete as DeleteIcon, Edit as EditIcon } from \"@material-ui/icons\";\nimport { DeleteModal, Loading, DataTable } from \"../shared\";\nimport GeneralField from \"../shared/fields/GeneralField\";\n\nconst useStyles = makeStyles(() => ({\n  button: {\n    padding: 4\n  }\n}));\n\nconst ADD_TITLE = 'Add Eligibility Criteria';\nconst EDIT_TITLE = 'Edit Eligibility Criteria';\n\nfunction AddEditDialog({open, title, value, handleConfirm, handleClose}) {\n  const [err, setErr] = useState({\n    title: '',\n  });\n\n  /**\n   * @returns {boolean} true if passed.\n   */\n  const check = () => {\n    const newErr = {};\n    if (value.title === '')\n      newErr.title = 'This field is required';\n    setErr(newErr);\n    return value.title !== '';\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <GeneralField\n          autoFocus\n          label=\"Eligible criteria\"\n          value={value.title}\n          onChange={e => value.title = e.target.value}\n          error={!!err.title}\n          helperText={err.title}\n          fullWidth\n          InputLabelProps={{}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            if (check()) {\n              handleConfirm();\n            }\n          }}\n          color=\"primary\">\n          Confirm\n        </Button>\n        <Button onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default function Eligibilities() {\n  const [state, setState] = useState({\n    loading: true,\n    data: [],\n    value: {},\n    selectedId: null,\n    deleteDialogTitle: '',\n    showDeleteDialog: false,\n    dialogTitle: '',\n    showAddEditDialog: false,\n  });\n  const classes = useStyles();\n\n  useEffect(() => {\n    fetchEligibilities().then(data => {\n      setState(state => ({...state, loading: false, data}));\n    });\n  }, []);\n\n  const showDeleteDialog = (id, title) => () => {\n    setState(state => ({\n      ...state, selectedId: id, showDeleteDialog: true,\n      deleteDialogTitle: 'Delete ' + title + ' ?'\n    }));\n  };\n\n  const shoeEditDialog = (title, id) => () => setState(state => ({\n    ...state,\n    selectedId: id,\n    value: {title, id},\n    showAddEditDialog: true,\n    dialogTitle: EDIT_TITLE,\n  }));\n\n  const showAddDialog = () => setState(state => ({\n    ...state,\n    value: {title: ''},\n    showAddEditDialog: true,\n    dialogTitle: ADD_TITLE,\n  }));\n\n  const handleAdd = async () => {\n    try {\n      const newItem = await createEligibility(state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: [...state.data, newItem]\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleDelete = async (id, form) => {\n    try {\n      await deleteEligibility(id, form);\n      setState(state => ({\n        ...state, showDeleteDialog: false,\n        data: state.data.filter(item => item.id !== state.selectedId)\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleEdit = async () => {\n    try {\n      const newItem = await updateEligibility(state.value.id, state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: state.data.map(item => item.id === state.selectedId ? newItem : item),\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const columns = [\n    {\n      name: 'title',\n      label: 'Title',\n      options: {\n        setCellHeaderProps: () => ({style: {width: '80%'}})\n      }\n    },\n    {\n      name: 'id',\n      label: ' ',\n      options: {\n        sort: false,\n        filter: false,\n        viewColumns: false,\n        searchable: false,\n        download: false,\n        customBodyRender: (id, {rowData}) => {\n          return (\n            <span>\n              <IconButton\n                onClick={shoeEditDialog(...rowData)}\n                className={classes.button}\n                size=\"large\">\n                <EditIcon fontSize=\"small\" color=\"primary\"/>\n              </IconButton>\n              <IconButton\n                onClick={showDeleteDialog(id, rowData[0])}\n                className={classes.button}\n                size=\"large\">\n                <DeleteIcon fontSize=\"small\" color=\"secondary\"/>\n              </IconButton>\n            </span>\n          );\n        }\n      }\n    }\n  ];\n\n  if (state.loading)\n    return <Loading message={`Loading eligibilities...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Eligibility Criteria\"}\n        data={state.data}\n        columns={columns}\n        options={{\n          filter: false,\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n          customToolbar: () =>\n            <Chip\n              onClick={showAddDialog}\n              color=\"primary\"\n              icon={<AddIcon/>}\n              label=\"Add\"\n              variant=\"outlined\"/>\n        }}\n      />\n      <DeleteModal\n        objectId={state.selectedId}\n        title={state.deleteDialogTitle}\n        show={state.showDeleteDialog}\n        onHide={() => setState(state => ({...state, showDeleteDialog: false}))}\n        delete={handleDelete}\n      />\n      <AddEditDialog\n        open={state.showAddEditDialog}\n        value={state.value}\n        title={state.dialogTitle}\n        handleClose={() => setState(state => ({...state, showAddEditDialog: false}))}\n        handleConfirm={state.dialogTitle === ADD_TITLE ? handleAdd : handleEdit}\n      />\n    </Container>\n  );\n}\n","import { deleteJson, getJson, postJson, putJson } from \"./index\";\n\nexport function createQuestion(params) {\n  return postJson('/questions/', params);\n}\n\nexport function updateQuestion(id, params) {\n  return putJson('/questions/' + id + '/', params);\n}\n\nexport function fetchQuestion(id) {\n  return getJson('/questions/' + id + '/');\n}\n\nexport function fetchQuestions() {\n  return getJson('/questions/');\n}\n\nexport async function deleteQuestion(id, params) {\n  const response = await deleteJson('/questions/' + id + '/', params);\n  if (response.status !== 204)\n    throw Error('Server does not return correct code.');\n}\n","/**\n * For how the drag and drop works, please check the library repository:\n * https://github.com/atlassian/react-beautiful-dnd\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useHistory } from \"react-router\";\nimport { useDispatch } from 'react-redux';\nimport { providerFields, allForms, providerFormTypes } from '../../constants/provider_fields.js'\nimport { clientFields } from \"../../constants/client_fields\";\nimport { fetchQuestions } from '../../api/questionApi';\nimport RadioField from '../shared/fields/RadioField';\nimport { Button, Container, Grid, TextField, Typography, Divider, IconButton } from \"@material-ui/core\";\nimport SelectField from \"../shared/fields/SelectField\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { Close as Delete } from \"@material-ui/icons\";\nimport { fetchClientFields, updateClientFields, fetchProviderFields, updateProviderFields } from \"../../api/settingApi\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: 8,\n  },\n  droppable: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  submitButton: {\n    margin: '10px 0'\n  }\n}));\n\nconst radioButtonOptions = {'Mandatory': true, 'Not mandatory': false};\n\nfunction StepFields({stepFields, fields, stepName, handleRadioChange, handleDeleteField}) {\n  return stepFields.map(({field, required, type}, index) => {\n    return (\n      <Draggable key={field} draggableId={field} index={index}>\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            style={{\n              backgroundColor: snapshot.isDragging ? '#bbb' : null,\n              ...provided.draggableProps.style\n            }}>\n            <RadioField\n              required noStar row\n              key={field}\n              label={(fields[field] && fields[field]['label']) || field}\n              onChange={handleRadioChange(field, stepName)}\n              options={radioButtonOptions}\n              value={required}\n            />\n            <IconButton\n              onClick={() => !snapshot.isDragging && handleDeleteField(index, stepName)}\n              size=\"large\">\n              <Delete/>\n            </IconButton>\n          </div>\n        )}\n      </Draggable>\n    );\n  });\n}\n\nexport default function ManageFields() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [state, setState] = useState({\n    category: '',\n    stepToAdd: '',\n    selectedStep: '',\n    selectedField: '',\n    questions: {},\n    /**\n     * @type {{organization: {form_structure: {}, steps_order: []}, }}\n     */\n    fields: {}\n  });\n\n  useEffect(() => {\n    fetchQuestions().then(questions => setState(state => ({...state, questions})));\n    // fetch provider fields\n    fetchProviderFields(false).then(fields => {\n      for (const category of Object.keys(fields)) {\n        const formStructure = fields[category].form_structure;\n        const stepsOrder = fields[category].steps_order;\n        for (const stepName of stepsOrder) {\n          const stepsList = [];\n          const steps = formStructure[stepName];\n          for (const [field, value] of Object.entries(steps)) {\n            stepsList.push({field, ...value});\n          }\n          fields[category].form_structure[stepName] = stepsList;\n        }\n      }\n      // server may not respond full list of provider options, add it manually\n      for (const providerCategory of Object.keys(providerFormTypes)) {\n        if (!fields[providerCategory])\n          fields[providerCategory] = {form_structure: [], steps_order: []};\n      }\n\n      setState(state => ({...state, fields: {...state.fields, ...fields}}));\n    });\n\n    // fetch clients fields\n    fetchClientFields().then(clientFields => {\n      const formStructure = clientFields.form_structure;\n      for (const stepName of Object.keys(formStructure)) {\n        const stepsList = [];\n        for (const [field, required] of Object.entries(formStructure[stepName])) {\n          stepsList.push({field, type: 'field', required});\n        }\n        formStructure[stepName] = stepsList;\n      }\n      setState(state => ({...state, fields: {...state.fields, client: clientFields}}));\n    })\n\n  }, [dispatch]);\n\n  const submit = async () => {\n    let form = {};\n    let submitFunction;\n    if (state.category === 'client') {\n      submitFunction = updateClientFields;\n      form = {\n        steps_order: state.fields.client.steps_order,\n        form_structure: {},\n      };\n      const formStructure = state.fields.client.form_structure;\n      for (const stepName of Object.keys(formStructure)) {\n        const newFormStructure = form.form_structure[stepName] = {};\n        for (const {field, required} of formStructure[stepName]) {\n          newFormStructure[field] = required\n        }\n      }\n    }\n    // providers\n    else {\n      submitFunction = updateProviderFields;\n      for (const category of Object.keys(state.fields)) {\n        form[category] = {\n          steps_order: state.fields[category].steps_order,\n          form_structure: {},\n        };\n        const formStructure = state.fields[category].form_structure;\n        for (const stepName of Object.keys(formStructure)) {\n          const newFormStructure = form[category].form_structure[stepName] = {};\n          for (const {field, required} of formStructure[stepName]) {\n            newFormStructure[field] = {type: 'field', required};\n          }\n        }\n      }\n      delete form.client;\n    }\n    console.log(form);\n    try {\n      await submitFunction(form);\n      history.push('/dashboard');\n    } catch (e) {\n      // TODO: show error message\n      console.error(e)\n    }\n  };\n\n  const initialOptions = useMemo(() => {\n    let fieldOptions = {};\n    const fields = state.category === 'client' ? clientFields : providerFields;\n    for (const [field, {label}] of Object.entries(fields)) {\n      fieldOptions[field] = label;\n    }\n    return fieldOptions;\n  }, [state.category]);\n\n  // this may not be efficient, but it is easier to implement...\n  const availableOptions = useMemo(() => {\n    if (!state.category) return {};\n    const options = {...initialOptions};\n    for (const steps of Object.values(state.fields[state.category].form_structure)) {\n      for (const {field} of steps) {\n        if (Object.keys(options).includes(field))\n          delete options[field];\n      }\n    }\n    return options;\n  }, [state.fields, state.category, initialOptions]);\n\n  const handleChange = useCallback(name => e => {\n    const value = e.target.value;\n    if (name === 'category') {\n      if (state.fields[value]) {\n        setState(state => ({\n          ...state, [name]: value, selectedField: '', selectedStep: '', stepToAdd: ''\n        }));\n      }\n    } else\n      setState(state => ({...state, [name]: value}));\n  }, [state.fields]);\n\n  const handleRadioChange = useCallback((field, stepName) => e => {\n    const fields = state.fields[state.category].form_structure[stepName];\n    for (const curr_field of fields) {\n      if (curr_field.field === field)\n        curr_field.required = e.target.value;\n    }\n  }, [state.fields, state.category]);\n\n  const handleDeleteField = useCallback((index, stepName) => {\n    const fields = [...state.fields[state.category].form_structure[stepName]];\n    fields.splice(index, 1);\n    state.fields[state.category].form_structure[stepName] = fields;\n    setState(state => ({...state, fields: {...state.fields}}));\n  }, [state.fields, state.category]);\n\n  const handleAddField = useCallback(() => {\n    const formStructure = state.fields[state.category].form_structure;\n    for (const steps of Object.values(formStructure)) {\n      for (const {field} of steps) {\n        if (field === state.selectedField)\n          return;\n      }\n    }\n    state.fields[state.category].form_structure[state.selectedStep].push({\n      field: state.selectedField,\n      type: 'field', // TODO: implement questions\n      required: false,\n    });\n    setState(state => ({...state, selectedField: '', fields: {...state.fields}}))\n  }, [state.fields, state.category, state.selectedStep, state.selectedField]);\n\n  const handleRemoveStep = useCallback((index, stepName) => () => {\n    state.fields[state.category].steps_order.splice(index, 1);\n    delete state.fields[state.category].form_structure[stepName];\n    setState(state => ({...state, fields: {...state.fields}}))\n  }, [state.fields, state.category]);\n\n  // a little function to help us with reordering the result\n  const reorder = (list, startIndex, endIndex) => {\n    const [removed] = list.splice(startIndex, 1);\n    list.splice(endIndex, 0, removed);\n  };\n\n  // invoked when something is dropped\n  const onDragEnd = ({source, destination}) => {\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n    const targetStepName = destination.droppableId;\n    const sourceStepName = source.droppableId;\n\n    // moved to other steps\n    if (source.droppableId !== destination.droppableId) {\n      const sourceSteps = state.fields[state.category].form_structure[sourceStepName];\n      const targetSteps = state.fields[state.category].form_structure[targetStepName];\n      const [removed] = sourceSteps.splice(source.index, 1);\n      targetSteps.splice(destination.index, 0, removed);\n    }\n    // moved within a step\n    else {\n      reorder(\n        state.fields[state.category].form_structure[targetStepName],\n        source.index,\n        destination.index\n      );\n    }\n  };\n\n  const newStepComponent = useMemo(() => {\n    if (!state.category) return null;\n    return (\n      <Grid container alignItems=\"flex-end\" spacing={2} className={classes.root}>\n        <Grid item>\n          <TextField\n            label=\"New step name\"\n            value={state.stepToAdd}\n            onChange={handleChange('stepToAdd')}\n          />\n        </Grid>\n        <Grid item>\n          <Button variant=\"outlined\" color=\"primary\" disabled={!state.stepToAdd} onClick={() => {\n            setState(state => {\n              state.fields[state.category].form_structure[state.stepToAdd] = [];\n              state.fields[state.category].steps_order.push(state.stepToAdd);\n              return ({...state, fields: {...state.fields}});\n            });\n          }}>\n            Add Step\n          </Button>\n        </Grid>\n      </Grid>\n    )\n  }, [state.stepToAdd, state.category, classes.root, handleChange]);\n\n  const newFieldComponent = useMemo(() => {\n    if (!state.category) return null;\n    return (\n      <Grid container alignItems=\"flex-end\" spacing={2}>\n        <Grid item sm={3} xs={4}>\n          <SelectField\n            label=\"Choose step\"\n            value={state.selectedStep}\n            onChange={handleChange('selectedStep')}\n            options={state.fields[state.category].steps_order}\n            noDefaultStyle\n            formControlProps={{fullWidth: true}}\n            noEmpty\n            controlled\n          />\n        </Grid>\n        <Grid item sm={7} xs={8}>\n          <SelectField\n            label=\"Choose field\"\n            value={state.selectedField}\n            onChange={handleChange('selectedField')}\n            options={availableOptions}\n            noDefaultStyle\n            formControlProps={{fullWidth: true}}\n            noEmpty\n            controlled\n          />\n        </Grid>\n        <Grid item sm={2}>\n          <Button variant=\"outlined\" color=\"primary\" onClick={handleAddField}\n                  disabled={!state.selectedField || !state.selectedStep}>\n            Add Field\n          </Button>\n        </Grid>\n      </Grid>\n    )\n  }, [state.fields, state.category, handleChange, handleAddField, state.selectedField,\n    state.selectedStep, availableOptions]);\n\n  const fieldsComponents = useMemo(() => {\n    if (!state.fields[state.category]) return null;\n    const formStructure = state.fields[state.category].form_structure;\n    return Object.keys(formStructure).map((stepName, index) => {\n      return (\n        <div key={index} className={classes.root}>\n          <Typography variant=\"h6\" color=\"textSecondary\">\n            {stepName}\n            <IconButton onClick={handleRemoveStep(index, stepName)} size=\"large\">\n              <Delete/>\n            </IconButton>\n          </Typography>\n          <Droppable droppableId={stepName} className={classes.droppable}>\n            {(provided, snapshot) => (\n              <div {...provided.droppableProps} ref={provided.innerRef}>\n                <StepFields\n                  stepName={stepName}\n                  stepFields={formStructure[stepName]}\n                  handleRadioChange={handleRadioChange}\n                  handleDeleteField={handleDeleteField}\n                  fields={state.category === 'client' ? clientFields : providerFields}\n                />\n                {provided.placeholder}\n              </div>\n            )}\n          </Droppable>\n          <Divider/>\n        </div>\n      );\n    });\n  }, [state.fields, state.category, classes.root, classes.droppable,\n    handleRadioChange, handleDeleteField, handleRemoveStep]);\n\n  return (\n    <Container>\n      <Typography variant=\"h5\">\n        Manage Fields\n      </Typography>\n      <SelectField\n        label=\"Please select\"\n        value={state.category}\n        onChange={handleChange('category')}\n        options={allForms}\n        noEmpty\n      />\n      {newStepComponent}\n      {newFieldComponent}\n      <DragDropContext onDragEnd={onDragEnd}>\n        {fieldsComponents}\n      </DragDropContext>\n      {state.category &&\n      <Button variant=\"outlined\" color=\"primary\" onClick={submit} className={classes.submitButton}>\n        Submit\n      </Button>}\n    </Container>\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport { fetchQuestions, updateQuestion, deleteQuestion, createQuestion } from '../../api/questionApi';\nimport {\n  Chip, Container, IconButton, Dialog, DialogActions, DialogTitle, DialogContent,\n  Button\n} from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Add as AddIcon, Delete as DeleteIcon, Edit as EditIcon } from \"@material-ui/icons\";\nimport { DeleteModal, Loading, DataTable } from \"../shared\";\nimport SelectField from \"../shared/fields/SelectField\";\nimport GeneralField from \"../shared/fields/GeneralField\";\n\nconst useStyles = makeStyles(() => ({\n  button: {\n    padding: 4\n  },\n  formControl: {\n    margin: null,\n  },\n}));\n\nconst ADD_TITLE = 'Add Question';\nconst EDIT_TITLE = 'Edit Question';\nconst contentTypeOptions = {\n  provider: 'Provider',\n};\n\nfunction AddEditDialog({open, title, value, objectId, handleConfirm, handleClose}) {\n  const [err, setErr] = useState({\n    type: '',\n    value: '',\n  });\n\n  /**\n   * @returns {boolean} true if passed.\n   */\n  const check = () => {\n    const newErr = {};\n    if (value.content_type === '')\n      newErr.content_type = 'This field is required';\n    if (value.text === '')\n      newErr.text = 'This field is required';\n    setErr(newErr);\n    return value.content_type !== '' && value.text !== '';\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <SelectField\n          label={'Content type'}\n          value={value.content_type}\n          options={contentTypeOptions}\n          onChange={(e) => value.content_type = e.target.value}\n          disabled={title === EDIT_TITLE}\n          formControlProps={{fullWidth: true}}\n          error={!!err.content_type}\n          helperText={err.content_type}\n          required noDefaultStyle noEmpty\n        />\n        <GeneralField\n          label=\"Question\"\n          value={value.text}\n          onChange={e => value.text = e.target.value}\n          error={!!err.text}\n          helperText={err.text}\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            if (check()) {\n              handleConfirm();\n            }\n          }}\n          color=\"primary\">\n          Confirm\n        </Button>\n        <Button onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default function Questions() {\n  const [state, setState] = useState({\n    loading: true,\n    data: [],\n    value: {},\n    selectedId: null,\n    deleteDialogTitle: '',\n    showDeleteDialog: false,\n    dialogTitle: '',\n    showAddEditDialog: false,\n  });\n  const classes = useStyles();\n\n  useEffect(() => {\n    fetchQuestions().then(data => {\n      setState(state => ({...state, loading: false, data}));\n    });\n  }, []);\n\n  const showDeleteDialog = (id, title) => () => {\n    setState(state => ({\n      ...state, selectedId: id, showDeleteDialog: true,\n      deleteDialogTitle: 'Delete ' + title + ' ?'\n    }));\n  };\n\n  const showEditDialog = (text, type, id) => () => setState(state => ({\n    ...state,\n    value: {id, text, content_type: type},\n    selectedId: id,\n    showAddEditDialog: true,\n    dialogTitle: EDIT_TITLE,\n  }));\n\n  const showAddDialog = () => setState(state => ({\n    ...state,\n    value: {text: '', content_type: ''},\n    showAddEditDialog: true,\n    dialogTitle: ADD_TITLE,\n  }));\n\n  const handleAdd = async () => {\n    try {\n      const newItem = await createQuestion(state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: [...state.data, newItem]\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleDelete = async (id, form) => {\n    try {\n      await deleteQuestion(id, form);\n      setState(state => ({\n        ...state, showDeleteDialog: false,\n        data: state.data.filter(item => item.id !== state.selectedId)\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleEdit = async () => {\n    try {\n      const newItem = await updateQuestion(state.value.id, state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: state.data.map(item => item.id === state.selectedId ? newItem : item),\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const columns = [\n    {\n      name: 'text',\n      label: 'Text',\n      options: {\n        setCellHeaderProps: () => ({style: {width: '60%'}})\n      }\n    },\n    {\n      name: 'content_type',\n      label: 'Content type'\n    },\n    {\n      name: 'id',\n      label: ' ',\n      options: {\n        sort: false,\n        filter: false,\n        viewColumns: false,\n        searchable: false,\n        download: false,\n        customBodyRender: (id, {rowData}) => {\n          return (\n            <span>\n              <IconButton\n                onClick={showEditDialog(...rowData)}\n                className={classes.button}\n                size=\"large\">\n                <EditIcon fontSize=\"small\" color=\"primary\"/>\n              </IconButton>\n              <IconButton\n                onClick={showDeleteDialog(id, rowData[0])}\n                className={classes.button}\n                size=\"large\">\n                <DeleteIcon fontSize=\"small\" color=\"secondary\"/>\n              </IconButton>\n            </span>\n          );\n        }\n      }\n    }\n  ];\n\n  if (state.loading)\n    return <Loading message={`Loading questions...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Questions\"}\n        data={state.data}\n        columns={columns}\n        options={{\n          filter: false,\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n          customToolbar: () =>\n            <Chip\n              onClick={showAddDialog}\n              color=\"primary\"\n              icon={<AddIcon/>}\n              label=\"Add\"\n              variant=\"outlined\"/>\n        }}\n      />\n      <DeleteModal\n        objectId={state.selectedId}\n        title={state.deleteDialogTitle}\n        show={state.showDeleteDialog}\n        onHide={() => setState(state => ({...state, showDeleteDialog: false}))}\n        delete={handleDelete}\n      />\n      <AddEditDialog\n        open={state.showAddEditDialog}\n        value={state.value}\n        objectId={state.selectedId}\n        title={state.dialogTitle}\n        handleClose={() => setState(state => ({...state, showAddEditDialog: false}))}\n        handleConfirm={state.dialogTitle === ADD_TITLE ? handleAdd : handleEdit}\n      />\n    </Container>\n  );\n}\n","import React from 'react';\nimport { Switch } from 'react-router';\nimport { Route } from 'react-router-dom';\n\n// components\nimport Landing from './components/Landing';\nimport Login from './components/Login';\nimport LoginPane from './components/LoginPane';\nimport Dashboard from './components/Dashboard';\nimport Clients from './components/Clients';\nimport Client from './components/clients/Client';\nimport ClientForm from './components/clients/ClientForm'\nimport Users from './components/Users';\nimport User from './components/users/User';\nimport UserForm from './components/users/UserForm'\nimport NeedForm from './components/client_needs/NeedForm'\nimport Need from './components/client_needs/Need'\nimport PrivateRoute from './components/routes/PrivateRoute'\nimport AdminRoute from './components/routes/AdminRoute'\nimport Providers from './components/Providers';\nimport AddServicePrompt from './components/providers/AddServicePrompt'\nimport ProviderForm from './components/providers/ProviderForm'\nimport ProviderProfile from './components/providers/ProviderProfile'\nimport ProviderRatingForm from './components/providers/ProviderRatingForm.js';\nimport Services from './components/Services';\nimport Service from './components/services/Service';\nimport ServiceForm from './components/services/ServiceForm'\nimport Goods from './components/Goods';\nimport Good from './components/goods/Good';\nimport GoodForm from './components/goods/GoodForm'\nimport AdminLogs from './components/AdminLogs';\nimport Reporting from './components/Reporting';\nimport Eligibilities from './components/additionalFIelds/Eligibilities';\nimport ManageFields from './components/settings/ManageFields';\nimport Questions from './components/additionalFIelds/Questions';\n\nconst routes = (\n  <Switch>\n    <Route exact path='/' component={Landing} />\n    <Route path='/login' component={Login} />\n    <Route path='/login-pane' component={LoginPane} />\n    <PrivateRoute path='/dashboard' component={Dashboard} />\n\n    <PrivateRoute path='/clients/:id/edit' component={ClientForm} />\n    <PrivateRoute path='/clients/:id/needs/new' component={NeedForm} />\n    <PrivateRoute path='/clients/new' component={ClientForm} />\n    <PrivateRoute path='/clients/:id' component={Client} />\n    <PrivateRoute path='/clients' component={Clients} />\n\n    <AdminRoute path='/users/:id/edit' component={UserForm} />\n    <AdminRoute path='/users/new' component={UserForm} />\n    <AdminRoute path='/users/:id' component={User} />\n    <AdminRoute path='/users' component={Users} />\n    <AdminRoute path='/admin-logs' component={AdminLogs} />\n\n    <PrivateRoute path='/needs/:need_id/edit' component={NeedForm} />\n    <PrivateRoute path='/needs/:need_id' component={Need} />\n\n    <PrivateRoute path='/providers/:id/rate' component={ProviderRatingForm} />\n    <PrivateRoute path='/providers/new/add-service' component={AddServicePrompt} />\n    <PrivateRoute path='/providers/:formType/new' component={ProviderForm} />\n    <PrivateRoute path='/providers/:id/edit/' component={ProviderForm} />\n    <PrivateRoute path='/providers/:id' component={ProviderProfile} />\n    <PrivateRoute path='/providers' component={Providers} />\n\n    <PrivateRoute path='/services/:id/edit' component={ServiceForm} />\n    <PrivateRoute path='/services/new' component={ServiceForm} />\n    <PrivateRoute path='/services/:id' component={Service} />\n    <PrivateRoute path='/services' component={Services} />\n\n    <PrivateRoute path='/goods/:id/edit' component={GoodForm} />\n    <PrivateRoute path='/goods/new' component={GoodForm} />\n    <PrivateRoute path='/goods/:id' component={Good} />\n    <PrivateRoute path='/goods' component={Goods} />\n\n    <PrivateRoute path='/reporting' component={Reporting} />\n\n    <PrivateRoute path='/eligibility-criteria' component={Eligibilities} />\n\n    <PrivateRoute path='/questions' component={Questions} />\n\n    <AdminRoute path='/settings/manage-fields' component={ManageFields} />\n  </Switch>\n);\n\nexport default routes;\n","import React, { useState, useEffect } from \"react\";\nimport _ from 'lodash';\nimport { useParams } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\nimport { Container } from \"@material-ui/core\";\nimport Button from '@material-ui/core/Button'\nimport { Edit, Print } from '@material-ui/icons';\nimport { Link } from '../shared'\nimport Alert from '@material-ui/core/Alert';\n\nimport ClientNeeds from '../ClientNeeds';\nimport ClientInfoTable from './client_table/ClientInfoTable';\nimport AppointmentRow from '../appointments/AppointmentRow';\n\nimport { fetchClient } from '../../store/actions/clientActions.js'\nimport { fetchClientFields } from \"../../api/settingApi\";\nimport { clientFields } from '../../constants/client_fields.js'\n\n//Table\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport default function Client() {\n  //redux hooks\n  const dispatch = useDispatch();\n  const {id} = useParams();\n\n  const [state, setState] = useState({\n    data: null,\n    CF: null,\n    CN: null\n  });\n\n\n  useEffect(() => {\n      dispatch(fetchClient(id)).then(data => {\n        setState(state => ({\n          ...state,\n          data\n        }))\n      })\n  }, [dispatch, id]);\n\n  useEffect(() => {\n      if (state.CF == null) {\n        fetchClientFields().then(json => {\n          setState(state => ({\n            ...state,\n            CF: json\n          }))\n        })\n      }\n    }, [dispatch, state.CF]\n  );\n\n\n  if (state.data && state.CF) {\n    const client = state.data;\n    const CF = state.CF;\n    const formStructure = CF['form_structure'];\n\n    if (client.family) {\n      let members = _.clone(client.family.members);\n      _.remove(members, {\n        person: { id: id }\n      });\n    }\n\n    return (\n      <Container>\n        <h3>Client Profile</h3>\n        <div>\n          <Link to={`/clients/${id}/edit/`}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Edit/>}>\n              Edit\n            </Button>\n          </Link>\n          &nbsp;\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => window.print()}\n            startIcon={<Print/>}>\n            Print\n          </Button>\n\n          <div>\n            {client.is_deleted &&\n            <Alert variant=\"filled\" severity=\"error\">\n              The client has been deleted\n            </Alert>\n            }\n            {/*Client info tables*/}\n            {_.map(formStructure, (infoFields, step) => {\n              return (\n                <ClientInfoTable\n                  key={step}\n                  step={step}\n                  client={client}\n                  infoFields={_.keys(_.omit(infoFields, 'family'))}\n                  clientFields={clientFields}\n                />\n              )\n            })}\n\n            {/*Family*/}\n            {/*TODO: have family tested*/}\n            {(client.family && client.family.members.length > 0) &&\n              <TableContainer>\n                <Table>\n                  <TableHead>\n                    <TableRow >\n                      <TableCell>First name</TableCell>\n                      <TableCell>Last name</TableCell>\n                      <TableCell>Date of Birth</TableCell>\n                      <TableCell>Gender</TableCell>\n                      <TableCell>Relationship</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  {_.map(_.filter(client.family.members, member => {\n                    return member.person.id !== client.id\n                  }), (member, index) => {\n                    return (\n                      <clientFamilyTableRow\n                        member = {member}\n                        index = {index}\n                      />\n                      )\n                  })}\n                </Table>\n              </TableContainer>\n            }\n          </div>\n\n          {/*TODO： client needs*/}\n          <h3>Needs</h3>\n          <Link to={`/clients/${client.id}/needs/new`}>\n            <Button variant=\"contained\">\n              Add need\n            </Button>\n          </Link>\n          { client && client.need_groups.length > 0 &&\n          <ClientNeeds\n            clientId={client.id}\n            needGroups={client.need_groups}\n          />\n          }\n\n          <h3>Appointments</h3>\n          { client && client.appointments.length > 0 &&\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow >\n                  <TableCell>Category</TableCell>\n                  <TableCell>Date</TableCell>\n                  <TableCell>Time</TableCell>\n                  <TableCell>Description</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {client.appointments.map(appointment => {\n                  return (\n                    <AppointmentRow\n                      key={appointment.id}\n                      appointment={appointment}\n                    />\n                  )\n                })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          }\n          <hr />\n\n        </div>\n      </Container>\n    )\n  } else {\n    return null;\n  }\n}\n\nfunction clientFamilyTableRow({member, index}) {\n  return (\n    <TableRow key={member.person.id}>\n      <TableCell component=\"th\" scope=\"row\">\n        Family member #{index + 1}\n      </TableCell>\n      <TableCell align=\"left\">{member.person.first_name}</TableCell>\n      <TableCell align=\"left\">{member.person.last_name}</TableCell>\n      <TableCell align=\"left\">{member.person.birth_date}</TableCell>\n      <TableCell align=\"left\">{member.person.gender}</TableCell>\n      <TableCell align=\"left\">{member.relationship}</TableCell>\n    </TableRow>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport TR from '../shared/TR'\nimport { fetchUser } from '../../api/userApi'\nimport { useParams } from \"react-router\";\nimport { Link, Loading } from \"../shared\";\nimport { Container, Paper, Table, Typography, TableBody, Button } from \"@material-ui/core\";\n\nexport default function User() {\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState({});\n\n  const {id} = useParams();\n  useEffect(() => {\n    fetchUser(id).then(user => {\n      setUser(user);\n      setLoading(false);\n    });\n  }, [id]);\n\n  if (loading)\n    return <Loading message={`Loading user...`}/>;\n\n  return (\n    <Container>\n      <Typography variant=\"h5\" gutterBottom>\n        User profile\n      </Typography>\n      <Link to={`/users/${id}/edit`}>\n        <Button color=\"primary\" variant=\"contained\" style={{marginBottom: 12}}>\n          Edit\n        </Button>\n      </Link>\n\n      <Paper elevation={4}>\n        <Table>\n          <TableBody>\n            <TR\n              title=\"First Name\"\n              value={user.first_name}\n            />\n            <TR\n              title=\"Last Name\"\n              value={user.last_name}\n            />\n            <TR\n              title=\"Username\"\n              value={user.username}\n            />\n            <TR\n              title=\"Email\"\n              value={user.email}\n            />\n            <TR\n              title=\"Role\"\n              value={user.is_superuser ? 'Admin' : 'User'}\n            />\n            <TR\n              title=\"Phone Number\"\n              value={user.primary_phone_number}\n            />\n            <TR\n              title=\"Alternative Phone Number\"\n              value={user.alt_phone_number}\n            />\n          </TableBody>\n        </Table>\n      </Paper>\n    </Container>\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport { Chip, Container } from \"@material-ui/core\";\nimport { Add as AddIcon, Check as YesIcon} from \"@material-ui/icons\";\nimport { DeleteModal, DropdownMenu, Link, Loading, DataTable } from \"./shared\";\nimport { deleteUser, fetchUsers } from \"../api/userApi\";\nimport { useHistory } from \"react-router\";\n\nexport default function Users() {\n  const history = useHistory();\n  const [state, setState] = useState({\n    loading: true,\n    data: [],\n    selectedId: null,\n    deleteDialogTitle: '',\n    showDeleteDialog: false,\n  });\n\n  useEffect(() => {\n    fetchUsers().then(data => {\n      setState(state => ({...state, loading: false, data}));\n    });\n  }, []);\n\n  const showDeleteDialog = (id, title) => () => {\n    setState(state => ({\n      ...state, selectedId: id, showDeleteDialog: true,\n      deleteDialogTitle: 'Delete ' + title + ' ?'\n    }));\n  };\n\n  const handleDelete = async (id, form) => {\n    try {\n      await deleteUser(id, form);\n      setState(state => ({\n        ...state, showDeleteDialog: false,\n        data: state.data.filter(item => item.id !== state.selectedId)\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const columns = [\n    {\n      name: 'username',\n      label: 'Username',\n      options: {\n        customBodyRender: (username, {rowData}) => (\n          <Link color to={`/users/${rowData[rowData.length - 1]}`}>\n            {username}\n          </Link>\n        )\n      }\n    },\n    {\n      name: 'email',\n      label: 'Email'\n    },\n    {\n      name: 'first_name',\n      label: 'First name'\n    },\n    {\n      name: 'last_name',\n      label: 'Last name'\n    },\n    {\n      name: 'primary_phone_number',\n      label: 'Primary phone',\n      options: {\n        display: false,\n      }\n    },\n    {\n      name: 'secondary_phone_number',\n      label: 'Secondary phone',\n      options: {\n        display: false,\n      }\n    },\n    {\n      name: 'is_superuser',\n      label: 'Admin',\n      options: {\n        customBodyRender: (is_admin) => {\n          if (is_admin)\n            return <YesIcon color=\"primary\"/>\n        }\n      }\n    },\n    {\n      name: 'id',\n      label: ' ',\n      options: {\n        sort: false,\n        filter: false,\n        viewColumns: false,\n        searchable: false,\n        download: false,\n        customBodyRender: (id, {rowData, rowIndex}) =>\n          <DropdownMenu urlPrefix={'users'} objectId={id}\n                        handleDelete={() => showDeleteDialog(id, rowData[0])}/>\n      }\n    }\n  ];\n\n  if (state.loading)\n    return <Loading message={`Loading users...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Users\"}\n        data={state.data}\n        columns={columns}\n        options={{\n          filter: false,\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n          customToolbar: () =>\n            <Chip\n              onClick={() => history.push('/users/new')}\n              color=\"primary\"\n              icon={<AddIcon/>}\n              label=\"Add\"\n              variant=\"outlined\"/>\n        }}\n      />\n      <DeleteModal\n        objectId={state.selectedId}\n        title={state.deleteDialogTitle}\n        show={state.showDeleteDialog}\n        onHide={() => setState(state => ({...state, showDeleteDialog: false}))}\n        delete={handleDelete}\n      />\n    </Container>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport _ from 'lodash';\nimport { useParams } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\nimport { Container } from \"@material-ui/core\";\nimport Button from '@material-ui/core/Button'\nimport { Edit, RateReview, Print } from '@material-ui/icons';\nimport { Link } from '../shared'\nimport Rating from '@material-ui/core/Rating';\nimport Box from '@material-ui/core/Box';\n\nimport { providerFields } from '../../constants/provider_fields.js'\n\n// components\nimport ProviderInfoTable from './provider_table/ProviderInfoTable';\n\n\nimport { fetchProvider } from '../../store/actions/providerActions.js'\nimport { fetchProviderFields } from '../../api/settingApi';\n\nexport default function ProviderProfile() {\n  //redux hooks\n  const dispatch = useDispatch();\n  const {id} = useParams();\n\n  const [state, setState] = useState({\n    data: null,\n    formSetting: null\n  });\n\n\n  useEffect(() => {\n      dispatch(fetchProvider(id)).then(data => {\n        setState(state => ({\n          ...state,\n          data\n        }))\n      })\n    }, [dispatch, id]\n  );\n\n  useEffect(() => {\n      if (state.formSetting == null) {\n        fetchProviderFields(false).then(json => {\n          setState(state => ({\n            ...state,\n            formSetting: json\n          }))\n        })\n      }\n    }, [dispatch, state.formSetting]\n  );\n  if (state.data && state.formSetting) {\n    const {provider} = state.data;\n    const {formSetting} = state;\n\n    let formType;\n    if (provider.type === 'Organization') {\n      formType = 'organization'\n    } else if (provider.type === 'Individual') {\n      formType = provider.category.split(' ').join('_').toLowerCase()\n    }\n    const reviewValue = ((provider.reviews.map(review => review.rating))\n      .reduce((first, second) => first + second, 0)) / provider.reviews.length;\n    return (\n      <Container>\n        <h3>Provider Profile</h3>\n        <div>\n          <Link to={`/providers/${id}/edit/`}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Edit/>}>\n              Edit\n            </Button>\n          </Link>\n          &nbsp;\n          <Link to={`/providers/${id}/rate`}>\n            <Button\n              variant=\"contained\"\n              startIcon={<RateReview/>}>\n              Rate Provider\n            </Button>\n          </Link>\n          {' '}\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => window.print()}\n            startIcon={<Print/>}>\n            Print\n          </Button>\n\n          {formSetting[formType] &&\n          _.map(formSetting[formType].form_structure, (infoFields, step) => {\n            return (\n              <ProviderInfoTable\n                key={step}\n                step={step}\n                provider={provider}\n                providerFields={providerFields}\n                infoFields={infoFields}\n              />\n            )\n          })\n          }\n\n          <h3> Reviews </h3>\n          <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\n            <Rating size=\"large\" name = \"provider-rating\" value={reviewValue}/>\n          </Box>\n\n          <h3>Services</h3>\n          <Link to=\"/services/new\">\n            <Button variant=\"contained\">\n              Add Service\n            </Button>\n          </Link>\n\n        </div>\n      </Container>\n    )\n  } else {\n    return '';\n  }\n}\n","import React from 'react';\n\n// components\nimport TopNavbar from './components/layouts/TopNavbar'\nimport Footer from './components/layouts/Footer'\n// import Breadcurum from './components/layouts/Breadcrumb';\nimport { createTheme, adaptV4Theme } from '@material-ui/core/styles';\nimport { blue, pink } from '@material-ui/core/colors'\nimport { ThemeProvider, StyledEngineProvider } from '@material-ui/core';\n\nimport routes from \"./routes\";\n\n// style\nimport './stylesheets/App.scss';\n\nconst theme = createTheme(adaptV4Theme({\n  palette: {\n    primary: {main: blue[700]},\n    secondary: pink,\n  },\n}));\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <StyledEngineProvider injectFirst>\n        <ThemeProvider theme={theme}>\n          <TopNavbar/>\n          <div style={{paddingTop: 50, paddingBottom: 22}}>\n            {/*<Breadcurum/>*/}\n            {routes}\n          </div>\n          <Footer/>\n        </ThemeProvider>\n      </StyledEngineProvider>\n    </div>\n  );\n}\n","// import 'bootstrap/dist/css/bootstrap.css';\n// import 'bootstrap/dist/css/bootstrap-theme.css';\n\nimport configureStore from './store.js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom'\nimport { PersistGate } from 'redux-persist/integration/react'\n\nimport App from './App';\n\nconst { store, persistor } = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}