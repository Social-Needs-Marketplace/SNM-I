(this.webpackJsonpsnm_client=this.webpackJsonpsnm_client||[]).push([[0],{17:function(e,t){var n;n="jias.snmi.ca"===(window&&window.location&&window.location.hostname)?"https://jias-server.snmi.ca":"http://127.0.0.1:8000";e.exports=Object.freeze({serverHost:n,torontoCoordinates:{lat:43.6497,lng:-79.3763},countryOptions:["Afghanistan","\xc5land Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua & Barbuda","Argentina","Armenia","Aruba","Ascension Island","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Brazil","British Indian Ocean Territory","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Canary Islands","Cape Verde","Caribbean Netherlands","Cayman Islands","Central African Republic","Ceuta & Melilla","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo - Brazzaville","Congo - Kinshasa","Cook Islands","Costa Rica","C\xf4te d\u2019Ivoire","Croatia","Cuba","Cura\xe7ao","Cyprus","Czechia","Denmark","Diego Garcia","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong SAR China","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR China","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar (Burma)","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","North Macedonia","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territories","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn Islands","Poland","Portugal","Pseudo-Accents","Pseudo-Bidi","Puerto Rico","Qatar","R\xe9union","Romania","Russia","Rwanda","Samoa","San Marino","S\xe3o Tom\xe9 & Pr\xedncipe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia & South Sandwich Islands","South Korea","South Sudan","Spain","Sri Lanka","St. Barth\xe9lemy","St. Helena","St. Kitts & Nevis","St. Lucia","St. Martin","St. Pierre & Miquelon","St. Vincent & Grenadines","Sudan","Suriname","Svalbard & Jan Mayen","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad & Tobago","Tristan da Cunha","Tunisia","Turkey","Turkmenistan","Turks & Caicos Islands","Tuvalu","U.S. Outlying Islands","U.S. Virgin Islands","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Wallis & Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],languageOptions:["Abkhazian (ab)","Achinese (ace)","Acoli (ach)","Adangme (ada)","Adyghe (ady)","Afar (aa)","Afrihili (afh)","Afrikaans (af)","Aghem (agq)","Ainu (ain)","Akan (ak)","Akkadian (akk)","Akoose (bss)","Alabama (akz)","Albanian (sq)","Aleut (ale)","Algerian Arabic (arq)","American English (en_US)","American Sign Language (ase)","Amharic (am)","Ancient Egyptian (egy)","Ancient Greek (grc)","Angika (anp)","Ao Naga (njo)","Arabic (ar)","Aragonese (an)","Aramaic (arc)","Araona (aro)","Arapaho (arp)","Arawak (arw)","Armenian (hy)","Aromanian (rup)","Arpitan (frp)","Assamese (as)","Asturian (ast)","Asu (asa)","Atsam (cch)","Australian English (en_AU)","Austrian German (de_AT)","Avaric (av)","Avestan (ae)","Awadhi (awa)","Aymara (ay)","Azerbaijani (az)","Badaga (bfq)","Bafia (ksf)","Bafut (bfd)","Bakhtiari (bqi)","Balinese (ban)","Baluchi (bal)","Bambara (bm)","Bamun (bax)","Banjar (bjn)","Basaa (bas)","Bashkir (ba)","Basque (eu)","Batak Toba (bbc)","Bavarian (bar)","Beja (bej)","Belarusian (be)","Bemba (bem)","Bena (bez)","Bengali (bn)","Betawi (bew)","Bhojpuri (bho)","Bikol (bik)","Bini (bin)","Bishnupriya (bpy)","Bislama (bi)","Blin (byn)","Blissymbols (zbl)","Bodo (brx)","Bosnian (bs)","Brahui (brh)","Braj (bra)","Brazilian Portuguese (pt_BR)","Breton (br)","British English (en_GB)","Buginese (bug)","Bulgarian (bg)","Bulu (bum)","Buriat (bua)","Burmese (my)","Caddo (cad)","Cajun French (frc)","Canadian English (en_CA)","Canadian French (fr_CA)","Cantonese (yue)","Capiznon (cps)","Carib (car)","Catalan (ca)","Cayuga (cay)","Cebuano (ceb)","Central Atlas Tamazight (tzm)","Central Dusun (dtp)","Central Kurdish (ckb)","Central Yupik (esu)","Chadian Arabic (shu)","Chagatai (chg)","Chamorro (ch)","Chechen (ce)","Cherokee (chr)","Cheyenne (chy)","Chibcha (chb)","Chiga (cgg)","Chimborazo Highland Quichua (qug)","Chinese (zh)","Chinook Jargon (chn)","Chipewyan (chp)","Choctaw (cho)","Church Slavic (cu)","Chuukese (chk)","Chuvash (cv)","Classical Newari (nwc)","Classical Syriac (syc)","Colognian (ksh)","Comorian (swb)","Congo Swahili (swc)","Coptic (cop)","Cornish (kw)","Corsican (co)","Cree (cr)","Creek (mus)","Crimean Turkish (crh)","Croatian (hr)","Czech (cs)","Dakota (dak)","Danish (da)","Dargwa (dar)","Dazaga (dzg)","Delaware (del)","Dinka (din)","Divehi (dv)","Dogri (doi)","Dogrib (dgr)","Duala (dua)","Dutch (nl)","Dyula (dyu)","Dzongkha (dz)","Eastern Frisian (frs)","Efik (efi)","Egyptian Arabic (arz)","Ekajuk (eka)","Elamite (elx)","Embu (ebu)","Emilian (egl)","English (en)","Erzya (myv)","Esperanto (eo)","Estonian (et)","European Portuguese (pt_PT)","European Spanish (es_ES)","Ewe (ee)","Ewondo (ewo)","Extremaduran (ext)","Fang (fan)","Fanti (fat)","Faroese (fo)","Fiji Hindi (hif)","Fijian (fj)","Filipino (fil)","Finnish (fi)","Flemish (nl_BE)","Fon (fon)","Frafra (gur)","French (fr)","Friulian (fur)","Fulah (ff)","Ga (gaa)","Gagauz (gag)","Galician (gl)","Gan Chinese (gan)","Ganda (lg)","Gayo (gay)","Gbaya (gba)","Geez (gez)","Georgian (ka)","German (de)","Gheg Albanian (aln)","Ghomala (bbj)","Gilaki (glk)","Gilbertese (gil)","Goan Konkani (gom)","Gondi (gon)","Gorontalo (gor)","Gothic (got)","Grebo (grb)","Greek (el)","Guarani (gn)","Gujarati (gu)","Gusii (guz)","Gwich\u02bcin (gwi)","Haida (hai)","Haitian (ht)","Hakka Chinese (hak)","Hausa (ha)","Hawaiian (haw)","Hebrew (he)","Herero (hz)","Hiligaynon (hil)","Hindi (hi)","Hiri Motu (ho)","Hittite (hit)","Hmong (hmn)","Hungarian (hu)","Hupa (hup)","Iban (iba)","Ibibio (ibb)","Icelandic (is)","Ido (io)","Igbo (ig)","Iloko (ilo)","Inari Sami (smn)","Indonesian (id)","Ingrian (izh)","Ingush (inh)","Interlingua (ia)","Interlingue (ie)","Inuktitut (iu)","Inupiaq (ik)","Irish (ga)","Italian (it)","Jamaican Creole English (jam)","Japanese (ja)","Javanese (jv)","Jju (kaj)","Jola-Fonyi (dyo)","Judeo-Arabic (jrb)","Judeo-Persian (jpr)","Jutish (jut)","Kabardian (kbd)","Kabuverdianu (kea)","Kabyle (kab)","Kachin (kac)","Kaingang (kgp)","Kako (kkj)","Kalaallisut (kl)","Kalenjin (kln)","Kalmyk (xal)","Kamba (kam)","Kanembu (kbl)","Kannada (kn)","Kanuri (kr)","Kara-Kalpak (kaa)","Karachay-Balkar (krc)","Karelian (krl)","Kashmiri (ks)","Kashubian (csb)","Kawi (kaw)","Kazakh (kk)","Kenyang (ken)","Khasi (kha)","Khmer (km)","Khotanese (kho)","Khowar (khw)","Kikuyu (ki)","Kimbundu (kmb)","Kinaray-a (krj)","Kinyarwanda (rw)","Kirmanjki (kiu)","Klingon (tlh)","Kom (bkm)","Komi (kv)","Komi-Permyak (koi)","Kongo (kg)","Konkani (kok)","Korean (ko)","Koro (kfo)","Kosraean (kos)","Kotava (avk)","Koyra Chiini (khq)","Koyraboro Senni (ses)","Kpelle (kpe)","Krio (kri)","Kuanyama (kj)","Kumyk (kum)","Kurdish (ku)","Kurukh (kru)","Kutenai (kut)","Kwasio (nmg)","Kyrgyz (ky)","K\u02bciche\u02bc (quc)","Ladino (lad)","Lahnda (lah)","Lakota (lkt)","Lamba (lam)","Langi (lag)","Lao (lo)","Latgalian (ltg)","Latin (la)","Latin American Spanish (es_419)","Latvian (lv)","Laz (lzz)","Lezghian (lez)","Ligurian (lij)","Limburgish (li)","Lingala (ln)","Lingua Franca Nova (lfn)","Literary Chinese (lzh)","Lithuanian (lt)","Livonian (liv)","Lojban (jbo)","Lombard (lmo)","Low German (nds)","Lower Silesian (sli)","Lower Sorbian (dsb)","Lozi (loz)","Luba-Katanga (lu)","Luba-Lulua (lua)","Luiseno (lui)","Lule Sami (smj)","Lunda (lun)","Luo (luo)","Luxembourgish (lb)","Luyia (luy)","Maba (mde)","Macedonian (mk)","Machame (jmc)","Madurese (mad)","Mafa (maf)","Magahi (mag)","Main-Franconian (vmf)","Maithili (mai)","Makasar (mak)","Makhuwa-Meetto (mgh)","Makonde (kde)","Malagasy (mg)","Malay (ms)","Malayalam (ml)","Maltese (mt)","Manchu (mnc)","Mandar (mdr)","Mandingo (man)","Manipuri (mni)","Manx (gv)","Maori (mi)","Mapuche (arn)","Marathi (mr)","Mari (chm)","Marshallese (mh)","Marwari (mwr)","Masai (mas)","Mazanderani (mzn)","Medumba (byv)","Mende (men)","Mentawai (mwv)","Meru (mer)","Meta\u02bc (mgo)","Mexican Spanish (es_MX)","Micmac (mic)","Middle Dutch (dum)","Middle English (enm)","Middle French (frm)","Middle High German (gmh)","Middle Irish (mga)","Min Nan Chinese (nan)","Minangkabau (min)","Mingrelian (xmf)","Mirandese (mwl)","Mizo (lus)","Modern Standard Arabic (ar_001)","Mohawk (moh)","Moksha (mdf)","Moldavian (ro_MD)","Mongo (lol)","Mongolian (mn)","Morisyen (mfe)","Moroccan Arabic (ary)","Mossi (mos)","Multiple Languages (mul)","Mundang (mua)","Muslim Tat (ttt)","Myene (mye)","Nama (naq)","Nauru (na)","Navajo (nv)","Ndonga (ng)","Neapolitan (nap)","Nepali (ne)","Newari (new)","Ngambay (sba)","Ngiemboon (nnh)","Ngomba (jgo)","Nheengatu (yrl)","Nias (nia)","Niuean (niu)","No linguistic content (zxx)","Nogai (nog)","North Ndebele (nd)","Northern Frisian (frr)","Northern Sami (se)","Northern Sotho (nso)","Norwegian (no)","Norwegian Bokm\xe5l (nb)","Norwegian Nynorsk (nn)","Novial (nov)","Nuer (nus)","Nyamwezi (nym)","Nyanja (ny)","Nyankole (nyn)","Nyasa Tonga (tog)","Nyoro (nyo)","Nzima (nzi)","N\u02bcKo (nqo)","Occitan (oc)","Ojibwa (oj)","Old English (ang)","Old French (fro)","Old High German (goh)","Old Irish (sga)","Old Norse (non)","Old Persian (peo)","Old Proven\xe7al (pro)","Oriya (or)","Oromo (om)","Osage (osa)","Ossetic (os)","Ottoman Turkish (ota)","Pahlavi (pal)","Palatine German (pfl)","Palauan (pau)","Pali (pi)","Pampanga (pam)","Pangasinan (pag)","Papiamento (pap)","Pashto (ps)","Pennsylvania German (pdc)","Persian (fa)","Phoenician (phn)","Picard (pcd)","Piedmontese (pms)","Plautdietsch (pdt)","Pohnpeian (pon)","Polish (pl)","Pontic (pnt)","Portuguese (pt)","Prussian (prg)","Punjabi (pa)","Quechua (qu)","Rajasthani (raj)","Rapanui (rap)","Rarotongan (rar)","Riffian (rif)","Romagnol (rgn)","Romanian (ro)","Romansh (rm)","Romany (rom)","Rombo (rof)","Root (root)","Rotuman (rtm)","Roviana (rug)","Rundi (rn)","Russian (ru)","Rusyn (rue)","Rwa (rwk)","Saho (ssy)","Sakha (sah)","Samaritan Aramaic (sam)","Samburu (saq)","Samoan (sm)","Samogitian (sgs)","Sandawe (sad)","Sango (sg)","Sangu (sbp)","Sanskrit (sa)","Santali (sat)","Sardinian (sc)","Sasak (sas)","Sassarese Sardinian (sdc)","Saterland Frisian (stq)","Saurashtra (saz)","Scots (sco)","Scottish Gaelic (gd)","Selayar (sly)","Selkup (sel)","Sena (seh)","Seneca (see)","Serbian (sr)","Serbo-Croatian (sh)","Serer (srr)","Seri (sei)","Shambala (ksb)","Shan (shn)","Shona (sn)","Sichuan Yi (ii)","Sicilian (scn)","Sidamo (sid)","Siksika (bla)","Silesian (szl)","Simplified Chinese (zh_Hans)","Sindhi (sd)","Sinhala (si)","Skolt Sami (sms)","Slave (den)","Slovak (sk)","Slovenian (sl)","Soga (xog)","Sogdien (sog)","Somali (so)","Soninke (snk)","South Azerbaijani (azb)","South Ndebele (nr)","Southern Altai (alt)","Southern Sami (sma)","Southern Sotho (st)","Spanish (es)","Sranan Tongo (srn)","Standard Moroccan Tamazight (zgh)","Sukuma (suk)","Sumerian (sux)","Sundanese (su)","Susu (sus)","Swahili (sw)","Swati (ss)","Swedish (sv)","Swiss French (fr_CH)","Swiss German (gsw)","Swiss High German (de_CH)","Syriac (syr)","Tachelhit (shi)","Tagalog (tl)","Tahitian (ty)","Taita (dav)","Tajik (tg)","Talysh (tly)","Tamashek (tmh)","Tamil (ta)","Taroko (trv)","Tasawaq (twq)","Tatar (tt)","Telugu (te)","Tereno (ter)","Teso (teo)","Tetum (tet)","Thai (th)","Tibetan (bo)","Tigre (tig)","Tigrinya (ti)","Timne (tem)","Tiv (tiv)","Tlingit (tli)","Tok Pisin (tpi)","Tokelau (tkl)","Tongan (to)","Tornedalen Finnish (fit)","Traditional Chinese (zh_Hant)","Tsakhur (tkr)","Tsakonian (tsd)","Tsimshian (tsi)","Tsonga (ts)","Tswana (tn)","Tulu (tcy)","Tumbuka (tum)","Tunisian Arabic (aeb)","Turkish (tr)","Turkmen (tk)","Turoyo (tru)","Tuvalu (tvl)","Tuvinian (tyv)","Twi (tw)","Tyap (kcg)","Udmurt (udm)","Ugaritic (uga)","Ukrainian (uk)","Umbundu (umb)","Unknown Language (und)","Upper Sorbian (hsb)","Urdu (ur)","Uyghur (ug)","Uzbek (uz)","Vai (vai)","Venda (ve)","Venetian (vec)","Veps (vep)","Vietnamese (vi)","Volap\xfck (vo)","V\xf5ro (vro)","Votic (vot)","Vunjo (vun)","Walloon (wa)","Walser (wae)","Waray (war)","Warlpiri (wbp)","Washo (was)","Wayuu (guc)","Welsh (cy)","West Flemish (vls)","Western Frisian (fy)","Western Mari (mrj)","Wolaytta (wal)","Wolof (wo)","Wu Chinese (wuu)","Xhosa (xh)","Xiang Chinese (hsn)","Yangben (yav)","Yao (yao)","Yapese (yap)","Yemba (ybb)","Yiddish (yi)","Yoruba (yo)","Zapotec (zap)","Zarma (dje)","Zaza (zza)","Zeelandic (zea)","Zenaga (zen)","Zhuang (za)","Zoroastrian Dari (gbz)","Zulu (zu)","Zuni (zun)"],genderOptions:["Female","Male","Other"],maritalStatusOptions:["Common Law","Divorced","Married","Other","Separated","Single","Widowed"],statusInCanadaOptions:["Application in Process - Family","Application in Process - Humanitarian and Compassionate","Application in Process - Independent","Application in Process - Refugee","Canadian Citizen","Immigrant","Other","Permanent Resident - Business Class","Permanent Resident - Canadian Experience Class","Permanent Resident - Family Class","Permanent Resident -  Humanitarian and Compassionate","Permanent Resident - Live-in Caregiver","Permanent Resident - Provincial Nominee","Permanent Resident - Refugees","Permanent Resident - Skilled Worker and Skilled Trades","Temporary Resident","Visitors Visa","Work Permit"],educationLevelOptions:["College","Elementary","Post Graduate","Secondary","University"],incomeSourceOptions:["Crowd Ward","Dependent of OW/ODSP","Employment","Employment Insurance","Family Members Income","None","Ontario Disability Support Program","Ontario Works","Other","Pension","Unknown","Workers Safety and Insurance"],matchStatusOptions:["Contacted","Matched","Referred","Selected"],familyRelationshipOptions:["Child","Parent","Sibling","Spouse"],needStatusOptions:["Fulfilled","In Progress","Matched","Pending","Unmatched"],serviceTypeOptions:["External","Internal","Professional/Community","Volunteer based"],serviceSharedWithOptions:["Children's Aid Society of Toronto","Durham Children's Aid Society","Eva's Initiatives","Abrigo Centre","Adventist community services","AIDS Committee of Durham Region","Albion Neighbourhood Services","Alexandra Park Community Centre","Applegrove Community Complex","Arab Community Centre of Toronto","Aurora Food Pantry","Barbra Schlifer Commemorative Clinic","Bluffs Food Bank","Boost Child & Youth Advocacy Centre","Brock Community Food Bank","Central Toronto Youth Services","Covenant House Toronto","Durham Rape Crisis Centre","Durham Youth Housing and Support Services","Horizons for Youth","Kababayan Multicultural Centre","Markham Food Bank","Parkdale Community Food Bank","Pediatric Oncology Group of Ontario","Private","Public"],provinceOptions:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan"],ACTION_SUCCESS:"ACTION_SUCCESS",ACTION_ERROR:"ACTION_ERROR"})},644:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){"use strict";n.r(t);var a=n(77),r=n(307),i=n(371),o=n(20),c=n(5),s=n(4),l=n(40),d=n.n(l),u=n(17),b="RECEIVE_CLIENT_NEEDS",j="RECEIVE_CLIENT_NEED",h="REMOVE_CLIENT_NEED",p="REQUEST_NEED",m="REQUEST_NEEDS",f="RECEIVE_NEEDS",O="RECEIVE_CLIENT_NEED_GROUP",g=" RECEIVE_CLIENT_NEED_INFO";function v(e,t,n){return{type:j,clientId:e,need:t,needGroup:n}}function x(e,t,n){return{type:g,clientId:e,needId:t,need:n}}function y(e,t,n){return function(a){var r=u.serverHost+"/clients/"+e+"/need_groups/"+t+"/";return d()(r,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return a(function(e,t){return{type:O,clientId:e,needGroup:t}}(e,t))}))}}function _(e,t,n){return function(a){var r=u.serverHost+"/clients/"+e+"/needs/"+t+"/";return d()(r,{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(n){204===n.status&&a(function(e,t){return{type:h,clientId:e,needId:t}}(e,t))}))}}function C(e,t){return function(n){n({type:p,needId:e});var a=u.serverHost+"/needs/"+e;return d()(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(e){n(x(e.client_id,e.id,e)),t(e)}))}}var S=n(22),k=n.n(S);var w=n(16),I=n.n(w),N=n(26),T=n(372),E="LOGIN_SUCCESS",A="LOGIN_FAILURE",P="LOGGED_OUT",D="UPDATE_ORGANIZATION";function F(e){return console.log("File: authActions.js -  Function: login -  Parameters: params - Values:  ",e),function(t){var n=u.serverHost+"/api-token-auth/";return fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n.non_field_errors));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){console.log("File: authActions.js -  Function: login - Step 2  json:  ",e);var n,a=Object(T.a)(e.token),r={user_id:(n=a).user_id,username:n.username,email:n.email};r.expired_at=1e3*a.exp,r.is_admin=e.is_admin;var i={id:e.provider_id,name:e.organization_name};return localStorage.setItem("jwt_token",e.token),t(function(e,t){return console.log("File: authActions.js - Function: login_success - Parameters: user, organization. - Values: ",e,t),{type:E,user:e,organization:t}}(r,i)),{status:E}})).catch((function(e){var n;return n="Failed to fetch"===e.message?"Server is unavailable due to a temporary outage.":"The username or password you entered is incorrect. Please try again.",t(function(e){return console.log("File: authActions.js -  Function: login_failure - Parameters: alert - Values:  ",e),{type:A,alert:e}}(n)),{status:A,message:n}}))}}function L(e){return function(t){t(function(e){return console.log("File: authActions.js -  Function: logged_out - Parameters: sessionExpired - Values: ",e),{type:P,alert:e&&"Your session has expired. Please login again."}}(e)),localStorage.removeItem("jwt_token")}}var R={currentUser:null,isLoggedin:!1,organization:{id:null,name:null},alert:null};var M="RECEIVE_CATEGORIES";function B(e){return function(t){var n=u.serverHost+"/categories/"+e+"/";return d()(n,{method:"GET"}).then((function(e){return e.json()})).then((function(n){return t(function(e,t){return{type:M,category_type:e,categories:t}}(e,n.categories)),n.categories}))}}var G={categories:[],loaded:!1};var z="REQUEST_CLIENT",V="RECEIVE_CLIENT",q="REQUEST_CLIENTS",H="REMOVE_CLIENT",W="RECEIVE_CLIENTS",U="SEARCH_CLIENTS";var J="REQUEST_SERVICE",K="RECEIVE_SERVICE",Y="REQUEST_SERVICES",X="REMOVE_SERVICE",Z="RECEIVE_SERVICES",Q="SEARCH_SERVICES";function $(e,t){return{type:K,id:e,service:t}}function ee(e){return{type:Z,services:e}}function te(e){return function(t){t(function(e){return{type:J,id:e}}(e));var n=u.serverHost+"/service/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){t($(e,n))}))}}function ne(){return function(e){var t;e({type:Y,services:t});var n=u.serverHost+"/services/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return e(ee(t)),t})).catch((function(e){return u.ACTION_ERROR}))}}function ae(e,t,n){return function(n){var a=u.serverHost+"/service/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token")),"Content-Type":"application/json"}}).then((function(t){return 204===t.status?(n(function(e){return{type:X,id:e}}(e)),u.ACTION_SUCCESS):u.ACTION_ERROR}))}}var re="REQUEST_PROVIDERS",ie="RECEIVE_PROVIDERS",oe="REMOVE_PROVIDER",ce="RECEIVE_PROVIDER",se="REQUEST_PROVIDER",le="SEARCH_PROVIDERS";function de(e){return console.log("receiveProviders json",e),{type:ie,providers:e,receivedAt:Date.now()}}function ue(){return function(e){var t;e({type:re,providers:t});var n=u.serverHost+"/providers/";return d()(n,{method:"get",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return e(de(t)),t})).catch((function(e){return u.ACTION_ERROR}))}}var be="REQUEST_GOOD",je="RECEIVE_GOOD",he="REQUEST_GOODS",pe="RECEIVE_ALL_GOODS",me="REMOVE_GOOD",fe="RECEIVE_GOODS",Oe="GOOD_ERROR",ge="GOOD_SUCCESS",ve="SEARCH_GOODS";function xe(e,t){return{type:je,id:e,good:t}}function ye(e){return{type:fe,goods:e}}function _e(e){return function(t){t(function(e){return{type:be,id:e}}(e));var n=u.serverHost+"/good/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){t(xe(e,n))}))}}function Ce(){return function(e){var t;e({type:he,goods:t});var n=u.serverHost+"/goods/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return e(ye(t)),t}))}}function Se(e,t){return function(n){var a=u.serverHost+"/good/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token")),"Content-Type":"application/json"}}).then((function(t){return 204===t.status?(n(function(e){return{type:me,id:e}}(e)),ge):Oe}))}}var ke=Object(a.c)({services:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredServices:[],servicesLoaded:!1,byId:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case Y:return Object(s.a)(Object(s.a)({},r),{},{servicesLoaded:!1});case Z:console.log("reducer check: ",i);var l=k.a.keyBy(i.services,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},r.byId),l),Object(s.a)(Object(s.a)({},r),{},{byId:e,servicesLoaded:!0,index:i.services,filteredServices:i.services});case X:return a=k.a.clone(r.index),k.a.remove(a,(function(e){return e.id===i.id})),Object(s.a)(Object(s.a)({},r),{},{index:a,filteredServices:a});case J:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,{servicesLoaded:!1})),Object(s.a)(Object(s.a)({},r),{},{byId:e});case K:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,Object(s.a)(Object(s.a)({},i.service),{},{servicesLoaded:!0}))),Object(s.a)(Object(s.a)({},r),{},{byId:e});case Q:if(""===i.sortType||"name"===i.sortType?(console.log("service reducer :",Object(o.a)(r.index)),t=Object(o.a)(r.index).sort((function(e,t){return(e.name?e.name.toLowerCase():"").localeCompare(t.name?t.name.toLowerCase():"")}))):"provider"===i.sortType?t=Object(o.a)(r.index).sort((function(e,t){return(e.provider.profile.first_name?e.provider.profile.first_name.toLowerCase():"").localeCompare(t.provider.profile.first_name?t.provider.profile.first_name.toLowerCase():"")})):"description"===i.sortType?t=Object(o.a)(r.index).sort((function(e,t){return(e.desc?e.desc:"").localeCompare(t.desc?t.desc:"")})):"category"===i.sortType&&(t=Object(o.a)(r.index).sort((function(e,t){return(e.category?e.category:"").localeCompare(t.category?t.category:"")}))),""===i.searchValue)return{index:t,filteredServices:t,servicesLoaded:!0};if("name"===i.searchType)return n=t.filter((function(e){return(e.name?e.name.toLowerCase():"").includes(i.searchValue)})),console.log("service reducer return: ",{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0}),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("provider"===i.searchType)return n=t.filter((function(e){return(e.provider.company?e.provider.company.includes(i.searchValue):"")||(e.provider.profile.first_name?e.provider.profile.first_name.toLowerCase():"")+" "+(e.provider.profile.last_name?e.provider.profile.last_name.toLowerCase().includes(i.searchValue):"")})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("description"===i.searchType)return n=t.filter((function(e){return e.desc.includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("category"===i.searchType)return n=t.filter((function(e){return e.category.includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};break;default:return r}},clients:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredClients:[],clientsLoaded:!1,byId:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case q:return console.log(),Object(s.a)(Object(s.a)({},r),{},{clientsLoaded:!1});case W:console.log(W);var l=k.a.keyBy(i.clients,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},r.byId),l),Object(s.a)(Object(s.a)({},r),{},{byId:e,clientsLoaded:!0,index:i.clients,filteredClients:i.clients});case H:return n=k.a.clone(r.index),k.a.remove(n,(function(e){return e.id===i.id})),Object(s.a)(Object(s.a)({},r),{},{index:n,filteredClients:n});case z:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,{clientsLoaded:!1})),Object(s.a)(Object(s.a)({},r),{},{byId:e});case V:return console.log(V),e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,Object(s.a)(Object(s.a)({},i.client),{},{clientsLoaded:!0}))),Object(s.a)(Object(s.a)({},r),{},{byId:e});case U:if(""===i.sortType||"first_name"===i.sortType?(console.log("client reducer :",Object(o.a)(r.index)),a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))):"-first_name"===i.sortType?a=(a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))).reverse():"last_name"===i.sortType?a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").localeCompare(t.profile.last_name?t.profile.last_name.toLowerCase():"")})):"-last_name"===i.sortType&&(a=(a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").localeCompare(t.profile.last_name?t.profile.last_name.toLowerCase():"")}))).reverse()),""===i.searchValue)return{index:a,filteredClients:a,clientsLoaded:!0};if("first_name"===i.searchType)return console.log("clients: ",a),t=a.filter((function(e){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").includes(i.searchValue)})),console.log("client reducer return: ",{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0}),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};if("last_name"===i.searchType)return t=a.filter((function(e){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};if("address"===i.searchType)return t=a.filter((function(e){return(e.address?e.address.toLowerCase():"").includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};break;default:return r}},goods:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredGoods:[],goodsLoaded:!1,byId:{}},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case he:return Object(s.a)(Object(s.a)({},a),{},{goodsLoaded:!1});case fe:var i=k.a.keyBy(r.goods,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},a.byId),i),Object(s.a)(Object(s.a)({},a),{},{byId:e,goodsLoaded:!0,index:r.goods,filteredGoods:r.goods});case pe:return e=k.a.keyBy(r.goods,(function(e){return e.id})),Object(s.a)(Object(s.a)({},a),{},{byId:e,goodsLoaded:!0,index:r.goods,filteredGoods:r.goods});case me:return delete(e=k.a.clone(a.byId))[r.id],Object(s.a)(Object(s.a)({},a),{},{byId:e});case be:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.id,{goodsLoaded:!1})),Object(s.a)(Object(s.a)({},a),{},{byId:e});case je:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.id,Object(s.a)(Object(s.a)({},r.good),{},{goodsLoaded:!0}))),Object(s.a)(Object(s.a)({},a),{},{byId:e});case ve:if(""===r.sortType?t=Object(o.a)(a.index):"name"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.name.localeCompare(t.name)})):"provider"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.provider.profile.first_name.localeCompare(t.provider.profile.first_name)})):"description"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.desc.localeCompare(t.desc)})):"category"===r.sortType&&(t=Object(o.a)(a.index).sort((function(e,t){return e.category.localeCompare(t.category)}))),""===r.searchValue)return{index:t,filteredGoods:t,goodsLoaded:!0};if("name"===r.searchType)return n=t.filter((function(e){return e.name.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("provider"===r.searchType)return n=t.filter((function(e){return e.provider.company.includes(r.searchValue)||(e.provider.profile.first_name+" "+e.provider.profile.last_name).includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("description"===r.searchType)return n=t.filter((function(e){return e.desc.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("category"===r.searchType)return n=t.filter((function(e){return e.category.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};break;default:return a}},needs:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},needGroups:[],clientId:null,loaded:!1,needs:[]},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case m:return Object(s.a)(Object(s.a)({},a),{},{loaded:!1});case f:return Object(s.a)(Object(s.a)({},a),{},{needs:r.needs,loaded:!0});case b:return r.needs?(e=k.a.keyBy(r.needs,(function(e){return e.id})),Object(s.a)(Object(s.a)({},a),{},{byId:e,needGroups:r.needGroups,loaded:!0,clientId:r.clientId})):Object(s.a)(Object(s.a)({},a),{},{needGroups:r.needGroups,loaded:!0,clientId:r.clientId});case j:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.need.id,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!0}))),(n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id})).indexOf(r.needGroup.id))>=0?t[n]=r.needGroup:t=[].concat(Object(o.a)(t),[r.needGroup]),Object(s.a)(Object(s.a)({},a),{},{needGroups:t,byId:e,clientId:r.clientId});case g:if(e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.needId,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!0}))),(n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id.toString()})).indexOf(r.need.need_group_id))>=0){var i=t[n].needs.map((function(e){return e.id})).indexOf(r.needId);return t[n].needs[i]=r.need,Object(s.a)(Object(s.a)({},a),{},{needGroups:t,byId:e,clientId:r.clientId})}return Object(s.a)(Object(s.a)({},a),{},{byId:e,clientId:r.clientId});case h:var l=a.byId[r.needId];return delete(e=k.a.clone(a.byId))[r.needId],n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id.toString()})).indexOf(l.need_group_id),k.a.remove(t[n].needs,(function(e){return e.id===r.needId})),0===t[n].needs.length&&t.splice(n,1),Object(s.a)(Object(s.a)({},a),{},{byId:e,needGroups:t});case p:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.needId,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!1}))),Object(s.a)(Object(s.a)({},a),{},{byId:e});case O:return n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id})).indexOf(r.needGroup.id),t[n]=r.needGroup,Object(s.a)(Object(s.a)({},a),{},{needGroups:t});default:return a}},providers:function(){var e,t,n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],byId:{},providerLoaded:!1,value:"",filteredProviders:[]},l=arguments.length>1?arguments[1]:void 0;switch(l.type){case re:return Object(s.a)(Object(s.a)({},i),{},{providerLoaded:!1});case ie:var d=k.a.keyBy(l.providers,(function(e){return e.id}));return t=Object(s.a)(Object(s.a)({},i.byId),{},{providersById:d}),Object(s.a)(Object(s.a)({},i),{},{byId:t,index:l.providers,filteredProviders:l.providers,providerLoaded:!0});case oe:return e=k.a.clone(i.index),k.a.remove(e,(function(e){return e.id===l.id})),Object(s.a)(Object(s.a)({},i),{},{index:e,filteredProviders:e});case ce:return t=Object(s.a)(Object(s.a)({},i.byId),{},Object(c.a)({},l.id,Object(s.a)(Object(s.a)({},l.provider),{},{providerLoaded:!0}))),l.provider.provider&&(t.providersById=Object(s.a)(Object(s.a)({},t.providersById),{},Object(c.a)({},l.id,Object(s.a)({},l.provider.provider)))),console.log("ProviderReducer.js - RECEIVE_PROVIDER state",i),console.log("ProviderReducer.js - RECEIVE_PROVIDER nextById",t),Object(s.a)(Object(s.a)({},i),{},{byId:t});case se:return t=Object(s.a)(Object(s.a)({},i.byId),{},Object(c.a)({},l.id,{providerLoaded:!1})),Object(s.a)(Object(s.a)({},i),{},{byId:t});case le:if(console.log("ProviderReducer.js  - index.providers: ",i.index.providers),console.log("ProviderReducer.js  - action: ",l),""===l.sortType||"name"===l.sortType?(console.log("ProviderReducer.js  - index.providers 2: ",i.index.providers),console.log("ProviderReducer.js  - state: ",i),a=Object(o.a)(i.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))):"type"===l.sortType&&(a=Object(o.a)(i.index).sort((function(e,t){return(e.type?e.type:"").localeCompare(t.type?t.type:"")}))),console.log("ProviderReducer.js  - sortedProviders: ",a),r="Individual"===l.displayType||"Organization"===l.displayType?a.filter((function(e){return e.type.includes(l.displayType)})):a,console.log("ProviderReducer.js  -  providersByType: ",r),""===l.searchValue)return{index:r,filteredProviders:r,providerLoaded:!0};if("name"===l.searchType)return console.log("ProviderReducer.js  - state.index: ",i.index),console.log("ProviderReducer.js  - providersByType: ",r),n=r.filter((function(e){return((e.profile.first_name?e.profile.first_name.toLowerCase():"")+" "+(e.profile.last_name?e.profile.last_name.toLowerCase():"")).includes(l.searchValue)})),console.log("providersByType -  returned data : ",{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0}),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};if("email"===l.searchType)return n=r.filter((function(e){return(e.email?e.email.toLowerCase():"").includes(l.searchValue)})),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};if("phone"===l.searchType)return n=r.filter((function(e){return(e.primary_phone_number?e.primary_phone_number:"").includes(l.searchValue)})),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};break;default:return i}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return console.log("File: authReducer.js, Function: auth, case LOGIN_SUCCESS, Parameters: state, action -> ",e,t),Object.assign({},e,{currentUser:t.user,isLoggedin:!0,organization:t.organization,alert:null});case A:return console.log("File: authReducer.js, Function: auth, case LOGIN_FAILURE, Parameters: state, action -> ",e,t),Object.assign({},e,{alert:t.alert});case P:return console.log("File: authReducer.js, Function: auth, case LOGGED_OUT, Parameters: state, action -> ",e,t),Object.assign({},e,{currentUser:null,isLoggedin:!1,organization:{id:null,name:null},alert:t.alert});case D:return console.log("File: authReducer.js, Function: auth, case UPDATE_ORGANIZATION, Parameters: state, action -> ",e,t),Object.assign({},e,{organization:{id:t.provider.id,name:t.provider.company}});default:return e}},ontology:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{needs:G,services:G,languages:G},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(s.a)(Object(s.a)({},e),{},Object(c.a)({},t.category_type,{categories:t.categories.sort(),loaded:!0}));default:return e}}}),we=ke({},{}),Ie=n(373),Ne={key:"root",storage:n.n(Ie).a},Te=Object(r.a)(Ne,(function(e,t){return"LOGGED_OUT"===t.type&&(e=we),ke(e,t)})),Ee=function(e){return function(t){return function(n){var a=e.getState().auth.currentUser;return"LOGGED_OUT"!==n.type&&a&&new Date>a.expired_at&&e.dispatch(L(!0)),t(n)}}};var Ae=n(1),Pe=n.n(Ae),De=n(57),Fe=n.n(De),Le=n(38),Re=n(49),Me=n(374),Be=n(8),Ge=n(37),ze=n(778),Ve=n(816),qe=n(817),He=n(812),We=n(818),Ue=n(397),Je=n(791),Ke=n(54),Ye=n(794),Xe=n(392),Ze=n(792),Qe=n(808),$e=n(771),et=n(744),tt=n(745),nt=n(799),at=n(398),rt=n(0),it=(window.google||{maps:{}}).maps,ot=it.Map,ct=it.Marker,st=it.InfoWindow,lt=it.Size,dt=function(e,t,n,a,r){var i=new st({content:'<div id="infoWindow-'.concat(r,'" />'),position:n.position,pixelOffset:new lt(0,-42)});i.addListener("domready",(function(e){Object(De.render)(Object(rt.jsx)(ut,{history:a,marker:n}),document.getElementById("infoWindow-".concat(r)))}));var o=!1,c=!1;return document.querySelector("infoWindow-".concat(r," button")),t.addListener("mouseover",(function(n){i.open(e),c=!0,t.addListener("mouseout",(function(e){c&&!o&&i.close(),c&&(c=!1)})),t.addListener("click",(function(t){o=!0,i.open(e)})),window.google.maps.event.addListener(i,"closeclick",(function(e){o=!1}))})),i};function ut(e){var t=e.marker,n=e.history,a=t.title,r=t.link,i=t.content;return Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsx)(nt.a,{style:{cursor:"pointer"},onClick:function(){return r?n.push(r):null},children:Object(rt.jsx)(Ue.a,{children:a})}),Object(rt.jsx)(Ue.a,{color:"textSecondary",children:i})]})}var bt=ot?function(e){var t=Object(Ge.g)(),n=Object(Ae.useMemo)((function(){return{lat:43.687,lng:-79.4132}}),[]),a=e.zoom,r=void 0===a?11:a,i=e.center,o=void 0===i?n:i,c=e.markers,s=void 0===c?[]:c,l=Object(Ae.useState)(null),d=Object(Be.a)(l,2),u=d[0],b=d[1];return Object(Ae.useEffect)((function(){b(new ot(document.getElementById("map"),{center:o,zoom:r}))}),[r,o]),Object(Ae.useEffect)((function(){for(var e=0;e<s.length;e++){var n=s[e],a=new ct({position:n.position,map:u,title:n.title});dt(u,a,n,t,e)}}),[s,u,t]),Object(Ae.useMemo)((function(){return Object(rt.jsx)(at.a,{elevation:5,style:{width:"100%",height:"40vh",marginTop:5},id:"map"})}),[])}:function(){return console.info("Google maps javascript is not loaded. Are you offline?"),Object(rt.jsx)(at.a,{elevation:5,style:{width:"100%",height:"40vh",marginTop:5}})},jt=n(729),ht=n(733),pt=n(800),mt=n(62),ft=n(801);function Ot(e){var t=e.show,n=e.onHide,a=e.submit;return Object(rt.jsxs)(jt.a,{open:t,onClose:n,children:[Object(rt.jsx)(ht.a,{id:"form-dialog-title",children:"Upload CSV"}),Object(rt.jsx)(pt.a,{children:Object(rt.jsx)(mt.c,{type:"file"})}),Object(rt.jsxs)(ft.a,{children:[Object(rt.jsx)(Je.a,{color:"primary",onClick:a,children:"Submit"}),Object(rt.jsx)(Je.a,{onClick:n,children:"Close"})]})]})}var gt=n(802),vt=["show","onHide","title","objectId"];function xt(e){var t=e.show,n=e.onHide,a=e.title,r=e.objectId,i=Object(Ke.a)(e,vt),o=Object(Ae.useState)({reason:""}),c=Object(Be.a)(o,2),s=c[0],l=c[1];return Object(rt.jsxs)(jt.a,{open:t,onClose:n,fullWidth:!0,children:[Object(rt.jsx)(ht.a,{children:a}),Object(rt.jsx)(pt.a,{children:Object(rt.jsx)(gt.a,{value:s.reason,label:"Reason",sx:{mt:2},onChange:function(e){return l({reason:e.target.value})},fullWidth:!0})}),Object(rt.jsxs)(ft.a,{children:[Object(rt.jsx)(Je.a,{color:"secondary",onClick:function(){return i.delete(r,s)},children:"Confirm"}),Object(rt.jsx)(Je.a,{onClick:n,children:"Close"})]})]})}var yt=n(665),_t=n(739),Ct=n(738),St=n(740),kt=n(741),wt=n(742);function It(e){var t=e.urlPrefix,n=e.objectId,a=e.handleDelete,r=e.hideViewOption,i=Object(Ge.g)(),o=Object(Ae.useState)(null),c=Object(Be.a)(o,2),s=c[0],l=c[1],d=Boolean(s),u=function(){l(null)},b=function(e){return function(){i.push(e)}};return Object(rt.jsxs)("div",{children:[Object(rt.jsx)(yt.a,{onClick:function(e){l(e.currentTarget)},size:"small",children:Object(rt.jsx)(Ct.a,{})}),Object(rt.jsxs)(Xe.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:u,PaperProps:{style:{maxHeight:216,width:150}},children:[!r&&Object(rt.jsxs)(Ze.a,{onClick:b("/".concat(t,"/").concat(n)),children:[Object(rt.jsx)(_t.a,{children:Object(rt.jsx)(St.a,{fontSize:"small",color:"primary"})}),Object(rt.jsx)(Ue.a,{variant:"inherit",children:"View"})]}),Object(rt.jsxs)(Ze.a,{onClick:b("/".concat(t,"/").concat(n,"/edit")),children:[Object(rt.jsx)(_t.a,{children:Object(rt.jsx)(kt.a,{fontSize:"small",color:"primary"})}),"Edit"]}),Object(rt.jsxs)(Ze.a,{onClick:function(){u(),a(n)},children:[Object(rt.jsx)(_t.a,{children:Object(rt.jsx)(wt.a,{fontSize:"small",color:"secondary"})}),"Delete"]})]})]})}var Nt=n(655),Tt=n(793);function Et(e){var t=e.fetchData,n=e.deleteItem,a=e.generateMarkers,r=e.type,i=e.nameFormatter,c=e.columnsWithoutOptions,l=r.charAt(0).toUpperCase()+r.slice(1),d=Object(Le.c)(),u=Object(Ge.g)(),b=Object(Ae.useState)({showUploadDialog:!1,showDeleteDialog:!1,deleteId:null,deleteDialogTitle:"",data:[],pageNumber:1,rowsPerPage:10,loading:!0}),j=Object(Be.a)(b,2),h=j[0],p=j[1];Object(Ae.useEffect)((function(){t().then((function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e,loading:!1})}))}))}),[t]);var m=function(){p((function(e){return Object(s.a)(Object(s.a)({},e),{},{showUploadDialog:!1,showDeleteDialog:!1})}))},f=Object(Ae.useCallback)(function(){var e=Object(N.a)(I.a.mark((function e(t,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,a);case 2:e.sent.success&&(m(),p((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:e.data.filter((function(t){return t.id!==e.deleteId}))})})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[d,n]),O=Object(Ae.useCallback)((function(e){var t=h.data[e];p((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!0,deleteId:t.id,deleteDialogTitle:"Delete ".concat(l," ")+i(t)})}))}),[h.data,i,l]),g=Object(Ae.useMemo)((function(){return[].concat(Object(o.a)(c),[{label:" ",body:function(e){var t=e.id;return Object(rt.jsx)(It,{urlPrefix:r,objectId:t,handleDelete:O})}}])}),[O,c,r]),v=Object(s.a)({customToolbar:Object(rt.jsx)(ka,{type:r,handleAdd:function(){return u.push("/".concat(r,"/new"))},handleUpload:function(){return p((function(e){return Object(s.a)(Object(s.a)({},e),{},{showUploadDialog:!0})}))}}),onDelete:function(){var e=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(t),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChangePage:function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{pageNumber:e})}))},onChangeRowsPerPage:function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{rowsPerPage:e})}))}},e.tableOptions),x=Object(Ae.useMemo)((function(){return a(h.data,h.pageNumber,h.rowsPerPage)}),[a,h.data,h.pageNumber,h.rowsPerPage]);return h.loading?Object(rt.jsx)(wa,{message:"Loading ".concat(l,"...")}):Object(rt.jsx)(Nt.a,{in:!0,children:Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(ya,Object(s.a)({columns:g,data:h.data,title:l},v)),Object(rt.jsx)(Ot,{show:h.showUploadDialog,onHide:m,submit:function(e){}}),Object(rt.jsx)(xt,{contentType:"Provider",objectId:h.deleteId,title:h.deleteDialogTitle,show:h.showDeleteDialog,onHide:m,delete:f}),Object(rt.jsx)(bt,{markers:x})]})})}var At=n(789),Pt=n(807),Dt=n(777),Ft=n(779),Lt=Object($e.a)((function(e){return{buttons:{width:"80%",margin:"auto",paddingTop:20,paddingBottom:40},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},alert:{width:"80%",margin:"auto"},title:{color:"#4b4b4b",width:"80%",margin:"auto"}}}));function Rt(e){var t=e.stepNames,n=e.handleFinish,a=e.getStepContent,r=e.error,i=e.title,o=Lt(),c=Pe.a.useState(0),s=Object(Be.a)(c,2),l=s[0],d=s[1];return Object(rt.jsxs)("div",{children:[Object(rt.jsx)(At.a,{alternativeLabel:!0,nonLinear:!0,activeStep:l,children:t.map((function(e,t){return Object(rt.jsx)(Pt.a,{children:Object(rt.jsx)(Dt.a,{onClick:(n=t,function(){d(n)}),children:e})},e);var n}))}),Object(rt.jsxs)("div",{children:[i&&Object(rt.jsx)(Ue.a,{color:"textSecondary",variant:"h6",className:o.title,children:i}),r&&r.map((function(e,t){return Object(rt.jsx)(Ft.a,{className:o.alert,severity:"error",children:e},t)})),a(l),Object(rt.jsxs)("div",{className:o.buttons,children:[Object(rt.jsx)(Je.a,{disabled:0===l,onClick:function(){d((function(e){return e-1}))},className:o.backButton,children:"Back"}),Object(rt.jsx)(Je.a,{variant:"contained",color:"primary",onClick:function(){l!==t.length-1?d((function(e){return e+1})):n()},children:l===t.length-1?"Finish":"Next"})]})]})]})}var Mt=Object($e.a)((function(e){return{root:{paddingTop:16},paper:{display:"inline-block",position:"relative",paddingLeft:28,paddingBottom:20,minWidth:380}}})),Bt=function(e){var t=e.label,n=e.children,a=Mt();return Object(rt.jsxs)("div",{className:t&&a.root,children:[t&&Object(rt.jsx)(Ue.a,{color:"textSecondary",variant:"body1",gutterBottom:!0,children:t}),Object(rt.jsx)(at.a,{variant:"outlined",className:a.paper,children:n})]})},Gt=n(736),zt=n(770),Vt=n(393),qt=n(394),Ht=n(379),Wt=n(788),Ut=n(776),Jt=["type","onChange","value"],Kt="yyyy-MM-dd";function Yt(e){var t=e.type,n=e.onChange,a=e.value,r=Object(Ke.a)(e,Jt),i=Object(Ae.useState)((function(){return"date"===t?a?Object(Vt.a)(a,Kt,new Date):null:a||""})),o=Object(Be.a)(i,2),c=o[0],l=o[1],d=Object(Ae.useCallback)((function(e){var t=e.target.value;l(t),n({target:{value:t}})}),[n,t]),u=function(e){l(e)},b=function(e){l(e);var t=Object(qt.a)(e,Kt);try{n({target:{value:t}})}catch(a){}};return"date"===t?Object(rt.jsx)("div",{children:Object(rt.jsx)(Ht.a,{dateAdapter:zt.a,children:Object(rt.jsx)(Wt.a,Object(s.a)({value:c,onAccept:b,onChange:u,renderInput:function(e){return Object(rt.jsx)(gt.a,Object(s.a)(Object(s.a)({},e),{},{sx:{minWidth:350},margin:"normal"}))}},r))})}):"time"===t?Object(rt.jsx)("div",{children:Object(rt.jsx)(Ht.a,{dateAdapter:zt.a,children:Object(rt.jsx)(Ut.a,Object(s.a)({value:c,onAccept:b,onChange:u,renderInput:function(e){return Object(rt.jsx)(gt.a,Object(s.a)(Object(s.a)({},e),{},{sx:{minWidth:350},margin:"normal"}))}},r))})}):Object(rt.jsx)("div",{children:Object(rt.jsx)(gt.a,Object(s.a)(Object(s.a)({sx:{mt:"16px",minWidth:350},type:t},r),{},{onChange:d,value:c}))})}var Xt=n(804),Zt=n(805),Qt=n(782),$t=n(806),en="UN_SET",tn={label:"",type:"text",component:Yt,validator:null,required:!1},nn=["label","InputLabelProps","className","options","noDefaultStyle","noEmpty","controlled","defaultOptionTitle","onChange","formControlProps","helperText"],an=Object($e.a)((function(e){return{formControl:{margin:"16px 0 0",minWidth:350}}}));function rn(e){var t=e.label,n=e.InputLabelProps,a=e.className,r=e.options,i=e.noDefaultStyle,o=e.noEmpty,c=e.controlled,l=e.defaultOptionTitle,d=void 0===l?"Not Set":l,u=e.onChange,b=e.formControlProps,j=e.helperText,h=Object(Ke.a)(e,nn),p=an(),m=Object(Ae.useState)(o?"":en),f=Object(Be.a)(m,2),O=f[0],g=f[1],v=Object(Ae.useCallback)((function(e){var t=e.target.value;g(t),u({target:{value:t===en?void 0:t}})}),[u]);return Object(Ae.useEffect)((function(){g(void 0===h.value?en:h.value)}),[h.value]),Object(rt.jsx)("div",{children:Object(rt.jsxs)(Xt.a,Object(s.a)(Object(s.a)({className:i||a?a:p.formControl,error:h.error,required:h.required},b),{},{children:[t&&Object(rt.jsx)(Zt.a,Object(s.a)(Object(s.a)({},n),{},{children:t})),Object(rt.jsxs)(Qt.a,Object(s.a)(Object(s.a)({margin:"none",label:t},h),{},{value:c?h.value:O,onChange:c?u:v,children:[!o&&Object(rt.jsx)(Ze.a,{value:en,children:d},"key0"),Array.isArray(r)?r.map((function(e){return Object(rt.jsx)(Ze.a,{value:e,children:e},e)})):Object.entries(r).map((function(e){var t=Object(Be.a)(e,2),n=t[0],a=t[1];return Object(rt.jsx)(Ze.a,{value:n,children:a},n)}))]})),j&&Object(rt.jsx)($t.a,{children:j})]}))})}function on(e){var t=e.address,n=e.required,a=e.errMsg,r=void 0===a?{}:a,i=function(e){return function(n){return t[e]=n.target.value}};return Object(rt.jsxs)("div",{children:[Object(rt.jsx)(Yt,{label:"Apt. #",type:"text",value:t.apt_number,onChange:i("apt_number"),error:!!r.apt_number,helperText:r.apt_number}),Object(rt.jsx)(Yt,{label:"Street Address",type:"text",value:t.street_address,onChange:i("street_address"),required:n,error:!!r.street_address,helperText:r.street_address}),Object(rt.jsx)(Yt,{label:"City",type:"text",value:t.city,onChange:i("city"),required:n,error:!!r.city,helperText:r.city}),Object(rt.jsx)(rn,{label:"Province",value:t.province,options:u.provinceOptions,onChange:i("province"),required:n,error:!!r.province,helperText:r.province}),Object(rt.jsx)(Yt,{label:"Postal Code",type:"text",value:t.postal_code,onChange:i("postal_code"),required:n,error:!!r.postal_code,helperText:r.postal_code})]})}for(var cn={start_time:"",end_time:""},sn={Monday:[Object(s.a)({},cn)],Tuesday:[Object(s.a)({},cn)],Wednesday:[Object(s.a)({},cn)],Thursday:[Object(s.a)({},cn)],Friday:[Object(s.a)({},cn)],Saturday:[Object(s.a)({},cn)],Sunday:[Object(s.a)({},cn)]},ln={},dn=1;dn<=12;dn++)for(var un=dn/10<1?"0"+dn:dn,bn=0;bn<=45;bn+=30){var jn=un+":"+(0===bn?"00":bn);ln[100*dn+bn]=jn+" AM"}for(var hn=1;hn<=12;hn++)for(var pn=0;pn<=45;pn+=30){var mn=(hn/10<1?"0"+hn:hn)+":"+(0===pn?"00":pn);ln[100*(hn+12)+pn]=mn+" PM"}var fn=ln;function On(e){var t={};return k.a.each(e,(function(e){var n=e.week_day;t[n]||(t[n]=[]),t[n].push({start_time:e.start_time,end_time:e.end_time})})),t}function gn(e){var t=[];return k.a.each(e,(function(e,n){k.a.each(e,(function(e){t.push({week_day:n,start_time:e.start_time,end_time:e.end_time})}))})),t}function vn(e){var t=e.operationHourObj;return Object(rt.jsx)("table",{className:"operation-hour-table",children:Object(rt.jsx)("tbody",{children:k.a.map(t,(function(e,t){return Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:t}),Object(rt.jsx)("td",{children:k.a.map(e,(function(e,n){return Object(rt.jsx)("div",{children:"".concat(fn[e.start_time]," -\n                        ").concat(fn[e.end_time])},t+e.start_time)}))})]},t)}))})})}var xn=n(36),yn=function(e){var t=[];if(!e)return t;var n,a=Object(xn.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value.condition_clauses,i=[];t.push(i);var o,c=Object(xn.a)(r);try{for(c.s();!(o=c.n()).done;){var s,l=o.value,d=(l.field_name,l.clauses),u=Object(xn.a)(d);try{for(u.s();!(s=u.n()).done;){var b=s.value,j=b.left_operand,h=b.right_operand,p=b.operator;i.push([j,p,h])}}catch(m){u.e(m)}finally{u.f()}}}catch(m){c.e(m)}finally{c.f()}}}catch(m){a.e(m)}finally{a.f()}return t};function _n(e){return'"'+e.replace(/[\\"]/g,"\\$&")+'"'}function Cn(e){try{var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(n){return[]}}var Sn=function e(t,n){return Object.entries(n).forEach((function(n){var a=Object(Be.a)(n,2),r=a[0],i=a[1];if("object"===typeof i&&null!=i&&t[r])return e(t[r],i);null!=i&&(t[r]=i)})),t};function kn(e){return null==e||0===e.length}function wn(e){if(null==e)return!0;for(var t=0,n=Object.keys(e);t<n.length;t++){var a,r=n[t],i=Object(xn.a)(e[r]);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.start_time.length>0&&o.end_time.length>0)return!1}}catch(c){i.e(c)}finally{i.f()}}return!0}function In(e,t){for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(Be.a)(a[n],2),i=r[0],o=r[1];"apt_number"!==i&&(kn(o)&&(t[i]="This field is required"))}}function Nn(e,t){var n,a=0,r=Object(xn.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[a]={},In(i,t[a]),0===Object.entries(t[a]).length&&delete t[a],a++}}catch(o){r.e(o)}finally{r.f()}}function Tn(e,t,n){if(e){/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/.test(e)||(t[n]=Object(s.a)(Object(s.a)({},t[n]),{},{postal_code:"Invalid postal code! They are in the format A1A 1A1, where A is a letter and 1 is a digit"}))}}function En(e,t,n){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(n[t]="Invalid email! ".concat("They are in the format of jsmith@example.com"))}function An(e,t,n){e&&!/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/.test(e)&&(n[t]="Invalid phone number! They are in the format of NPA-NXX-XXXX ".concat("where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number"))}function Pn(e,t){e.email&&En(e.email,"email",t),(e.primary_phone_number||e.alt_phone_number)&&(An(e.primary_phone_number,"primary_phone_number",t),An(e.alt_phone_number,"alt_phone_number",t))}function Dn(e,t){var n,a=0,r=Object(xn.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[a]={},kn(i.relationship)&&(t[a].relationship="This field is required");for(var o=0,c=Object.entries(i.person);o<c.length;o++){var s=Object(Be.a)(c[o],2),l=s[0];kn(s[1])&&(t[a][l]="This field is required")}0===Object.entries(t[a]).length&&delete t[a],a++}}catch(d){r.e(d)}finally{r.f()}}var Fn=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ln=/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/,Rn=/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,Mn=/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,Bn={email:function(e){if(!Fn.test(e))return"Invalid email! They are in the format of jsmith@example.com"},phone:function(e){if(!Ln.test(e))return"Invalid phone number! They are in the format of NPA-NXX-XXXX where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number"},password:function(e){if(!Rn.test(e))return"Please enter a secure and strong password"},postalCode:function(e){if(!Mn.test(e))return"Invalid postal code! They are in the format A1A 1A1, where A is a letter and 1 is a digit"}},Gn={organization:"Organization",volunteer:"Volunteer",goods_donor:"Goods Donor",professional_service_provider:"Professional Service Provider"},zn=Object(s.a)({client:"Client"},Gn),Vn=function(e){var t={};return Object.keys(e).forEach((function(n){t[e[n]]=n})),t}(Gn),qn={alt_phone_number:{component:"GeneralField",type:"tel",label:"Alternative phone number"},availability:{label:"Availability"},commitment:{component:"SelectField",label:"Commitment length",options:["Short term","Six months","One year"]},company:{component:"GeneralField",type:"text",label:"Company/Organization Name"},email:{component:"GeneralField",type:"email",label:"Email"},first_name:{component:"GeneralField",type:"text",label:"First Name"},gender:{component:"SelectField",label:"Gender",options:u.genderOptions},languages:{component:"MultiSelectField",label:"Languages"},last_name:{component:"GeneralField",type:"text",label:"Last Name"},main_address:{label:"Address"},notes:{component:"GeneralField",type:"text",label:"Additional notes "},other_addresses:{label:"Other Addresses"},own_car:{component:"RadioField",label:"Own a car?",options:{Yes:!0,No:!1}},primary_contact:{label:"Primary Contact"},primary_phone_number:{component:"GeneralField",type:"tel",label:"Primary phone number"},reference1_email:{component:"GeneralField",type:"text",label:"Reference 1 Email"},reference1_name:{component:"GeneralField",type:"text",label:"Reference 1 Name"},reference1_phone:{component:"GeneralField",type:"text",label:"Reference 1 phone"},reference2_email:{component:"GeneralField",type:"text",label:"Reference 2 Email"},reference2_name:{component:"GeneralField",type:"text",label:"Reference 2 Name"},reference2_phone:{component:"GeneralField",type:"text",label:"Reference 2 phone"},referrer:{component:"GeneralField",type:"text",label:"Referrer"},secondary_contact:{label:"Secondary Contact"},skills:{component:"GeneralField",type:"text",label:"Skills"},start_date:{component:"GeneralField",type:"date",label:"Start date for availability"},status:{component:"SelectField",label:"Status",options:["External","Internal","Home Agency"]},visibility:{component:"RadioField",label:"Allow other agencies to see this provider?",options:{Yes:!0,No:!1}},sponsor:{component:"GeneralField",type:"text",label:"Sponsor"}},Hn={first_name:"",middle_name:"",last_name:"",preferred_name:"",gender:"",birth_date:null,email:"",primary_phone_number:"",alt_phone_number:""},Wn={first_name:"",last_name:"",email:"",primary_phone_number:"",alt_phone_number:""},Un={street_address:"",apt_number:"",city:"",province:"",postal_code:""},Jn={first_name:"",last_name:"",username:"",email:"",is_superuser:!1,primary_phone_number:"",alt_phone_number:"",password:""},Kn=Object($e.a)((function(e){return{button:{margin:"10px 0"}}}));function Yn(e){var t=e.index,n=e.location,a=e.handleRemove,r=e.required,i=e.errMsg,o=void 0===i?{}:i,c=Object(Ae.useState)(!0),s=Object(Be.a)(c,2),l=s[0],d=s[1];return Object(rt.jsxs)("div",{style:{paddingBottom:10},children:[Object(rt.jsxs)(Gt.a,{component:"legend",children:["Other address #",t+1+"  ",Object(rt.jsx)(Je.a,{onClick:function(e){a(t),d(!l)},color:"secondary",children:"Remove"})]}),Object(rt.jsx)(Bt,{children:Object(rt.jsx)(on,{address:n,handleChange:function(e){return function(t){n[e]=t.target.value}},required:r,errMsg:o})},"main_address")]})}function Xn(e){var t=e.otherLocations,n=e.clientId,a=e.required,r=e.errMsg,i=void 0===r?{}:r,o=Kn(),c=Object(Ae.useState)(t),l=Object(Be.a)(c,2),d=l[0],u=l[1],b=function(){return u(!d)},j=function(e){console.log("remove",e,t[e]),t.splice(e,1),b()};return Object(rt.jsxs)("div",{children:[i&&"string"===typeof i&&Object(rt.jsx)(Ft.a,{severity:"error",children:i}),t.map((function(e,r){return Object(rt.jsx)(Yn,{index:r,location:e,clientId:n,handleRemove:j,required:a,size:t.length,errMsg:i[r]},r)})),Object(rt.jsx)(Je.a,{className:o.button,onClick:function(){t.push(Object(s.a)({},Un)),b()},variant:"outlined",children:"Add other address"})]})}var Zn=n(651),Qn=n(813),$n=n(814),ea=n(815),ta=n(810),na=n(811),aa=n(783),ra=n(784),ia=n(746),oa=n(809),ca=n(795);function sa(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,i=e.numSelected,o=e.rowCount,c=e.onRequestSort,s=e.columns;return Object(rt.jsx)(oa.a,{children:Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{padding:"checkbox",children:Object(rt.jsx)(aa.a,{color:"primary",indeterminate:i>0&&i<o,checked:o>0&&i===o,onChange:n,inputProps:{"aria-label":"select all desserts"}})},0),s.map((function(e,n){return Object(rt.jsx)(na.a,{style:e.style,sortDirection:r===(e.sortBy||e.body)&&a,children:Object(rt.jsxs)(ca.a,{active:r===(e.sortBy||e.body),direction:r===(e.sortBy||e.body)?a:"asc",onClick:(i=e.sortBy||e.body,function(e){c(e,i)}),children:[e.label,r===e.label?Object(rt.jsx)("span",{className:t.sortSpan,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},n+1);var i}))]})})}var la=n(796),da=n(7),ua=n(381),ba=n.n(ua),ja=n(382),ha=n.n(ja),pa=Object($e.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.mode?{color:e.palette.primary.main,backgroundColor:Object(Zn.d)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),ma=function(e){var t=pa(),n=e.numSelected,a=e.title,r=e.onDelete,i=e.customToolbar;return Object(rt.jsxs)(He.a,{className:Object(da.a)(t.root,Object(c.a)({},t.highlight,n>0)),children:[n>0?Object(rt.jsxs)(Ue.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(rt.jsx)(Ue.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:a}),n>0&&Object(rt.jsx)(la.a,{title:"Delete",children:Object(rt.jsx)(yt.a,{"aria-label":"delete",onClick:r,size:"large",children:Object(rt.jsx)(ba.a,{})})}),Object(rt.jsx)(la.a,{title:"Search",children:Object(rt.jsx)(yt.a,{"aria-label":"search list",size:"large",children:Object(rt.jsx)(ha.a,{})})}),i]})},fa=["data","title","columns","height"];function Oa(e,t,n,a){return(t=n(t,a)||"")<(e=n(e,a)||"")?-1:t>e?1:0}function ga(e,t,n){return"desc"===e?function(e,a){return Oa(e,a,t,n)}:function(e,a){return-Oa(e,a,t,n)}}function va(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var xa=Object($e.a)((function(e){return{paper:{width:"100%"},table:{minWidth:750},sortSpan:ia.a,tableRow:{"&.Mui-selected":{backgroundColor:Object(Zn.d)(e.palette.primary.light,.85)},"&.Mui-selected:hover":{backgroundColor:Object(Zn.d)(e.palette.primary.light,.8)}}}}));function ya(e){var t=e.data,n=e.title,a=e.columns,r=e.height,i=Object(Ke.a)(e,fa),o=i.rowsPerPageOptions,c=void 0===o?[10,25,100]:o,s=i.idField,l=void 0===s?"_id":s,d=i.defaultOrderBy,u=void 0===d?a[0].sortBy||a[0].body:d,b=i.extraData,j=void 0===b?{}:b,h=i.rowStyle,p=i.onDelete,m=i.onChangePage,f=i.onChangeRowsPerPage,O=i.customToolbar,g=xa(),v=Pe.a.useState("asc"),x=Object(Be.a)(v,2),y=x[0],_=x[1],C=Pe.a.useState((function(){return u})),S=Object(Be.a)(C,2),k=S[0],w=S[1],T=Pe.a.useState([]),E=Object(Be.a)(T,2),A=E[0],P=E[1],D=Pe.a.useState(0),F=Object(Be.a)(D,2),L=F[0],R=F[1],M=Pe.a.useState(c[0]),B=Object(Be.a)(M,2),G=B[0],z=B[1],V=function(){var e=Object(N.a)(I.a.mark((function e(){var n,a,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return e.next=3,p(A);case 3:n=Object(xn.a)(A);try{for(r=function(){var e=a.value;t.splice(t.findIndex((function(t){return t._id===e})),1)},n.s();!(a=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}P([]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=L>0?Math.max(0,(1+L)*G-t.length):0;return Object(rt.jsxs)(at.a,{elevation:5,className:g.paper,children:[Object(rt.jsx)(ma,{title:n,numSelected:A.length,onDelete:V,customToolbar:O}),Object(rt.jsx)(Qn.a,{style:{maxHeight:r||"calc(100vh - 228px)"},children:Object(rt.jsxs)($n.a,{stickyHeader:!0,className:g.table,size:"medium",children:[Object(rt.jsx)(sa,{classes:g,numSelected:A.length,order:y,orderBy:k,onSelectAllClick:function(e){e.target.checked?P(t.map((function(e){return e[l]}))):P([])},onRequestSort:function(e,t){_(k===t&&"asc"===y?"desc":"asc"),w((function(){return t}))},rowCount:t.length,columns:a}),Object(rt.jsxs)(ea.a,{children:[va(t,ga(y,k,j)).slice(L*G,L*G+G).map((function(e){var t=e[l],n=function(e){return-1!==A.indexOf(e)}(t);return Object(rt.jsxs)(ta.a,{className:g.tableRow,hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,style:h&&h(e),children:[Object(rt.jsx)(na.a,{padding:"checkbox",children:Object(rt.jsx)(aa.a,{color:"primary",onClick:function(e){return function(e,t){var n=A.indexOf(t),a=[];-1===n?a=a.concat(A,t):0===n?a=a.concat(A.slice(1)):n===A.length-1?a=a.concat(A.slice(0,-1)):n>0&&(a=a.concat(A.slice(0,n),A.slice(n+1))),P(a)}(0,t)},checked:n})},0),a.map((function(t,n){return Object(rt.jsx)(na.a,{style:t.style,children:t.body(e,j)},n+1)}))]},t)})),q>0&&Object(rt.jsx)(ta.a,{style:{height:53*q},children:Object(rt.jsx)(na.a,{colSpan:6})})]})]})}),Object(rt.jsx)(ra.a,{rowsPerPageOptions:c,component:"div",count:t.length,rowsPerPage:G,page:L,onPageChange:function(e,t){R(t),m&&m(t)},onRowsPerPageChange:function(e){var t=parseInt(e.target.value,10);z(t),R(0),m&&m(0),f&&f(t)}})]})}var _a=["className","color"],Ca=Object($e.a)((function(e){return{link:{color:"inherit",textDecorationLine:"none"},linkWithHover:{fontWeight:500,color:"inherit","&:hover":{textDecorationLine:"underline",color:"#2f5ac7"}},progress:{margin:e.spacing(2),marginTop:50},chipButton:{paddingLeft:6,marginLeft:6}}}));function Sa(e){var t=e.className,n=void 0===t?"":t,a=e.color,r=Object(Ke.a)(e,_a),i=Ca();return Object(rt.jsx)(Re.b,Object(s.a)(Object(s.a)({},r),{},{className:a?i.linkWithHover:i.link+" "+n}))}function ka(e){var t=e.handleAdd,n=e.handleUpload,a=e.type,r=Object(Ge.g)(),i=Ca(),o=Object(Ae.useState)(null),c=Object(Be.a)(o,2),s=c[0],l=c[1],d=Boolean(s);return Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsx)(Ye.a,{onClick:n,color:"default",icon:Object(rt.jsx)(et.a,{}),label:"Upload",variant:"outlined",className:i.chipButton}),Object(rt.jsx)(Ye.a,{onClick:"providers"===a?function(e){l(e.currentTarget)}:t,color:"primary",icon:Object(rt.jsx)(tt.a,{}),label:"Add",variant:"outlined",className:i.chipButton}),"providers"===a&&Object(rt.jsx)(Xe.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:function(){l(null)},children:Object.entries(Gn).map((function(e){var t,n=Object(Be.a)(e,2),a=n[0],i=n[1];return Object(rt.jsx)(Ze.a,{onClick:(t="/providers/".concat(a,"/new"),function(){r.push(t)}),children:i},i)}))})]})}function wa(e){var t=e.message,n=void 0===t?"Loading Components...":t,a=Ca();return Object(rt.jsxs)("div",{style:{textAlign:"center"},children:[Object(rt.jsx)(Qe.a,{className:a.progress}),Object(rt.jsx)(Ue.a,{variant:"subtitle2",color:"textSecondary",children:n})]})}var Ia=n(194),Na=Object(Ia.a)(ze.a)({"& .MuiTabs-indicator":{display:"flex",justifyContent:"center",backgroundColor:"#ccc",transition:"none"}}),Ta=Object(Ia.a)(Ve.a)((function(e){var t=e.theme;return{textTransform:"none",fontWeight:t.typography.fontWeightRegular,fontSize:t.typography.pxToRem(15),marginRight:t.spacing(1),minWidth:60,color:"rgba(255, 255, 255, 0.8)","&.Mui-selected":{color:"#fff",fontWeight:500,backgroundColor:"#cccccc26"}}}));function Ea(e){var t=Object(Ge.g)();return Object(rt.jsx)(Ta,Object(s.a)(Object(s.a)({},e),{},{onClick:function(){return t.push(e.value)}}))}var Aa=function(){var e=Object(Ge.g)(),t=Object(Le.c)(),n=Object(Le.d)((function(e){return e.auth})).isLoggedin,a=["/clients","/services","/goods","/providers","/reporting"],r=Object(Ae.useState)(-1!==a.indexOf(e.location.pathname)&&e.location.pathname),i=Object(Be.a)(r,2),o=i[0],c=i[1];return Object(Ae.useEffect)((function(){c(-1!==a.indexOf(e.location.pathname)&&e.location.pathname)}),[e.location.pathname,a]),Object(rt.jsx)(qe.a,{position:"fixed",sx:{backgroundColor:"rgb(39, 44, 52)"},children:Object(rt.jsxs)(He.a,{variant:"dense",children:[n?Object(rt.jsxs)(Na,{sx:{flexGrow:2},value:o,onChange:function(t,n){c(n),e.push(n)},variant:"scrollable",indicatorColor:"secondary",children:[Object(rt.jsx)(Ea,{label:"Clients",value:"/clients"}),Object(rt.jsx)(Ea,{label:"Services",value:"/services"}),Object(rt.jsx)(Ea,{label:"Goods",value:"/goods"}),Object(rt.jsx)(Ea,{label:"Providers",value:"/providers"}),Object(rt.jsx)(Ea,{label:"Reporting",value:"/reporting"}),Object(rt.jsx)(Ve.a,{sx:{display:"none"},label:"",value:"none"})]}):null,n&&Object(rt.jsx)(We.a,{sx:{paddingRight:"20px",whiteSpace:"pre",textDecorationLine:"none"},children:Object(rt.jsx)(Sa,{to:"/dashboard",onClick:function(){return c("none")},children:Object(rt.jsx)(Ue.a,{children:"Dashboard"})})}),Object(rt.jsx)(Je.a,{color:"inherit",onClick:function(){return n?t(L()):e.push("/login")},sx:{marginLeft:"auto",textDecorationLine:"none",whiteSpace:"pre"},children:n?"Log out":"Login"})]})})},Pa=function(){return Object(rt.jsx)(We.a,{sx:{position:"fixed",left:"0",bottom:"0",width:"100%",backgroundColor:"#222",color:"#aaa",textAlign:"center",borderRadius:"2px 2px 0 0",alignContent:"center",padding:"4px","@media print":{display:"none"}},children:Object(rt.jsxs)(Ue.a,{variant:"caption",children:[Object(rt.jsx)(nt.a,{href:"https://csse.utoronto.ca/",target:"_blank",sx:{color:"#ababab",textDecoration:"none"},children:"Centre for Social Services Engineering"}),", University of Toronto"]})})},Da=n(391),Fa=n(648),La=n(798),Ra=n(158),Ma=n(768),Ba=n(24),Ga=n(27),za=n(35),Va=n(34),qa=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(){return Object(Ba.a)(this,n),t.apply(this,arguments)}return Object(Ga.a)(n,[{key:"render",value:function(){return Object(rt.jsx)("div",{className:"landing",children:Object(rt.jsx)("div",{className:"container",children:Object(rt.jsx)("div",{className:"intro-placeholder"})})})}}]),n}(Ae.Component),Ha=n(663),Wa=Object($e.a)((function(){return{container:{paddingTop:80,maxWidth:"500px"},button:{width:300}}}));var Ua=function(){var e=Wa();return Object(rt.jsx)(Tt.a,{className:e.container,children:Object(rt.jsxs)(Ha.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object(rt.jsx)(Ha.a,{item:!0,children:Object(rt.jsx)(Ue.a,{variant:"h5",children:"Log in to your Dashboard"})}),Object(rt.jsx)(Ha.a,{item:!0,children:Object(rt.jsx)(Sa,{to:"/login-pane",children:Object(rt.jsx)(Je.a,{variant:"outlined",className:e.button,children:"Sign in with SNM account"})})}),Object(rt.jsx)(Ha.a,{item:!0,children:Object(rt.jsx)(Sa,{to:"/login-pane",children:Object(rt.jsx)(Je.a,{color:"primary",variant:"outlined",className:e.button,children:"Facebook"})})}),Object(rt.jsx)(Ha.a,{item:!0,children:Object(rt.jsx)(Sa,{to:"/login-pane",children:Object(rt.jsx)(Je.a,{color:"secondary",variant:"outlined",className:e.button,children:"Google"})})})]})})},Ja=n(747),Ka=Object($e.a)((function(){return{container:{paddingTop:80,maxWidth:"500px"},paper:{padding:30},item:{marginTop:20},button:{marginTop:30,marginBottom:20},link:{marginTop:10,color:"#007dff"}}}));var Ya=function(){var e=Ka(),t=Object(Ge.g)(),n=Object(Le.c)(),a=Object(Ae.useState)({username:"",password:"",alert:""}),r=Object(Be.a)(a,2),i=r[0],o=r[1],l=function(e){return function(t){var n=t.target.value;o((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e,n))}))}},d=function(){var e=Object(N.a)(I.a.mark((function e(){var a,r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(F(i));case 2:a=e.sent,r=a.status,c=a.message,r===E?t.push("/dashboard"):o((function(e){return Object(s.a)(Object(s.a)({},e),{},{alert:c})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(rt.jsx)(Tt.a,{className:e.container,onKeyPress:function(e){"Enter"===e.key&&d()},children:Object(rt.jsxs)(at.a,{elevation:5,className:e.paper,children:[Object(rt.jsx)(Ue.a,{variant:"h6",children:"Sign in"}),Object(rt.jsx)(gt.a,{fullWidth:!0,variant:"outlined",label:"Username",type:"text",value:i.username,onChange:l("username"),className:e.item}),Object(rt.jsx)("br",{}),Object(rt.jsx)(gt.a,{fullWidth:!0,variant:"outlined",label:"Password",type:"password",value:i.password,onChange:l("password"),className:e.item}),Object(rt.jsx)("br",{}),Object(rt.jsx)(Ue.a,{variant:"caption",children:Object(rt.jsx)("span",{style:{color:"red"},children:i.alert})}),Object(rt.jsx)("br",{}),Object(rt.jsx)(Je.a,{variant:"outlined",color:"primary",className:e.button,onClick:d,children:" Log in"}),Object(rt.jsx)(Ja.a,{}),Object(rt.jsx)(Sa,{to:"/login-pane",children:Object(rt.jsx)(Ue.a,{variant:"body2",className:e.link,children:"Don't have an account?"})}),Object(rt.jsx)(Sa,{to:"/login-pane",children:Object(rt.jsx)(Ue.a,{variant:"body2",className:e.link,children:"Forget password?"})})]})})},Xa=n(748),Za=n(749),Qa=n(750),$a=n(751);function er(e){var t=e.to,n=e.text,a=e.icon;return Object(rt.jsx)(Sa,{to:t,children:Object(rt.jsx)(Je.a,{sx:{width:300,height:100,textTransform:"none",margin:1,color:"#535353"},color:"inherit",variant:"outlined",startIcon:a,size:"large",children:n})})}var tr=function(){var e=Object(Le.d)((function(e){return e.auth})),t=e.isLoggedin,n=e.currentUser,a=e.organization;return t&&n.is_admin?Object(rt.jsxs)(Tt.a,{maxWidth:"md",sx:{paddingTop:8,textAlign:"center"},children:[!a.id&&Object(rt.jsx)(er,{to:{pathname:"/providers/organization/new",state:{status:"Home Agency"}},text:"Create Organization Profile for Home Agency",icon:Object(rt.jsx)(Xa.a,{})}),a.id&&Object(rt.jsx)(er,{to:"/provider/".concat(a.id,"/edit/organization"),icon:Object(rt.jsx)(kt.a,{}),text:"Edit Organization Profile for Home Agency"}),Object(rt.jsx)(er,{to:"/users",icon:Object(rt.jsx)(Za.a,{}),text:"Manage Users"}),Object(rt.jsx)(er,{to:"/admin-logs",icon:Object(rt.jsx)(Qa.a,{}),text:"Admin Logs"}),Object(rt.jsx)(er,{to:"/eligibility-criteria",icon:Object(rt.jsx)($a.a,{}),text:"Manage Eligibility Criteria"}),Object(rt.jsx)(er,{to:"/settings/manage-fields",icon:Object(rt.jsx)(kt.a,{}),text:"Manage Client/Provider Fields"}),Object(rt.jsx)(er,{to:"/questions",icon:Object(rt.jsx)(kt.a,{}),text:"Manage Questions"})]}):Object(rt.jsx)("span",{children:'"You don\'t have the permission to view this page."'})},nr=function(){function e(t,n){Object(Ba.a)(this,e),this.name=t;var a=localStorage.getItem(this.name);this.store=a&&JSON.parse(a)||n}return Object(Ga.a)(e,[{key:"value",get:function(){return console.log("GET ",this.name,this.store),this.store},set:function(e){console.log("SET ",this.name,e),this.store=e,localStorage.setItem(this.name,JSON.stringify(e))}},{key:"save",value:function(){localStorage.setItem(this.name,JSON.stringify(this.store))}}]),e}(),ar=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Ba.a)(this,e),this.name=t+"-cnt",this.store=Number(localStorage.getItem(this.name))||n-1}return Object(Ga.a)(e,[{key:"nextCnt",get:function(){return this.store++,localStorage.setItem(this.name,this.store),this.store}}]),e}(),rr=(n(649),"JWT ".concat(localStorage.getItem("jwt_token")),function e(t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=Object(Be.a)(a[n],2),i=r[0],o=r[1];null==o||"object"!==typeof o||Array.isArray(o)?t[i]=o[0]:t[i]=e(o)}return t});function ir(e){return or.apply(this,arguments)}function or(){return(or=Object(N.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.serverHost+t,e.next=3,d()(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}});case 3:if(!((n=e.sent).status>=400&&n.status<600)){e.next=12;break}return a=new Error("Bad response from server: "+n.status),e.t0=rr,e.next=9,n.json();case 9:throw e.t1=e.sent,a.json=(0,e.t0)(e.t1),a;case 12:return e.abrupt("return",n.json());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t,n){return sr.apply(this,arguments)}function sr(){return(sr=Object(N.a)(I.a.mark((function e(t,n,a){var r,i,o,c=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>3&&void 0!==c[3]&&c[3],t=u.serverHost+t,e.next=4,d()(t,{method:a,body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}});case 4:if(!((i=e.sent).status>=400&&i.status<600)){e.next=13;break}return o=new Error("Bad response from server: "+i.status),e.t0=rr,e.next=10,i.json();case 10:throw e.t1=e.sent,o.json=(0,e.t0)(e.t1),o;case 13:if(!r){e.next=15;break}return e.abrupt("return",i);case 15:return e.abrupt("return",i.json());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(e,t){return dr.apply(this,arguments)}function dr(){return(dr=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n,"POST"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e,t){return br.apply(this,arguments)}function br(){return(br=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n,"PUT"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n,"DELETE",!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}var mr=new nr("clients",[]),fr=new ar("client");function Or(){return gr.apply(this,arguments)}function gr(){return(gr=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(mr.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e){return xr.apply(this,arguments)}function xr(){return(xr=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(mr.value.find((function(e){return e.id===Number(t)})))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e){return _r.apply(this,arguments)}function _r(){return(_r=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return n=Object(s.a)({id:fr.nextCnt,need_groups:[],appointments:[]},t),mr.value=[].concat(Object(o.a)(mr.value),[n]),e.abrupt("return",{success:!0,clientId:n.id});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t){return Sr.apply(this,arguments)}function Sr(){return(Sr=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return Object.assign(mr.value.find((function(e){return e.id===Number(t)})),n),mr.save(),e.abrupt("return",{success:!0,clientId:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e){return wr.apply(this,arguments)}function wr(){return(wr=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return n=mr.value.findIndex((function(e){return e.id===t.id})),mr.value.splice(n,1),mr.save(),e.abrupt("return",{success:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e){if(1===Object.keys(e).length)return"Not Provided";var t="";return void 0!==e.apt_number&&(t+="".concat(e.apt_number,"-")),void 0!==e.street_address&&(t+="".concat(e.street_address,", ")),void 0!==e.city&&(t+="".concat(e.city,", ")),void 0!==e.province&&(t+="".concat(e.province,", ")),void 0!==e.postal_code&&(t+="".concat(e.postal_code)),t}function Nr(e){try{var t=e.match(/^(\d{3})(\d{3})(\d{4})$/);return"("+t[1]+") "+t[2]+"-"+t[3]}catch(n){return e}}var Tr="clients",Er=[{label:"First Name",body:function(e){var t=e.id,n=e.profile;return Object(rt.jsx)(Sa,{color:!0,to:"/".concat(Tr,"/").concat(t),children:n.first_name})}},{label:"Last Name",body:function(e){return e.profile.last_name}},{name:"profile.primary_phone_number",label:"Phone Number",body:function(e){var t=e.profile;return t.primary_phone_number?Nr(t.primary_phone_number):"Not Provided"}},{label:"Email",body:function(e){return e.profile.email}},{label:"Address",body:function(e){var t=e.profile;return t.address?Ir(t.address):"Not Provided"}}];var Ar=n(755),Pr=n(785),Dr=n(819),Fr=n(820),Lr=n(752),Rr=n(753),Mr=n(754);function Br(e){var t=e.needGroupCategory,n=e.needs,a=e.needGroupId,r=e.status,i=e.clientId,o=e.handleShow,c=Object(Le.c)(),l=Object(Ae.useState)({status:r,hasUrgentNeed:zr(n)}),d=Object(Be.a)(l,2),u=d[0],b=d[1],j=Gr(),h=n.map((function(e){return Object(rt.jsxs)(at.a,{variant:"outlined",children:[Object(rt.jsxs)(Ha.a,{container:!0,spacing:3,className:j.innerBox,children:[Object(rt.jsx)(Ha.a,{item:!0,xs:!0,children:Object(rt.jsx)(Ue.a,{color:"primary",children:e.type})}),Object(rt.jsx)(Ha.a,{item:!0,xs:!0}),e.is_urgent&&Object(rt.jsx)(Ha.a,{item:!0,xs:!0,children:Object(rt.jsxs)(We.a,{display:"flex",flexDirection:"row",children:[Object(rt.jsx)(Lr.a,{className:j.highPriority}),Object(rt.jsx)(Ue.a,{className:j.highPriority,children:"Urgent"})]})})]}),Object(rt.jsxs)(We.a,{className:j.innerBox,children:[Object(rt.jsx)(Sa,{color:!0,to:"/needs/".concat(e.id),children:"Find Services/Goods"}),Object(rt.jsx)("p",{children:e.description})]}),Object(rt.jsxs)(We.a,{display:"flex",className:j.innerBox,children:[Object(rt.jsx)(We.a,{children:Object(rt.jsx)(Sa,{to:"/needs/".concat(e.id,"/edit"),children:Object(rt.jsx)(Je.a,{startIcon:Object(rt.jsx)(kt.a,{}),children:"Edit"})})}),Object(rt.jsx)(We.a,{children:Object(rt.jsx)(Je.a,{startIcon:Object(rt.jsx)(wt.a,{}),onClick:function(){return o(e.id)},children:"Delete"})}),Object(rt.jsx)(We.a,{children:Object(rt.jsx)(Je.a,{color:"secondary",onClick:function(){return function(){var e={category:t,status:"Unmet"===u.status?"Met":"Unmet",client_id:i,id:a};b((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:e.status})})),c(y(i,e.id,e))}()},children:u.status})})]})]},e.id)}));return Object(rt.jsx)("div",{children:Object(rt.jsxs)(Pr.a,{className:j.panel,children:[Object(rt.jsxs)(Dr.a,{expandIcon:Object(rt.jsx)(Rr.a,{}),"aria-controls":t+"-content",id:t+"-header",children:[Object(rt.jsxs)(We.a,{display:"flex",flexDirection:"row",className:j.column,children:[Object(rt.jsx)(Ue.a,{className:j.heading,children:t}),u.hasUrgentNeed&&Object(rt.jsx)(Mr.a,{className:j.highPriority})]}),Object(rt.jsx)("div",{className:j.column,children:Object(rt.jsxs)(Ue.a,{className:j.secondaryHeading,children:[n.length," need(s) inside "]})})]}),Object(rt.jsx)(Fr.a,{className:j.panelDetail,children:Object(rt.jsx)(We.a,{className:j.outerBox,children:h})})]})})}var Gr=Object($e.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},secondaryHeading:{fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary},column:{flexBasis:"50%"},panel:{width:"35%"},panelDetail:{padding:0},outerBox:{width:"100%"},innerBox:{padding:"10px"},highPriority:{color:"#f44336"}}}));function zr(e){var t,n=Object(xn.a)(e);try{for(n.s();!(t=n.n()).done;){if(t.value.is_urgent)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}function Vr(e){var t=e.clientId,n=e.needGroups,a=Object(Le.c)(),r=Object(Ae.useState)({show:!1,selectedId:null,needGroupData:n}),i=Object(Be.a)(r,2),c=i[0],l=i[1],d=function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{showDeletedDiaglog:!0,selectedId:e})}))},u=c.needGroupData.map((function(e){return Object(rt.jsx)(Br,{needGroupCategory:e.category,needs:e.needs,needGroupId:e.id,status:e.status,clientId:t,handleShow:d},e.id)})),b=function(e){var t,n=Object(o.a)(c.needGroupData),a=Object(xn.a)(n);try{for(a.s();!(t=a.n()).done;){var r,i=t.value,s=Object(xn.a)(i.needs);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(l.id===c.selectedId){var d=i.needs.indexOf(l);d>-1&&i.needs.splice(d,1)}}}catch(b){s.e(b)}finally{s.f()}if(0===i.needs.length){var u=n.indexOf(i);u>-1&&n.splice(u,1)}}}catch(b){a.e(b)}finally{a.f()}return n};return c?Object(rt.jsxs)("div",{children:[u,Object(rt.jsx)(xt,{contentType:"Need",objectId:c.selectedId,show:c.showDeletedDiaglog,onHide:function(){l((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeletedDiaglog:!1})}))},delete:function(e,n){a(_(t,e,n)).then((function(e){"ERROR"===e||l((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeletedDiaglog:!1,needGroupData:b(e.selectedId)})}))}))},title:"Delete this need?"})]}):""}function qr(e){var t=e.title,n=e.value;return n?Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{component:"th",scope:"row",children:t}),Object(rt.jsx)(na.a,{align:"left",children:n})]},t):null}var Hr=Object($e.a)({table:{marginTop:20,marginBottom:40,width:"80%"},title:{backgroundColor:"#ececec",width:"30%"},title2:{backgroundColor:"#ececec",width:"70%"}});function Wr(e){var t,n,a=e.step,r=e.client,i=e.infoFields,o=e.clientFields,c=k.a.map(i,(function(e){switch(t=o[e].label,e){case"first_name":case"middle_name":case"last_name":case"preferred_name":case"gender":case"birth_date":case"email":case"primary_phone_number":void 0===r.profile||(n=r.profile[e]);break;case"alt_phone_number":void 0===r.profile||(n=r.profile[e]?Nr(r.profile[e]):"None provided");break;case"address":void 0===r.profile||(n=r[e]?Ir(r[e]):"None provided");break;case"has_children":void 0===r.profile||(n=r[e]?"Yes":"No");break;case"other_languages":r.profile,n=r.profile[e];break;case"eligibilities":void 0===r.profile||(n=(r[e]||[]).join(", "));break;default:n=r[e]}return Object(rt.jsx)(qr,{title:t,value:n},e)})),s=Hr();return Object(rt.jsx)(Qn.a,{className:s.table,component:at.a,children:Object(rt.jsxs)($n.a,{"aria-label":"Profile table",children:[Object(rt.jsx)(oa.a,{children:Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{className:s.title,children:a}),Object(rt.jsx)(na.a,{className:s.title2})]})}),Object(rt.jsx)(ea.a,{children:c})]})})}var Ur=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(){return Object(Ba.a)(this,n),t.apply(this,arguments)}return Object(Ga.a)(n,[{key:"render",value:function(){var e=this.props.appointment;return Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{component:"th",scope:"row",children:e.category}),Object(rt.jsx)(na.a,{align:"left",children:e.date}),Object(rt.jsx)(na.a,{align:"left",children:"".concat(e.start_time," - ").concat(e.end_time)}),Object(rt.jsx)(na.a,{align:"left",children:e.description})]})}}]),n}(Ae.Component),Jr=new nr("client-fields",{steps_order:["info"],form_structure:{info:{first_name:!1,last_name:!1,gender:!1,first_language:!1,birth_date:!1,ngo_conditions:!1,status_in_canada:!1,country_of_origin:!1,has_children:!1}}});function Kr(){return Yr.apply(this,arguments)}function Yr(){return(Yr=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(Jr.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xr(e){return Zr.apply(this,arguments)}function Zr(){return(Zr=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:Jr.value=t;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qr={address:{label:"Address"},alt_phone_number:{component:"GeneralField",type:"tel",label:"Alternative Phone Number"},arrival_date:{component:"GeneralField",type:"date",label:"Arrival Date (if different from landing_date)"},birth_date:{component:"GeneralField",type:"date",label:"Date of Birth"},completed_education_level:{component:"SelectField",label:"Completed Education Level",options:u.educationLevelOptions},country_of_last_residence:{component:"GeneralField",type:"text",label:"Country of Last Residence"},country_of_origin:{component:"GeneralField",type:"text",label:"Country of Origin"},current_education_level:{component:"SelectField",label:"Current Education Level",options:u.educationLevelOptions},ngo_conditions:{component:"CheckboxField",label:"NGO Conditions"},email:{component:"GeneralField",type:"email",label:"Email"},family:{label:"Family"},file_id:{component:"GeneralField",type:"text",label:"File ID"},first_language:{component:"SelectField",label:"First Language"},first_name:{component:"GeneralField",type:"text",label:"First Name"},gender:{component:"SelectField",label:"Gender",options:u.genderOptions},has_children:{component:"RadioField",label:"Do you have children?",options:{Yes:!0,No:!1}},immigration_doc_number:{component:"GeneralField",type:"text",label:"Immigration Document Number (if different from PR card)"},income_source:{component:"SelectField",label:"Income Source",options:u.incomeSourceOptions},landing_date:{component:"GeneralField",type:"date",label:"Landing Date"},last_name:{component:"GeneralField",type:"text",label:"Last Name"},marital_status:{component:"SelectField",label:"Marital Status",options:u.maritalStatusOptions},middle_name:{component:"GeneralField",type:"text",label:"Middle Name"},num_of_children:{component:"GeneralField",type:"number",label:"Number of Children"},num_of_dependants:{component:"GeneralField",type:"number",label:"Number of Dependants"},other_languages:{component:"MultiSelectField",label:"Other languages"},preferred_name:{component:"GeneralField",type:"text",label:"Preferred Name"},primary_phone_number:{component:"GeneralField",type:"tel",label:"Telephone"},pr_number:{component:"GeneralField",type:"text",label:"Permanent Residence Card Number (PR card)"},status_in_canada:{component:"SelectField",label:"Status in Canada",options:u.statusInCanadaOptions}};function $r(){return ir("/eligibility_criteria/")}function ei(e,t){return ti.apply(this,arguments)}function ti(){return(ti=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr("/eligibility_criteria/"+t+"/",n);case 2:if(204===e.sent.status){e.next=5;break}throw Error("Server does not return correct code.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ni=Object($e.a)((function(e){return{root:{},paper:{position:"relative",paddingLeft:28,paddingBottom:20,marginBottom:20,width:380}}}));function ai(e){var t=e.index,n=e.clientId,a=e.member,r=e.handleRemoveFamily,i=e.errMsg,o=void 0===i?{}:i,c=ni(),s=function(e){return function(t){a.person[e]=t.target.value}},l=n&&a.person.id===n;return Object(rt.jsxs)("div",{className:c.root,children:[Object(rt.jsxs)(Gt.a,{component:"legend",children:["Family Member #",t+1+"  ",Object(rt.jsx)(Je.a,{disabled:l,onClick:function(e){return r(t)},color:"secondary",children:"Remove"})]}),Object(rt.jsxs)(at.a,{variant:"outlined",className:c.paper,children:[Object(rt.jsx)(Yt,{type:"text",onChange:s("first_name"),value:a.person.first_name,label:"First name",disabled:l,error:!!o.first_name,helperText:o.first_name}),Object(rt.jsx)(Yt,{type:"text",value:a.person.last_name,onChange:s("last_name"),label:"Last name",disabled:l,error:!!o.last_name,helperText:o.last_name}),Object(rt.jsx)(Yt,{type:"date",value:a.person.birth_date,onChange:s("birth_date"),label:"Birth date",disabled:l,error:!!o.birth_date,helperText:o.birth_date}),Object(rt.jsx)(rn,{options:u.genderOptions,value:a.person.gender,onChange:s("gender"),label:"Gender",disabled:l,error:!!o.gender,helperText:o.gender}),Object(rt.jsx)(rn,{options:u.familyRelationshipOptions,value:a.relationship,onChange:function(e){return a.relationship=e.target.value},label:n&&a.person.id===n?"Self":"Relationship",disabled:l,error:!!o.relationship,helperText:o.relationship})]})]})}function ri(e){var t=e.family,n=e.clientId,a=e.errMsg,r=void 0===a?{}:a,i=Object(Ae.useState)(!0),o=Object(Be.a)(i,2),c=o[0],s=o[1],l=function(){return s(!c)},d=function(e){t.members.splice(e,1),l()};return Object(rt.jsxs)("div",{children:[r&&"string"===typeof r&&Object(rt.jsx)(Ft.a,{severity:"error",children:r}),t.members.map((function(e,t){return Object(rt.jsx)(ai,{index:t,member:e,clientId:n,handleRemoveFamily:d,errMsg:r[t]},t)})),Object(rt.jsx)(Je.a,{onClick:function(){t.members.push({person:{first_name:"",last_name:"",birth_date:null,gender:""},relationship:""}),l()},variant:"outlined",children:"Add Family Member"})]})}var ii=n(756),oi=n(821),ci=n(780),si=["row","noStar","label","required","options","onChange","value","helperText"],li=Object($e.a)((function(e){return{formControl:{position:"relative",top:16},formControlRow:{position:"relative",flexDirection:"row",alignItems:"center"},labelRow:{width:200,marginRight:20}}}));function di(e){var t=e.row,n=e.noStar,a=e.label,r=e.required,i=e.options,o=e.onChange,c=e.value,s=void 0===c?en:c,l=e.helperText,d=Object(Ke.a)(e,si),u=li(),b=Object(Ae.useState)(s),j=Object(Be.a)(b,2),h=j[0],p=j[1],m=Object(Ae.useCallback)((function(e){var t=function(e){return"true"===e||"false"!==e&&e}(e.target.value);p(t),o({target:{value:t===en?null:t}})}),[o]);return Object(rt.jsxs)(Xt.a,{className:t?u.formControlRow:u.formControl,error:d.error,children:[Object(rt.jsx)(Gt.a,{className:t&&u.labelRow,required:r&&!n,component:"legend",children:a}),Object(rt.jsx)(ii.a,{value:h,onChange:m,row:!0,children:Object.entries(i).map((function(e){var t=Object(Be.a)(e,2),n=t[0],a=t[1];return Object(rt.jsx)(oi.a,{value:a,control:Object(rt.jsx)(ci.a,{color:"primary"}),label:n,labelPlacement:"end"},a)}))}),l&&Object(rt.jsx)($t.a,{children:l})]})}var ui=n(666),bi=["label","required","options","onChange","helperText"],ji=Object($e.a)((function(e){return{formControl:{marginTop:16}}}));function hi(e){var t=e.label,n=e.required,a=e.options,r=e.onChange,i=e.helperText,o=Object(Ke.a)(e,bi),l=Object(Ae.useMemo)((function(){return Array.isArray(a)?a:Object.values(a)}),[a]),d=Object(Ae.useState)((function(){var e={};return l.forEach((function(t){e[t]=o.value.includes(t)})),e})),u=Object(Be.a)(d,2),b=u[0],j=u[1],h=Object(Ae.useCallback)((function(e){return function(t){var n=t.target.checked,a=Object(s.a)(Object(s.a)({},b),{},Object(c.a)({},e,n));j(a);var i=[];Object.entries(a).forEach((function(e){var t=Object(Be.a)(e,2),n=t[0];t[1]&&i.push(n)})),r({target:{value:i}})}}),[r,b]),p=ji();return Object(rt.jsxs)(Xt.a,{component:"fieldset",className:p.formControl,error:o.error,children:[Object(rt.jsx)(Gt.a,{required:n,component:"legend",children:t}),Object(rt.jsx)(ui.a,{row:!0,children:l.map((function(e){return Object(rt.jsx)(oi.a,{label:e,control:Object(rt.jsx)(aa.a,{color:"primary",checked:b[e],onChange:h(e)})},e)}))}),i&&Object(rt.jsx)($t.a,{children:i})]})}var pi=n(786);function mi(e){var t=e.options,n=e.label,a=e.value,r=e.onChange,i=e.helperText,o=Object(Ae.useCallback)((function(e,t){r({target:{value:t}})}),[r]);return Object(rt.jsx)(pi.a,{sx:{mt:"16px"},multiple:!0,options:t,onChange:o,getOptionLabel:function(e){return e},defaultValue:a,renderInput:function(e){return Object(rt.jsx)(gt.a,Object(s.a)(Object(s.a)({},e),{},{label:n,sx:{minWidth:350},fullWidth:!1,helperText:i}))}})}var fi=["component","options","value"];function Oi(e){var t=e.component,n=e.options,a=e.value,r=Object(Ke.a)(e,fi);return"GeneralField"===t?Object(rt.jsx)(Yt,Object(s.a)(Object(s.a)({},r),{},{value:a})):"SelectField"===t?Object(rt.jsx)(rn,Object(s.a)(Object(s.a)({options:n},r),{},{value:a})):"MultiSelectField"===t?Object(rt.jsx)(mi,Object(s.a)({options:n,value:a},r)):"RadioField"===t?Object(rt.jsx)(di,Object(s.a)({options:n,value:a},r)):"CheckboxField"===t?Object(rt.jsx)(hi,Object(s.a)({options:n,value:a},r)):Object(rt.jsxs)("div",{children:["Unknown field ",t]})}function gi(e,t){var n=function(e){var t={};Tn(e.address.postal_code,t,"address"),e.profile&&Pn(e.profile,t);return t}(e),a=function(e,t){var n,a={},r=Object(xn.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,c=Object.entries(i);o<c.length;o++){var s=Object(Be.a)(c[o],2),l=s[0];s[1]&&(l in e&&kn(e[l])||l in e.profile&&kn(e.profile[l])?a[l]="This field is required":"family"===l&&l in e?0===e[l].length?a.family="Please add at least one family member!":(a[l]={},Dn(e[l].members,a[l]),0===Object.entries(a[l]).length&&delete a[l]):"address"===l&&(a[l]={},In(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]))}}catch(d){r.e(d)}finally{r.f()}return a}(e,t);return Sn(a,n)}var vi=Object($e.a)((function(e){return{content:{width:"80%",margin:"auto",paddingBottom:10}}}));function xi(){var e=vi(),t=Object(Ge.g)(),n=Object(Le.c)(),a=Object(Ge.h)().id,r=a?"edit":"new",i=Object(Ae.useState)({loading:!0,languageOptions:[],all_ngo_conditions:[],stepNames:[],steps:[],client:null,dispatchErrorMsg:[],fieldErrorMsg:{}}),o=Object(Be.a)(i,2),c=o[0],l=o[1],d=Object(Ae.useMemo)((function(){return function(e){var t={profile:Object(s.a)({},Hn),address:Object(s.a)({},Un),family:{members:[]},marital_status:"",has_children:!1,num_of_children:"",country_of_origin:"",country_of_last_residence:"",first_language:"",other_languages:[],pr_number:"",immigration_doc_number:"",landing_date:null,arrival_date:null,status_in_canada:"",income_source:"",current_education_level:"",completed_education_level:"",num_of_dependants:"",file_id:"",ngo_conditions:[]};return e?Sn(t,e):t}(c.client)}),[c.client]);Object(Ae.useEffect)((function(){var e=[];e.push(n(B("languages")).then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{languageOptions:e})}))}))),e.push($r().then((function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{all_ngo_conditions:e.map((function(e){return e.title}))})}))}))),e.push(Kr().then((function(e){null==e||0===e.steps_order.length||0===Object.values(e.form_structure).length?l((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0,dispatchErrorMsg:["No fields are available."]})})):l((function(t){return Object(s.a)(Object(s.a)({},t),{},{stepNames:e.steps_order,steps:Object.values(e.form_structure)})}))}))),a&&e.push(vr(a).then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{client:e})}))}))),Promise.all(e).then((function(){return l((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[n,a]);var u=function(){var e=Object(N.a)(I.a.mark((function e(){var n,i,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=gi(d,c.steps),0===Object.keys(n).length){e.next=4;break}return l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fieldErrorMsg:n})})),e.abrupt("return");case 4:if("edit"!==r){e.next=11;break}return e.next=7,Cr(a,d);case 7:(i=e.sent).success?t.push("/clients/".concat(i.clientId)):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{dispatchErrorMsg:[i.error]})})),e.next=15;break;case 11:return e.next=13,yr(d);case 13:(o=e.sent).success?t.push("/clients/".concat(o.clientId)):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{dispatchErrorMsg:[o.error]})}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(Ae.useCallback)((function(e){return function(t){var n=t.target.value,a=e.split(".");if(1===a.length)d[e]=n;else{for(var r=d,i=0;i<a.length-1;i++)r=r[a[i]];r[a[a.length-1]]=n||""}}}),[d]);return c.loading?Object(rt.jsx)(wa,{message:"Loading..."}):Object(rt.jsx)(Tt.a,{children:Object(rt.jsx)(Rt,{getStepContent:function(t){var n=c.steps[t];return Object(rt.jsx)("div",{className:e.content,children:Object.entries(n).map((function(e){var t,n=Object(Be.a)(e,2),r=n[0],i=n[1],o=c.fieldErrorMsg[r];if("first_language"===r?t=c.languageOptions:"other_languages"===r?t=c.languageOptions.filter((function(e){return e!==d.first_language})):"ngo_conditions"===r&&(t=c.all_ngo_conditions),"address"===r)return Object(rt.jsx)(on,{address:d.address,required:i,errMsg:o},"address");if("family"===r)return Object(rt.jsx)(ri,{family:d.family,clientId:a,required:i,errMsg:o},"family");var s=Object.keys(Hn).includes(r);return Object(rt.jsx)(Oi,{label:Qr[r].label,type:Qr[r].type,component:Qr[r].component,value:s?d.profile[r]:d[r],onChange:b(s?"profile."+r:r),required:i,options:Qr[r].options||t,error:null!=o,helperText:o},r)}))})},handleFinish:u,stepNames:c.stepNames,error:c.dispatchErrorMsg})})}var yi=n(757);function _i(e,t){return ur("/user/"+e+"/",t)}function Ci(e){return ir("/user/"+e+"/")}function Si(e,t,n){if(204!==jr("/user/"+e+"/").status)throw Error("Server does not return correct code.")}var ki={is_superuser:Object(s.a)(Object(s.a)({},tn),{},{label:"Admin?",component:di,options:{Yes:!0,No:!1},required:!0}),username:Object(s.a)(Object(s.a)({},tn),{},{label:"Username",required:!0}),password:Object(s.a)(Object(s.a)({},tn),{},{label:"Password",type:"password",required:!0,validator:Bn.password}),first_name:Object(s.a)(Object(s.a)({},tn),{},{label:"First name"}),last_name:Object(s.a)(Object(s.a)({},tn),{},{label:"Last name"}),email:Object(s.a)(Object(s.a)({},tn),{},{label:"Email",type:"email",validator:Bn.email}),primary_phone_number:Object(s.a)(Object(s.a)({},tn),{},{label:"Telephone",validator:Bn.phone}),alt_phone_number:Object(s.a)(Object(s.a)({},tn),{},{label:"Alternate phone number",validator:Bn.phone})},wi=Object($e.a)((function(){return{root:{width:"80%"},button:{marginTop:12,marginBottom:12}}}));function Ii(){var e=wi(),t=Object(Ge.g)(),n=Object(Ge.h)().id,a=null==n?"new":"edit",r=Object(Ae.useState)({form:Object(s.a)({},Jn),errors:{},loading:!0}),i=Object(Be.a)(r,2),o=i[0],c=i[1];Object(Ae.useEffect)((function(){"edit"===a?Ci(n).then((function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{form:Object(s.a)(Object(s.a)({},t.form),e),loading:!1})}))})):c((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}),[a,n]);var l=function(){for(var e={},t=0,n=Object.entries(ki);t<n.length;t++){var a=Object(Be.a)(n[t],2),r=a[0],i=a[1],l=kn(o.form[r]);i.required&&l&&(e[r]="This field is required");var d=void 0;!l&&i.validator&&(d=i.validator(o.form[r]))&&(e[r]=d)}return 0===Object.keys(e).length||(c((function(t){return Object(s.a)(Object(s.a)({},t),{},{errors:e})})),!1)},d=function(){var e=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l()){e.next=16;break}if(e.prev=1,"new"!==a){e.next=8;break}return e.next=5,lr("/users/",o.form);case 5:t.push("/users/"),e.next=11;break;case 8:return e.next=10,_i(n,o.form);case 10:t.push("/users/"+n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.json&&c((function(t){return Object(s.a)(Object(s.a)({},t),{},{errors:e.t0.json})}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return o.loading?Object(rt.jsx)(wa,{message:"Loading user form..."}):Object(rt.jsxs)(Tt.a,{className:e.root,children:[Object(rt.jsx)(Ue.a,{variant:"h5",children:"new"===a?"Create new user":"Edit user"}),Object.entries(ki).map((function(e){var t=Object(Be.a)(e,2),n=t[0],a=t[1];return Object(rt.jsx)(a.component,{label:a.label,type:a.type,options:a.options,value:o.form[n],required:a.required,onChange:function(e){return o.form[n]=e.target.value},error:!!o.errors[n],helperText:o.errors[n]},n)})),Object(rt.jsx)(Je.a,{variant:"contained",color:"primary",className:e.button,onClick:d,children:"Submit"})]})}var Ni=n(43);var Ti=n(758),Ei=n(759),Ai=n(383),Pi=n(774),Di=n(384),Fi=n(386),Li=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;Object(Ba.a)(this,n);var r={};return(a=t.call(this,e)).props.match.params.need_id&&(r=a.props.needsById[a.props.match.params.need_id]),a.state={needId:r.id,mode:r.id?"edit":"new",form:{type:r.type||void 0,category:r.category||"",description:r.description||"",needed_by:r.needed_by||"",condition:r.condition||"",status:r.status||"",is_urgent:r.is_urgent||!1,languages:r.languages||[]}},a.formValChange=a.formValChange.bind(Object(Ni.a)(a)),a.submit=a.submit.bind(Object(Ni.a)(a)),a.handleMultiSelectChange=a.handleMultiSelectChange.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(B("needs"))}},{key:"formValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.target.value,a=Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},t,n));this.setState({form:a})}},{key:"handleMultiSelectChange",value:function(e,t,n){var a=function(e,t,n){var a;switch(n.action){case"pop-value":case"remove-value":k.a.remove(e,(function(e){return e===n.removedValue.value})),a=e;break;case"clear":a=[];break;default:e.push(n.option.value),a=e}return a}(this.state.form[e],0,n);this.setState({form:Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},e,a))})}},{key:"submit",value:function(){var e,t,n;"edit"===this.state.mode?this.props.dispatch((e=this.props.clientId,t=this.state.needId,n=this.state.form,function(a){var r=u.serverHost+"/clients/"+e+"/needs/"+t+"/";return d()(r,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return a(v(e,t.need,t.need_group))}))})):this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/clients/"+e+"/needs/";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return n(v(e,t.need,t.need_group))}))}}(this.props.clientId,this.state.form)),this.props.history.push("/clients/".concat(this.props.clientId))}},{key:"render",value:function(){var e=this,t=this.props,n="edit"===this.state.mode?"Edit Need":"Create Need";return void 0===this.state.form.type?Object(rt.jsx)("div",{className:"outer",children:Object(rt.jsx)("div",{className:"middle",children:Object(rt.jsxs)("div",{className:"need-type-buttons",children:[Object(rt.jsx)(Ti.a,{onClick:function(t){return e.formValChange(t,"type","Good")},children:"Goods"}),Object(rt.jsx)(Ti.a,{onClick:function(t){return e.formValChange(t,"type","Service")},children:"Service"})]})})}):Object(rt.jsxs)(Ei.a,{className:"content",children:[Object(rt.jsxs)(Ai.a,{sm:12,children:[Object(rt.jsx)("h3",{children:n}),Object(rt.jsx)("hr",{})]}),Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsxs)(Pi.a,{horizontal:!0,children:[Object(rt.jsxs)(Di.a,{controlId:"type",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Type"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)("div",{className:"need-type",children:this.state.form.type})})]}),Object(rt.jsxs)(Di.a,{controlId:"is_urgent",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Urgent?"}),Object(rt.jsxs)(Ai.a,{sm:9,children:[Object(rt.jsx)(Pi.a.Check,{name:"radioGroup",value:"1",onChange:function(t){return e.formValChange(t,"is_urgent")},defaultChecked:!0===this.state.form.is_urgent,type:"radio",inline:!0,children:"Yes"})," ",Object(rt.jsxs)(Pi.a.Check,{name:"radioGroup",value:"0",onChange:function(t){return e.formValChange(t,"is_urgent")},defaultChecked:!1===this.state.form.is_urgent,type:"radio",inline:!0,children:["No",!1===this.state.form.is_urgent]})," "]})]}),Object(rt.jsx)(rn,{label:"Category",options:t.needsCategories,value:this.state.form.category,onChange:function(t){return e.formValChange(t,"category")},required:!0}),Object(rt.jsx)(Yt,{label:"Needed By",type:"date",value:this.state.form.needed_by,onChange:function(t){return e.formValChange(t,"needed_by")}}),Object(rt.jsx)(mi,{label:"Languages",options:t.languagesCategories,value:this.state.form.languages,onChange:function(t){return e.handleMultiSelectChange(t,null,null)}}),Object(rt.jsx)(Yt,{label:"Description",value:this.state.form.description,onChange:function(t){return e.formValChange(t,"description")},required:!0,multiline:!0,fullWidth:!0}),"Good"===this.state.form.type&&Object(rt.jsx)(Yt,{label:"Condition",type:"textarea",value:this.state.form.condition,onChange:function(t){return e.formValChange(t,"condition")}}),Object(rt.jsx)(Di.a,{children:Object(rt.jsx)(Ai.a,{smOffset:3,sm:9,children:Object(rt.jsx)(Ti.a,{onClick:this.submit,children:"Submit"})})})]})})]})}}]),n}(Ae.Component),Ri=Object(Le.b)((function(e){return{needsById:e.needs.byId,clientId:e.needs.clientId,needsCategories:e.ontology.needs.categories,languagesCategories:e.ontology.languages.categories,categoriesLoaded:e.ontology.needs.loaded}}))(Object(Ge.i)(Li)),Mi=n(773);var Bi=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;return Object(Ba.a)(this,n),(a=t.call(this,e)).state={form:{type:"",category:"",status:"",description:"",date:"",start_time:"",end_time:"",reminder_type:"",reminder_frequency:""}},a.formValChange=a.formValChange.bind(Object(Ni.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"handleSubmit",value:function(){var e,t,n=this,a=Object.assign({},this.state.form);a.service_id=this.props.serviceId,a.client_id=this.props.clientId,this.props.dispatch((e=a,t=function(e,t,a){n.props.onHide()},function(n){var a=u.serverHost+"/appointments/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){t(u.ACTION_SUCCESS,null,e)})).catch((function(e){t(u.ACTION_ERROR,e)}))}))}},{key:"formValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id,n=Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},t,e.target.value));this.setState({form:n})}},{key:"render",value:function(){return Object(rt.jsxs)(Mi.a,{show:this.props.show,onHide:this.props.onHide,bsSize:"large","aria-labelledby":"contained-modal-title-sm",children:[Object(rt.jsx)(Mi.a.Header,{closeButton:!0,children:Object(rt.jsxs)(Mi.a.Title,{id:"contained-modal-title-sm",children:["Appointment",this.state.form.service_id,this.state.form.provider_id]})}),Object(rt.jsx)(Mi.a.Body,{children:Object(rt.jsxs)(Pi.a,{horizontal:!0,children:[Object(rt.jsx)(rn,{id:"type",label:"Type",options:["External","Internal"],componentClass:"select",value:this.state.form.type,onChange:this.formValChange,required:!0}),Object(rt.jsx)(Yt,{id:"category",label:"Category",type:"text",value:this.state.form.category,onChange:this.formValChange}),Object(rt.jsx)(Yt,{id:"status",label:"Status",type:"text",value:this.state.form.status,onChange:this.formValChange}),Object(rt.jsx)(Yt,{id:"description",label:"Description",type:"text",value:this.state.form.description,onChange:this.formValChange}),Object(rt.jsx)(Yt,{id:"date",label:"Date",type:"date",value:this.state.form.date,onChange:this.formValChange,required:!0}),Object(rt.jsx)(Yt,{id:"start_time",label:"Start Time",type:"time",value:this.state.form.start_time,onChange:this.formValChange,required:!0}),Object(rt.jsx)(Yt,{id:"end_time",label:"End Time",type:"time",value:this.state.form.end_time,onChange:this.formValChange,required:!0}),Object(rt.jsx)(rn,{id:"reminder_type",label:"Reminder Type",options:["Email","Text","Phone"],componentClass:"select",value:this.state.form.reminder_type,onChange:this.formValChange}),Object(rt.jsx)(Yt,{id:"reminder_frequency",label:"Reminder Frequecy",type:"text",value:this.state.form.reminder_frequency,onChange:this.formValChange})]})}),Object(rt.jsx)(Mi.a.Footer,{children:Object(rt.jsx)(Ti.a,{onClick:this.handleSubmit,children:"Submit"})})]})}}]),n}(Ae.Component),Gi=Object(Le.b)()(Bi),zi=n(787),Vi=n(822),qi=n(385),Hi=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;return Object(Ba.a)(this,n),(a=t.call(this,e)).state={activeKey:null,matchStatusForm:{},noteForm:{},modalShow:!1,appointmentServiceId:null},a.handleSelect=a.handleSelect.bind(Object(Ni.a)(a)),a.matchStatusChange=a.matchStatusChange.bind(Object(Ni.a)(a)),a.textAreaChange=a.textAreaChange.bind(Object(Ni.a)(a)),a.submitMatchStatus=a.submitMatchStatus.bind(Object(Ni.a)(a)),a.submitNote=a.submitNote.bind(Object(Ni.a)(a)),a.handleModalHide=a.handleModalHide.bind(Object(Ni.a)(a)),a.handleModalShow=a.handleModalShow.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"submitMatchStatus",value:function(e){this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/matches/"+e+"/";return d()(a,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(e){return n(x(e.client_id,e.id,e))}))}}(e,this.state.matchStatusForm[e]))}},{key:"submitNote",value:function(e){var t,n=Object(s.a)(Object(s.a)({},this.state.noteForm[e]),{},{object_id:e,model:"match"});this.props.dispatch((t=n,function(e){var n=u.serverHost+"/notes/";return d()(n,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return e(x(t.client_id,t.id,t))}))}))}},{key:"matchStatusChange",value:function(e,t){var n=Object(s.a)(Object(s.a)({},this.state.matchStatusForm),{},Object(c.a)({},t,{status:e.target.value}));this.setState({matchStatusForm:n})}},{key:"textAreaChange",value:function(e,t){var n=Object(s.a)(Object(s.a)({},this.state.noteForm),{},Object(c.a)({},t,{text:e.target.value}));this.setState({noteForm:n})}},{key:"handleModalHide",value:function(){this.setState({modalshow:!1})}},{key:"handleModalShow",value:function(e){this.setState({modalshow:!0,appointmentServiceId:e})}},{key:"handleSelect",value:function(e){this.setState({activeKey:e})}},{key:"render",value:function(){var e=this,t=this.props.matches;return Object(rt.jsxs)("div",{children:[Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsx)("h3",{children:"Matched Services"})}),Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsx)(zi.a,{id:"accordion",activeKey:this.state.activeKey,children:k.a.map(t,(function(t,n){return Object(rt.jsxs)(Vi.a,{eventKey:t.id,bsStyle:"info",children:[Object(rt.jsxs)(Vi.a.Header,{onClick:function(){return e.handleSelect(n)},children:[Object(rt.jsx)(Ai.a,{sm:11,children:Object(rt.jsxs)(Vi.a.Title,{toggle:!0,children:[n+1,". ",t.service.name," "]})}),Object(rt.jsx)(Pi.a.Label,{bsStyle:"primary",children:t.status})]}),Object(rt.jsx)(zi.a.Collapse,{eventKey:n,children:Object(rt.jsxs)(Vi.a.Body,{collapsible:!0,children:[Object(rt.jsxs)(Ai.a,{sm:8,children:[Object(rt.jsxs)(Di.a,{controlId:"match_status",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Status"}),Object(rt.jsx)(Ai.a,{sm:6,children:Object(rt.jsxs)(qi.a,{componentClass:"select",placeholder:"select",defaultValue:t.status,onChange:function(n){return e.matchStatusChange(n,t.id)},children:[Object(rt.jsx)("option",{value:"select",children:"--- Not Set ---"}),u.matchStatusOptions.map((function(e){return Object(rt.jsx)("option",{value:e,children:e},e)}))]})}),Object(rt.jsx)(Ai.a,{sm:3,children:Object(rt.jsx)(Ti.a,{disabled:e.state.activeKey!==t.id||!e.state.matchStatusForm[t.id],onClick:function(n){return e.submitMatchStatus(t.id)},children:"Update Status"})})]}),Object(rt.jsxs)(Pi.a.Label,{className:"note-form",children:[Object(rt.jsxs)(Di.a,{controlId:"notes",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Notes"}),Object(rt.jsxs)(Ai.a,{sm:9,children:[k.a.map(t.notes,(function(e,t){return Object(rt.jsx)("div",{children:e},t)})),Object(rt.jsx)(qi.a,{componentClass:"textarea",onChange:function(n){return e.textAreaChange(n,t.id)}})]})]}),Object(rt.jsx)(Di.a,{children:Object(rt.jsx)(Ai.a,{smOffset:3,sm:9,children:Object(rt.jsx)(Ti.a,{disabled:e.state.activeKey!==t.id||!e.state.noteForm[t.id],onClick:function(n){return e.submitNote(t.id)},children:"Add Note"})})})]}),Object(rt.jsx)(Ti.a,{bsStyle:"default",onClick:function(n){return e.handleModalShow(t.service.id)},children:"Add appointment"})]}),Object(rt.jsxs)(Ai.a,{sm:4,children:[Object(rt.jsx)(Re.b,{to:"/service/".concat(t.service.id),target:"_blank",children:Object(rt.jsx)("h5",{children:"View Service Detail"})}),Object(rt.jsx)(Re.b,{to:"/provider/".concat(t.service.provider.id),target:"_blank",children:Object(rt.jsx)("h5",{children:"View Provider Detail"})})]})]})})]},t.id)}))})}),Object(rt.jsx)(Gi,{clientId:this.props.clientId,serviceId:this.state.appointmentServiceId,show:this.state.modalshow,onHide:this.handleModalHide})]})}}]),n}(Ae.Component),Wi=Object(Le.b)()(Object(Ge.i)(Hi)),Ui=n(270),Ji=n(760),Ki=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;return Object(Ba.a)(this,n),(a=t.call(this,e)).submit=a.submit.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"submit",value:function(e,t){var n={service_id:t};this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/needs/"+e+"/matches/";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){n(x(t.client_id,e,t))}))}}(e,n))}},{key:"render",value:function(){var e=this,t=this.props.service,n=this.props.needId,a=this.props.label;return Object(rt.jsx)(Ji.a,{className:"recommended-service",children:Object(rt.jsxs)(Ei.a,{children:[Object(rt.jsxs)(Ai.a,{sm:8,children:[Object(rt.jsxs)("h5",{children:[a,"."]}),Object(rt.jsx)(Re.b,{to:"/service/".concat(t.id),children:Object(rt.jsx)("h5",{children:t.name})}),Object(rt.jsx)(Ue.a,{children:t.category})," ",Object(rt.jsxs)(Ue.a,{children:[Math.round(100*t.distance)/100," km"]}),Object(rt.jsx)("p",{children:t.desc}),Object(rt.jsx)("p",{children:Ir(t.location)})]}),Object(rt.jsxs)(Ai.a,{sm:4,children:[Object(rt.jsx)("h5",{children:"Provider"}),Object(rt.jsx)(Ue.a,{color:"primary",children:t.provider.type}),Object(rt.jsx)(Re.b,{to:"/provider/".concat(t.provider.id),children:"Individual"===t.provider.type?Object(rt.jsx)("p",{children:"".concat(t.provider.profile.first_name," ").concat(t.provider.profile.last_name)}):Object(rt.jsx)("p",{children:t.provider.company})})]}),Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsx)(Ti.a,{bsStyle:"default",onClick:function(a){return e.submit(n,t.id)},children:"Select"})})]})})}}]),n}(Ae.Component),Yi=Object(Le.b)()(Object(Ge.i)(Ki)),Xi=Object(Ui.withGoogleMap)((function(e){return Object(rt.jsx)(Ui.GoogleMap,{zoom:10,center:e.latlng,children:k.a.map(e.services,(function(e,t){return Object(rt.jsx)(Ui.Marker,{label:(t+1).toString(),position:{lat:parseFloat(e.location.lat),lng:parseFloat(e.location.lng)}},e.id)}))})}));function Zi(e){var t=e.need,n=e.services,a=e.latlng;return Object(rt.jsxs)(Ei.a,{children:[Object(rt.jsx)(Ai.a,{sm:8,children:k.a.map(n,(function(e,n){return Object(rt.jsx)(Yi,{needId:t.id,label:n+1,service:e},e.id)}))}),Object(rt.jsx)(Ai.a,{sm:4,children:Object(rt.jsx)("div",{style:{width:"100%",height:"400px"},children:Object(rt.jsx)(Xi,{containerElement:Object(rt.jsx)("div",{style:{height:"100%"}}),mapElement:Object(rt.jsx)("div",{style:{height:"100%"}}),latlng:a,services:n})})})]})}var Qi=n(761),$i=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;return Object(Ba.a)(this,n),(a=t.call(this,e)).state={queryTerm:"",location:e.location.street_address},a.handleFormValChange=a.handleFormValChange.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"handleFormValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id;this.setState(Object(c.a)({},t,e.target.value))}},{key:"render",value:function(){var e=this;return Object(rt.jsx)(Pi.a,{horizontal:!0,children:Object(rt.jsx)(Di.a,{children:Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsxs)(Qi.a,{children:[this.props.enableQueryTerm&&Object(rt.jsx)(Qi.a.Addon,{children:"Find"}),this.props.enableQueryTerm&&Object(rt.jsx)(qi.a,{type:"text",value:this.state.queryTerm,onChange:function(t){return e.handleFormValChange(t,"queryTerm")},placeholder:"Dental service, language class..."}),Object(rt.jsx)(Qi.a.Addon,{children:"Near"}),Object(rt.jsx)(qi.a,{type:"text",value:this.state.location,onChange:function(t){return e.handleFormValChange(t,"location")}}),Object(rt.jsx)(Qi.a.Button,{children:this.props.enableQueryTerm?Object(rt.jsx)(Ti.a,{onClick:function(t){return e.props.search(e.state.queryTerm,e.state.location)},children:"Search"}):Object(rt.jsx)(Ti.a,{onClick:function(t){return e.props.search(e.state.location,e.props.needId)},children:"Search"})})]})})})})}}]),n}(Ae.Component),eo=n(762),to=n(763),no=n(775),ao=n(764),ro=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;Object(Ba.a)(this,n),a=t.call(this,e);var r=e.needsById[e.match.params.need_id];return a.state={searchResult:[],location:e.client.address?{lat:parseFloat(e.client.address.lat),lng:parseFloat(e.client.address.lng)}:u.torontoCoordinates,recommendedServices:r&&r.recommended_services||[]},a.handleSearchService=a.handleSearchService.bind(Object(Ni.a)(a)),a.handleSearchRecommendedServices=a.handleSearchRecommendedServices.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.need_id;this.props.dispatch(C(t,(function(t){e.setState({recommendedServices:t.recommended_services})})))}},{key:"handleSearchService",value:function(e,t){var n=this,a=u.serverHost+"/services/search?query_term="+e+"&location="+t;fetch(a,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(e){n.setState({searchResult:e.data,location:e.location})}))}},{key:"handleSearchRecommendedServices",value:function(e,t){var n=this,a=u.serverHost+"/needs/"+t+"/recommended_services?location="+e;fetch(a,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(e){n.setState({recommendedServices:e.data,location:e.location})}))}},{key:"render",value:function(){var e=this.props,t=e.match.params.need_id,n=e.needsById[t],a=e.client;function r(e){return e.is_deleted?Object(rt.jsx)("h4",{children:Object(rt.jsx)("div",{style:{color:"rgb(213,87,79)"},children:"Deleted"})}):null}function i(e){return e.is_urgent?Object(rt.jsx)("h4",{children:Object(rt.jsx)("div",{style:{color:"rgb(213,87,79)"},children:"Urgent"})}):null}return Object(rt.jsx)(eo.a,{className:"content",children:n&&n.loaded&&Object(rt.jsxs)(Ei.a,{children:[Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsx)("h3",{children:"Need"})}),Object(rt.jsxs)(Ai.a,{sm:12,children:[Object(rt.jsx)(r,{is_deleted:n.is_deleted}),Object(rt.jsx)(i,{is_urgent:n.is_urgent}),Object(rt.jsx)(to.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object(rt.jsxs)("tbody",{children:[Object(rt.jsx)(qr,{title:"Type",value:n.type}),Object(rt.jsx)(qr,{title:"Category",value:n.category}),Object(rt.jsx)(qr,{title:"Needed By",value:n.needed_by}),Object(rt.jsx)(qr,{title:"Description",value:n.description}),Object(rt.jsx)(qr,{title:"Condition",value:n.condition}),Object(rt.jsx)(qr,{title:"Status",value:n.status}),Object(rt.jsx)(qr,{title:"Languages",value:(n.languages||[]).join(", ")})]})})]}),n.matches.length>0&&Object(rt.jsx)(Wi,{clientId:a.id,matches:n.matches}),Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsxs)(no.a,{defaultActiveKey:1,id:"serviceList",children:[Object(rt.jsxs)(ao.a,{eventKey:1,title:"RecommendedServices",children:[Object(rt.jsx)($i,{search:this.handleSearchRecommendedServices,location:a.address,needId:n.id}),n.recommended_services&&n.recommended_services.length>0&&Object(rt.jsx)(Zi,{need:n,services:this.state.recommendedServices,latlng:this.state.location})]}),Object(rt.jsxs)(ao.a,{eventKey:2,title:"Search for Services",children:[Object(rt.jsx)($i,{search:this.handleSearchService,location:a.address,enableQueryTerm:!0}),this.state.searchResult&&this.state.searchResult.length>0&&Object(rt.jsx)(Zi,{need:n,services:this.state.searchResult,latlng:this.state.location})]})]})})]})})}}]),n}(Ae.Component),io=Object(Le.b)((function(e){return{needsById:e.needs.byId,client:e.clients.byId[e.needs.clientId]}}))(ro),oo=["component","isLoggedin"],co=Object(Le.b)((function(e){return{isLoggedin:e.auth.isLoggedin}}))((function(e){var t=e.component,n=e.isLoggedin,a=Object(Ke.a)(e,oo);return Object(rt.jsx)(Ge.b,Object(s.a)(Object(s.a)({},a),{},{render:function(e){return!0===n?Object(rt.jsx)(t,Object(s.a)({},e)):Object(rt.jsx)(Ge.a,{to:"/login-pane"})}}))})),so=["component","isLoggedin","isAdmin"],lo=Object(Le.b)((function(e){return{isAdmin:e.auth.currentUser&&e.auth.currentUser.is_admin,isLoggedin:e.auth.isLoggedin}}))((function(e){var t=e.component,n=e.isLoggedin,a=e.isAdmin,r=Object(Ke.a)(e,so);return Object(rt.jsx)(Ge.b,Object(s.a)(Object(s.a)({},r),{},{render:function(e){return!0===n&&!0===a?Object(rt.jsx)(t,Object(s.a)({},e)):Object(rt.jsx)(Ge.a,{to:"/login-pane"})}}))})),uo=new nr("providers",[]),bo=new ar("provider");function jo(){return ho.apply(this,arguments)}function ho(){return(ho=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(uo.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e){return mo.apply(this,arguments)}function mo(){return(mo=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(uo.value.find((function(e){return e.id===Number(t)})))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(e){return Oo.apply(this,arguments)}function Oo(){return(Oo=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return n=Object(s.a)({id:bo.nextCnt,reviews:[]},t),uo.value=[].concat(Object(o.a)(uo.value),[n]),e.abrupt("return",{success:!0,providerId:n.id});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return vo.apply(this,arguments)}function vo(){return(vo=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return Object.assign(uo.value.find((function(e){return e.id===Number(t)})),n),uo.save(),e.abrupt("return",{success:!0,providerId:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e){return yo.apply(this,arguments)}function yo(){return(yo=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:return n=uo.value.findIndex((function(e){return e.id===t.id})),uo.value.splice(n,1),uo.save(),e.abrupt("return",{success:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _o="providers",Co=function(e){var t=e.profile;return"Individual"===e.type?t&&t.first_name+" "+t.last_name:e.company},So=[{label:"Name",body:function(e){var t=e.id,n=e.profile,a=e.company,r=e.type;return Object(rt.jsx)(Sa,{color:!0,to:"/".concat(_o,"/").concat(t),children:Co({company:a,type:r,profile:n})})}},{label:"Type",body:function(e){return e.type}},{label:"Email",body:function(e){return e.profile.email}},{label:"Phone Number",body:function(e){var t=e.profile;return t.primary_phone_number?Nr(t.primary_phone_number):"Not Provided"}},{name:"main_address",label:"Address",body:function(e){var t=e.main_address;return t?Ir(t):"Not Provided"}}];var ko=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(){return Object(Ba.a)(this,n),t.apply(this,arguments)}return Object(Ga.a)(n,[{key:"render",value:function(){return Object(rt.jsx)(Ei.a,{className:"content",children:Object(rt.jsxs)(Ai.a,{sm:12,children:[Object(rt.jsx)("h2",{children:"Would you like to add a service for this provider?"}),Object(rt.jsx)("hr",{}),Object(rt.jsx)(Re.b,{to:"/service/new",children:Object(rt.jsx)(Ti.a,{bsStyle:"default",children:"Yes"})})," ",Object(rt.jsx)(Re.b,{to:"/providers",children:Object(rt.jsx)(Ti.a,{bsStyle:"default",children:"No"})})]})})}}]),n}(Ae.Component);function wo(e,t){var n=function(e){var t={};if(Tn(e.main_address.postal_code,t,"main_address"),e.other_addresses.length>0){t.other_addresses={};var n,a=0,r=Object(xn.a)(e.other_addresses);try{for(r.s();!(n=r.n()).done;){Tn(n.value.postal_code,t.other_addresses,a),a++}}catch(i){r.e(i)}finally{r.f()}0===Object.entries(t.other_addresses).length&&delete t.other_addresses}e.primary_contact.profile&&(t.primary_contact||(t.primary_contact={}),Pn(e.primary_contact.profile,t.primary_contact),0===Object.entries(t.primary_contact).length&&delete t.primary_contact);e.secondary_contact.profile&&(t.secondary_contact||(t.secondary_contact={}),Pn(e.secondary_contact.profile,t.secondary_contact),0===Object.entries(t.secondary_contact).length&&delete t.secondary_contact);0!==e.reference1_email.length&&En(e.reference1_email,"reference1_email",t);0!==e.reference2_email.length&&En(e.reference2_email,"reference2_email",t);0!==e.reference1_phone.length&&An(e.reference1_phone,"reference1_phone",t);0!==e.reference2_phone.length&&An(e.reference2_phone,"reference2_phone",t);"Individual"===e.type&&(0!==e.profile.email.length&&En(e.profile.email,"email",t),0!==e.profile.primary_phone_number.length&&An(e.profile.primary_phone_number,"primary_phone_number",t),0!==e.profile.alt_phone_number.length&&An(e.profile.alt_phone_number,"alt_phone_number",t));return t}(e),a=function(e,t){var n,a={},r=Object(xn.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,c=Object.entries(i);o<c.length;o++){var s=Object(Be.a)(c[o],2),l=s[0];s[1]&&("availability"===l&&wn(e.operation_hours)?a.availability="Please fill in at least one availability time slot!":"main_address"===l?(a[l]={},In(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]):"other_addresses"===l?0===e[l].length?a[l]="Please create at least one other address form!":(a[l]={},Nn(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]):"primary_contact"===l?Io(l,e,a,"primary_contact"):"secondary_contact"===l?Io(l,e,a,"secondary_contact"):No(l,e,a))}}catch(d){r.e(d)}finally{r.f()}return a}(e,t);return Sn(a,n)}function Io(e,t,n,a){for(var r=0,i=Object.keys(t[a].profile);r<i.length;r++){var o=i[r];kn(t[a].profile[o])&&(n[a]||(n[a]={}),n[a][o]="This field is required")}}function No(e,t,n){"Individual"===t.type?(e in t.profile&&kn(t.profile[e])||e in t&&!["email","primary_phone_number","alt_phone_number"].includes(e)&&kn(t[e]))&&(n[e]="This field is required"):"Organization"===t.type&&e in t&&!["email","primary_phone_number","alt_phone_number","profile"].includes(e)&&kn(t[e])&&(n[e]="This field is required")}var To=new nr("provider-fields",{organization:{steps_order:["s1"],form_structure:{s1:{company:{type:"field",required:!1},status:{type:"field",required:!1}}}},volunteer:{steps_order:["s1"],form_structure:{s1:{first_name:{type:"field",required:!1},last_name:{type:"field",required:!1}}}},goods_donor:{steps_order:[],form_structure:{}},professional_service_provider:{steps_order:[],form_structure:{}}});function Eo(){return Ao.apply(this,arguments)}function Ao(){return(Ao=Object(N.a)(I.a.mark((function e(){var t,n,a=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],e.next=3,pr(200);case 3:if(n=JSON.parse(JSON.stringify(To.value)),!t){e.next=8;break}return Object.keys(n).forEach((function(e){var t=n[e].form_structure;Object.keys(t).forEach((function(e){var n=t[e];t&&Object.keys(n).forEach((function(e){"field"===n[e].type&&(n[e]=n[e].required,console.log(e))}))}))})),console.log("fetchProviderFields",n),e.abrupt("return",n);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Po(e){return Do.apply(this,arguments)}function Do(){return(Do=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(200);case 2:To.value=t;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fo=n(765),Lo=Object($e.a)((function(e){return{weekday:{minWidth:110,alignSelf:"start",top:28,position:"relative"},day:{display:"flex",alignItems:"center"},times:{display:"flex",minWidth:350,alignItems:"start",flexDirection:"column"},date:{display:"flex",width:170},time:{display:"flex",alignItems:"center",flexDirection:"row"},select:{minWidth:120,margin:10},button:{position:"relative",top:8},arrow:{paddingTop:24,marginLeft:12,marginRight:12}}}));function Ro(e){var t=e.operationHours,n=e.operationDates,a=e.errMsg,r=Lo(),i=Object(Ae.useState)(!0),o=Object(Be.a)(i,2),c=o[0],l=o[1],d=function(){return l(!c)},u=function(e,n,a){"add"===a?t[n].push(Object(s.a)({},cn)):t[n].pop(),d()},b=function(e,n,a,r){var i=e.target.value;t[n][a][r]=null==i?"":i,d()};return Object(rt.jsxs)(Bt,{label:"Availability",children:[n.map((function(e,t){var a=e.start_date,i=e.end_date;return null==a&&(a=n[t].start_date=Object(qt.a)(new Date,Kt)),Object(rt.jsxs)(Ha.a,{container:!0,direction:"row",alignItems:"center",children:[Object(rt.jsx)(Yt,{label:"Start Date",className:r.date,type:"date",value:a,onChange:function(e){return n[t].start_date=e.target.value}}),Object(rt.jsx)(Fo.a,{className:r.arrow}),Object(rt.jsx)(Yt,{label:"End Date",className:r.date,type:"date",value:i,onChange:function(e){return n[t].end_date=e.target.value},helperText:"leave empty if not sure"}),t===n.length-1&&Object(rt.jsx)(yt.a,{className:r.button,onClick:function(e){n.push({start_date:null,end_date:null}),d()},size:"large",children:Object(rt.jsx)(tt.a,{})}),0!==t&&t===n.length-1&&Object(rt.jsx)(yt.a,{className:r.button,onClick:function(e){n.splice(t,1),d()},size:"large",children:Object(rt.jsx)(wt.a,{})})]},t)})),Object.entries(t).map((function(e){var t=Object(Be.a)(e,2),n=t[0],a=t[1];return Object(rt.jsxs)("div",{className:r.day,children:[Object(rt.jsx)(Ue.a,{color:"textSecondary",variant:"subtitle1",className:r.weekday,children:n}),Object(rt.jsx)("div",{className:r.times,children:a.map((function(e,t){return Object(rt.jsxs)("div",{className:r.time,children:[Object(rt.jsx)(rn,{className:r.select,value:e.start_time,label:"Start",options:fn,onChange:function(e){return b(e,n,t,"start_time")}}),Object(rt.jsx)(rn,{className:r.select,value:e.end_time,label:"End",options:fn,onChange:function(e){return b(e,n,t,"end_time")}}),t===a.length-1&&Object(rt.jsx)(yt.a,{className:r.button,onClick:function(e){return u(0,n,"add")},size:"large",children:Object(rt.jsx)(tt.a,{})}),0!==t&&t===a.length-1&&Object(rt.jsx)(yt.a,{className:r.button,onClick:function(e){return u(0,n,"remove")},size:"large",children:Object(rt.jsx)(wt.a,{})})]},t)}))})]},n)})),a&&Object(rt.jsx)(Ft.a,{severity:"error",children:a})]})}var Mo=Object($e.a)((function(e){return{content:{width:"80%",margin:"auto",paddingBottom:10},addressPaper:{position:"relative",paddingLeft:28,paddingBottom:20,width:380}}}));function Bo(){var e=Mo(),t=Object(Ge.g)(),n=Object(Le.c)(),a=Object(Ge.h)(),r=a.id,i=a.formType,o=r?"edit":"new",c=Object(Ae.useState)({loading:!0,category:i,languageOptions:[],eligibilities:[],stepNames:[],steps:[],provider:null,dispatchErrorMsg:[],fieldErrorMsg:{}}),l=Object(Be.a)(c,2),d=l[0],u=l[1],b=Object(Ae.useMemo)((function(){return"new"===o?"organization"===i?"Organization":"Individual":d.provider?"organization"===d.provider.category?"Organization":"Individual":void 0}),[d.provider,i,o]),j=Object(Ae.useMemo)((function(){return function(e,t,n){var a={type:e,category:Gn[t]||"",languages:[],company:"",email:"",primary_phone_number:"",alt_phone_number:"",primary_contact:{profile:Object(s.a)({},Wn)},secondary_contact:{profile:Object(s.a)({},Wn)},main_address:Object(s.a)({},Un),other_addresses:[],operation_hours:Object(s.a)({},sn),operation_dates:[{start_date:null,end_date:null}],profile:Object(s.a)({},Hn),referrer:"",own_car:!1,skills:"",visibility:!1,status:"",notes:"",commitment:"",start_date:"",reference1_name:"",reference1_phone:"",reference1_email:"",reference2_name:"",reference2_phone:"",reference2_email:"",responses:[]};if(n){var r=Object(s.a)({},Sn(a,n));return r.operation_hours=Object(s.a)(Object(s.a)({},sn),On(n.operation_hours)),console.log(r),r}return a}(b,d.category,d.provider)}),[b,d.category,d.provider]),h=Object(Ae.useCallback)((function(e){console.log(e);var t=[];t.push(n(B("languages")).then((function(e){return u((function(t){return Object(s.a)(Object(s.a)({},t),{},{languageOptions:e})}))}))),t.push(Eo().then((function(t){console.log("provider form",t),null==t[e]||0===t[e].steps_order.length||0===Object.values(t[e].form_structure).length?u((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0,errorMessage:["No fields are available."]})})):u((function(n){return Object(s.a)(Object(s.a)({},n),{},{stepNames:t[e].steps_order,steps:Object.values(t[e].form_structure)})}))}))),Promise.all(t).then((function(){return u((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[n]);Object(Ae.useEffect)((function(){r?po(r).then((function(e){console.log(e);var t="Organization"===e.type?"organization":Vn[e.category];u((function(n){return Object(s.a)(Object(s.a)({},n),{},{provider:e,category:t})})),h(t)})):h(i)}),[n,r,i,h]);var p=function(){var e=Object(N.a)(I.a.mark((function e(){var n,a,i,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(s.a)({},j)).operation_hours=gn(n.operation_hours),""===n.status&&(n.status=void 0),console.log(n),a=wo(j,d.steps),0===Object.keys(a).length){e.next=8;break}return u((function(e){return Object(s.a)(Object(s.a)({},e),{},{fieldErrorMsg:a})})),e.abrupt("return");case 8:if("edit"!==o){e.next=15;break}return e.next=11,go(r,n);case 11:(i=e.sent).success?t.push("/providers/".concat(i.providerId)):u((function(e){return Object(s.a)(Object(s.a)({},e),{},{errorMessage:[i.error]})})),e.next=19;break;case 15:return e.next=17,fo(n);case 17:(c=e.sent).success?t.push("/providers/".concat(c.providerId)):u((function(e){return Object(s.a)(Object(s.a)({},e),{},{errorMessage:[c.error]})}));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(Ae.useCallback)((function(e){return function(t){var n=t.target.value,a=e.split(".");if(1===a.length)j[e]=n;else{for(var r=j,i=0;i<a.length-1;i++)r=r[a[i]];r[a[a.length-1]]=n||""}}}),[j]);return d.loading?Object(rt.jsx)(wa,{message:"Loading..."}):(console.log(d.category),Object(rt.jsx)(Tt.a,{children:Object(rt.jsx)(Rt,{getStepContent:function(t){var n=d.steps[t];return n?Object(rt.jsx)("div",{className:e.content,children:Object.entries(n).map((function(e){var t,n=Object(Be.a)(e,2),a=n[0],r=n[1],i=d.fieldErrorMsg[a];if("languages"===a&&(t=d.languageOptions),"main_address"===a)return Object(rt.jsx)(Bt,{label:"Main address",children:Object(rt.jsx)(on,{address:j.main_address,required:r,errMsg:i})},a);if("other_addresses"===a)return Object(rt.jsx)(Xn,{otherLocations:j.other_addresses,required:r,errMsg:i},a);if("primary_contact"===a||"secondary_contact"===a)return Object(rt.jsx)(Bt,{label:qn[a].label,children:Object.keys(Wn).map((function(e){return Object(rt.jsx)(Oi,{label:qn[e].label,type:qn[e].type,component:qn[e].component,value:j[a].profile[e],onChange:m(a+"."+e),error:null!=i&&null!=i[e],helperText:i?i[e]:null},e)}))},a);if("availability"===a)return Object(rt.jsx)(Ro,{operationHours:j.operation_hours,operationDates:j.operation_dates,errMsg:i},a);if("notes"===a)return Object(rt.jsx)(Yt,{label:qn[a].label,value:j[a],onChange:m(a),required:r,multiline:!0,variant:"outlined",fullWidth:!0,error:null!=i,helperText:i},a);var o=Object.keys(Hn).includes(a);if(o&&"Individual"!==b)return null;var c=qn[a];return null==c&&(c={}),Object(rt.jsx)(Oi,{label:qn[a].label,type:qn[a].type,component:qn[a].component,value:o?j.profile[a]:j[a],onChange:m(o?"profile."+a:a),required:r,options:qn[a].options||t,error:null!=i,helperText:i},a)}))}):null},handleFinish:p,stepNames:d.stepNames,error:d.dispatchErrorMsg,title:("new"===o?"Create ":"Edit ")+Gn[d.category]})}))}var Go=n(790),zo=n(766);function Vo(e){var t,n,a=e.step,r=e.provider,i=e.infoFields,o=e.providerFields,c=k.a.map(i,(function(e,a){if("field"===e.type)switch(t=o[a].label,a){case"first_name":case"middle_name":case"last_name":case"preferred_name":case"gender":case"birth_date":case"email":n="Individual"===r.type?r.profile[a]:r[a];break;case"primary_phone_number":case"alt_phone_number":n="Individual"===r.type?r.profile[a]?Nr(r.profile[a]):"None provided":r[a]?Nr(r[a]):"None provided";break;case"main_address":n=r[a]?Ir(r[a]):"None provided";break;case"other_addresses":n=r[a]?k.a.map(r[a],(function(e,t){return Object(rt.jsx)("p",{children:Ir(e)},t)})):null;break;case"languages":n=(r[a]||[]).join(", ");break;case"availability":var i=On(r.operation_hours);n=Object(rt.jsx)(vn,{operationHourObj:i});break;case"primary_contact":case"secondary_contact":n=r[a]?k.a.map(k.a.keys(Wn),(function(e){if(r[a].profile[e])return Object(rt.jsx)("li",{children:"".concat(o[e].label,": ").concat(r[a].profile[e])},e)})):null;break;default:n=r[a]}else if("question"===e.type){t=a;var c=k.a.find(r.responses,(function(t){return t.question_id===e.id.toString()}));n=c?c.text:null}return Object(rt.jsx)(qr,{title:t,value:n},a)})),s=Hr();return Object(rt.jsx)(Qn.a,{className:s.table,component:at.a,children:Object(rt.jsxs)($n.a,{"aria-label":"Profile table",children:[Object(rt.jsx)(oa.a,{children:Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{className:s.title,children:a}),Object(rt.jsx)(na.a,{className:s.title2})]})}),Object(rt.jsx)(ea.a,{children:c})]})})}var qo=n(390),Ho=n.n(qo),Wo=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;Object(Ba.a)(this,n),(a=t.call(this,e)).handleStarSelection=a.handleStarSelection.bind(Object(Ni.a)(a)),a.handleCommentChange=a.handleCommentChange.bind(Object(Ni.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ni.a)(a)),a.handleTextRating=a.handleTextRating.bind(Object(Ni.a)(a));var r=a.props.match.params.id;return a.state={id:r,rating:0,comment:""},a}return Object(Ga.a)(n,[{key:"handleStarSelection",value:function(e,t){this.setState({rating:e})}},{key:"handleTextRating",value:function(e){this.setState({rating:e.target.value})}},{key:"handleCommentChange",value:function(e){this.setState({comment:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.match.params.id;this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/provider/"+e+"/rate";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()}))}}(t,this.state)),this.props.history.push("/provider/"+t)}},{key:"render",value:function(){return Object(rt.jsxs)("div",{className:"content",children:[Object(rt.jsxs)(Ai.a,{sm:9,children:[Object(rt.jsx)("h3",{children:" Rate Provider "}),Object(rt.jsx)("hr",{})]}),Object(rt.jsxs)(Di.a,{controlId:"rating",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:5,children:"Rate this provider (0-5)"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",placeholder:"A number between 0 and 5",value:this.state.rating,onChange:this.handleTextRating})})]}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(Ho.a,{name:"rating",starCount:5,value:this.state.rating,onStarClick:this.handleStarSelection})}),Object(rt.jsxs)(Ai.a,{sm:9,children:[Object(rt.jsx)("hr",{}),Object(rt.jsxs)(Di.a,{controlId:"comments",children:[Object(rt.jsx)(Fi.a,{children:"Comments"}),Object(rt.jsx)(qi.a,{componentClass:"textarea",placeholder:"Comments about this provider...",onChange:this.handleCommentChange})]})]}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(Ti.a,{type:"submit",onClick:this.handleSubmit,children:" Submit "})})]})}}]),n}(Ae.Component),Uo=Object(Le.b)((function(e){return{providersById:e.providers.byId||{},providerLoaded:e.providers.indexLoaded}}))(Wo),Jo="services",Ko=function(e){var t=e.provider;return"Organization"===t.type?t.company:t.profile?"".concat(t.profile.first_name," ").concat(t.profile.last_name):"Not provided"},Yo=[{label:"Name",body:function(e){var t=e.id,n=e.name;return Object(rt.jsx)(Sa,{color:!0,to:"/".concat(Jo,"/").concat(t),children:n})}},{label:"Provider",body:function(e){var t=e.provider;return Object(rt.jsx)(Sa,{color:!0,to:"/providers/".concat(t.id),children:Ko({provider:t})})}},{label:"Description",body:function(e){return e.desc}},{label:"Category",body:function(e){return e.category}}];function Xo(e,t){return t instanceof Array?"".concat(e,": ").concat(t.join(", ")):"".concat(e,": ").concat(t)}var Zo=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(){return Object(Ba.a)(this,n),t.apply(this,arguments)}return Object(Ga.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(te(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.servicesById[t];return Object(rt.jsxs)("div",{className:"content client",children:[Object(rt.jsx)("h3",{children:"Service Profile"}),Object(rt.jsx)(Re.b,{to:"/services/".concat(n.id,"/edit"),children:Object(rt.jsx)(Ti.a,{bsStyle:"primary",children:"Edit"})})," ",Object(rt.jsx)(Ti.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object(rt.jsx)(Ar.a,{fontSize:"small"})}),n&&n.servicesLoaded&&Object(rt.jsx)(to.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object(rt.jsxs)("tbody",{children:[Object(rt.jsx)(qr,{title:"Name",value:n.name}),Object(rt.jsx)(qr,{title:"Type",value:n.type}),Object(rt.jsx)(qr,{title:"Description",value:n.desc}),Object(rt.jsx)(qr,{title:"Category",value:n.category}),Object(rt.jsx)(qr,{title:"Eligibility",value:n.eligibility}),Object(rt.jsx)(qr,{title:"Available from",value:n.available_from}),Object(rt.jsx)(qr,{title:"Available until",value:n.available_to}),Object(rt.jsx)(qr,{title:"Languages",value:(n.languages||[]).join(", ")}),Object(rt.jsx)(qr,{title:"Max Capacity",value:n.max_capacity}),Object(rt.jsx)(qr,{title:"Current capacity",value:n.current_capacity}),Object(rt.jsx)(qr,{title:"Frequency",value:n.frequency}),Object(rt.jsx)(qr,{title:"Billable",value:n.billable}),Object(rt.jsx)(qr,{title:"Price",value:n.price}),Object(rt.jsx)(qr,{title:"Method of delivery",value:n.method_of_delivery}),Object(rt.jsx)(qr,{title:"Method of registration",value:n.method_of_registration}),Object(rt.jsx)(qr,{title:"Registration",value:n.registration}),Object(rt.jsx)(qr,{title:"Contact Person Email",value:n.email}),Object(rt.jsx)(qr,{title:"Contact Person Phone",value:n.primary_phone_number}),Object(rt.jsx)(qr,{title:"Secondary Phone",value:n.alt_phone_number}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Location"})}),Object(rt.jsx)("td",{children:Ir(n.location)})]}),k.a.keys(k.a.omit(n.eligibility_conditions,["lower_age_limit","upper_age_limit"]))>0&&Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Eligibility Conditions"})}),Object(rt.jsxs)("td",{children:[k.a.map(k.a.omit(n.eligibility_conditions,["lower_age_limit","upper_age_limit"]),(function(e,t){return Object(rt.jsx)("li",{children:Xo(t,e)},t)})),n.eligibility_conditions.lower_age_limit&&Object(rt.jsx)("li",{children:Xo("Age greater than",n.eligibility_conditions.lower_age_limit)}),n.eligibility_conditions.upper_age_limit&&Object(rt.jsx)("li",{children:Xo("Age less than",n.eligibility_conditions.upper_age_limit)})]})]}),Object(rt.jsx)(qr,{title:"Public?",value:n.is_public?"Yes":"No"}),Object(rt.jsx)(qr,{title:"Share with",value:(n.share_with||[]).join(", ")}),Object(rt.jsx)(qr,{title:"Notes",value:n.notes}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Provider"})}),Object(rt.jsx)("td",{children:Object(rt.jsx)(Re.b,{to:"/provider/".concat(n.provider.id),children:"Organization"===n.provider.type?n.provider.company:"".concat(n.provider.profile.first_name," ").concat(n.provider.profile.last_name)})})]})]})})]})}}]),n}(Ae.Component),Qo=Object(Le.b)((function(e){return{servicesById:e.services.byId,serviceLoaded:e.services.indexLoaded}}))(Zo),$o=n(823);var ec=["<",">","<=",">=","=="],tc=["in"],nc=1,ac=2,rc=3,ic=5,oc={operators:[].concat(ec,tc),type:rc},cc=["alt_phone_number","apt_number","city","landing_date","last_name","middle_name","phone_numbers","postal_code","pr_number","preferred_name","primary_phone_number","service_set","street_address"],sc={age:{operators:ec,type:nc},arrival_date:{operators:ec,type:ac},birth_date:{operators:ec,type:ac},completed_education_level:{operators:tc,type:ic,options:u.educationLevelOptions,multipleSelect:!0},country_of_last_residence:{operators:tc,type:ic,options:u.countryOptions,multipleSelect:!0},country_of_origin:{operators:tc,type:ic,options:u.countryOptions,multipleSelect:!0},current_education_level:{operators:tc,type:ic,options:u.educationLevelOptions,multipleSelect:!0},first_language:{operators:tc,type:ic,options:[],multipleSelect:!0},gender:{operators:tc,type:ic,options:u.genderOptions,multipleSelect:!0},has_children:{operators:tc,type:ic,options:["True","False"],multipleSelect:!0},income_source:{operators:tc,type:ic,options:u.incomeSourceOptions,multipleSelect:!0},landing_date:{operators:ec,type:ac},lat:{operators:ec,type:nc},lng:{operators:ec,type:nc},marital_status:{operators:tc,type:ic,options:u.maritalStatusOptions,multipleSelect:!0},ngo_conditions:{operators:tc,type:ic,options:["example"],multipleSelect:!0},num_of_children:{operators:ec,type:nc},num_of_dependants:{operators:ec,type:nc},other_languages:{operators:tc,type:ic,options:u.languageOptions,multipleSelect:!0},province:{operators:tc,type:ic,options:u.provinceOptions,multipleSelect:!0},status_in_canada:{operators:tc,type:ic,options:u.statusInCanadaOptions,multipleSelect:!0}};function lc(e){var t,n,a=e.value,r=e.handleChange,i=e.fields,o=e.onDelete,c=Object(Ae.useState)(Object(s.a)({operator:a[1]||""},sc[a[0]]||oc)),l=Object(Be.a)(c,2),d=l[0],u=l[1];return t=d.type===rc?Object(rt.jsx)(gt.a,{style:{marginLeft:20},label:"Right Operand",defaultValue:(n=a[2],n.slice(1,-1).replace(/\\([\\"])/g,"$1")),onChange:function(e){return r({rightOperand:_n(e.target.value)})}}):d.type===nc?Object(rt.jsx)(gt.a,{style:{marginLeft:20},label:"Right Operand",defaultValue:"number"===typeof+a[2]?a[2]:0,onChange:function(e){return r({rightOperand:e.target.value})}}):d.type===ic&&d.multipleSelect?Object(rt.jsx)(mi,{label:"Right Operand",options:d.options,value:Cn(a[2])||[],onChange:function(e){return r({rightOperand:(t=e.target.value,JSON.stringify(t))});var t},noDefaultStyle:!0}):d.type!==ic||d.multipleSelect?"Not implemented":Object(rt.jsx)(rn,{style:{marginRight:20},noEmpty:!0,noDefaultStyle:!0,options:d.options,value:a[2],label:"Right Operand",onChange:function(e){return r({rightOperand:e.target.value})}}),Object(rt.jsx)("div",{style:{padding:20},children:Object(rt.jsxs)(Ha.a,{container:!0,direction:"row",spacing:1,children:[Object(rt.jsx)(rn,{style:{marginRight:20},noEmpty:!0,noDefaultStyle:!0,options:i,value:a[0],label:"Field",onChange:function(e){var t=e.target.value,n={leftOperand:t,rightOperand:""},i=sc[t]||oc,o=i.operators;o.includes(a[1])?u((function(e){return Object(s.a)(Object(s.a)({},e),i)})):(n.operator=o[0],u((function(e){return Object(s.a)(Object(s.a)({},e),{},{operator:o[0]},i)}))),r(n),a[2]=""}}),Object(rt.jsx)(rn,{style:{width:60},noEmpty:!0,noDefaultStyle:!0,options:d.operators,label:"Operator",value:d.operator,controlled:!0,onChange:function(e){var t=e.target.value;u((function(e){return Object(s.a)(Object(s.a)({},e),{},{operator:t})})),r({operator:t})}}),t,Object(rt.jsx)(yt.a,{onClick:o,size:"large",children:Object(rt.jsx)(wt.a,{})})]})})}function dc(e){var t=e.value,n=e.formValChange,a=Object(Ae.useState)(t),r=Object(Be.a)(a,2),i=r[0],c=r[1],s=Object(Ae.useState)({}),l=Object(Be.a)(s,2),d=l[0],u=l[1];Object(Ae.useEffect)((function(){ir("/formula/fields/").then((function(e){var t=e.fields,n=(e.dynamic_fields,e.functions,{});console.log(t),t.forEach((function(e){cc.includes(e)||(n[e]=e.replace(/(^\w|_\w)/g,(function(e){return e.toUpperCase().replace("_"," ")})).replace("In","in").replace("Of","of"))})),u(n)}))}),[]);for(var b=function(e){return function(t){var n=t.leftOperand,a=t.operator,r=t.rightOperand;e[0]=n||e[0],e[1]=void 0===a?e[1]:a,e[2]=r||e[2]}},j=function(e){return function(){c((function(t){return t[e].push(["age","==",""]),n({target:{value:t}}),Object(o.a)(t)}))}},h=function(e,t){return function(){c((function(a){return a[e].splice(t,1),n({target:{value:a}}),Object(o.a)(a)}))}},p=function(e){return function(){c((function(t){return t.splice(e,1),n({target:{value:t}}),Object(o.a)(t)}))}},m=[],f=0;f<i.length;f++){var O=i[f],g=[];m.push(g);for(var v=0;v<O.length;v++){var x=Object(Be.a)(O[v],3);x[0],x[1],x[2];g.push(Object(rt.jsx)(Ha.a,{item:!0,xs:12,children:Object(rt.jsx)(lc,{value:O[v],handleChange:b(O[v]),fields:d,onDelete:h(f,v)})},v))}}return Object(rt.jsxs)("div",{children:[m.map((function(e,t){return Object(rt.jsx)(at.a,{variant:"outlined",children:Object(rt.jsxs)(Ha.a,{container:!0,children:[e,Object(rt.jsxs)(Ha.a,{item:!0,xs:12,children:[Object(rt.jsx)(Je.a,{onClick:p(t),style:{margin:12,float:"right"},variant:"contained",startIcon:Object(rt.jsx)(wt.a,{}),children:"Remove"}),Object(rt.jsx)(Je.a,{style:{margin:12,float:"right"},variant:"contained",startIcon:Object(rt.jsx)(tt.a,{}),onClick:j(t),children:"And"})]})]})},t)})),Object(rt.jsx)(Je.a,{style:{margin:12},variant:"contained",onClick:function(){c((function(e){return e.push([]),n({target:{value:e}}),Object(o.a)(e)}))},startIcon:Object(rt.jsx)(tt.a,{}),children:"OR"})]})}var uc=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;Object(Ba.a)(this,n),(a=t.call(this,e)).formValChange=function(e,t){return function(n){var r=n.target.value,i=e.split("."),o=a.state.form;if(1===i.length)o[e]=r;else{for(var c=a.state.form,l=0;l<i.length-1;l++)c=c[i[l]];c[i[i.length-1]]=r||""}t&&a.setState((function(e){return{form:Object(s.a)({},e.form)}}))}},a.submit=function(){console.log(a.state.form);var e,t,n,r=Object.assign({},a.state.form);r.eligibility_conditions.age=[r.eligibility_conditions.lower_age_limit||null,r.eligibility_conditions.upper_age_limit||null],delete r.eligibility_conditions.lower_age_limit,delete r.eligibility_conditions.upper_age_limit,r.eligibility_criteria=function(e){var t,n=[],a=Object(xn.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=[];n.push({condition_clauses:i});var o,c=Object(xn.a)(r);try{var s=function(){var e=Object(Be.a)(o.value,3),t=e[0],n=e[1],a=e[2],r=i.findIndex((function(e){return e.field_name===t}));-1!==r?i[r].clauses.push({left_operand:t,right_operand:a,operator:n}):i.push({field_name:t,clauses:[{left_operand:t,right_operand:a,operator:n}]})};for(c.s();!(o=c.n()).done;)s()}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}return n}(r.eligibility_criteria),a.validateForm()&&("edit"===a.state.mode?a.props.dispatch((e=a.state.serviceId,t=r,n=function(e,t,n){e===u.ACTION_SUCCESS&&(a.props.history.push("/services"),a.forceUpdate())},function(a){var r=u.serverHost+"/service/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){a($(e.id,e)),n(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){n(u.ACTION_ERROR,e)}))})):a.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/services/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n($(e.id,e)),t(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){t(u.ACTION_ERROR,e)}))}}(a.state.form,(function(e,t,n){a.props.history.push("/services"),a.forceUpdate()}))))},a.validateForm=function(){var e={},t=!0;if(a.state.form.provider_id||(t=!1,e.provider_id="*Please enter a provider."),a.state.form.type||(t=!1,e.type="*Please enter the type."),a.state.form.name||(t=!1,e.name="*Please enter the name."),a.state.form.category||(t=!1,e.category="*Please enter the category."),a.state.form.primary_phone_number){var n=Bn.phone(a.state.form.primary_phone_number);n&&(e.primary_phone_number="*"+n)}if(a.state.form.alt_phone_number){var r=Bn.phone(a.state.form.alt_phone_number);r&&(e.alt_phone_number="*"+r)}if(a.state.form.email){var i=Bn.email(a.state.form.email);i&&(e.email="*"+i)}if(a.state.form.location.postal_code){var o=Bn.postalCode(a.state.form.location.postal_code);o&&(e.postal_code="*"+o)}return a.setState({errors:e}),t};var r={};return a.props.match.params.id&&(r=a.props.servicesById[a.props.match.params.id]),a.state={errors:{},serviceId:r.id,mode:r.id?"edit":"new",form:{name:r.name||"",type:r.type||"",desc:r.desc||"",category:r.category||"",available_from:r.available_from||"",available_to:r.available_to||"",languages:r.languages||[],max_capacity:r.max_capacity||"",current_capacity:r.current_capacity||0,frequency:r.frequency||"",billable:r.billable||"No",price:r.price||"",method_of_delivery:r.method_of_delivery||"",method_of_registration:r.method_of_registration||"",registration:r.registration||"",email:r.email||"",primary_phone_number:r.primary_phone_number||"",alt_phone_number:r.alt_phone_number||"",location:Object.assign({id:"",street_address:"",apt_number:"",city:"",province:"",postal_code:""},r.location),location_same_as_provider:r.location_same_as_provider||!1,share_with:r.share_with||[],notes:r.notes||"",eligibility_conditions:Object.assign({upper_age_limit:"",lower_age_limit:"",immigration_status:[],current_education_level:[],completed_education_level:[]},r.eligibility_conditions),provider_id:r.provider&&r.provider.id||"",is_public:r.is_public||!1,eligibility_criteria:yn(r.eligibility_criteria)||[]}},a.props.dispatch(B("services")),a.props.dispatch(B("languages")),a.props.dispatch(ue()),a}return Object(Ga.a)(n,[{key:"render",value:function(){var e,t,n,a=this,r=this.props.classes,i=this.props,o="edit"===this.state.mode?"Edit Service Profile":"New Service";n=this.state.form.provider_id,isNaN(n)||parseInt(Number(n))!==n||isNaN(parseInt(n,10))||(t=(e=this.props.providersById&&this.props.providersById.providersById[this.state.form.provider_id]).other_addresses?e.other_addresses.concat([e.main_address]):[]);var c={},l={};return t&&t.forEach((function(e,t){var n=Ir(e);c[n]=n,l[n]=e})),Object(rt.jsxs)(Tt.a,{className:r.root,children:[Object(rt.jsx)(Ue.a,{variant:"h5",className:r.title,children:o}),this.state.showAlert&&this.state.error_messages.map((function(e,t){return Object(rt.jsx)(Ft.a,{severity:"error",children:e},t)})),Object(rt.jsx)(Ja.a,{className:r.divider}),Object(rt.jsx)(Ue.a,{variant:"h5",children:"Service Information"}),Object(rt.jsx)(rn,{label:"Provider",options:k.a.reduce(i.providers,(function(e,t){return"Individual"===t.type?e[t.id]=t.profile&&t.profile.first_name+" "+t.profile.last_name:e[t.id]=t.company,e}),{}),value:this.state.form.provider_id,onChange:this.formValChange("provider_id"),required:!0}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.provider_id}),Object(rt.jsx)(Sa,{to:"/providers",color:!0,children:Object(rt.jsx)(Ue.a,{children:"Add new provider"})}),Object(rt.jsx)(rn,{label:"Type",options:u.serviceTypeOptions,value:this.state.form.type,onChange:this.formValChange("type"),required:!0}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.type}),Object(rt.jsx)(Yt,{label:"Name",type:"text",value:this.state.form.name,onChange:this.formValChange("name"),required:!0}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.name}),Object(rt.jsx)(Yt,{label:"Description",type:"text",value:this.state.form.desc,onChange:this.formValChange("desc")}),Object(rt.jsx)(rn,{label:"Category",options:i.servicesCategories,value:this.state.form.category,onChange:this.formValChange("category"),required:!0}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.category}),Object(rt.jsx)(Yt,{label:"Available from",type:"date",value:this.state.form.available_from,onChange:this.formValChange("available_from")}),Object(rt.jsx)(Yt,{label:"Available until",type:"date",value:this.state.form.available_to,onChange:this.formValChange("available_to")}),Object(rt.jsx)(mi,{label:"Languages",options:i.languagesCategories,value:this.state.form.languages,onChange:this.formValChange("languages")}),Object(rt.jsx)(Yt,{label:"Max Capacity",type:"number",value:this.state.form.max_capacity,min:"0",onChange:this.formValChange("max_capacity")}),parseInt(this.state.form.max_capacity,10)>0&&Object(rt.jsx)(Yt,{label:"Current Capacity",type:"number",value:this.state.form.current_capacity,min:"0",onChange:this.formValChange("current_capacity")}),Object(rt.jsx)(rn,{label:"Frequency",value:this.state.form.frequency,onChange:this.formValChange("frequency"),options:["Weekly","Biweekly","Monthly","Non-repeated"]}),Object(rt.jsx)(di,{label:"Billable",value:this.state.form.billable,onChange:this.formValChange("billable",!0),options:{Yes:"Yes",No:"No"}}),"Yes"===this.state.form.billable&&Object(rt.jsx)(Yt,{label:"Price",type:"text",value:this.state.form.price,onChange:this.formValChange("price")}),Object(rt.jsx)(rn,{label:"Method of delivery",value:this.state.form.method_of_delivery,onChange:this.formValChange("method_of_delivery"),options:{Online:"Online","One on one (In person)":"One on one (In person)",Group:"Group (In person)"}}),Object(rt.jsx)(rn,{label:"Method of registration",value:this.state.form.method_of_registration,onChange:this.formValChange("method_of_registration"),options:["Self registration","Registration by social worker","No registration"]}),Object(rt.jsx)(rn,{label:"Registration",placeholder:"select",value:this.state.form.registration,onChange:this.formValChange("registration"),options:["Online","In person","By phone"]}),Object(rt.jsx)(Ja.a,{className:r.divider}),Object(rt.jsx)(Ue.a,{variant:"h5",children:"Eligibility"}),Object(rt.jsx)(dc,{value:this.state.form.eligibility_criteria,formValChange:this.formValChange("eligibility_criteria")}),Object(rt.jsx)(mi,{label:"Immigration Status",options:u.statusInCanadaOptions,value:this.state.form.eligibility_conditions.immigration_status,onChange:this.formValChange("eligibility_conditions.immigration_status")}),Object(rt.jsx)(Yt,{label:"Age greater than",type:"text",value:this.state.form.eligibility_conditions.lower_age_limit,onChange:this.formValChange("eligibility_conditions.lower_age_limit")}),Object(rt.jsx)(Yt,{id:"upper_age_limit",label:"Age less than",type:"text",value:this.state.form.eligibility_conditions.upper_age_limit,onChange:this.formValChange("eligibility_conditions.upper_age_limit")}),Object(rt.jsx)(mi,{label:"Current Education",options:u.educationLevelOptions,value:this.state.form.eligibility_conditions.current_education_level,onChange:this.formValChange("eligibility_conditions.current_education_level")}),Object(rt.jsx)(mi,{label:"Completed Education Level",options:u.educationLevelOptions,value:this.state.form.eligibility_conditions.completed_education_level,onChange:this.formValChange("eligibility_conditions.completed_education_level")}),Object(rt.jsx)(Ja.a,{className:r.divider}),Object(rt.jsx)(Ue.a,{variant:"h5",children:"Contact Information"}),Object(rt.jsx)(Yt,{label:"Contact Person Email",type:"email",value:this.state.form.email,onChange:this.formValChange("email")}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.email}),Object(rt.jsx)(Yt,{label:"Telephone",type:"tel",value:this.state.form.primary_phone_number,onChange:this.formValChange("primary_phone_number")}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.primary_phone_number}),Object(rt.jsx)(Yt,{label:"Alternative Phone Number",type:"tel",value:this.state.form.alt_phone_number,onChange:this.formValChange("alt_phone_number")}),Object(rt.jsx)("div",{className:r.errorText,children:this.state.errors.alt_phone_number}),Object(rt.jsx)(di,{label:"Location",options:{"Same as provider":!0,Other:!1},onChange:this.formValChange("location_same_as_provider",!0),value:this.state.form.location_same_as_provider}),this.state.form.location_same_as_provider&&this.state.form.provider_id&&Object(rt.jsxs)("div",{children:[Object(rt.jsx)(di,{label:"Select the location this service is provided at",value:this.state.form.location,options:c,onChange:function(e){a.state.form.location=Object(s.a)({},c[e.target.value]),a.formValChange("location")}}),!k.a.includes(k.a.map(t,"id"),this.state.form.location.id)&&Object(rt.jsx)(Ue.a,{style:{marginTop:10},children:"The current location of service is at\n                          ".concat(Ir(this.state.form.location),", which has\n                          been removed from provider locations. Please select a\n                          new location.")})]}),!this.state.form.location_same_as_provider&&Object(rt.jsx)(on,{address:this.state.form.location,errMsg:this.state.errors},"address"),Object(rt.jsx)(di,{label:"Public?",options:{Yes:!0,No:!1},onChange:this.formValChange("is_public"),value:this.state.form.is_public}),Object(rt.jsx)(Ja.a,{className:r.divider}),Object(rt.jsx)(Ue.a,{variant:"h5",children:"Other Information"}),Object(rt.jsx)(mi,{label:"Share with",options:u.serviceSharedWithOptions,value:this.state.form.share_with,onChange:this.formValChange("share_with")}),Object(rt.jsx)(Yt,{label:"Notes",type:"text",value:this.state.form.notes,onChange:this.formValChange("notes"),multiline:!0,variant:"outlined",fullWidth:!0}),Object(rt.jsx)(Je.a,{onClick:this.submit,variant:"outlined",color:"primary",style:{margin:"12px 0"},children:"Submit"})]})}}]),n}(Ae.Component);var bc=Object(Le.b)((function(e){return{servicesById:e.services.byId,servicesCategories:e.ontology.services.categories,categoriesLoaded:e.ontology.services.loaded,languagesCategories:e.ontology.languages.categories,languagesLoaded:e.ontology.languages.loaded,providers:e.providers.filteredProviders||[],providersById:e.providers.byId,providersLoaded:e.providers.loaded,providerIndex:e.providers.index}}))(Object(Ge.i)(Object($o.a)({root:{width:"80%"},divider:{margin:"20px 0"},errorText:{color:"#e41919"},title:{fontWeight:600}})(uc))),jc="goods",hc=function(e){var t=e.provider;return"Organization"===t.type?t.company:t.profile?"".concat(t.profile.first_name," ").concat(t.profile.last_name):"Not provided"},pc=[{name:"id",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"name",label:"Name",options:{sort:!0,customBodyRender:function(e,t){var n=t.rowData;return Object(rt.jsx)(Sa,{color:!0,to:"/".concat(jc,"/").concat(n[0]),children:e})}}},{name:"provider",label:"Provider",options:{sort:!0,customBodyRender:function(e){return Object(rt.jsx)(Sa,{color:!0,to:"/".concat(jc,"/").concat(e.id),children:hc({provider:e})})}}},{name:"desc",label:"Description"},{name:"category",label:"Category"}];var mc=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(){return Object(Ba.a)(this,n),t.apply(this,arguments)}return Object(Ga.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(_e(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.goodsById[t];return Object(rt.jsxs)("div",{className:"content client",children:[Object(rt.jsx)("h3",{children:"Good Profile"}),Object(rt.jsx)(Re.b,{to:"/goods/".concat(n.id,"/edit"),children:Object(rt.jsx)(Ti.a,{bsStyle:"primary",children:"Edit"})})," ",Object(rt.jsx)(Ti.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object(rt.jsx)(Ar.a,{fontSize:"small"})}),n&&n.goodsLoaded&&Object(rt.jsx)(to.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object(rt.jsxs)("tbody",{children:[Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Name"})}),Object(rt.jsx)("td",{children:n.name})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Description"})}),Object(rt.jsx)("td",{children:n.desc})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Category"})}),Object(rt.jsx)("td",{children:n.category})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Available from"})}),Object(rt.jsx)("td",{children:n.available_from})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Available until"})}),Object(rt.jsx)("td",{children:n.available_to})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Transportation"})}),Object(rt.jsx)("td",{children:n.transportation})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Condition"})}),Object(rt.jsx)("td",{children:n.condition})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Material"})}),Object(rt.jsx)("td",{children:n.material})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Quantity"})}),Object(rt.jsx)("td",{children:n.quantity})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Length"})}),Object(rt.jsx)("td",{children:n.length})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Width"})}),Object(rt.jsx)("td",{children:n.width})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Height"})}),Object(rt.jsx)("td",{children:n.height})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Diameter"})}),Object(rt.jsx)("td",{children:n.diameter})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Contact Person Email"})}),Object(rt.jsx)("td",{children:n.email})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Contact Person Phone"})}),Object(rt.jsx)("td",{children:n.primary_phone_number})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Secondary Phone"})}),Object(rt.jsx)("td",{children:n.alt_phone_number})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Location"})}),Object(rt.jsx)("td",{children:Ir(n.location)})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Share with"})}),Object(rt.jsx)("td",{children:(n.share_with||[]).join(", ")})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Notes"})}),Object(rt.jsx)("td",{children:n.notes})]}),Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Provider"})}),Object(rt.jsx)("td",{children:Object(rt.jsx)(Re.b,{to:"/provider/".concat(n.provider.id),children:"".concat(n.provider.profile.first_name," ").concat(n.provider.profile.last_name)})})]})]})})]})}}]),n}(Ae.Component),fc=Object(Le.b)((function(e){return{goodsById:e.goods.byId,goodLoaded:e.goods.indexLoaded}}))(mc),Oc=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;Object(Ba.a)(this,n);var r={};return(a=t.call(this,e)).props.match.params.id&&(r=a.props.goodsById[a.props.match.params.id]),a.state={goodId:r.id,mode:r.id?"edit":"new",is_provider_location:!1,form:{name:r.name||"",desc:r.desc||"",category:r.category||"",available_from:r.available_from||"",available_to:r.available_to||"",transportation:r.transportation||"",condition:r.condition||"",material:r.material||"",quantity:r.quantity||"",length:r.length||"",width:r.width||"",height:r.height||"",diameter:r.diameter||"",email:r.email||"",primary_phone_number:r.primary_phone_number||"",alt_phone_number:r.alt_phone_number||"",location:Object.assign({street_address:"",apt_number:"",city:"",province:"",postal_code:""},r.location),share_with:r.share_with||"",notes:r.notes||"",provider_id:r.provider&&r.provider.id||""}},a.formValChange=a.formValChange.bind(Object(Ni.a)(a)),a.locationChange=a.locationChange.bind(Object(Ni.a)(a)),a.submit=a.submit.bind(Object(Ni.a)(a)),a.indicatorChange=a.indicatorChange.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(B("goods")),this.props.dispatch(ue())}},{key:"formValChange",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id;t="location"===n?Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},n,JSON.parse(e.target.value))):Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},n,e.target.value)),this.setState({form:t})}},{key:"locationChange",value:function(e){var t=k.a.clone(this.state.form);t.location[e.target.id]=e.target.value,this.setState({form:t})}},{key:"indicatorChange",value:function(e,t){this.setState(Object(c.a)({},t,JSON.parse(e.target.value)))}},{key:"submit",value:function(){var e,t,n,a=this,r=Object.assign({},this.state.form);"edit"===this.state.mode?this.props.dispatch((e=this.state.goodId,t=r,n=function(e,t,n){if(e===ge)a.props.history.push("/goods/");else{var r=k.a.reduce(JSON.parse(t.message),(function(e,t,n){var a=(n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" ");return k.a.each(t,(function(t){e.push(t.replace("This field",a))})),e}),[]);a.setState({showAlert:!0,error_messages:r})}},function(a){var r=u.serverHost+"/good/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){a(xe(e.id,e)),n(ge,null,e.id)})).catch((function(e){n(Oe,e)}))})):this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/goods/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n(xe(e.id,e)),t(ge,null,e.id)})).catch((function(e){t(Oe,e)}))}}(this.state.form,(function(e,t,n){if(e===ge)a.props.history.push("/goods/");else{var r=k.a.reduce(JSON.parse(t.message),(function(e,t,n){var a=(n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" ");return k.a.each(t,(function(t){e.push(t.replace("This field",a))})),e}),[]);a.setState({showAlert:!0,error_messages:r})}})))}},{key:"render",value:function(){var e,t=this,n=this.props,a="edit"===this.state.mode?"Edit Good Profile":"New Good";return this.state.form.provider_id&&(e=this.props.providersById&&this.props.providersById[this.state.form.provider_id]),Object(rt.jsxs)(Ei.a,{className:"content",children:[Object(rt.jsxs)(Ai.a,{sm:12,children:[Object(rt.jsx)("h3",{children:a}),Object(rt.jsx)("hr",{})]}),Object(rt.jsx)(Ai.a,{sm:12,children:Object(rt.jsxs)(Pi.a,{horizontal:!0,children:[this.state.showAlert&&Object(rt.jsx)(Ai.a,{sm:12,className:"flash-error",children:k.a.map(this.state.error_messages,(function(e,t){return Object(rt.jsx)("li",{children:e},t)}))}),Object(rt.jsx)(rn,{id:"provider_id",label:"Provider",options:k.a.reduce(n.providers,(function(e,t){return"Individual"===t.type?e[t.id]=t.profile.first_name+" "+t.profile.last_name:e[t.id]=t.company,e}),{}),componentClass:"select",value:this.state.form.provider_id,onChange:this.formValChange,required:!0}),Object(rt.jsx)(Di.a,{children:Object(rt.jsx)(Ai.a,{smOffset:3,sm:9,children:Object(rt.jsx)(Re.b,{to:"/providers/new",children:Object(rt.jsx)(Ti.a,{children:"Add new provider"})})})}),Object(rt.jsx)(Yt,{id:"name",label:"Name",type:"text",value:this.state.form.name,onChange:this.formValChange,required:!0}),Object(rt.jsxs)(Di.a,{controlId:"desc",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Description"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.desc,onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"category",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Category *"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsxs)(qi.a,{componentClass:"select",placeholder:"select",value:this.state.form.category,onChange:this.formValChange,required:!0,children:[Object(rt.jsx)("option",{value:"select",children:"-- Not Set --"}),Object(rt.jsx)("option",{value:"Furniture",children:"Furniture"}),Object(rt.jsx)("option",{value:"Food",children:"Food"}),Object(rt.jsx)("option",{value:"Clothing",children:"Clothing"}),Object(rt.jsx)("option",{value:"Utensils",children:"Utensils"}),Object(rt.jsx)("option",{value:"Books",children:"Books"})]})})]}),Object(rt.jsxs)(Di.a,{controlId:"transportation",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Transportation"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.transportation,onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"available_from",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Available from"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"date",value:this.state.form.available_from,onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"available_to",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Available until"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"date",value:this.state.form.available_to,onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"condition",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Condition"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.condition,onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"material",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Material"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.material,onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"quantity",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Quantity"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.quantity,placeholder:"",onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"length",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Length"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.length,placeholder:"",onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"width",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Width"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.width,placeholder:"",onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"height",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Height"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.height,placeholder:"",onChange:this.formValChange})})]}),Object(rt.jsxs)(Di.a,{controlId:"diameter",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Diameter"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.diameter,placeholder:"",onChange:this.formValChange})})]}),Object(rt.jsx)(Yt,{id:"email",label:"Contact Person Email",type:"email",value:this.state.form.email,onChange:this.formValChange,required:!0}),Object(rt.jsx)(Yt,{id:"primary_phone_number",label:"Telephone",type:"tel",value:this.state.form.primary_phone_number,onChange:this.formValChange,required:!0}),Object(rt.jsx)(Yt,{id:"alt_phone_number",label:"Alternative Phone Number",type:"tel",value:this.state.form.alt_phone_number,onChange:this.formValChange,required:!0}),Object(rt.jsx)(di,{id:"is_provider_location",label:"Location",options:{"Same as provider":!0,Other:!1},onChange:this.indicatorChange,defaultChecked:this.state.is_provider_location,required:!0}),this.state.is_provider_location&&this.state.form.provider_id&&Object(rt.jsx)("div",{children:Object(rt.jsxs)(Di.a,{controlId:"location",children:[Object(rt.jsx)(Ai.a,{className:"required",componentClass:Fi.a,sm:3,children:"Select the location this good is provided at"}),Object(rt.jsxs)(Ai.a,{sm:9,children:[Object(rt.jsx)(Pi.a.Check,{name:"provider_address",value:JSON.stringify(e.main_address),onChange:function(e){return t.formValChange(e,"location")},type:"radio",children:Ir(e.main_address)})," ",e.other_addresses.map((function(e,n){return Object(rt.jsx)(Pi.a.Check,{name:"provider_address",value:JSON.stringify(e),onChange:function(e){return t.formValChange(e,"location")},type:"radio",children:Ir(e)},n)}))]})]})}),!this.state.is_provider_location&&Object(rt.jsxs)("div",{children:[Object(rt.jsx)(Yt,{id:"street_address",label:"Street Address",type:"text",value:this.state.form.location.street_address,onChange:this.locationChange}),Object(rt.jsx)(Yt,{id:"apt_number",label:"Apt. #",type:"text",value:this.state.form.location.apt_number,onChange:this.locationChange}),Object(rt.jsx)(Yt,{id:"city",label:"City",type:"text",value:this.state.form.location.city,onChange:this.locationChange}),Object(rt.jsx)(rn,{id:"province",label:"Province",options:u.provinceOptions,componentClass:"select",value:this.state.form.location.province,onChange:this.locationChange}),Object(rt.jsx)(Yt,{id:"postal_code",label:"Postal Code",type:"text",value:this.state.form.location.postal_code,onChange:this.locationChange})]}),Object(rt.jsxs)(Di.a,{controlId:"share_with",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Share with"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsxs)(qi.a,{componentClass:"select",placeholder:"select",value:this.state.form.share_with,onChange:this.formValChange,children:[Object(rt.jsx)("option",{value:"select",children:"-- Not Set --"}),Object(rt.jsx)("option",{value:"Private",children:"Private"}),Object(rt.jsx)("option",{value:"Public",children:"Public"}),Object(rt.jsx)("option",{value:"Boost Child & Youth Advocacy Centre",children:"Boost Child & Youth Advocacy Centre"}),Object(rt.jsx)("option",{value:"Children's Aid Society of Toronto",children:"Children's Aid Society of Toronto"}),Object(rt.jsx)("option",{value:"Abrigo Centre",children:"Abrigo Centre"}),Object(rt.jsx)("option",{value:"Barbra Schlifer Commemorative Clinic",children:"Barbra Schlifer Commemorative Clinic"}),Object(rt.jsx)("option",{value:"Durham Rape Crisis Centre",children:"Durham Rape Crisis Centre"}),Object(rt.jsx)("option",{value:"Durham Children's Aid Society",children:"Durham Children's Aid Society"}),Object(rt.jsx)("option",{value:"Alexandra Park Community Centre",children:"Alexandra Park Community Centre"}),Object(rt.jsx)("option",{value:"Applegrove Community Complex",children:"Applegrove Community Complex"}),Object(rt.jsx)("option",{value:"Albion Neighbourhood Goods",children:"Albion Neighbourhood Goods"}),Object(rt.jsx)("option",{value:"Applegrove Community Complex",children:"Applegrove Community Complex"}),Object(rt.jsx)("option",{value:"Kababayan Multicultural Centre",children:"Kababayan Multicultural Centre"}),Object(rt.jsx)("option",{value:"Central Toronto Youth Goods",children:"Central Toronto Youth Goods"}),Object(rt.jsx)("option",{value:"Covenant House Toronto",children:"Covenant House Toronto"}),Object(rt.jsx)("option",{value:"Durham Youth Housing and Support Goods",children:"Durham Youth Housing and Support Goods"}),Object(rt.jsx)("option",{value:"Eva's Initiatives",children:"Eva's Initiatives"}),Object(rt.jsx)("option",{value:"Horizons for Youth",children:"Horizons for Youth"}),Object(rt.jsx)("option",{value:"AIDS Committee of Durham Region",children:"AIDS Committee of Durham Region"}),Object(rt.jsx)("option",{value:"Arab Community Centre of Toronto",children:"Arab Community Centre of Toronto"}),Object(rt.jsx)("option",{value:"Pediatric Oncology Group of Ontario",children:"Pediatric Oncology Group of Ontario"}),Object(rt.jsx)("option",{value:"Adventist community goods",children:"Adventist community goods"}),Object(rt.jsx)("option",{value:"Aurora Food Pantry",children:"Aurora Food Pantry"}),Object(rt.jsx)("option",{value:"Bluffs Food Bank",children:"Bluffs Food Bank"}),Object(rt.jsx)("option",{value:"Brock Community Food Bank",children:"Brock Community Food Bank"}),Object(rt.jsx)("option",{value:"Markham Food Bank",children:"Markham Food Bank"}),Object(rt.jsx)("option",{value:"Parkdale Community Food Bank",children:"Parkdale Community Food Bank"})]})})]}),Object(rt.jsxs)(Di.a,{controlId:"notes",children:[Object(rt.jsx)(Ai.a,{componentClass:Fi.a,sm:3,children:"Notes"}),Object(rt.jsx)(Ai.a,{sm:9,children:Object(rt.jsx)(qi.a,{type:"text",value:this.state.form.notes,onChange:this.formValChange})})]}),Object(rt.jsx)(Di.a,{children:Object(rt.jsx)(Ai.a,{smOffset:3,sm:9,children:Object(rt.jsx)(Ti.a,{onClick:this.submit,children:"Submit"})})})]})})]})}}]),n}(Ae.Component),gc=Object(Le.b)((function(e){return{goodsById:e.goods.byId,servicesCategories:e.ontology.services.categories,categoriesLoaded:e.ontology.services.loaded,providers:e.providers.filteredProviders||[],providersById:e.providers.byId,providersLoaded:e.providers.loaded,providerIndex:e.providers.index}}))(Object(Ge.i)(Oc));function vc(){return(vc=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ir("/admin_logs/"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xc=[{label:"Time",body:function(e){var t=e.action_time;return new Date(t).toLocaleString()}},{label:"Username",body:function(e){var t=e.user;return Object(rt.jsx)(Sa,{color:!0,to:"/users/".concat(t.id),children:t.username})}},{label:"Action",body:function(e){var t,n,a=e.action,r=e.object_id,i=e.object_repr;return Object(rt.jsxs)("span",{children:[a+" ",Object(rt.jsx)(Sa,{color:!0,to:(t=i,n=r,"Person"===t?"/clients/".concat(n):"EligibilityCriteria"===t?"/eligibility-criteria/".concat(n):"/".concat(t.toLowerCase(),"s/").concat(n)),children:r})]})}},{label:"Message",body:function(e){var t=e.change_message;if(t)try{if(null!=(t=JSON.parse(t)).reason)return"Reason: "+t.reason}catch(n){}return"N/A"}}];var yc=n(143),_c=(n(644),[1931,1941,1951,1961,1971,1981,1991,2001,2011]),Cc=function(e){Object(za.a)(n,e);var t=Object(Va.a)(n);function n(e){var a;return Object(Ba.a)(this,n),(a=t.call(this,e)).state={total_clients:0,number_of_clients_by_gender:{},number_of_clients_by_birth_year:{},number_of_clients_by_marital_status:{},number_of_clients_by_language:{},number_of_providers_by_status:{},number_of_providers_by_type:{},number_of_individual_providers_by_category:{},selectedCategory:"",selectedAttribute:""},a.handleSelectChange=a.handleSelectChange.bind(Object(Ni.a)(a)),a}return Object(Ga.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=u.serverHost+"/reporting?years="+_c;fetch(t,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(t){e.setState({total_clients:t.total_clients,number_of_clients_by_gender:t.number_of_clients_by_gender,number_of_clients_by_birth_year:t.number_of_clients_by_birth_year,number_of_clients_by_marital_status:t.number_of_clients_by_marital_status,number_of_clients_by_language:t.number_of_clients_by_language,number_of_providers_by_status:t.number_of_providers_by_status,number_of_providers_by_type:t.number_of_providers_by_type,number_of_individual_providers_by_category:t.number_of_individual_providers_by_category})}))}},{key:"handleSelectChange",value:function(e){this.setState(Object(c.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e={labels:k.a.map(_c,(function(e){return"".concat(e,"-").concat(e+9)})),datasets:[{data:Object.values(this.state.number_of_clients_by_birth_year)}]},t={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},n={labels:Object.keys(this.state.number_of_clients_by_language),datasets:[{data:Object.values(this.state.number_of_clients_by_language)}]},a=[{value:this.state.number_of_clients_by_gender.Female,color:"#F7464A",highlight:"#FF5A5E",label:"Female"},{value:this.state.number_of_clients_by_gender.Male,color:"#46BFBD",highlight:"#5AD3D1",label:"Male"},{value:this.state.number_of_clients_by_gender.Other,color:"#FDB45C",highlight:"#FFC870",label:"Other"}],r=[{value:this.state.number_of_providers_by_status.Internal,color:"#46BFBD",highlight:"#5AD3D1",label:"Internal"},{value:this.state.number_of_providers_by_status.External,color:"#FDB45C",highlight:"#FFC870",label:"External"}],i=[{value:this.state.number_of_individual_providers_by_category["Volunteer/Goods Donor"],color:"#46BFBD",highlight:"#5AD3D1",label:"Volunteer/Goods Donor"},{value:this.state.number_of_individual_providers_by_category["Professional Service Provider"],color:"#FDB45C",highlight:"#FFC870",label:"Professional Service Provider"}],o=[{value:this.state.number_of_providers_by_type.Individual,color:"#46BFBD",highlight:"#5AD3D1",label:"Individual"},{value:this.state.number_of_providers_by_type.Organization,color:"#FDB45C",highlight:"#FFC870",label:"Organization"}],c={labels:Object.keys(this.state.number_of_clients_by_marital_status),datasets:[{data:Object.values(this.state.number_of_clients_by_marital_status)}]},s={maintainAspectRatio:!1,responsive:!1,legend:{display:!0,position:"right",labels:{boxWidth:10}}};return Object(rt.jsxs)("div",{className:"content client",children:[Object(rt.jsx)(Ti.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object(rt.jsx)(Ar.a,{fontSize:"small"})}),Object(rt.jsx)(rn,{id:"selectedCategory",componentClass:"select",label:"Get a report on",value:this.state.selectedCategory,options:["Clients","Providers","Services","Matches"],onChange:this.handleSelectChange}),Object(rt.jsx)("br",{}),Object(rt.jsx)("br",{}),Object(rt.jsx)(rn,{id:"selectedAttribute",componentClass:"select",label:"Select attribute",value:this.state.selectedAttribute,options:""!==this.state.selectedCategory?{Clients:["Birth Year","Gender","Language","Marital Status"],Providers:["Individuals by Category","Status","Type"],Services:["Category","Type"],Matches:["Time between selected and matched","Time between selected and fulfilled"]}[this.state.selectedCategory]:[],onChange:this.handleSelectChange}),Object(rt.jsx)("br",{}),Object(rt.jsx)("br",{}),Object(rt.jsx)("br",{}),Object(rt.jsx)("br",{}),"Clients"===this.state.selectedCategory&&"Gender"===this.state.selectedAttribute&&Object(rt.jsx)(Sc,{data:a,options:s,totalClientsCount:this.state.total_clients,ClientsCountByGender:this.state.number_of_clients_by_gender}),"Clients"===this.state.selectedCategory&&"Language"===this.state.selectedAttribute&&Object(rt.jsx)(Nc,{data:n,options:t,totalClientsCount:this.state.total_clients,ClientsCountByLanguage:this.state.number_of_clients_by_language}),"Clients"===this.state.selectedCategory&&"Marital Status"===this.state.selectedAttribute&&Object(rt.jsx)(Tc,{data:c,options:t,totalClientsCount:this.state.total_clients,ClientsCountByMaritalStatus:this.state.number_of_clients_by_marital_status}),"Clients"===this.state.selectedCategory&&"Birth Year"===this.state.selectedAttribute&&Object(rt.jsx)(Ec,{data:e,options:t,ClientsCountByBirthYear:this.state.number_of_clients_by_birth_year}),"Providers"===this.state.selectedCategory&&"Status"===this.state.selectedAttribute&&Object(rt.jsx)(kc,{data:r,options:s,ProvidersCountByStatus:this.state.number_of_providers_by_status}),"Providers"===this.state.selectedCategory&&"Type"===this.state.selectedAttribute&&Object(rt.jsx)(Ic,{data:o,options:s,ProvidersCountByType:this.state.number_of_providers_by_type}),"Providers"===this.state.selectedCategory&&"Individuals by Category"===this.state.selectedAttribute&&Object(rt.jsx)(wc,{data:i,options:s,IndividualProvidersCountByCategory:this.state.number_of_individual_providers_by_category})]})}}]),n}(Ae.Component);function Sc(e){var t=e.data,n=e.options,a=e.totalClientsCount,r=e.ClientsCountByGender;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Breakdown of clients by Gender"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Pie,{data:t,options:n}),Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:["Total = ",a]})}),k.a.map(r,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function kc(e){var t=e.data,n=e.options,a=e.ProvidersCountByStatus;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Breakdown of providers by Status"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function wc(e){var t=e.data,n=e.options,a=e.IndividualProvidersCountByCategory;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Breakdown of individual providers by Category"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Ic(e){var t=e.data,n=e.options,a=e.ProvidersCountByType;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Breakdown of providers by type"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Nc(e){var t=e.data,n=e.options,a=e.ClientsCountByLanguage;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Breakdown of clients by Language"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Tc(e){var t=e.data,n=e.options,a=e.ClientsCountByMaritalStatus;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Breakdown of clients by Marital Status"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Ec(e){var t=e.data,n=e.options,a=e.ClientsCountByBirthYear;return Object(rt.jsx)(to.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(rt.jsx)("tbody",{children:Object(rt.jsxs)("tr",{children:[Object(rt.jsx)("td",{children:Object(rt.jsx)("b",{children:"Distribution of clients by Birth Year"})}),Object(rt.jsxs)("td",{children:[Object(rt.jsx)(yc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(rt.jsx)("div",{children:Object(rt.jsxs)("b",{children:["Clients born between ",t," and ",parseInt(t,10)+9," = ",e]})},t)}))]})]})})})}var Ac=Object($e.a)((function(){return{button:{padding:4}}})),Pc="Add Eligibility Criteria";function Dc(e){var t=e.open,n=e.title,a=e.value,r=e.handleConfirm,i=e.handleClose,o=Object(Ae.useState)({title:""}),c=Object(Be.a)(o,2),s=c[0],l=c[1];return Object(rt.jsxs)(jt.a,{open:t,onClose:i,fullWidth:!0,children:[Object(rt.jsx)(ht.a,{children:n}),Object(rt.jsx)(pt.a,{children:Object(rt.jsx)(Yt,{autoFocus:!0,label:"Eligible criteria",value:a.title,onChange:function(e){return a.title=e.target.value},error:!!s.title,helperText:s.title,fullWidth:!0,InputLabelProps:{}})}),Object(rt.jsxs)(ft.a,{children:[Object(rt.jsx)(Je.a,{onClick:function(){(function(){var e={};return""===a.title&&(e.title="This field is required"),l(e),""!==a.title})()&&r()},color:"primary",children:"Confirm"}),Object(rt.jsx)(Je.a,{onClick:i,children:"Cancel"})]})]})}function Fc(){return ir("/questions/")}function Lc(e,t){return Rc.apply(this,arguments)}function Rc(){return(Rc=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr("/questions/"+t+"/",n);case 2:if(204===e.sent.status){e.next=5;break}throw Error("Server does not return correct code.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mc=n(272),Bc=n(767),Gc=Object($e.a)((function(e){return{root:{paddingTop:8},droppable:{display:"flex",flexDirection:"column"},submitButton:{margin:"10px 0"}}})),zc={Mandatory:!0,"Not mandatory":!1};function Vc(e){var t=e.stepFields,n=e.fields,a=e.stepName,r=e.handleRadioChange,i=e.handleDeleteField;return t.map((function(e,t){var o=e.field,c=e.required;e.type;return Object(rt.jsx)(Mc.b,{draggableId:o,index:t,children:function(e,l){return Object(rt.jsxs)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{style:Object(s.a)({backgroundColor:l.isDragging?"#bbb":null},e.draggableProps.style),children:[Object(rt.jsx)(di,{required:!0,noStar:!0,row:!0,label:n[o]&&n[o].label||o,onChange:r(o,a),options:zc,value:c},o),Object(rt.jsx)(yt.a,{onClick:function(){return!l.isDragging&&i(t,a)},size:"large",children:Object(rt.jsx)(Bc.a,{})})]}))}},o)}))}var qc=Object($e.a)((function(){return{button:{padding:4},formControl:{margin:null}}})),Hc="Add Question",Wc="Edit Question",Uc={provider:"Provider"};function Jc(e){var t=e.open,n=e.title,a=e.value,r=(e.objectId,e.handleConfirm),i=e.handleClose,o=Object(Ae.useState)({type:"",value:""}),c=Object(Be.a)(o,2),s=c[0],l=c[1];return Object(rt.jsxs)(jt.a,{open:t,onClose:i,fullWidth:!0,children:[Object(rt.jsx)(ht.a,{children:n}),Object(rt.jsxs)(pt.a,{children:[Object(rt.jsx)(We.a,{sx:{mt:2}}),Object(rt.jsx)(rn,{label:"Content type",value:a.content_type,options:Uc,onChange:function(e){return a.content_type=e.target.value},disabled:n===Wc,formControlProps:{fullWidth:!0},error:!!s.content_type,helperText:s.content_type,required:!0,noDefaultStyle:!0,noEmpty:!0}),Object(rt.jsx)(Yt,{label:"Question",value:a.text,onChange:function(e){return a.text=e.target.value},error:!!s.text,helperText:s.text,fullWidth:!0})]}),Object(rt.jsxs)(ft.a,{children:[Object(rt.jsx)(Je.a,{onClick:function(){(function(){var e={};return""===a.content_type&&(e.content_type="This field is required"),""===a.text&&(e.text="This field is required"),l(e),""!==a.content_type&&""!==a.text})()&&r()},color:"primary",children:"Confirm"}),Object(rt.jsx)(Je.a,{onClick:i,children:"Cancel"})]})]})}var Kc=Object(rt.jsxs)(Ge.d,{children:[Object(rt.jsx)(Ge.b,{exact:!0,path:"/",component:qa}),Object(rt.jsx)(Ge.b,{path:"/login",component:Ua}),Object(rt.jsx)(Ge.b,{path:"/login-pane",component:Ya}),Object(rt.jsx)(co,{path:"/dashboard",component:tr}),Object(rt.jsx)(co,{path:"/clients/:id/edit",component:xi}),Object(rt.jsx)(co,{path:"/clients/:id/needs/new",component:Ri}),Object(rt.jsx)(co,{path:"/clients/new",component:xi}),Object(rt.jsx)(co,{path:"/clients/:id",component:function(){var e=Object(Le.c)(),t=Object(Ge.h)().id,n=Object(Ae.useState)({data:null,CF:null,CN:null}),a=Object(Be.a)(n,2),r=a[0],i=a[1];if(Object(Ae.useEffect)((function(){vr(t).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e})}))}))}),[e,t]),Object(Ae.useEffect)((function(){null==r.CF&&Kr().then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{CF:e})}))}))}),[e,r.CF]),r.data&&r.CF){var o=r.data,c=r.CF.form_structure;if(o.family){var l=k.a.clone(o.family.members);k.a.remove(l,{person:{id:t}})}return Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(Ue.a,{variant:"h3",paddingY:2,children:"Client Profile"}),Object(rt.jsxs)("div",{children:[Object(rt.jsx)(Sa,{to:"/clients/".concat(t,"/edit/"),children:Object(rt.jsx)(Je.a,{variant:"contained",startIcon:Object(rt.jsx)(kt.a,{}),children:"Edit"})}),"\xa0",Object(rt.jsx)(Je.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},startIcon:Object(rt.jsx)(Ar.a,{}),children:"Print"}),Object(rt.jsxs)("div",{children:[o.is_deleted&&Object(rt.jsx)(Ft.a,{variant:"filled",severity:"error",children:"The client has been deleted"}),k.a.map(c,(function(e,t){return Object(rt.jsx)(Wr,{step:t,client:o,infoFields:k.a.keys(k.a.omit(e,"family")),clientFields:Qr},t)})),o.family&&o.family.members.length>0&&Object(rt.jsx)(Qn.a,{children:Object(rt.jsxs)($n.a,{children:[Object(rt.jsx)(oa.a,{children:Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{children:"First name"}),Object(rt.jsx)(na.a,{children:"Last name"}),Object(rt.jsx)(na.a,{children:"Date of Birth"}),Object(rt.jsx)(na.a,{children:"Gender"}),Object(rt.jsx)(na.a,{children:"Relationship"})]})}),k.a.map(k.a.filter(o.family.members,(function(e){return e.person.id!==o.id})),(function(e,t){return Object(rt.jsx)("clientFamilyTableRow",{member:e,index:t})}))]})})]}),Object(rt.jsx)(Ue.a,{variant:"h4",paddingY:2,children:"Needs"}),Object(rt.jsx)(Sa,{to:"/clients/".concat(o.id,"/needs/new"),children:Object(rt.jsx)(Je.a,{variant:"contained",children:"Add need"})}),o&&o.need_groups.length>0&&Object(rt.jsx)(Vr,{clientId:o.id,needGroups:o.need_groups}),Object(rt.jsx)(Ue.a,{variant:"h4",paddingY:2,children:"Appointments"}),o&&o.appointments.length>0&&Object(rt.jsx)(Qn.a,{children:Object(rt.jsxs)($n.a,{children:[Object(rt.jsx)(oa.a,{children:Object(rt.jsxs)(ta.a,{children:[Object(rt.jsx)(na.a,{children:"Category"}),Object(rt.jsx)(na.a,{children:"Date"}),Object(rt.jsx)(na.a,{children:"Time"}),Object(rt.jsx)(na.a,{children:"Description"})]})}),Object(rt.jsx)(ea.a,{children:o.appointments.map((function(e){return Object(rt.jsx)(Ur,{appointment:e},e.id)}))})]})}),Object(rt.jsx)("hr",{})]})]})}return null}}),Object(rt.jsx)(co,{path:"/clients",component:function(){var e=function(e){return e.profile.first_name+" "+e.profile.last_name};return Object(rt.jsx)(Et,{type:Tr,columnsWithoutOptions:Er,fetchData:Or,deleteItem:kr,generateMarkers:function(t,n,a){return t.slice((n-1)*a,n*a).map((function(t){return{position:{lat:Number(t.address.lat),lng:Number(t.address.lng)},title:e(t),link:"/".concat(Tr,"/").concat(t.id),content:t.address&&Ir(t.address)}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:e,tableOptions:{idField:"id"}})}}),Object(rt.jsx)(lo,{path:"/users/:id/edit",component:Ii}),Object(rt.jsx)(lo,{path:"/users/new",component:Ii}),Object(rt.jsx)(lo,{path:"/users/:id",component:function(){var e=Object(Ae.useState)(!0),t=Object(Be.a)(e,2),n=t[0],a=t[1],r=Object(Ae.useState)({}),i=Object(Be.a)(r,2),o=i[0],c=i[1],s=Object(Ge.h)().id;return Object(Ae.useEffect)((function(){Ci(s).then((function(e){c(e),a(!1)}))}),[s]),n?Object(rt.jsx)(wa,{message:"Loading user..."}):Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(Ue.a,{variant:"h5",gutterBottom:!0,children:"User profile"}),Object(rt.jsx)(Sa,{to:"/users/".concat(s,"/edit"),children:Object(rt.jsx)(Je.a,{color:"primary",variant:"contained",style:{marginBottom:12},children:"Edit"})}),Object(rt.jsx)(at.a,{elevation:4,children:Object(rt.jsx)($n.a,{children:Object(rt.jsxs)(ea.a,{children:[Object(rt.jsx)(qr,{title:"First Name",value:o.first_name}),Object(rt.jsx)(qr,{title:"Last Name",value:o.last_name}),Object(rt.jsx)(qr,{title:"Username",value:o.username}),Object(rt.jsx)(qr,{title:"Email",value:o.email}),Object(rt.jsx)(qr,{title:"Role",value:o.is_superuser?"Admin":"User"}),Object(rt.jsx)(qr,{title:"Phone Number",value:o.primary_phone_number}),Object(rt.jsx)(qr,{title:"Alternative Phone Number",value:o.alt_phone_number})]})})})]})}}),Object(rt.jsx)(lo,{path:"/users",component:function(){var e=Object(Ge.g)(),t=Object(Ae.useState)({loading:!0,data:[],selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1}),n=Object(Be.a)(t,2),a=n[0],r=n[1];Object(Ae.useEffect)((function(){ir("/users/").then((function(e){r((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(){var e=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Si(t);case 3:r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),o=[{label:"Username",body:function(e){var t=e.id,n=e.username;return Object(rt.jsx)(Sa,{color:!0,to:"/users/".concat(t),children:n})}},{label:"Email",body:function(e){return e.email}},{label:"First name",body:function(e){return e.first_name}},{label:"Last name",body:function(e){return e.last_name}},{label:"Primary phone",body:function(e){var t=e.primary_phone_number;return t?Nr(t):"Not Provided"}},{label:"Primary phone",body:function(e){var t=e.secondary_phone_number;return t?Nr(t):"Not Provided"}},{label:"Admin",body:function(e){if(e.is_superuser)return Object(rt.jsx)(yi.a,{color:"primary"})}},{label:" ",body:function(e){var t=e.username,n=e.id;return Object(rt.jsx)(It,{urlPrefix:"users",objectId:n,handleDelete:function(){return function(e,t){return function(){r((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}}(n,t)}})}}];return a.loading?Object(rt.jsx)(wa,{message:"Loading users..."}):Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(ya,{title:"Users",data:a.data,columns:o,idField:"id",customToolbar:Object(rt.jsx)(Ye.a,{onClick:function(){return e.push("/users/new")},color:"primary",icon:Object(rt.jsx)(tt.a,{}),label:"Add",variant:"outlined"})}),Object(rt.jsx)(xt,{objectId:a.selectedId,title:a.deleteDialogTitle,show:a.showDeleteDialog,onHide:function(){return r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:i})]})}}),Object(rt.jsx)(lo,{path:"/admin-logs",component:function(){var e=Object(Ae.useState)(!0),t=Object(Be.a)(e,2),n=t[0],a=t[1],r=Object(Ae.useState)([]),i=Object(Be.a)(r,2),o=i[0],c=i[1];return Object(Ae.useEffect)((function(){(function(){return vc.apply(this,arguments)})().then((function(e){c(e),a(!1)}))}),[]),n?Object(rt.jsx)(wa,{message:"Loading admin logs..."}):Object(rt.jsx)(Tt.a,{children:Object(rt.jsx)(ya,{title:"Admin Logs",data:o,columns:xc,idField:"id"})})}}),Object(rt.jsx)(co,{path:"/needs/:need_id/edit",component:Ri}),Object(rt.jsx)(co,{path:"/needs/:need_id",component:io}),Object(rt.jsx)(co,{path:"/providers/:id/rate",component:Uo}),Object(rt.jsx)(co,{path:"/providers/new/add-service",component:ko}),Object(rt.jsx)(co,{path:"/providers/:formType/new",component:Bo}),Object(rt.jsx)(co,{path:"/providers/:id/edit/",component:Bo}),Object(rt.jsx)(co,{path:"/providers/:id",component:function(){var e=Object(Le.c)(),t=Object(Ge.h)().id,n=Object(Ae.useState)({data:null,formSetting:null}),a=Object(Be.a)(n,2),r=a[0],i=a[1];if(Object(Ae.useEffect)((function(){po(t).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e})}))}))}),[t]),Object(Ae.useEffect)((function(){null==r.formSetting&&Eo(!1).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{formSetting:e})}))}))}),[e,r.formSetting]),r.data&&r.formSetting){var o,c=r.data,l=r.formSetting;"Organization"===c.type?o="organization":"Individual"===c.type&&(o=c.category.split(" ").join("_").toLowerCase());var d=c.reviews.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0)/c.reviews.length;return Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)("h3",{children:"Provider Profile"}),Object(rt.jsxs)("div",{children:[Object(rt.jsx)(Sa,{to:"/providers/".concat(t,"/edit/"),children:Object(rt.jsx)(Je.a,{variant:"contained",startIcon:Object(rt.jsx)(kt.a,{}),children:"Edit"})}),"\xa0",Object(rt.jsx)(Sa,{to:"/providers/".concat(t,"/rate"),children:Object(rt.jsx)(Je.a,{variant:"contained",startIcon:Object(rt.jsx)(zo.a,{}),children:"Rate Provider"})})," ",Object(rt.jsx)(Je.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},startIcon:Object(rt.jsx)(Ar.a,{}),children:"Print"}),l[o]&&k.a.map(l[o].form_structure,(function(e,t){return Object(rt.jsx)(Vo,{step:t,provider:c,providerFields:qn,infoFields:e},t)})),Object(rt.jsx)("h3",{children:" Reviews "}),Object(rt.jsx)(We.a,{component:"fieldset",mb:3,borderColor:"transparent",children:Object(rt.jsx)(Go.a,{size:"large",name:"provider-rating",value:d})}),Object(rt.jsx)("h3",{children:"Services"}),Object(rt.jsx)(Sa,{to:"/services/new",children:Object(rt.jsx)(Je.a,{variant:"contained",children:"Add Service"})})]})]})}return""}}),Object(rt.jsx)(co,{path:"/providers",component:function(){return Object(rt.jsx)(Et,{type:_o,columnsWithoutOptions:So,fetchData:jo,deleteItem:xo,generateMarkers:function(e,t,n){return e.slice((t-1)*n,t*n).map((function(e){return{position:{lat:Number(e.main_address.lat),lng:Number(e.main_address.lng)},title:Co(e),link:"/".concat(_o,"/").concat(e.id),content:e.main_address&&Ir(e.main_address)}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:Co,tableOptions:{idField:"id"}})}}),Object(rt.jsx)(co,{path:"/services/:id/edit",component:bc}),Object(rt.jsx)(co,{path:"/services/new",component:bc}),Object(rt.jsx)(co,{path:"/services/:id",component:Qo}),Object(rt.jsx)(co,{path:"/services",component:function(){return Object(rt.jsx)(Et,{type:Jo,columnsWithoutOptions:Yo,fetchData:ne,deleteItem:ae,generateMarkers:function(e,t,n){return e.slice((t-1)*n,t*n).map((function(e){return{position:{lat:Number(e.location.lat),lng:Number(e.location.lng)},title:e.name,link:"/".concat(Jo,"/").concat(e.id),content:e.desc}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:function(e){return e.name},tableOptions:{idField:"id"}})}}),Object(rt.jsx)(co,{path:"/goods/:id/edit",component:gc}),Object(rt.jsx)(co,{path:"/goods/new",component:gc}),Object(rt.jsx)(co,{path:"/goods/:id",component:fc}),Object(rt.jsx)(co,{path:"/goods",component:function(){var e=function(e){return e.name};return Object(rt.jsx)(Et,{type:jc,columnsWithoutOptions:pc,fetchData:Ce,deleteItem:Se,generateMarkers:function(t,n,a){t.slice((n-1)*a,n*a).map((function(t){return{position:{lat:Number(t.location.lat),lng:Number(t.location.lng)},title:e(t),link:"/".concat(jc,"/").concat(t.id),content:t.desc}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:e})}}),Object(rt.jsx)(co,{path:"/reporting",component:Cc}),Object(rt.jsx)(co,{path:"/eligibility-criteria",component:function(){var e=Object(Ae.useState)({loading:!0,data:[],value:{},selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1,dialogTitle:"",showAddEditDialog:!1}),t=Object(Be.a)(e,2),n=t[0],a=t[1],r=Ac();Object(Ae.useEffect)((function(){$r().then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(e,t){return function(){a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}},c=function(e,t){return function(){return a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:t,value:{title:e,id:t},showAddEditDialog:!0,dialogTitle:"Edit Eligibility Criteria"})}))}},l=function(){var e=Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lr("/eligibility_criteria/",n.value);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:[].concat(Object(o.a)(e.data),[t])})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ei(t,n);case 3:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=n.value.id,i=n.value,ur("/eligibility_criteria/"+r+"/",i);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:e.data.map((function(n){return n.id===e.selectedId?t:n}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var r,i}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=[{label:"Title",body:function(e){var t=e.title;return Object(rt.jsx)(We.a,{sx:{width:"80%"},children:t})}},{label:" ",body:function(e){var t=e.id,n=e.title;return Object(rt.jsxs)("span",{children:[Object(rt.jsx)(yt.a,{onClick:c(n,t),className:r.button,size:"large",children:Object(rt.jsx)(kt.a,{fontSize:"small",color:"primary"})}),Object(rt.jsx)(yt.a,{onClick:i(t,n),className:r.button,size:"large",children:Object(rt.jsx)(wt.a,{fontSize:"small",color:"secondary"})})]})}}];return n.loading?Object(rt.jsx)(wa,{message:"Loading eligibilities..."}):Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(ya,{title:"Eligibility Criteria",data:n.data,columns:b,customToolbar:Object(rt.jsx)(Ye.a,{onClick:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:{title:""},showAddEditDialog:!0,dialogTitle:Pc})}))},color:"primary",icon:Object(rt.jsx)(tt.a,{}),label:"Add",variant:"outlined"})}),Object(rt.jsx)(xt,{objectId:n.selectedId,title:n.deleteDialogTitle,show:n.showDeleteDialog,onHide:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:d}),Object(rt.jsx)(Dc,{open:n.showAddEditDialog,value:n.value,title:n.dialogTitle,handleClose:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1})}))},handleConfirm:n.dialogTitle===Pc?l:u})]})}}),Object(rt.jsx)(co,{path:"/questions",component:function(){var e=Object(Ae.useState)({loading:!0,data:[],value:{},selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1,dialogTitle:"",showAddEditDialog:!1}),t=Object(Be.a)(e,2),n=t[0],a=t[1],r=qc();Object(Ae.useEffect)((function(){Fc().then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(e,t){return function(){a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}},c=function(e,t,n){return function(){return a((function(a){return Object(s.a)(Object(s.a)({},a),{},{value:{id:n,text:e,content_type:t},selectedId:n,showAddEditDialog:!0,dialogTitle:Wc})}))}},l=function(){var e=Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lr("/questions/",n.value);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:[].concat(Object(o.a)(e.data),[t])})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(N.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lc(t,n);case 3:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=n.value.id,i=n.value,ur("/questions/"+r+"/",i);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:e.data.map((function(n){return n.id===e.selectedId?t:n}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var r,i}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=[{label:"Text",body:function(e){var t=e.text;return Object(rt.jsx)(We.a,{sx:{width:"60%"},children:t})}},{label:"Content type",body:function(e){return e.content_type}},{label:" ",body:function(e){var t=e.id,n=e.text,a=e.content_type;return Object(rt.jsxs)("span",{children:[Object(rt.jsx)(yt.a,{onClick:c(n,a,t),className:r.button,size:"large",children:Object(rt.jsx)(kt.a,{fontSize:"small",color:"primary"})}),Object(rt.jsx)(yt.a,{onClick:i(t,n),className:r.button,size:"large",children:Object(rt.jsx)(wt.a,{fontSize:"small",color:"secondary"})})]})}}];return n.loading?Object(rt.jsx)(wa,{message:"Loading questions..."}):Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(ya,{title:"Questions",data:n.data,columns:b,customToolbar:Object(rt.jsx)(Ye.a,{onClick:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:{text:"",content_type:""},showAddEditDialog:!0,dialogTitle:Hc})}))},color:"primary",icon:Object(rt.jsx)(tt.a,{}),label:"Add",variant:"outlined"})}),Object(rt.jsx)(xt,{objectId:n.selectedId,title:n.deleteDialogTitle,show:n.showDeleteDialog,onHide:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:d}),Object(rt.jsx)(Jc,{open:n.showAddEditDialog,value:n.value,objectId:n.selectedId,title:n.dialogTitle,handleClose:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1})}))},handleConfirm:n.dialogTitle===Hc?l:u})]})}}),Object(rt.jsx)(lo,{path:"/settings/manage-fields",component:function(){var e=Gc(),t=Object(Ge.g)(),n=Object(Le.c)(),a=Object(Ae.useState)({category:"",stepToAdd:"",selectedStep:"",selectedField:"",questions:{},fields:{}}),r=Object(Be.a)(a,2),i=r[0],l=r[1];Object(Ae.useEffect)((function(){Fc().then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{questions:e})}))})),Eo(!1).then((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a,r=n[t],i=e[r].form_structure,o=e[r].steps_order,c=Object(xn.a)(o);try{for(c.s();!(a=c.n()).done;){for(var d=a.value,u=[],b=i[d],j=0,h=Object.entries(b);j<h.length;j++){var p=Object(Be.a)(h[j],2),m=p[0],f=p[1];u.push(Object(s.a)({field:m},f))}e[r].form_structure[d]=u}}catch(x){c.e(x)}finally{c.f()}}for(var O=0,g=Object.keys(Gn);O<g.length;O++){var v=g[O];e[v]||(e[v]={form_structure:[],steps_order:[]})}l((function(t){return Object(s.a)(Object(s.a)({},t),{},{fields:Object(s.a)(Object(s.a)({},t.fields),e)})}))})),Kr().then((function(e){for(var t=e.form_structure,n=0,a=Object.keys(t);n<a.length;n++){for(var r=a[n],i=[],o=0,c=Object.entries(t[r]);o<c.length;o++){var d=Object(Be.a)(c[o],2),u=d[0],b=d[1];i.push({field:u,type:"field",required:b})}t[r]=i}l((function(t){return Object(s.a)(Object(s.a)({},t),{},{fields:Object(s.a)(Object(s.a)({},t.fields),{},{client:e})})}))}))}),[n]);var d=function(){var e=Object(N.a)(I.a.mark((function e(){var n,a,r,o,c,s,l,d,u,b,j,h,p,m,f,O,g,v,x,y,_,C,S,k,w;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"client"===i.category)for(a=Xr,n={steps_order:i.fields.client.steps_order,form_structure:{}},r=i.fields.client.form_structure,o=0,c=Object.keys(r);o<c.length;o++){s=c[o],l=n.form_structure[s]={},d=Object(xn.a)(r[s]);try{for(d.s();!(u=d.n()).done;)b=u.value,j=b.field,h=b.required,l[j]=h}catch(I){d.e(I)}finally{d.f()}}else{for(a=Po,p=0,m=Object.keys(i.fields);p<m.length;p++)for(f=m[p],n[f]={steps_order:i.fields[f].steps_order,form_structure:{}},O=i.fields[f].form_structure,g=0,v=Object.keys(O);g<v.length;g++){x=v[g],y=n[f].form_structure[x]={},_=Object(xn.a)(O[x]);try{for(_.s();!(C=_.n()).done;)S=C.value,k=S.field,w=S.required,y[k]={type:"field",required:w}}catch(I){_.e(I)}finally{_.f()}}delete n.client}return console.log(n),e.prev=3,e.next=6,a(n);case 6:t.push("/dashboard"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),u=Object(Ae.useMemo)((function(){for(var e={},t="client"===i.category?Qr:qn,n=0,a=Object.entries(t);n<a.length;n++){var r=Object(Be.a)(a[n],2),o=r[0],c=r[1].label;e[o]=c}return e}),[i.category]),b=Object(Ae.useMemo)((function(){if(!i.category)return{};for(var e=Object(s.a)({},u),t=0,n=Object.values(i.fields[i.category].form_structure);t<n.length;t++){var a,r=n[t],o=Object(xn.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value.field;Object.keys(e).includes(c)&&delete e[c]}}catch(l){o.e(l)}finally{o.f()}}return e}),[i.fields,i.category,u]),j=Object(Ae.useCallback)((function(e){return function(t){var n=t.target.value;"category"===e?i.fields[n]&&l((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},(a={},Object(c.a)(a,e,n),Object(c.a)(a,"selectedField",""),Object(c.a)(a,"selectedStep",""),Object(c.a)(a,"stepToAdd",""),a))})):l((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e,n))}))}}),[i.fields]),h=Object(Ae.useCallback)((function(e,t){return function(n){var a,r=i.fields[i.category].form_structure[t],o=Object(xn.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value;c.field===e&&(c.required=n.target.value)}}catch(s){o.e(s)}finally{o.f()}}}),[i.fields,i.category]),p=Object(Ae.useCallback)((function(e,t){var n=Object(o.a)(i.fields[i.category].form_structure[t]);n.splice(e,1),i.fields[i.category].form_structure[t]=n,l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))}),[i.fields,i.category]),m=Object(Ae.useCallback)((function(){for(var e=i.fields[i.category].form_structure,t=0,n=Object.values(e);t<n.length;t++){var a,r=n[t],o=Object(xn.a)(r);try{for(o.s();!(a=o.n()).done;){if(a.value.field===i.selectedField)return}}catch(c){o.e(c)}finally{o.f()}}i.fields[i.category].form_structure[i.selectedStep].push({field:i.selectedField,type:"field",required:!1}),l((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedField:"",fields:Object(s.a)({},e.fields)})}))}),[i.fields,i.category,i.selectedStep,i.selectedField]),f=Object(Ae.useCallback)((function(e,t){return function(){i.fields[i.category].steps_order.splice(e,1),delete i.fields[i.category].form_structure[t],l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))}}),[i.fields,i.category]),O=Object(Ae.useMemo)((function(){return i.category?Object(rt.jsxs)(Ha.a,{container:!0,alignItems:"flex-end",spacing:2,className:e.root,children:[Object(rt.jsx)(Ha.a,{item:!0,children:Object(rt.jsx)(gt.a,{label:"New step name",value:i.stepToAdd,onChange:j("stepToAdd")})}),Object(rt.jsx)(Ha.a,{item:!0,children:Object(rt.jsx)(Je.a,{variant:"outlined",color:"primary",disabled:!i.stepToAdd,onClick:function(){l((function(e){return e.fields[e.category].form_structure[e.stepToAdd]=[],e.fields[e.category].steps_order.push(e.stepToAdd),Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))},children:"Add Step"})})]}):null}),[i.stepToAdd,i.category,e.root,j]),g=Object(Ae.useMemo)((function(){return i.category?Object(rt.jsxs)(Ha.a,{container:!0,alignItems:"flex-end",spacing:2,children:[Object(rt.jsx)(Ha.a,{item:!0,sm:3,xs:4,children:Object(rt.jsx)(rn,{label:"Choose step",value:i.selectedStep,onChange:j("selectedStep"),options:i.fields[i.category].steps_order,noDefaultStyle:!0,formControlProps:{fullWidth:!0},noEmpty:!0,controlled:!0})}),Object(rt.jsx)(Ha.a,{item:!0,sm:7,xs:8,children:Object(rt.jsx)(rn,{label:"Choose field",value:i.selectedField,onChange:j("selectedField"),options:b,noDefaultStyle:!0,formControlProps:{fullWidth:!0},noEmpty:!0,controlled:!0})}),Object(rt.jsx)(Ha.a,{item:!0,sm:2,children:Object(rt.jsx)(Je.a,{variant:"outlined",color:"primary",onClick:m,disabled:!i.selectedField||!i.selectedStep,children:"Add Field"})})]}):null}),[i.fields,i.category,j,m,i.selectedField,i.selectedStep,b]),v=Object(Ae.useMemo)((function(){if(!i.fields[i.category])return null;var t=i.fields[i.category].form_structure;return Object.keys(t).map((function(n,a){return Object(rt.jsxs)("div",{className:e.root,children:[Object(rt.jsxs)(Ue.a,{variant:"h6",color:"textSecondary",children:[n,Object(rt.jsx)(yt.a,{onClick:f(a,n),size:"large",children:Object(rt.jsx)(Bc.a,{})})]}),Object(rt.jsx)(Mc.c,{droppableId:n,className:e.droppable,children:function(e,a){return Object(rt.jsxs)("div",Object(s.a)(Object(s.a)({},e.droppableProps),{},{ref:e.innerRef,children:[Object(rt.jsx)(Vc,{stepName:n,stepFields:t[n],handleRadioChange:h,handleDeleteField:p,fields:"client"===i.category?Qr:qn}),e.placeholder]}))}}),Object(rt.jsx)(Ja.a,{})]},a)}))}),[i.fields,i.category,e.root,e.droppable,h,p,f]);return Object(rt.jsxs)(Tt.a,{children:[Object(rt.jsx)(Ue.a,{variant:"h5",children:"Manage Fields"}),Object(rt.jsx)(rn,{label:"Please select",value:i.category,onChange:j("category"),options:zn,noEmpty:!0}),O,g,Object(rt.jsx)(Mc.a,{onDragEnd:function(e){var t=e.source,n=e.destination;if(n){var a=n.droppableId,r=t.droppableId;if(t.droppableId!==n.droppableId){var o=i.fields[i.category].form_structure[r],c=i.fields[i.category].form_structure[a],s=o.splice(t.index,1),l=Object(Be.a)(s,1)[0];c.splice(n.index,0,l)}else!function(e,t,n){var a=e.splice(t,1),r=Object(Be.a)(a,1)[0];e.splice(n,0,r)}(i.fields[i.category].form_structure[a],t.index,n.index)}},children:v}),i.category&&Object(rt.jsx)(Je.a,{variant:"outlined",color:"primary",onClick:d,className:e.submitButton,children:"Submit"})]})}})]}),Yc=(n(645),Object(Da.a)({palette:{primary:{main:Ra.a[700]},secondary:Ma.a}}));function Xc(){return Object(rt.jsx)("div",{className:"App",children:Object(rt.jsx)(Fa.a,{injectFirst:!0,children:Object(rt.jsxs)(La.a,{theme:Yc,children:[Object(rt.jsx)(Aa,{}),Object(rt.jsx)("div",{style:{paddingTop:50,paddingBottom:22},children:Kc}),Object(rt.jsx)(Pa,{})]})})})}var Zc=function(e){console.log("File: store.js - Function: configureStore  Parameters: preloadedState ->  ",e);var t=Object(a.e)(Te,e,Object(a.a)(i.a,Ee));return{store:t,persistor:Object(r.b)(t)}}(),Qc=Zc.store,$c=Zc.persistor;Fe.a.render(Object(rt.jsx)(Le.a,{store:Qc,children:Object(rt.jsx)(Me.a,{loading:null,persistor:$c,children:Object(rt.jsx)(Re.a,{children:Object(rt.jsx)(Xc,{})})})}),document.getElementById("root"))}},[[646,1,2]]]);
//# sourceMappingURL=main.a3116269.chunk.js.map