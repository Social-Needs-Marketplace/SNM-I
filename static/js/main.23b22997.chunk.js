(this.webpackJsonpsnm_client=this.webpackJsonpsnm_client||[]).push([[0],{14:function(e,t){var n;n="jias.snmi.ca"===(window&&window.location&&window.location.hostname)?"https://jias-server.snmi.ca":"http://127.0.0.1:8000";e.exports=Object.freeze({serverHost:n,torontoCoordinates:{lat:43.6497,lng:-79.3763},countryOptions:["Afghanistan","\xc5land Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua & Barbuda","Argentina","Armenia","Aruba","Ascension Island","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Brazil","British Indian Ocean Territory","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Canary Islands","Cape Verde","Caribbean Netherlands","Cayman Islands","Central African Republic","Ceuta & Melilla","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo - Brazzaville","Congo - Kinshasa","Cook Islands","Costa Rica","C\xf4te d\u2019Ivoire","Croatia","Cuba","Cura\xe7ao","Cyprus","Czechia","Denmark","Diego Garcia","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong SAR China","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR China","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar (Burma)","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","North Macedonia","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territories","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn Islands","Poland","Portugal","Pseudo-Accents","Pseudo-Bidi","Puerto Rico","Qatar","R\xe9union","Romania","Russia","Rwanda","Samoa","San Marino","S\xe3o Tom\xe9 & Pr\xedncipe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia & South Sandwich Islands","South Korea","South Sudan","Spain","Sri Lanka","St. Barth\xe9lemy","St. Helena","St. Kitts & Nevis","St. Lucia","St. Martin","St. Pierre & Miquelon","St. Vincent & Grenadines","Sudan","Suriname","Svalbard & Jan Mayen","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad & Tobago","Tristan da Cunha","Tunisia","Turkey","Turkmenistan","Turks & Caicos Islands","Tuvalu","U.S. Outlying Islands","U.S. Virgin Islands","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Wallis & Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],languageOptions:["Abkhazian (ab)","Achinese (ace)","Acoli (ach)","Adangme (ada)","Adyghe (ady)","Afar (aa)","Afrihili (afh)","Afrikaans (af)","Aghem (agq)","Ainu (ain)","Akan (ak)","Akkadian (akk)","Akoose (bss)","Alabama (akz)","Albanian (sq)","Aleut (ale)","Algerian Arabic (arq)","American English (en_US)","American Sign Language (ase)","Amharic (am)","Ancient Egyptian (egy)","Ancient Greek (grc)","Angika (anp)","Ao Naga (njo)","Arabic (ar)","Aragonese (an)","Aramaic (arc)","Araona (aro)","Arapaho (arp)","Arawak (arw)","Armenian (hy)","Aromanian (rup)","Arpitan (frp)","Assamese (as)","Asturian (ast)","Asu (asa)","Atsam (cch)","Australian English (en_AU)","Austrian German (de_AT)","Avaric (av)","Avestan (ae)","Awadhi (awa)","Aymara (ay)","Azerbaijani (az)","Badaga (bfq)","Bafia (ksf)","Bafut (bfd)","Bakhtiari (bqi)","Balinese (ban)","Baluchi (bal)","Bambara (bm)","Bamun (bax)","Banjar (bjn)","Basaa (bas)","Bashkir (ba)","Basque (eu)","Batak Toba (bbc)","Bavarian (bar)","Beja (bej)","Belarusian (be)","Bemba (bem)","Bena (bez)","Bengali (bn)","Betawi (bew)","Bhojpuri (bho)","Bikol (bik)","Bini (bin)","Bishnupriya (bpy)","Bislama (bi)","Blin (byn)","Blissymbols (zbl)","Bodo (brx)","Bosnian (bs)","Brahui (brh)","Braj (bra)","Brazilian Portuguese (pt_BR)","Breton (br)","British English (en_GB)","Buginese (bug)","Bulgarian (bg)","Bulu (bum)","Buriat (bua)","Burmese (my)","Caddo (cad)","Cajun French (frc)","Canadian English (en_CA)","Canadian French (fr_CA)","Cantonese (yue)","Capiznon (cps)","Carib (car)","Catalan (ca)","Cayuga (cay)","Cebuano (ceb)","Central Atlas Tamazight (tzm)","Central Dusun (dtp)","Central Kurdish (ckb)","Central Yupik (esu)","Chadian Arabic (shu)","Chagatai (chg)","Chamorro (ch)","Chechen (ce)","Cherokee (chr)","Cheyenne (chy)","Chibcha (chb)","Chiga (cgg)","Chimborazo Highland Quichua (qug)","Chinese (zh)","Chinook Jargon (chn)","Chipewyan (chp)","Choctaw (cho)","Church Slavic (cu)","Chuukese (chk)","Chuvash (cv)","Classical Newari (nwc)","Classical Syriac (syc)","Colognian (ksh)","Comorian (swb)","Congo Swahili (swc)","Coptic (cop)","Cornish (kw)","Corsican (co)","Cree (cr)","Creek (mus)","Crimean Turkish (crh)","Croatian (hr)","Czech (cs)","Dakota (dak)","Danish (da)","Dargwa (dar)","Dazaga (dzg)","Delaware (del)","Dinka (din)","Divehi (dv)","Dogri (doi)","Dogrib (dgr)","Duala (dua)","Dutch (nl)","Dyula (dyu)","Dzongkha (dz)","Eastern Frisian (frs)","Efik (efi)","Egyptian Arabic (arz)","Ekajuk (eka)","Elamite (elx)","Embu (ebu)","Emilian (egl)","English (en)","Erzya (myv)","Esperanto (eo)","Estonian (et)","European Portuguese (pt_PT)","European Spanish (es_ES)","Ewe (ee)","Ewondo (ewo)","Extremaduran (ext)","Fang (fan)","Fanti (fat)","Faroese (fo)","Fiji Hindi (hif)","Fijian (fj)","Filipino (fil)","Finnish (fi)","Flemish (nl_BE)","Fon (fon)","Frafra (gur)","French (fr)","Friulian (fur)","Fulah (ff)","Ga (gaa)","Gagauz (gag)","Galician (gl)","Gan Chinese (gan)","Ganda (lg)","Gayo (gay)","Gbaya (gba)","Geez (gez)","Georgian (ka)","German (de)","Gheg Albanian (aln)","Ghomala (bbj)","Gilaki (glk)","Gilbertese (gil)","Goan Konkani (gom)","Gondi (gon)","Gorontalo (gor)","Gothic (got)","Grebo (grb)","Greek (el)","Guarani (gn)","Gujarati (gu)","Gusii (guz)","Gwich\u02bcin (gwi)","Haida (hai)","Haitian (ht)","Hakka Chinese (hak)","Hausa (ha)","Hawaiian (haw)","Hebrew (he)","Herero (hz)","Hiligaynon (hil)","Hindi (hi)","Hiri Motu (ho)","Hittite (hit)","Hmong (hmn)","Hungarian (hu)","Hupa (hup)","Iban (iba)","Ibibio (ibb)","Icelandic (is)","Ido (io)","Igbo (ig)","Iloko (ilo)","Inari Sami (smn)","Indonesian (id)","Ingrian (izh)","Ingush (inh)","Interlingua (ia)","Interlingue (ie)","Inuktitut (iu)","Inupiaq (ik)","Irish (ga)","Italian (it)","Jamaican Creole English (jam)","Japanese (ja)","Javanese (jv)","Jju (kaj)","Jola-Fonyi (dyo)","Judeo-Arabic (jrb)","Judeo-Persian (jpr)","Jutish (jut)","Kabardian (kbd)","Kabuverdianu (kea)","Kabyle (kab)","Kachin (kac)","Kaingang (kgp)","Kako (kkj)","Kalaallisut (kl)","Kalenjin (kln)","Kalmyk (xal)","Kamba (kam)","Kanembu (kbl)","Kannada (kn)","Kanuri (kr)","Kara-Kalpak (kaa)","Karachay-Balkar (krc)","Karelian (krl)","Kashmiri (ks)","Kashubian (csb)","Kawi (kaw)","Kazakh (kk)","Kenyang (ken)","Khasi (kha)","Khmer (km)","Khotanese (kho)","Khowar (khw)","Kikuyu (ki)","Kimbundu (kmb)","Kinaray-a (krj)","Kinyarwanda (rw)","Kirmanjki (kiu)","Klingon (tlh)","Kom (bkm)","Komi (kv)","Komi-Permyak (koi)","Kongo (kg)","Konkani (kok)","Korean (ko)","Koro (kfo)","Kosraean (kos)","Kotava (avk)","Koyra Chiini (khq)","Koyraboro Senni (ses)","Kpelle (kpe)","Krio (kri)","Kuanyama (kj)","Kumyk (kum)","Kurdish (ku)","Kurukh (kru)","Kutenai (kut)","Kwasio (nmg)","Kyrgyz (ky)","K\u02bciche\u02bc (quc)","Ladino (lad)","Lahnda (lah)","Lakota (lkt)","Lamba (lam)","Langi (lag)","Lao (lo)","Latgalian (ltg)","Latin (la)","Latin American Spanish (es_419)","Latvian (lv)","Laz (lzz)","Lezghian (lez)","Ligurian (lij)","Limburgish (li)","Lingala (ln)","Lingua Franca Nova (lfn)","Literary Chinese (lzh)","Lithuanian (lt)","Livonian (liv)","Lojban (jbo)","Lombard (lmo)","Low German (nds)","Lower Silesian (sli)","Lower Sorbian (dsb)","Lozi (loz)","Luba-Katanga (lu)","Luba-Lulua (lua)","Luiseno (lui)","Lule Sami (smj)","Lunda (lun)","Luo (luo)","Luxembourgish (lb)","Luyia (luy)","Maba (mde)","Macedonian (mk)","Machame (jmc)","Madurese (mad)","Mafa (maf)","Magahi (mag)","Main-Franconian (vmf)","Maithili (mai)","Makasar (mak)","Makhuwa-Meetto (mgh)","Makonde (kde)","Malagasy (mg)","Malay (ms)","Malayalam (ml)","Maltese (mt)","Manchu (mnc)","Mandar (mdr)","Mandingo (man)","Manipuri (mni)","Manx (gv)","Maori (mi)","Mapuche (arn)","Marathi (mr)","Mari (chm)","Marshallese (mh)","Marwari (mwr)","Masai (mas)","Mazanderani (mzn)","Medumba (byv)","Mende (men)","Mentawai (mwv)","Meru (mer)","Meta\u02bc (mgo)","Mexican Spanish (es_MX)","Micmac (mic)","Middle Dutch (dum)","Middle English (enm)","Middle French (frm)","Middle High German (gmh)","Middle Irish (mga)","Min Nan Chinese (nan)","Minangkabau (min)","Mingrelian (xmf)","Mirandese (mwl)","Mizo (lus)","Modern Standard Arabic (ar_001)","Mohawk (moh)","Moksha (mdf)","Moldavian (ro_MD)","Mongo (lol)","Mongolian (mn)","Morisyen (mfe)","Moroccan Arabic (ary)","Mossi (mos)","Multiple Languages (mul)","Mundang (mua)","Muslim Tat (ttt)","Myene (mye)","Nama (naq)","Nauru (na)","Navajo (nv)","Ndonga (ng)","Neapolitan (nap)","Nepali (ne)","Newari (new)","Ngambay (sba)","Ngiemboon (nnh)","Ngomba (jgo)","Nheengatu (yrl)","Nias (nia)","Niuean (niu)","No linguistic content (zxx)","Nogai (nog)","North Ndebele (nd)","Northern Frisian (frr)","Northern Sami (se)","Northern Sotho (nso)","Norwegian (no)","Norwegian Bokm\xe5l (nb)","Norwegian Nynorsk (nn)","Novial (nov)","Nuer (nus)","Nyamwezi (nym)","Nyanja (ny)","Nyankole (nyn)","Nyasa Tonga (tog)","Nyoro (nyo)","Nzima (nzi)","N\u02bcKo (nqo)","Occitan (oc)","Ojibwa (oj)","Old English (ang)","Old French (fro)","Old High German (goh)","Old Irish (sga)","Old Norse (non)","Old Persian (peo)","Old Proven\xe7al (pro)","Oriya (or)","Oromo (om)","Osage (osa)","Ossetic (os)","Ottoman Turkish (ota)","Pahlavi (pal)","Palatine German (pfl)","Palauan (pau)","Pali (pi)","Pampanga (pam)","Pangasinan (pag)","Papiamento (pap)","Pashto (ps)","Pennsylvania German (pdc)","Persian (fa)","Phoenician (phn)","Picard (pcd)","Piedmontese (pms)","Plautdietsch (pdt)","Pohnpeian (pon)","Polish (pl)","Pontic (pnt)","Portuguese (pt)","Prussian (prg)","Punjabi (pa)","Quechua (qu)","Rajasthani (raj)","Rapanui (rap)","Rarotongan (rar)","Riffian (rif)","Romagnol (rgn)","Romanian (ro)","Romansh (rm)","Romany (rom)","Rombo (rof)","Root (root)","Rotuman (rtm)","Roviana (rug)","Rundi (rn)","Russian (ru)","Rusyn (rue)","Rwa (rwk)","Saho (ssy)","Sakha (sah)","Samaritan Aramaic (sam)","Samburu (saq)","Samoan (sm)","Samogitian (sgs)","Sandawe (sad)","Sango (sg)","Sangu (sbp)","Sanskrit (sa)","Santali (sat)","Sardinian (sc)","Sasak (sas)","Sassarese Sardinian (sdc)","Saterland Frisian (stq)","Saurashtra (saz)","Scots (sco)","Scottish Gaelic (gd)","Selayar (sly)","Selkup (sel)","Sena (seh)","Seneca (see)","Serbian (sr)","Serbo-Croatian (sh)","Serer (srr)","Seri (sei)","Shambala (ksb)","Shan (shn)","Shona (sn)","Sichuan Yi (ii)","Sicilian (scn)","Sidamo (sid)","Siksika (bla)","Silesian (szl)","Simplified Chinese (zh_Hans)","Sindhi (sd)","Sinhala (si)","Skolt Sami (sms)","Slave (den)","Slovak (sk)","Slovenian (sl)","Soga (xog)","Sogdien (sog)","Somali (so)","Soninke (snk)","South Azerbaijani (azb)","South Ndebele (nr)","Southern Altai (alt)","Southern Sami (sma)","Southern Sotho (st)","Spanish (es)","Sranan Tongo (srn)","Standard Moroccan Tamazight (zgh)","Sukuma (suk)","Sumerian (sux)","Sundanese (su)","Susu (sus)","Swahili (sw)","Swati (ss)","Swedish (sv)","Swiss French (fr_CH)","Swiss German (gsw)","Swiss High German (de_CH)","Syriac (syr)","Tachelhit (shi)","Tagalog (tl)","Tahitian (ty)","Taita (dav)","Tajik (tg)","Talysh (tly)","Tamashek (tmh)","Tamil (ta)","Taroko (trv)","Tasawaq (twq)","Tatar (tt)","Telugu (te)","Tereno (ter)","Teso (teo)","Tetum (tet)","Thai (th)","Tibetan (bo)","Tigre (tig)","Tigrinya (ti)","Timne (tem)","Tiv (tiv)","Tlingit (tli)","Tok Pisin (tpi)","Tokelau (tkl)","Tongan (to)","Tornedalen Finnish (fit)","Traditional Chinese (zh_Hant)","Tsakhur (tkr)","Tsakonian (tsd)","Tsimshian (tsi)","Tsonga (ts)","Tswana (tn)","Tulu (tcy)","Tumbuka (tum)","Tunisian Arabic (aeb)","Turkish (tr)","Turkmen (tk)","Turoyo (tru)","Tuvalu (tvl)","Tuvinian (tyv)","Twi (tw)","Tyap (kcg)","Udmurt (udm)","Ugaritic (uga)","Ukrainian (uk)","Umbundu (umb)","Unknown Language (und)","Upper Sorbian (hsb)","Urdu (ur)","Uyghur (ug)","Uzbek (uz)","Vai (vai)","Venda (ve)","Venetian (vec)","Veps (vep)","Vietnamese (vi)","Volap\xfck (vo)","V\xf5ro (vro)","Votic (vot)","Vunjo (vun)","Walloon (wa)","Walser (wae)","Waray (war)","Warlpiri (wbp)","Washo (was)","Wayuu (guc)","Welsh (cy)","West Flemish (vls)","Western Frisian (fy)","Western Mari (mrj)","Wolaytta (wal)","Wolof (wo)","Wu Chinese (wuu)","Xhosa (xh)","Xiang Chinese (hsn)","Yangben (yav)","Yao (yao)","Yapese (yap)","Yemba (ybb)","Yiddish (yi)","Yoruba (yo)","Zapotec (zap)","Zarma (dje)","Zaza (zza)","Zeelandic (zea)","Zenaga (zen)","Zhuang (za)","Zoroastrian Dari (gbz)","Zulu (zu)","Zuni (zun)"],genderOptions:["Female","Male","Other"],maritalStatusOptions:["Common Law","Divorced","Married","Other","Separated","Single","Widowed"],statusInCanadaOptions:["Application in Process - Family","Application in Process - Humanitarian and Compassionate","Application in Process - Independent","Application in Process - Refugee","Canadian Citizen","Immigrant","Other","Permanent Resident - Business Class","Permanent Resident - Canadian Experience Class","Permanent Resident - Family Class","Permanent Resident -  Humanitarian and Compassionate","Permanent Resident - Live-in Caregiver","Permanent Resident - Provincial Nominee","Permanent Resident - Refugees","Permanent Resident - Skilled Worker and Skilled Trades","Temporary Resident","Visitors Visa","Work Permit"],educationLevelOptions:["College","Elementary","Post Graduate","Secondary","University"],incomeSourceOptions:["Crowd Ward","Dependent of OW/ODSP","Employment","Employment Insurance","Family Members Income","None","Ontario Disability Support Program","Ontario Works","Other","Pension","Unknown","Workers Safety and Insurance"],matchStatusOptions:["Contacted","Matched","Referred","Selected"],familyRelationshipOptions:["Child","Parent","Sibling","Spouse"],needStatusOptions:["Fulfilled","In Progress","Matched","Pending","Unmatched"],serviceTypeOptions:["External","Internal","Professional/Community","Volunteer based"],serviceSharedWithOptions:["Children's Aid Society of Toronto","Durham Children's Aid Society","Eva's Initiatives","Abrigo Centre","Adventist community services","AIDS Committee of Durham Region","Albion Neighbourhood Services","Alexandra Park Community Centre","Applegrove Community Complex","Arab Community Centre of Toronto","Aurora Food Pantry","Barbra Schlifer Commemorative Clinic","Bluffs Food Bank","Boost Child & Youth Advocacy Centre","Brock Community Food Bank","Central Toronto Youth Services","Covenant House Toronto","Durham Rape Crisis Centre","Durham Youth Housing and Support Services","Horizons for Youth","Kababayan Multicultural Centre","Markham Food Bank","Parkdale Community Food Bank","Pediatric Oncology Group of Ontario","Private","Public"],provinceOptions:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan"],ACTION_SUCCESS:"ACTION_SUCCESS",ACTION_ERROR:"ACTION_ERROR"})},623:function(e,t,n){},624:function(e,t,n){},625:function(e,t,n){"use strict";n.r(t);var a=n(68),r=n(288),i=n(353),o=n(17),c=n(6),s=n(4),l=n(35),d=n.n(l),u=n(14),b="RECEIVE_CLIENT_NEEDS",j="RECEIVE_CLIENT_NEED",h="REMOVE_CLIENT_NEED",p="REQUEST_NEED",m="REQUEST_NEEDS",f="RECEIVE_NEEDS",O="RECEIVE_CLIENT_NEED_GROUP",g=" RECEIVE_CLIENT_NEED_INFO";function v(e,t,n){return{type:j,clientId:e,need:t,needGroup:n}}function x(e,t,n){return{type:g,clientId:e,needId:t,need:n}}function y(e,t,n){return function(a){var r=u.serverHost+"/clients/"+e+"/need_groups/"+t+"/";return d()(r,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return a(function(e,t){return{type:O,clientId:e,needGroup:t}}(e,t))}))}}function _(e,t,n){return function(a){var r=u.serverHost+"/clients/"+e+"/needs/"+t+"/";return d()(r,{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(n){204===n.status&&a(function(e,t){return{type:h,clientId:e,needId:t}}(e,t))}))}}function C(e,t){return function(n){n({type:p,needId:e});var a=u.serverHost+"/needs/"+e;return d()(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(e){n(x(e.client_id,e.id,e)),t(e)}))}}var S=n(19),k=n.n(S);var w=n(18),I=n.n(w),T=n(28),N=n(354),E="LOGIN_SUCCESS",A="LOGIN_FAILURE",P="LOGGED_OUT",R="UPDATE_ORGANIZATION";function D(e){return console.log("File: authActions.js -  Function: login -  Parameters: params - Values:  ",e),function(t){var n=u.serverHost+"/api-token-auth/";return fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n.non_field_errors));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){console.log("File: authActions.js -  Function: login - Step 2  json:  ",e);var n,a=Object(N.a)(e.token),r={user_id:(n=a).user_id,username:n.username,email:n.email};r.expired_at=1e3*a.exp,r.is_admin=e.is_admin;var i={id:e.provider_id,name:e.organization_name};return localStorage.setItem("jwt_token",e.token),t(function(e,t){return console.log("File: authActions.js - Function: login_success - Parameters: user, organization. - Values: ",e,t),{type:E,user:e,organization:t}}(r,i)),{status:E}})).catch((function(e){var n;return n="Failed to fetch"===e.message?"Server is unavailable due to a temporary outage.":"The username or password you entered is incorrect. Please try again.",t(function(e){return console.log("File: authActions.js -  Function: login_failure - Parameters: alert - Values:  ",e),{type:A,alert:e}}(n)),{status:A,message:n}}))}}function F(e){return function(t){t(function(e){return console.log("File: authActions.js -  Function: logged_out - Parameters: sessionExpired - Values: ",e),{type:P,alert:e&&"Your session has expired. Please login again."}}(e)),localStorage.removeItem("jwt_token")}}var L={currentUser:null,isLoggedin:!1,organization:{id:null,name:null},alert:null};var B="RECEIVE_CATEGORIES";function M(e){return function(t){var n=u.serverHost+"/categories/"+e+"/";return d()(n,{method:"GET"}).then((function(e){return e.json()})).then((function(n){return t(function(e,t){return{type:B,category_type:e,categories:t}}(e,n.categories)),n.categories}))}}var G={categories:[],loaded:!1};var z="REQUEST_CLIENT",V="RECEIVE_CLIENT",H="REQUEST_CLIENTS",q="REMOVE_CLIENT",W="RECEIVE_CLIENTS",U="SEARCH_CLIENTS";function J(e,t){return{type:V,id:e,client:t}}function K(e){return{type:W,clients:e}}function Y(e){return function(t){t(function(e){return{type:z,id:e}}(e));var n=u.serverHost+"/client/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){return t(J(e,n)),t(function(e,t,n){return{type:b,clientId:e,needs:t,needGroups:n}}(e,n.needs,n.need_groups)),n}))}}function X(){return function(e){var t;e({type:H,clients:t});var n=u.serverHost+"/clients/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return e(K(t)),t})).catch((function(e){return u.ACTION_ERROR}))}}function Z(e,t){return function(n){var a=u.serverHost+"/client/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token")),"Content-Type":"application/json"}}).then((function(t){return 204===t.status?(n(function(e){return{type:q,id:e}}(e)),u.ACTION_SUCCESS):u.ACTION_ERROR}))}}var Q="REQUEST_SERVICE",$="RECEIVE_SERVICE",ee="REQUEST_SERVICES",te="REMOVE_SERVICE",ne="RECEIVE_SERVICES",ae="SEARCH_SERVICES";function re(e,t){return{type:$,id:e,service:t}}function ie(e){return{type:ne,services:e}}function oe(e){return function(t){t(function(e){return{type:Q,id:e}}(e));var n=u.serverHost+"/service/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){t(re(e,n))}))}}function ce(){return function(e){var t;e({type:ee,services:t});var n=u.serverHost+"/services/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return e(ie(t)),t})).catch((function(e){return u.ACTION_ERROR}))}}function se(e,t,n){return function(n){var a=u.serverHost+"/service/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token")),"Content-Type":"application/json"}}).then((function(t){return 204===t.status?(n(function(e){return{type:te,id:e}}(e)),u.ACTION_SUCCESS):u.ACTION_ERROR}))}}var le="REQUEST_PROVIDERS",de="RECEIVE_PROVIDERS",ue="REMOVE_PROVIDER",be="RECEIVE_PROVIDER",je="REQUEST_PROVIDER",he="SEARCH_PROVIDERS";function pe(e,t){return console.log("receiveProvider json",t),{type:be,provider:t,id:e}}function me(e){return console.log("receiveProviders json",e),{type:de,providers:e,receivedAt:Date.now()}}function fe(e){return function(t){console.log("fetchProvider, id",e),t(function(e){return console.log("requestProvider id",e),{type:je,id:e}}(e));var n=u.serverHost+"/provider/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){return t(pe(e,n)),n}))}}function Oe(){return function(e){var t;e({type:le,providers:t});var n=u.serverHost+"/providers/";return d()(n,{method:"get",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return e(me(t)),t})).catch((function(e){return u.ACTION_ERROR}))}}function ge(e,t){return function(n){var a=u.serverHost+"/providers/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n(pe(e.id,e)),"Home Agency"===e.status&&n(function(e){return console.log("File: authActions.js -  Function: updateAuthOrganization - Parameters: provider - Values:",e),{type:R,provider:e}}(e)),t(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){t(u.ACTION_ERROR,e)}))}}function ve(e,t,n){return function(n){var a=u.serverHost+"/provider/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(t){return 204===t.status?(n(function(e){return{type:ue,id:e}}(e)),u.ACTION_SUCCESS):u.ACTION_ERROR}))}}var xe="REQUEST_GOOD",ye="RECEIVE_GOOD",_e="REQUEST_GOODS",Ce="RECEIVE_ALL_GOODS",Se="REMOVE_GOOD",ke="RECEIVE_GOODS",we="GOOD_ERROR",Ie="GOOD_SUCCESS",Te="SEARCH_GOODS";function Ne(e,t){return{type:ye,id:e,good:t}}function Ee(e){return{type:ke,goods:e}}function Ae(e){return function(t){t(function(e){return{type:xe,id:e}}(e));var n=u.serverHost+"/good/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){t(Ne(e,n))}))}}function Pe(){return function(e){var t;e({type:_e,goods:t});var n=u.serverHost+"/goods/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return e(Ee(t)),t}))}}function Re(e,t){return function(n){var a=u.serverHost+"/good/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token")),"Content-Type":"application/json"}}).then((function(t){return 204===t.status?(n(function(e){return{type:Se,id:e}}(e)),Ie):we}))}}var De=Object(a.c)({services:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredServices:[],servicesLoaded:!1,byId:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case ee:return Object(s.a)(Object(s.a)({},r),{},{servicesLoaded:!1});case ne:console.log("reducer check: ",i);var l=k.a.keyBy(i.services,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},r.byId),l),Object(s.a)(Object(s.a)({},r),{},{byId:e,servicesLoaded:!0,index:i.services,filteredServices:i.services});case te:return a=k.a.clone(r.index),k.a.remove(a,(function(e){return e.id===i.id})),Object(s.a)(Object(s.a)({},r),{},{index:a,filteredServices:a});case Q:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,{servicesLoaded:!1})),Object(s.a)(Object(s.a)({},r),{},{byId:e});case $:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,Object(s.a)(Object(s.a)({},i.service),{},{servicesLoaded:!0}))),Object(s.a)(Object(s.a)({},r),{},{byId:e});case ae:if(""===i.sortType||"name"===i.sortType?(console.log("service reducer :",Object(o.a)(r.index)),t=Object(o.a)(r.index).sort((function(e,t){return(e.name?e.name.toLowerCase():"").localeCompare(t.name?t.name.toLowerCase():"")}))):"provider"===i.sortType?t=Object(o.a)(r.index).sort((function(e,t){return(e.provider.profile.first_name?e.provider.profile.first_name.toLowerCase():"").localeCompare(t.provider.profile.first_name?t.provider.profile.first_name.toLowerCase():"")})):"description"===i.sortType?t=Object(o.a)(r.index).sort((function(e,t){return(e.desc?e.desc:"").localeCompare(t.desc?t.desc:"")})):"category"===i.sortType&&(t=Object(o.a)(r.index).sort((function(e,t){return(e.category?e.category:"").localeCompare(t.category?t.category:"")}))),""===i.searchValue)return{index:t,filteredServices:t,servicesLoaded:!0};if("name"===i.searchType)return n=t.filter((function(e){return(e.name?e.name.toLowerCase():"").includes(i.searchValue)})),console.log("service reducer return: ",{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0}),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("provider"===i.searchType)return n=t.filter((function(e){return(e.provider.company?e.provider.company.includes(i.searchValue):"")||(e.provider.profile.first_name?e.provider.profile.first_name.toLowerCase():"")+" "+(e.provider.profile.last_name?e.provider.profile.last_name.toLowerCase().includes(i.searchValue):"")})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("description"===i.searchType)return n=t.filter((function(e){return e.desc.includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("category"===i.searchType)return n=t.filter((function(e){return e.category.includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};break;default:return r}},clients:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredClients:[],clientsLoaded:!1,byId:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case H:return console.log(),Object(s.a)(Object(s.a)({},r),{},{clientsLoaded:!1});case W:console.log(W);var l=k.a.keyBy(i.clients,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},r.byId),l),Object(s.a)(Object(s.a)({},r),{},{byId:e,clientsLoaded:!0,index:i.clients,filteredClients:i.clients});case q:return n=k.a.clone(r.index),k.a.remove(n,(function(e){return e.id===i.id})),Object(s.a)(Object(s.a)({},r),{},{index:n,filteredClients:n});case z:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,{clientsLoaded:!1})),Object(s.a)(Object(s.a)({},r),{},{byId:e});case V:return console.log(V),e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,Object(s.a)(Object(s.a)({},i.client),{},{clientsLoaded:!0}))),Object(s.a)(Object(s.a)({},r),{},{byId:e});case U:if(""===i.sortType||"first_name"===i.sortType?(console.log("client reducer :",Object(o.a)(r.index)),a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))):"-first_name"===i.sortType?a=(a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))).reverse():"last_name"===i.sortType?a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").localeCompare(t.profile.last_name?t.profile.last_name.toLowerCase():"")})):"-last_name"===i.sortType&&(a=(a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").localeCompare(t.profile.last_name?t.profile.last_name.toLowerCase():"")}))).reverse()),""===i.searchValue)return{index:a,filteredClients:a,clientsLoaded:!0};if("first_name"===i.searchType)return console.log("clients: ",a),t=a.filter((function(e){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").includes(i.searchValue)})),console.log("client reducer return: ",{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0}),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};if("last_name"===i.searchType)return t=a.filter((function(e){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};if("address"===i.searchType)return t=a.filter((function(e){return(e.address?e.address.toLowerCase():"").includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};break;default:return r}},goods:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredGoods:[],goodsLoaded:!1,byId:{}},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case _e:return Object(s.a)(Object(s.a)({},a),{},{goodsLoaded:!1});case ke:var i=k.a.keyBy(r.goods,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},a.byId),i),Object(s.a)(Object(s.a)({},a),{},{byId:e,goodsLoaded:!0,index:r.goods,filteredGoods:r.goods});case Ce:return e=k.a.keyBy(r.goods,(function(e){return e.id})),Object(s.a)(Object(s.a)({},a),{},{byId:e,goodsLoaded:!0,index:r.goods,filteredGoods:r.goods});case Se:return delete(e=k.a.clone(a.byId))[r.id],Object(s.a)(Object(s.a)({},a),{},{byId:e});case xe:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.id,{goodsLoaded:!1})),Object(s.a)(Object(s.a)({},a),{},{byId:e});case ye:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.id,Object(s.a)(Object(s.a)({},r.good),{},{goodsLoaded:!0}))),Object(s.a)(Object(s.a)({},a),{},{byId:e});case Te:if(""===r.sortType?t=Object(o.a)(a.index):"name"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.name.localeCompare(t.name)})):"provider"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.provider.profile.first_name.localeCompare(t.provider.profile.first_name)})):"description"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.desc.localeCompare(t.desc)})):"category"===r.sortType&&(t=Object(o.a)(a.index).sort((function(e,t){return e.category.localeCompare(t.category)}))),""===r.searchValue)return{index:t,filteredGoods:t,goodsLoaded:!0};if("name"===r.searchType)return n=t.filter((function(e){return e.name.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("provider"===r.searchType)return n=t.filter((function(e){return e.provider.company.includes(r.searchValue)||(e.provider.profile.first_name+" "+e.provider.profile.last_name).includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("description"===r.searchType)return n=t.filter((function(e){return e.desc.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("category"===r.searchType)return n=t.filter((function(e){return e.category.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};break;default:return a}},needs:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},needGroups:[],clientId:null,loaded:!1,needs:[]},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case m:return Object(s.a)(Object(s.a)({},a),{},{loaded:!1});case f:return Object(s.a)(Object(s.a)({},a),{},{needs:r.needs,loaded:!0});case b:return r.needs?(e=k.a.keyBy(r.needs,(function(e){return e.id})),Object(s.a)(Object(s.a)({},a),{},{byId:e,needGroups:r.needGroups,loaded:!0,clientId:r.clientId})):Object(s.a)(Object(s.a)({},a),{},{needGroups:r.needGroups,loaded:!0,clientId:r.clientId});case j:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.need.id,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!0}))),(n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id})).indexOf(r.needGroup.id))>=0?t[n]=r.needGroup:t=[].concat(Object(o.a)(t),[r.needGroup]),Object(s.a)(Object(s.a)({},a),{},{needGroups:t,byId:e,clientId:r.clientId});case g:if(e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.needId,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!0}))),(n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id.toString()})).indexOf(r.need.need_group_id))>=0){var i=t[n].needs.map((function(e){return e.id})).indexOf(r.needId);return t[n].needs[i]=r.need,Object(s.a)(Object(s.a)({},a),{},{needGroups:t,byId:e,clientId:r.clientId})}return Object(s.a)(Object(s.a)({},a),{},{byId:e,clientId:r.clientId});case h:var l=a.byId[r.needId];return delete(e=k.a.clone(a.byId))[r.needId],n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id.toString()})).indexOf(l.need_group_id),k.a.remove(t[n].needs,(function(e){return e.id===r.needId})),0===t[n].needs.length&&t.splice(n,1),Object(s.a)(Object(s.a)({},a),{},{byId:e,needGroups:t});case p:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.needId,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!1}))),Object(s.a)(Object(s.a)({},a),{},{byId:e});case O:return n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id})).indexOf(r.needGroup.id),t[n]=r.needGroup,Object(s.a)(Object(s.a)({},a),{},{needGroups:t});default:return a}},providers:function(){var e,t,n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],byId:{},providerLoaded:!1,value:"",filteredProviders:[]},l=arguments.length>1?arguments[1]:void 0;switch(l.type){case le:return Object(s.a)(Object(s.a)({},i),{},{providerLoaded:!1});case de:var d=k.a.keyBy(l.providers,(function(e){return e.id}));return t=Object(s.a)(Object(s.a)({},i.byId),{},{providersById:d}),Object(s.a)(Object(s.a)({},i),{},{byId:t,index:l.providers,filteredProviders:l.providers,providerLoaded:!0});case ue:return e=k.a.clone(i.index),k.a.remove(e,(function(e){return e.id===l.id})),Object(s.a)(Object(s.a)({},i),{},{index:e,filteredProviders:e});case be:return t=Object(s.a)(Object(s.a)({},i.byId),{},Object(c.a)({},l.id,Object(s.a)(Object(s.a)({},l.provider),{},{providerLoaded:!0}))),l.provider.provider&&(t.providersById=Object(s.a)(Object(s.a)({},t.providersById),{},Object(c.a)({},l.id,Object(s.a)({},l.provider.provider)))),console.log("ProviderReducer.js - RECEIVE_PROVIDER state",i),console.log("ProviderReducer.js - RECEIVE_PROVIDER nextById",t),Object(s.a)(Object(s.a)({},i),{},{byId:t});case je:return t=Object(s.a)(Object(s.a)({},i.byId),{},Object(c.a)({},l.id,{providerLoaded:!1})),Object(s.a)(Object(s.a)({},i),{},{byId:t});case he:if(console.log("ProviderReducer.js  - index.providers: ",i.index.providers),console.log("ProviderReducer.js  - action: ",l),""===l.sortType||"name"===l.sortType?(console.log("ProviderReducer.js  - index.providers 2: ",i.index.providers),console.log("ProviderReducer.js  - state: ",i),a=Object(o.a)(i.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))):"type"===l.sortType&&(a=Object(o.a)(i.index).sort((function(e,t){return(e.type?e.type:"").localeCompare(t.type?t.type:"")}))),console.log("ProviderReducer.js  - sortedProviders: ",a),r="Individual"===l.displayType||"Organization"===l.displayType?a.filter((function(e){return e.type.includes(l.displayType)})):a,console.log("ProviderReducer.js  -  providersByType: ",r),""===l.searchValue)return{index:r,filteredProviders:r,providerLoaded:!0};if("name"===l.searchType)return console.log("ProviderReducer.js  - state.index: ",i.index),console.log("ProviderReducer.js  - providersByType: ",r),n=r.filter((function(e){return((e.profile.first_name?e.profile.first_name.toLowerCase():"")+" "+(e.profile.last_name?e.profile.last_name.toLowerCase():"")).includes(l.searchValue)})),console.log("providersByType -  returned data : ",{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0}),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};if("email"===l.searchType)return n=r.filter((function(e){return(e.email?e.email.toLowerCase():"").includes(l.searchValue)})),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};if("phone"===l.searchType)return n=r.filter((function(e){return(e.primary_phone_number?e.primary_phone_number:"").includes(l.searchValue)})),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};break;default:return i}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return console.log("File: authReducer.js, Function: auth, case LOGIN_SUCCESS, Parameters: state, action -> ",e,t),Object.assign({},e,{currentUser:t.user,isLoggedin:!0,organization:t.organization,alert:null});case A:return console.log("File: authReducer.js, Function: auth, case LOGIN_FAILURE, Parameters: state, action -> ",e,t),Object.assign({},e,{alert:t.alert});case P:return console.log("File: authReducer.js, Function: auth, case LOGGED_OUT, Parameters: state, action -> ",e,t),Object.assign({},e,{currentUser:null,isLoggedin:!1,organization:{id:null,name:null},alert:t.alert});case R:return console.log("File: authReducer.js, Function: auth, case UPDATE_ORGANIZATION, Parameters: state, action -> ",e,t),Object.assign({},e,{organization:{id:t.provider.id,name:t.provider.company}});default:return e}},ontology:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{needs:G,services:G,languages:G},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(s.a)(Object(s.a)({},e),{},Object(c.a)({},t.category_type,{categories:t.categories.sort(),loaded:!0}));default:return e}}}),Fe=De({},{}),Le=n(355),Be={key:"root",storage:n.n(Le).a},Me=Object(r.a)(Be,(function(e,t){return"LOGGED_OUT"===t.type&&(e=Fe),De(e,t)})),Ge=function(e){return function(t){return function(n){var a=e.getState().auth.currentUser;return"LOGGED_OUT"!==n.type&&a&&new Date>a.expired_at&&e.dispatch(F(!0)),t(n)}}};var ze=n(1),Ve=n.n(ze),He=n(49),qe=n.n(He),We=n(33),Ue=n(42),Je=n(356),Ke=n(8),Ye=n(45),Xe=n(32),Ze=n(748),Qe=n(790),$e=n(791),et=n(784),tt=n(766),nt=n(770),at=n(742),rt=n(789),it=n(763),ot=n(372),ct=n(761),st=n(780),lt=n(713),dt=n(714),ut=n(765),bt=n(378),jt=n(0),ht=(window.google||{maps:{}}).maps,pt=ht.Map,mt=ht.Marker,ft=ht.InfoWindow,Ot=ht.Size,gt=function(e,t,n,a,r){var i=new ft({content:'<div id="infoWindow-'.concat(r,'" />'),position:n.position,pixelOffset:new Ot(0,-42)});i.addListener("domready",(function(e){Object(He.render)(Object(jt.jsx)(vt,{history:a,marker:n}),document.getElementById("infoWindow-".concat(r)))}));var o=!1,c=!1;return document.querySelector("infoWindow-".concat(r," button")),t.addListener("mouseover",(function(n){i.open(e),c=!0,t.addListener("mouseout",(function(e){c&&!o&&i.close(),c&&(c=!1)})),t.addListener("click",(function(t){o=!0,i.open(e)})),window.google.maps.event.addListener(i,"closeclick",(function(e){o=!1}))})),i};function vt(e){var t=e.marker,n=e.history,a=t.title,r=t.link,i=t.content;return Object(jt.jsxs)(jt.Fragment,{children:[Object(jt.jsx)(ut.a,{style:{cursor:"pointer"},onClick:function(){return r?n.push(r):null},children:Object(jt.jsx)(tt.a,{children:a})}),Object(jt.jsx)(tt.a,{color:"textSecondary",children:i})]})}var xt=pt?function(e){var t=Object(Xe.g)(),n=Object(ze.useMemo)((function(){return{lat:43.687,lng:-79.4132}}),[]),a=e.zoom,r=void 0===a?11:a,i=e.center,o=void 0===i?n:i,c=e.markers,s=void 0===c?[]:c,l=Object(ze.useState)(null),d=Object(Ke.a)(l,2),u=d[0],b=d[1];return Object(ze.useEffect)((function(){b(new pt(document.getElementById("map"),{center:o,zoom:r}))}),[r,o]),Object(ze.useEffect)((function(){for(var e=0;e<s.length;e++){var n=s[e],a=new mt({position:n.position,map:u,title:n.title});gt(u,a,n,t,e)}}),[s,u,t]),Object(ze.useMemo)((function(){return Object(jt.jsx)(bt.a,{elevation:5,style:{width:"100%",height:"40vh",marginTop:5},id:"map"})}),[])}:function(){return console.info("Google maps javascript is not loaded. Are you offline?"),Object(jt.jsx)(bt.a,{elevation:5,style:{width:"100%",height:"40vh",marginTop:5}})},yt=n(700),_t=n(767),Ct=n(768),St=n(64),kt=n(769);function wt(e){var t=e.show,n=e.onHide,a=e.submit;return Object(jt.jsxs)(yt.a,{open:t,onClose:n,children:[Object(jt.jsx)(_t.a,{id:"form-dialog-title",children:"Upload CSV"}),Object(jt.jsx)(Ct.a,{children:Object(jt.jsx)(St.c,{type:"file"})}),Object(jt.jsxs)(kt.a,{children:[Object(jt.jsx)(nt.a,{color:"primary",onClick:a,children:"Submit"}),Object(jt.jsx)(nt.a,{onClick:n,children:"Close"})]})]})}var It=n(771),Tt=["show","onHide","title","objectId"];function Nt(e){var t=e.show,n=e.onHide,a=e.title,r=e.objectId,i=Object(Ye.a)(e,Tt),o=Object(ze.useState)({reason:""}),c=Object(Ke.a)(o,2),s=c[0],l=c[1];return Object(jt.jsxs)(yt.a,{open:t,onClose:n,fullWidth:!0,children:[Object(jt.jsx)(_t.a,{children:a}),Object(jt.jsx)(Ct.a,{children:Object(jt.jsx)(It.a,{variant:"standard",value:s.reason,label:"Reason",onChange:function(e){return l({reason:e.target.value})},fullWidth:!0})}),Object(jt.jsxs)(kt.a,{children:[Object(jt.jsx)(nt.a,{color:"secondary",onClick:function(){return i.delete(r,s)},children:"Confirm"}),Object(jt.jsx)(nt.a,{onClick:n,children:"Close"})]})]})}var Et=n(777),At=n(708),Pt=n(707),Rt=n(709),Dt=n(710),Ft=n(711);function Lt(e){var t=e.urlPrefix,n=e.objectId,a=e.handleDelete,r=e.hideViewOption,i=Object(Xe.g)(),o=Object(ze.useState)(null),c=Object(Ke.a)(o,2),s=c[0],l=c[1],d=Boolean(s),u=function(){l(null)},b=function(e){return function(){i.push(e)}};return Object(jt.jsxs)("div",{children:[Object(jt.jsx)(Et.a,{onClick:function(e){l(e.currentTarget)},size:"small",children:Object(jt.jsx)(Pt.a,{})}),Object(jt.jsxs)(ot.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:u,PaperProps:{style:{maxHeight:216,width:150}},children:[!r&&Object(jt.jsxs)(ct.a,{onClick:b("/".concat(t,"/").concat(n)),children:[Object(jt.jsx)(At.a,{children:Object(jt.jsx)(Rt.a,{fontSize:"small",color:"primary"})}),Object(jt.jsx)(tt.a,{variant:"inherit",children:"View"})]}),Object(jt.jsxs)(ct.a,{onClick:b("/".concat(t,"/").concat(n,"/edit")),children:[Object(jt.jsx)(At.a,{children:Object(jt.jsx)(Dt.a,{fontSize:"small",color:"primary"})}),"Edit"]}),Object(jt.jsxs)(ct.a,{onClick:function(){u(),a(n)},children:[Object(jt.jsx)(At.a,{children:Object(jt.jsx)(Ft.a,{fontSize:"small",color:"secondary"})}),"Delete"]})]})]})}var Bt=n(630),Mt=n(778);function Gt(e){var t=e.fetchData,n=e.deleteItem,a=e.generateMarkers,r=e.type,i=e.nameFormatter,c=e.columnsWithoutOptions,l=r.charAt(0).toUpperCase()+r.slice(1),d=Object(We.c)(),b=Object(Xe.g)(),j=Object(ze.useState)({showUploadDialog:!1,showDeleteDialog:!1,deleteId:null,deleteDialogTitle:"",data:[],pageNumber:1,rowsPerPage:10,loading:!0}),h=Object(Ke.a)(j,2),p=h[0],m=h[1];Object(ze.useEffect)((function(){d(t()).then((function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e,loading:!1})}))}))}),[d,t]);var f=function(){m((function(e){return Object(s.a)(Object(s.a)({},e),{},{showUploadDialog:!1,showDeleteDialog:!1})}))},O=Object(ze.useCallback)(function(){var e=Object(T.a)(I.a.mark((function e(t,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n(t,a));case 2:e.sent===u.ACTION_ERROR||(f(),m((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:e.data.filter((function(t){return t.id!==e.deleteId}))})})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[d,n]),g=Object(ze.useCallback)((function(e){var t=p.data[e];m((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!0,deleteId:t.id,deleteDialogTitle:"Delete ".concat(l," ")+i(t)})}))}),[p.data,i,l]),v=Object(ze.useMemo)((function(){return[].concat(Object(o.a)(c),[{label:" ",body:function(e){var t=e.id;return Object(jt.jsx)(Lt,{urlPrefix:r,objectId:t,handleDelete:g})}}])}),[g,c,r]),x=Object(s.a)({customToolbar:Object(jt.jsx)(Da,{type:r,handleAdd:function(){return b.push("/".concat(r,"/new"))},handleUpload:function(){return m((function(e){return Object(s.a)(Object(s.a)({},e),{},{showUploadDialog:!0})}))}}),onDelete:function(){var e=Object(T.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(t),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChangePage:function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{pageNumber:e})}))},onChangeRowsPerPage:function(e){return m((function(t){return Object(s.a)(Object(s.a)({},t),{},{rowsPerPage:e})}))}},e.tableOptions),y=Object(ze.useMemo)((function(){return a(p.data,p.pageNumber,p.rowsPerPage)}),[a,p.data,p.pageNumber,p.rowsPerPage]);return p.loading?Object(jt.jsx)(Fa,{message:"Loading ".concat(l,"...")}):Object(jt.jsx)(Bt.a,{in:!0,children:Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)(Ea,Object(s.a)({columns:v,data:p.data,title:l},x)),Object(jt.jsx)(wt,{show:p.showUploadDialog,onHide:f,submit:function(e){}}),Object(jt.jsx)(Nt,{contentType:"Provider",objectId:p.deleteId,title:p.deleteDialogTitle,show:p.showDeleteDialog,onHide:f,delete:O}),Object(jt.jsx)(xt,{markers:y})]})})}var zt=n(758),Vt=n(779),Ht=n(746),qt=n(747),Wt=Object(at.a)((function(e){return{buttons:{width:"80%",margin:"auto",paddingTop:20,paddingBottom:40},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},alert:{width:"80%",margin:"auto"},title:{color:"#4b4b4b",width:"80%",margin:"auto"}}}));function Ut(e){var t=e.stepNames,n=e.handleFinish,a=e.getStepContent,r=e.error,i=e.title,o=Wt(),c=Ve.a.useState(0),s=Object(Ke.a)(c,2),l=s[0],d=s[1];return Object(jt.jsxs)("div",{children:[Object(jt.jsx)(zt.a,{alternativeLabel:!0,nonLinear:!0,activeStep:l,children:t.map((function(e,t){return Object(jt.jsx)(Vt.a,{children:Object(jt.jsx)(Ht.a,{onClick:(n=t,function(){d(n)}),children:e})},e);var n}))}),Object(jt.jsxs)("div",{children:[i&&Object(jt.jsx)(tt.a,{color:"textSecondary",variant:"h6",className:o.title,children:i}),r&&r.map((function(e,t){return Object(jt.jsx)(qt.a,{className:o.alert,severity:"error",children:e},t)})),a(l),Object(jt.jsxs)("div",{className:o.buttons,children:[Object(jt.jsx)(nt.a,{disabled:0===l,onClick:function(){d((function(e){return e-1}))},className:o.backButton,children:"Back"}),Object(jt.jsx)(nt.a,{variant:"contained",color:"primary",onClick:function(){l!==t.length-1?d((function(e){return e+1})):n()},children:l===t.length-1?"Finish":"Next"})]})]})]})}var Jt=Object(at.a)((function(e){return{root:{paddingTop:16},paper:{display:"inline-block",position:"relative",paddingLeft:28,paddingBottom:20,minWidth:380}}})),Kt=function(e){var t=e.label,n=e.children,a=Jt();return Object(jt.jsxs)("div",{className:t&&a.root,children:[t&&Object(jt.jsx)(tt.a,{color:"textSecondary",variant:"body1",gutterBottom:!0,children:t}),Object(jt.jsx)(bt.a,{variant:"outlined",className:a.paper,children:n})]})},Yt=n(705),Xt=n(741),Zt=n(373),Qt=n(374),$t=n(634),en=n(757),tn=n(749),nn=["type","onChange"],an="yyyy-MM-dd",rn=Object(at.a)((function(e){return{textField:{minWidth:350},formControl:{position:"relative",top:16}}}));function on(e){var t=e.type,n=e.onChange,a=Object(Ye.a)(e,nn),r=rn(),i=Object(ze.useState)((function(){return"date"===t?a.value?Object(Zt.a)(a.value,an,new Date):null:a.value||""})),o=Object(Ke.a)(i,2),c=o[0],l=o[1],d=Object(ze.useCallback)((function(e){var a=e.target.value;l(a),n({target:{value:"date"===t?Object(Qt.a)(a,an):a}})}),[n,t]);return"date"===t?Object(jt.jsx)("div",{children:Object(jt.jsx)($t.b,{dateAdapter:Xt.a,children:Object(jt.jsx)(en.a,Object(s.a)({value:c,inputFormat:"yyyy-MM-dd",onChange:function(e){l(e);try{n({target:{value:Object(Qt.a)(e,an)}})}catch(t){}},renderInput:function(e){return Object(jt.jsx)(It.a,Object(s.a)(Object(s.a)({},e),{},{className:r.textField,margin:"normal"}))}},a))})}):"time"===t?Object(jt.jsx)("div",{children:Object(jt.jsx)($t.b,{dateAdapter:Xt.a,children:Object(jt.jsx)(tn.a,Object(s.a)({value:c,onChange:function(e){return d({target:{value:e}})},renderInput:function(e){return Object(jt.jsx)(It.a,Object(s.a)(Object(s.a)({},e),{},{className:r.textField,margin:"normal"}))}},a))})}):Object(jt.jsx)("div",{children:Object(jt.jsx)(It.a,Object(s.a)(Object(s.a)({InputLabelProps:{classes:{formControl:r.formControl}},className:r.textField,type:t},a),{},{onChange:d,value:c}))})}var cn=n(774),sn=n(775),ln=n(750),dn=n(776),un="UN_SET",bn={label:"",type:"text",component:on,validator:null,required:!1},jn=["label","InputLabelProps","className","options","noDefaultStyle","noEmpty","controlled","defaultOptionTitle","onChange","formControlProps","helperText"],hn=Object(at.a)((function(e){return{formControl:{margin:"16px 0 0",minWidth:350}}}));function pn(e){var t=e.label,n=e.InputLabelProps,a=e.className,r=e.options,i=e.noDefaultStyle,o=e.noEmpty,c=e.controlled,l=e.defaultOptionTitle,d=void 0===l?"Not Set":l,u=e.onChange,b=e.formControlProps,j=e.helperText,h=Object(Ye.a)(e,jn),p=hn(),m=Object(ze.useState)(o?"":un),f=Object(Ke.a)(m,2),O=f[0],g=f[1],v=Object(ze.useCallback)((function(e){var t=e.target.value;g(t),u({target:{value:t===un?void 0:t}})}),[u]);return Object(ze.useEffect)((function(){g(void 0===h.value?un:h.value)}),[h.value]),Object(jt.jsx)("div",{children:Object(jt.jsxs)(cn.a,Object(s.a)(Object(s.a)({className:i||a?a:p.formControl,error:h.error,required:h.required},b),{},{children:[t&&Object(jt.jsx)(sn.a,Object(s.a)(Object(s.a)({},n),{},{children:t})),Object(jt.jsxs)(ln.a,Object(s.a)(Object(s.a)({margin:"none"},h),{},{value:c?h.value:O,onChange:c?u:v,children:[!o&&Object(jt.jsx)(ct.a,{value:un,children:d},"key0"),Array.isArray(r)?r.map((function(e){return Object(jt.jsx)(ct.a,{value:e,children:e},e)})):Object.entries(r).map((function(e){var t=Object(Ke.a)(e,2),n=t[0],a=t[1];return Object(jt.jsx)(ct.a,{value:n,children:a},n)}))]})),j&&Object(jt.jsx)(dn.a,{children:j})]}))})}function mn(e){var t=e.address,n=e.required,a=e.errMsg,r=void 0===a?{}:a,i=function(e){return function(n){return t[e]=n.target.value}};return Object(jt.jsxs)("div",{children:[Object(jt.jsx)(on,{label:"Apt. #",type:"text",value:t.apt_number,onChange:i("apt_number"),error:!!r.apt_number,helperText:r.apt_number}),Object(jt.jsx)(on,{label:"Street Address",type:"text",value:t.street_address,onChange:i("street_address"),required:n,error:!!r.street_address,helperText:r.street_address}),Object(jt.jsx)(on,{label:"City",type:"text",value:t.city,onChange:i("city"),required:n,error:!!r.city,helperText:r.city}),Object(jt.jsx)(pn,{label:"Province",value:t.province,options:u.provinceOptions,onChange:i("province"),required:n,error:!!r.province,helperText:r.province}),Object(jt.jsx)(on,{label:"Postal Code",type:"text",value:t.postal_code,onChange:i("postal_code"),required:n,error:!!r.postal_code,helperText:r.postal_code})]})}for(var fn={start_time:"",end_time:""},On={Monday:[Object(s.a)({},fn)],Tuesday:[Object(s.a)({},fn)],Wednesday:[Object(s.a)({},fn)],Thursday:[Object(s.a)({},fn)],Friday:[Object(s.a)({},fn)],Saturday:[Object(s.a)({},fn)],Sunday:[Object(s.a)({},fn)]},gn={},vn=1;vn<=12;vn++)for(var xn=vn/10<1?"0"+vn:vn,yn=0;yn<=45;yn+=30){var _n=xn+":"+(0===yn?"00":yn);gn[100*vn+yn]=_n+" AM"}for(var Cn=1;Cn<=12;Cn++)for(var Sn=0;Sn<=45;Sn+=30){var kn=(Cn/10<1?"0"+Cn:Cn)+":"+(0===Sn?"00":Sn);gn[100*(Cn+12)+Sn]=kn+" PM"}var wn=gn;function In(e){var t={};return k.a.each(e,(function(e){var n=e.week_day;t[n]||(t[n]=[]),t[n].push({start_time:e.start_time,end_time:e.end_time})})),t}function Tn(e){var t=e.operationHourObj;return Object(jt.jsx)("table",{className:"operation-hour-table",children:Object(jt.jsx)("tbody",{children:k.a.map(t,(function(e,t){return Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:t}),Object(jt.jsx)("td",{children:k.a.map(e,(function(e,n){return Object(jt.jsx)("div",{children:"".concat(wn[e.start_time]," -\n                        ").concat(wn[e.end_time])},t+e.start_time)}))})]},t)}))})})}var Nn=n(31),En=function(e){var t=[];if(!e)return t;var n,a=Object(Nn.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value.condition_clauses,i=[];t.push(i);var o,c=Object(Nn.a)(r);try{for(c.s();!(o=c.n()).done;){var s,l=o.value,d=(l.field_name,l.clauses),u=Object(Nn.a)(d);try{for(u.s();!(s=u.n()).done;){var b=s.value,j=b.left_operand,h=b.right_operand,p=b.operator;i.push([j,p,h])}}catch(m){u.e(m)}finally{u.f()}}}catch(m){c.e(m)}finally{c.f()}}}catch(m){a.e(m)}finally{a.f()}return t};function An(e){return'"'+e.replace(/[\\"]/g,"\\$&")+'"'}function Pn(e){try{var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(n){return[]}}var Rn=function e(t,n){return Object.entries(n).forEach((function(n){var a=Object(Ke.a)(n,2),r=a[0],i=a[1];if("object"===typeof i&&null!=i&&t[r])return e(t[r],i);null!=i&&(t[r]=i)})),t};function Dn(e){return null==e||0===e.length}function Fn(e){if(null==e)return!0;for(var t=0,n=Object.keys(e);t<n.length;t++){var a,r=n[t],i=Object(Nn.a)(e[r]);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.start_time.length>0&&o.end_time.length>0)return!1}}catch(c){i.e(c)}finally{i.f()}}return!0}function Ln(e,t){for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(Ke.a)(a[n],2),i=r[0],o=r[1];"apt_number"!==i&&(Dn(o)&&(t[i]="This field is required"))}}function Bn(e,t){var n,a=0,r=Object(Nn.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[a]={},Ln(i,t[a]),0===Object.entries(t[a]).length&&delete t[a],a++}}catch(o){r.e(o)}finally{r.f()}}function Mn(e,t,n){if(e){/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/.test(e)||(t[n]=Object(s.a)(Object(s.a)({},t[n]),{},{postal_code:"Invalid postal code! They are in the format A1A 1A1, where A is a letter and 1 is a digit"}))}}function Gn(e,t,n){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(n[t]="Invalid email! ".concat("They are in the format of jsmith@example.com"))}function zn(e,t,n){e&&!/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/.test(e)&&(n[t]="Invalid phone number! They are in the format of NPA-NXX-XXXX ".concat("where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number"))}function Vn(e,t){e.email&&Gn(e.email,"email",t),(e.primary_phone_number||e.alt_phone_number)&&(zn(e.primary_phone_number,"primary_phone_number",t),zn(e.alt_phone_number,"alt_phone_number",t))}function Hn(e,t){var n,a=0,r=Object(Nn.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[a]={},Dn(i.relationship)&&(t[a].relationship="This field is required");for(var o=0,c=Object.entries(i.person);o<c.length;o++){var s=Object(Ke.a)(c[o],2),l=s[0];Dn(s[1])&&(t[a][l]="This field is required")}0===Object.entries(t[a]).length&&delete t[a],a++}}catch(d){r.e(d)}finally{r.f()}}var qn=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Wn=/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/,Un=/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,Jn=/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,Kn={email:function(e){if(!qn.test(e))return"Invalid email! They are in the format of jsmith@example.com"},phone:function(e){if(!Wn.test(e))return"Invalid phone number! They are in the format of NPA-NXX-XXXX where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number"},password:function(e){if(!Un.test(e))return"Please enter a secure and strong password"},postalCode:function(e){if(!Jn.test(e))return"Invalid postal code! They are in the format A1A 1A1, where A is a letter and 1 is a digit"}},Yn={organization:"Organization",volunteer:"Volunteer",goods_donor:"Goods Donor",professional_service_provider:"Professional Service Provider"},Xn=Object(s.a)({client:"Client"},Yn),Zn=function(e){var t={};return Object.keys(e).forEach((function(n){t[e[n]]=n})),t}(Yn),Qn={alt_phone_number:{component:"GeneralField",type:"tel",label:"Alternative phone number"},availability:{label:"Availability"},commitment:{component:"SelectField",label:"Commitment length",options:["Short term","Six months","One year"]},company:{component:"GeneralField",type:"text",label:"Company/Organization Name"},email:{component:"GeneralField",type:"email",label:"Email"},first_name:{component:"GeneralField",type:"text",label:"First Name"},gender:{component:"SelectField",label:"Gender",options:u.genderOptions},languages:{component:"MultiSelectField",label:"Languages"},last_name:{component:"GeneralField",type:"text",label:"Last Name"},main_address:{label:"Address"},notes:{component:"GeneralField",type:"text",label:"Additional notes "},other_addresses:{label:"Other Addresses"},own_car:{component:"RadioField",label:"Own a car?",options:{Yes:!0,No:!1}},primary_contact:{label:"Primary Contact"},primary_phone_number:{component:"GeneralField",type:"tel",label:"Primary phone number"},reference1_email:{component:"GeneralField",type:"text",label:"Reference 1 Email"},reference1_name:{component:"GeneralField",type:"text",label:"Reference 1 Name"},reference1_phone:{component:"GeneralField",type:"text",label:"Reference 1 phone"},reference2_email:{component:"GeneralField",type:"text",label:"Reference 2 Email"},reference2_name:{component:"GeneralField",type:"text",label:"Reference 2 Name"},reference2_phone:{component:"GeneralField",type:"text",label:"Reference 2 phone"},referrer:{component:"GeneralField",type:"text",label:"Referrer"},secondary_contact:{label:"Secondary Contact"},skills:{component:"GeneralField",type:"text",label:"Skills"},start_date:{component:"GeneralField",type:"date",label:"Start date for availability"},status:{component:"SelectField",label:"Status",options:["External","Internal","Home Agency"]},visibility:{component:"RadioField",label:"Allow other agencies to see this provider?",options:{Yes:!0,No:!1}},sponsor:{component:"GeneralField",type:"text",label:"Sponsor"}},$n={first_name:"",middle_name:"",last_name:"",preferred_name:"",gender:"",birth_date:null,email:"",primary_phone_number:"",alt_phone_number:""},ea={first_name:"",last_name:"",email:"",primary_phone_number:"",alt_phone_number:""},ta={street_address:"",apt_number:"",city:"",province:"",postal_code:""},na={first_name:"",last_name:"",username:"",email:"",is_superuser:!1,primary_phone_number:"",alt_phone_number:"",password:""},aa=Object(at.a)((function(e){return{button:{margin:"10px 0"}}}));function ra(e){var t=e.index,n=e.location,a=e.handleRemove,r=e.required,i=e.errMsg,o=void 0===i?{}:i,c=Object(ze.useState)(!0),s=Object(Ke.a)(c,2),l=s[0],d=s[1];return Object(jt.jsxs)("div",{style:{paddingBottom:10},children:[Object(jt.jsxs)(Yt.a,{component:"legend",children:["Other address #",t+1+"  ",Object(jt.jsx)(nt.a,{onClick:function(e){a(t),d(!l)},color:"secondary",children:"Remove"})]}),Object(jt.jsx)(Kt,{children:Object(jt.jsx)(mn,{address:n,handleChange:function(e){return function(t){n[e]=t.target.value}},required:r,errMsg:o})},"main_address")]})}function ia(e){var t=e.otherLocations,n=e.clientId,a=e.required,r=e.errMsg,i=void 0===r?{}:r,o=aa(),c=Object(ze.useState)(t),l=Object(Ke.a)(c,2),d=l[0],u=l[1],b=function(){return u(!d)},j=function(e){console.log("remove",e,t[e]),t.splice(e,1),b()};return Object(jt.jsxs)("div",{children:[i&&"string"===typeof i&&Object(jt.jsx)(qt.a,{severity:"error",children:i}),t.map((function(e,r){return Object(jt.jsx)(ra,{index:r,location:e,clientId:n,handleRemove:j,required:a,size:t.length,errMsg:i[r]},r)})),Object(jt.jsx)(nt.a,{className:o.button,onClick:function(){t.push(Object(s.a)({},ta)),b()},variant:"outlined",children:"Add other address"})]})}var oa=n(628),ca=n(786),sa=n(787),la=n(788),da=n(782),ua=n(783),ba=n(753),ja=n(754),ha=n(715),pa=n(781),ma=n(764);function fa(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,i=e.numSelected,o=e.rowCount,c=e.onRequestSort,s=e.columns;return Object(jt.jsx)(pa.a,{children:Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{padding:"checkbox",children:Object(jt.jsx)(ba.a,{color:"primary",indeterminate:i>0&&i<o,checked:o>0&&i===o,onChange:n,inputProps:{"aria-label":"select all desserts"}})},0),s.map((function(e,n){return Object(jt.jsx)(ua.a,{style:e.style,sortDirection:r===(e.sortBy||e.body)&&a,children:Object(jt.jsxs)(ma.a,{active:r===(e.sortBy||e.body),direction:r===(e.sortBy||e.body)?a:"asc",onClick:(i=e.sortBy||e.body,function(e){c(e,i)}),children:[e.label,r===e.label?Object(jt.jsx)("span",{className:t.sortSpan,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},n+1);var i}))]})})}var Oa=n(785),ga=n(9),va=n(362),xa=n.n(va),ya=n(227),_a=n.n(ya),Ca=Object(at.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.mode?{color:e.palette.primary.main,backgroundColor:Object(oa.d)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Sa=function(e){var t=Ca(),n=e.numSelected,a=e.title,r=e.onDelete,i=e.customToolbar;return Object(jt.jsxs)(et.a,{className:Object(ga.a)(t.root,Object(c.a)({},t.highlight,n>0)),children:[n>0?Object(jt.jsxs)(tt.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(jt.jsx)(tt.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:a}),n>0&&Object(jt.jsx)(Oa.a,{title:"Delete",children:Object(jt.jsx)(Et.a,{"aria-label":"delete",onClick:r,size:"large",children:Object(jt.jsx)(xa.a,{})})}),Object(jt.jsx)(Oa.a,{title:"Search",children:Object(jt.jsx)(Et.a,{"aria-label":"search list",size:"large",children:Object(jt.jsx)(_a.a,{})})}),i]})},ka=["data","title","columns","height"];function wa(e,t,n,a){return(t=n(t,a)||"")<(e=n(e,a)||"")?-1:t>e?1:0}function Ia(e,t,n){return"desc"===e?function(e,a){return wa(e,a,t,n)}:function(e,a){return-wa(e,a,t,n)}}function Ta(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Na=Object(at.a)((function(e){return{paper:{width:"100%"},table:{minWidth:750},sortSpan:ha.a,tableRow:{"&.Mui-selected":{backgroundColor:Object(oa.d)(e.palette.primary.light,.85)},"&.Mui-selected:hover":{backgroundColor:Object(oa.d)(e.palette.primary.light,.8)}}}}));function Ea(e){var t=e.data,n=e.title,a=e.columns,r=e.height,i=Object(Ye.a)(e,ka),o=i.rowsPerPageOptions,c=void 0===o?[10,25,100]:o,s=i.idField,l=void 0===s?"_id":s,d=i.defaultOrderBy,u=void 0===d?a[0].sortBy||a[0].body:d,b=i.extraData,j=void 0===b?{}:b,h=i.rowStyle,p=i.onDelete,m=i.onChangePage,f=i.onChangeRowsPerPage,O=i.customToolbar,g=Na(),v=Ve.a.useState("asc"),x=Object(Ke.a)(v,2),y=x[0],_=x[1],C=Ve.a.useState((function(){return u})),S=Object(Ke.a)(C,2),k=S[0],w=S[1],N=Ve.a.useState([]),E=Object(Ke.a)(N,2),A=E[0],P=E[1],R=Ve.a.useState(0),D=Object(Ke.a)(R,2),F=D[0],L=D[1],B=Ve.a.useState(c[0]),M=Object(Ke.a)(B,2),G=M[0],z=M[1],V=function(){var e=Object(T.a)(I.a.mark((function e(){var n,a,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return e.next=3,p(A);case 3:n=Object(Nn.a)(A);try{for(r=function(){var e=a.value;t.splice(t.findIndex((function(t){return t._id===e})),1)},n.s();!(a=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}P([]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=F>0?Math.max(0,(1+F)*G-t.length):0;return Object(jt.jsxs)(bt.a,{elevation:5,className:g.paper,children:[Object(jt.jsx)(Sa,{title:n,numSelected:A.length,onDelete:V,customToolbar:O}),Object(jt.jsx)(ca.a,{style:{maxHeight:r||"calc(100vh - 228px)"},children:Object(jt.jsxs)(sa.a,{stickyHeader:!0,className:g.table,size:"medium",children:[Object(jt.jsx)(fa,{classes:g,numSelected:A.length,order:y,orderBy:k,onSelectAllClick:function(e){e.target.checked?P(t.map((function(e){return e[l]}))):P([])},onRequestSort:function(e,t){_(k===t&&"asc"===y?"desc":"asc"),w((function(){return t}))},rowCount:t.length,columns:a}),Object(jt.jsxs)(la.a,{children:[Ta(t,Ia(y,k,j)).slice(F*G,F*G+G).map((function(e){var t=e[l],n=function(e){return-1!==A.indexOf(e)}(t);return Object(jt.jsxs)(da.a,{className:g.tableRow,hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,style:h&&h(e),children:[Object(jt.jsx)(ua.a,{padding:"checkbox",children:Object(jt.jsx)(ba.a,{color:"primary",onClick:function(e){return function(e,t){var n=A.indexOf(t),a=[];-1===n?a=a.concat(A,t):0===n?a=a.concat(A.slice(1)):n===A.length-1?a=a.concat(A.slice(0,-1)):n>0&&(a=a.concat(A.slice(0,n),A.slice(n+1))),P(a)}(0,t)},checked:n})},0),a.map((function(t,n){return Object(jt.jsx)(ua.a,{style:t.style,children:t.body(e,j)},n+1)}))]},t)})),H>0&&Object(jt.jsx)(da.a,{style:{height:53*H},children:Object(jt.jsx)(ua.a,{colSpan:6})})]})]})}),Object(jt.jsx)(ja.a,{rowsPerPageOptions:c,component:"div",count:t.length,rowsPerPage:G,page:F,onPageChange:function(e,t){L(t),m(t)},onRowsPerPageChange:function(e){var t=parseInt(e.target.value,10);z(t),L(0),m(0),f(t)}})]})}var Aa=["className","color"],Pa=Object(at.a)((function(e){return{link:{color:"inherit",textDecorationLine:"none"},linkWithHover:{fontWeight:500,color:"inherit","&:hover":{textDecorationLine:"underline",color:"#2f5ac7"}},progress:{margin:e.spacing(2),marginTop:50},chipButton:{paddingLeft:6,marginLeft:6}}}));function Ra(e){var t=e.className,n=void 0===t?"":t,a=e.color,r=Object(Ye.a)(e,Aa),i=Pa();return Object(jt.jsx)(Ue.b,Object(s.a)(Object(s.a)({},r),{},{className:a?i.linkWithHover:i.link+" "+n}))}function Da(e){var t=e.handleAdd,n=e.handleUpload,a=e.type,r=Object(Xe.g)(),i=Pa(),o=Object(ze.useState)(null),c=Object(Ke.a)(o,2),s=c[0],l=c[1],d=Boolean(s);return Object(jt.jsxs)(jt.Fragment,{children:[Object(jt.jsx)(it.a,{onClick:n,color:"default",icon:Object(jt.jsx)(lt.a,{}),label:"Upload",variant:"outlined",className:i.chipButton}),Object(jt.jsx)(it.a,{onClick:"providers"===a?function(e){l(e.currentTarget)}:t,color:"primary",icon:Object(jt.jsx)(dt.a,{}),label:"Add",variant:"outlined",className:i.chipButton}),"providers"===a&&Object(jt.jsx)(ot.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:function(){l(null)},children:Object.entries(Yn).map((function(e){var t,n=Object(Ke.a)(e,2),a=n[0],i=n[1];return Object(jt.jsx)(ct.a,{onClick:(t="/providers/".concat(a,"/new"),function(){r.push(t)}),children:i},i)}))})]})}function Fa(e){var t=e.message,n=void 0===t?"Loading Components...":t,a=Pa();return Object(jt.jsxs)("div",{style:{textAlign:"center"},children:[Object(jt.jsx)(st.a,{className:a.progress}),Object(jt.jsx)(tt.a,{variant:"subtitle2",color:"textSecondary",children:n})]})}var La=["to"],Ba=Object(rt.a)({indicator:{display:"flex",justifyContent:"center",backgroundColor:"#ccc",transition:"none"}})((function(e){return Object(jt.jsx)(Ze.a,Object(s.a)({},e))})),Ma=Object(rt.a)((function(e){return{root:{textTransform:"none",fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.pxToRem(15),marginRight:e.spacing(1),minWidth:60}}}))((function(e){e.to;var t=Object(Ye.a)(e,La);return Object(jt.jsx)(Qe.a,Object(s.a)({},t))})),Ga=Object(at.a)((function(e){return{appBar:{backgroundColor:"rgb(39, 44, 52)"},title:{paddingRight:20,whiteSpace:"pre",color:"white",textDecorationLine:"none"},rightButtons:{marginLeft:"auto",textDecorationLine:"none",whiteSpace:"pre"}}}));var za=function(){var e=Ga(),t=Object(Xe.g)(),n=Object(We.c)(),a=Object(We.d)((function(e){return e.auth})).isLoggedin,r=["/clients","/services","/goods","/providers","/reporting"],i=Object(ze.useState)(-1!==r.indexOf(t.location.pathname)&&t.location.pathname),o=Object(Ke.a)(i,2),c=o[0],s=o[1];return Object(ze.useEffect)((function(){s(-1!==r.indexOf(t.location.pathname)&&t.location.pathname)}),[t.location.pathname,r]),Object(jt.jsx)($e.a,{position:"fixed",className:e.appBar,children:Object(jt.jsxs)(et.a,{variant:"dense",children:[Object(jt.jsx)(Ra,{to:a?"/dashboard":"/",className:e.title,children:Object(jt.jsx)(tt.a,{variant:"h6",children:"Dashboard"})}),a?Object(jt.jsxs)(Ba,{value:c,onChange:function(e,n){s(n),t.push(n)},variant:"scrollable",children:[Object(jt.jsx)(Ma,{label:"Clients",value:"/clients"}),Object(jt.jsx)(Ma,{label:"Services",value:"/services"}),Object(jt.jsx)(Ma,{label:"Goods",value:"/goods"}),Object(jt.jsx)(Ma,{label:"Providers",value:"/providers"}),Object(jt.jsx)(Ma,{label:"Reporting",value:"/reporting"})]}):null,Object(jt.jsx)(nt.a,{color:"inherit",className:e.rightButtons,onClick:function(){return a?n(F()):t.push("/login")},children:a?"Log out":"Login"})]})})},Va=function(){return Object(jt.jsx)("div",{className:"footer",children:Object(jt.jsxs)(tt.a,{variant:"caption",children:[Object(jt.jsx)(ut.a,{href:"http://csse.utoronto.ca/",target:"_blank",style:{color:"#ababab"},children:"Centre for Social Services Engineering"}),", University of Toronto"]})})},Ha=n(371),qa=n(737),Wa=n(141),Ua=n(738),Ja=n(739),Ka=n(797),Ya=n(22),Xa=n(24),Za=n(30),Qa=n(29),$a=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(){return Object(Ya.a)(this,n),t.apply(this,arguments)}return Object(Xa.a)(n,[{key:"render",value:function(){return Object(jt.jsx)("div",{className:"landing",children:Object(jt.jsx)("div",{className:"container",children:Object(jt.jsx)("div",{className:"intro-placeholder"})})})}}]),n}(ze.Component),er=n(762),tr=Object(at.a)((function(){return{container:{paddingTop:80,maxWidth:"500px"},button:{width:300}}}));var nr=function(){var e=tr();return Object(jt.jsx)(Mt.a,{className:e.container,children:Object(jt.jsxs)(er.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object(jt.jsx)(er.a,{item:!0,children:Object(jt.jsx)(tt.a,{variant:"h5",children:"Log in to your Dashboard"})}),Object(jt.jsx)(er.a,{item:!0,children:Object(jt.jsx)(Ra,{to:"/login-pane",children:Object(jt.jsx)(nt.a,{variant:"outlined",className:e.button,children:"Sign in with SNM account"})})}),Object(jt.jsx)(er.a,{item:!0,children:Object(jt.jsx)(Ra,{to:"/login-pane",children:Object(jt.jsx)(nt.a,{color:"primary",variant:"outlined",className:e.button,children:"Facebook"})})}),Object(jt.jsx)(er.a,{item:!0,children:Object(jt.jsx)(Ra,{to:"/login-pane",children:Object(jt.jsx)(nt.a,{color:"secondary",variant:"outlined",className:e.button,children:"Google"})})})]})})},ar=n(716),rr=Object(at.a)((function(){return{container:{paddingTop:80,maxWidth:"500px"},paper:{padding:30},item:{marginTop:20},button:{marginTop:30,marginBottom:20},link:{marginTop:10,color:"#007dff"}}}));var ir=function(){var e=rr(),t=Object(Xe.g)(),n=Object(We.c)(),a=Object(ze.useState)({username:"",password:"",alert:""}),r=Object(Ke.a)(a,2),i=r[0],o=r[1],l=function(e){return function(t){var n=t.target.value;o((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e,n))}))}},d=function(){var e=Object(T.a)(I.a.mark((function e(){var a,r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(D(i));case 2:a=e.sent,r=a.status,c=a.message,r===E?t.push("/dashboard"):o((function(e){return Object(s.a)(Object(s.a)({},e),{},{alert:c})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(jt.jsx)(Mt.a,{className:e.container,onKeyPress:function(e){"Enter"===e.key&&d()},children:Object(jt.jsxs)(bt.a,{elevation:5,className:e.paper,children:[Object(jt.jsx)(tt.a,{variant:"h6",children:"Sign in"}),Object(jt.jsx)(It.a,{fullWidth:!0,variant:"outlined",label:"Username",type:"text",value:i.username,onChange:l("username"),className:e.item}),Object(jt.jsx)("br",{}),Object(jt.jsx)(It.a,{fullWidth:!0,variant:"outlined",label:"Password",type:"password",value:i.password,onChange:l("password"),className:e.item}),Object(jt.jsx)("br",{}),Object(jt.jsx)(tt.a,{variant:"caption",children:Object(jt.jsx)("span",{style:{color:"red"},children:i.alert})}),Object(jt.jsx)("br",{}),Object(jt.jsx)(nt.a,{variant:"outlined",color:"primary",className:e.button,onClick:d,children:" Log in"}),Object(jt.jsx)(ar.a,{}),Object(jt.jsx)(Ra,{to:"/login-pane",children:Object(jt.jsx)(tt.a,{variant:"body2",className:e.link,children:"Don't have an account?"})}),Object(jt.jsx)(Ra,{to:"/login-pane",children:Object(jt.jsx)(tt.a,{variant:"body2",className:e.link,children:"Forget password?"})})]})})},or=n(717),cr=n(718),sr=n(719),lr=n(720),dr=Object(at.a)((function(){return{container:{paddingTop:80,textAlign:"center",maxWidth:600},button:{width:400,height:50,textTransform:"none",margin:5}}}));function ur(e){var t=e.to,n=e.text,a=e.icon,r=dr();return Object(jt.jsx)(Ra,{to:t,children:Object(jt.jsx)(nt.a,{variant:"outlined",className:r.button,startIcon:a,size:"large",children:n})})}var br=function(){var e=dr(),t=Object(We.d)((function(e){return e.auth})),n=t.isLoggedin,a=t.currentUser,r=t.organization;return n&&a.is_admin?Object(jt.jsxs)(Mt.a,{className:e.container,children:[!r.id&&Object(jt.jsx)(ur,{to:{pathname:"/providers/organization/new",state:{status:"Home Agency"}},text:"Create organization profile for home agency",icon:Object(jt.jsx)(or.a,{})}),r.id&&Object(jt.jsx)(ur,{to:"/provider/".concat(r.id,"/edit/organization"),icon:Object(jt.jsx)(Dt.a,{}),text:"Edit organization profile for home agency"}),Object(jt.jsx)(ur,{to:"/users",icon:Object(jt.jsx)(cr.a,{}),text:"Manage Users"}),Object(jt.jsx)(ur,{to:"/admin-logs",icon:Object(jt.jsx)(sr.a,{}),text:"Admin Logs"}),Object(jt.jsx)(ur,{to:"/eligibility-criteria",icon:Object(jt.jsx)(lr.a,{}),text:"Manage Eligibility criteria"}),Object(jt.jsx)(ur,{to:"/settings/manage-fields",icon:Object(jt.jsx)(Dt.a,{}),text:"Manage Client/Provider Fields"}),Object(jt.jsx)(ur,{to:"/questions",icon:Object(jt.jsx)(Dt.a,{}),text:"Manage Questions"})]}):Object(jt.jsx)("span",{children:'"You don\'t have the permission to view this page."'})};function jr(e){if(1===Object.keys(e).length)return"Not Provided";var t="";return void 0!==e.apt_number&&(t+="".concat(e.apt_number,"-")),void 0!==e.street_address&&(t+="".concat(e.street_address,", ")),void 0!==e.city&&(t+="".concat(e.city,", ")),void 0!==e.province&&(t+="".concat(e.province,", ")),void 0!==e.postal_code&&(t+="".concat(e.postal_code)),t}function hr(e){try{var t=e.match(/^(\d{3})(\d{3})(\d{4})$/);return"("+t[1]+") "+t[2]+"-"+t[3]}catch(n){return e}}var pr="clients",mr=[{label:"First Name",body:function(e){var t=e.id,n=e.profile;return Object(jt.jsx)(Ra,{color:!0,to:"/".concat(pr,"/").concat(t),children:n.first_name})}},{label:"Last Name",body:function(e){return e.profile.last_name}},{name:"profile.primary_phone_number",label:"Phone Number",body:function(e){var t=e.profile;return t.primary_phone_number?hr(t.primary_phone_number):"Not Provided"}},{label:"Email",body:function(e){return e.profile.email}},{label:"Address",body:function(e){var t=e.profile;return t.address?jr(t.address):"Not Provided"}}];var fr=n(724),Or=n(792),gr=n(721),vr=n(722),xr=n(723),yr=n(755),_r=n(793),Cr=n(794);function Sr(e){var t=e.needGroupCategory,n=e.needs,a=e.needGroupId,r=e.status,i=e.clientId,o=e.handleShow,c=Object(We.c)(),l=Object(ze.useState)({status:r,hasUrgentNeed:wr(n)}),d=Object(Ke.a)(l,2),u=d[0],b=d[1],j=kr(),h=n.map((function(e){return Object(jt.jsxs)(bt.a,{variant:"outlined",children:[Object(jt.jsxs)(er.a,{container:!0,spacing:3,className:j.innerBox,children:[Object(jt.jsx)(er.a,{item:!0,xs:!0,children:Object(jt.jsx)(tt.a,{color:"primary",children:e.type})}),Object(jt.jsx)(er.a,{item:!0,xs:!0}),e.is_urgent&&Object(jt.jsx)(er.a,{item:!0,xs:!0,children:Object(jt.jsxs)(Or.a,{display:"flex",flexDirection:"row",children:[Object(jt.jsx)(gr.a,{className:j.highPriority}),Object(jt.jsx)(tt.a,{className:j.highPriority,children:"Urgent"})]})})]}),Object(jt.jsxs)(Or.a,{className:j.innerBox,children:[Object(jt.jsx)(Ra,{color:!0,to:"/needs/".concat(e.id),children:"Find Services/Goods"}),Object(jt.jsx)("p",{children:e.description})]}),Object(jt.jsxs)(Or.a,{display:"flex",className:j.innerBox,children:[Object(jt.jsx)(Or.a,{children:Object(jt.jsx)(Ra,{to:"/needs/".concat(e.id,"/edit"),children:Object(jt.jsx)(nt.a,{startIcon:Object(jt.jsx)(Dt.a,{}),children:"Edit"})})}),Object(jt.jsx)(Or.a,{children:Object(jt.jsx)(nt.a,{startIcon:Object(jt.jsx)(Ft.a,{}),onClick:function(){return o(e.id)},children:"Delete"})}),Object(jt.jsx)(Or.a,{children:Object(jt.jsx)(nt.a,{color:"secondary",onClick:function(){return function(){var e={category:t,status:"Unmet"===u.status?"Met":"Unmet",client_id:i,id:a};b((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:e.status})})),c(y(i,e.id,e))}()},children:u.status})})]})]},e.id)}));return Object(jt.jsx)("div",{children:Object(jt.jsxs)(yr.a,{className:j.panel,children:[Object(jt.jsxs)(_r.a,{expandIcon:Object(jt.jsx)(vr.a,{}),"aria-controls":t+"-content",id:t+"-header",children:[Object(jt.jsxs)(Or.a,{display:"flex",flexDirection:"row",className:j.column,children:[Object(jt.jsx)(tt.a,{className:j.heading,children:t}),u.hasUrgentNeed&&Object(jt.jsx)(xr.a,{className:j.highPriority})]}),Object(jt.jsx)("div",{className:j.column,children:Object(jt.jsxs)(tt.a,{className:j.secondaryHeading,children:[n.length," need(s) inside "]})})]}),Object(jt.jsx)(Cr.a,{className:j.panelDetail,children:Object(jt.jsx)(Or.a,{className:j.outerBox,children:h})})]})})}var kr=Object(at.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},secondaryHeading:{fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary},column:{flexBasis:"50%"},panel:{width:"35%"},panelDetail:{padding:0},outerBox:{width:"100%"},innerBox:{padding:"10px"},highPriority:{color:"#f44336"}}}));function wr(e){var t,n=Object(Nn.a)(e);try{for(n.s();!(t=n.n()).done;){if(t.value.is_urgent)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}function Ir(e){var t=e.clientId,n=e.needGroups,a=Object(We.c)(),r=Object(ze.useState)({show:!1,selectedId:null,needGroupData:n}),i=Object(Ke.a)(r,2),c=i[0],l=i[1],d=function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{showDeletedDiaglog:!0,selectedId:e})}))},u=c.needGroupData.map((function(e){return Object(jt.jsx)(Sr,{needGroupCategory:e.category,needs:e.needs,needGroupId:e.id,status:e.status,clientId:t,handleShow:d},e.id)})),b=function(e){var t,n=Object(o.a)(c.needGroupData),a=Object(Nn.a)(n);try{for(a.s();!(t=a.n()).done;){var r,i=t.value,s=Object(Nn.a)(i.needs);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(l.id===c.selectedId){var d=i.needs.indexOf(l);d>-1&&i.needs.splice(d,1)}}}catch(b){s.e(b)}finally{s.f()}if(0===i.needs.length){var u=n.indexOf(i);u>-1&&n.splice(u,1)}}}catch(b){a.e(b)}finally{a.f()}return n};return c?Object(jt.jsxs)("div",{children:[u,Object(jt.jsx)(Nt,{contentType:"Need",objectId:c.selectedId,show:c.showDeletedDiaglog,onHide:function(){l((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeletedDiaglog:!1})}))},delete:function(e,n){a(_(t,e,n)).then((function(e){"ERROR"===e||l((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeletedDiaglog:!1,needGroupData:b(e.selectedId)})}))}))},title:"Delete this need?"})]}):""}function Tr(e){var t=e.title,n=e.value;return n?Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{component:"th",scope:"row",children:t}),Object(jt.jsx)(ua.a,{align:"left",children:n})]},t):null}var Nr=Object(at.a)({table:{marginTop:20,marginBottom:40,width:"80%"},title:{backgroundColor:"#ececec",width:"30%"},title2:{backgroundColor:"#ececec",width:"70%"}});function Er(e){var t,n,a=e.step,r=e.client,i=e.infoFields,o=e.clientFields,c=k.a.map(i,(function(e){switch(t=o[e].label,e){case"first_name":case"middle_name":case"last_name":case"preferred_name":case"gender":case"birth_date":case"email":case"primary_phone_number":void 0===r.profile||(n=r.profile[e]);break;case"alt_phone_number":void 0===r.profile||(n=r.profile[e]?hr(r.profile[e]):"None provided");break;case"address":void 0===r.profile||(n=r[e]?jr(r[e]):"None provided");break;case"has_children":void 0===r.profile||(n=r[e]?"Yes":"No");break;case"other_languages":r.profile,n=r.profile[e];break;case"eligibilities":void 0===r.profile||(n=(r[e]||[]).join(", "));break;default:n=r[e]}return Object(jt.jsx)(Tr,{title:t,value:n},e)})),s=Nr();return Object(jt.jsx)(ca.a,{className:s.table,component:bt.a,children:Object(jt.jsxs)(sa.a,{"aria-label":"Profile table",children:[Object(jt.jsx)(pa.a,{children:Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{className:s.title,children:a}),Object(jt.jsx)(ua.a,{className:s.title2})]})}),Object(jt.jsx)(la.a,{children:c})]})})}var Ar=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(){return Object(Ya.a)(this,n),t.apply(this,arguments)}return Object(Xa.a)(n,[{key:"render",value:function(){var e=this.props.appointment;return Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{component:"th",scope:"row",children:e.category}),Object(jt.jsx)(ua.a,{align:"left",children:e.date}),Object(jt.jsx)(ua.a,{align:"left",children:"".concat(e.start_time," - ").concat(e.end_time)}),Object(jt.jsx)(ua.a,{align:"left",children:e.description})]})}}]),n}(ze.Component),Pr=(n(627),"JWT ".concat(localStorage.getItem("jwt_token")),function e(t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=Object(Ke.a)(a[n],2),i=r[0],o=r[1];null==o||"object"!==typeof o||Array.isArray(o)?t[i]=o[0]:t[i]=e(o)}return t});function Rr(e){return Dr.apply(this,arguments)}function Dr(){return(Dr=Object(T.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.serverHost+t,e.next=3,d()(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}});case 3:if(!((n=e.sent).status>=400&&n.status<600)){e.next=12;break}return a=new Error("Bad response from server: "+n.status),e.t0=Pr,e.next=9,n.json();case 9:throw e.t1=e.sent,a.json=(0,e.t0)(e.t1),a;case 12:return e.abrupt("return",n.json());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e,t,n){return Lr.apply(this,arguments)}function Lr(){return(Lr=Object(T.a)(I.a.mark((function e(t,n,a){var r,i,o,c=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>3&&void 0!==c[3]&&c[3],t=u.serverHost+t,e.next=4,d()(t,{method:a,body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}});case 4:if(!((i=e.sent).status>=400&&i.status<600)){e.next=13;break}return o=new Error("Bad response from server: "+i.status),e.t0=Pr,e.next=10,i.json();case 10:throw e.t1=e.sent,o.json=(0,e.t0)(e.t1),o;case 13:if(!r){e.next=15;break}return e.abrupt("return",i);case 15:return e.abrupt("return",i.json());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Br(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,n,"POST"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(e,t){return zr.apply(this,arguments)}function zr(){return(zr=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,n,"PUT"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,n,"DELETE",!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qr(){return Rr("/settings/get_client_fields/")}function Wr(e){return Br("/settings/update_client_fields/",e)}function Ur(){return Jr.apply(this,arguments)}function Jr(){return(Jr=Object(T.a)(I.a.mark((function e(){var t,n,a=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],e.next=3,Rr("/settings/get_provider_fields/");case 3:return n=e.sent,t&&Object.keys(n).forEach((function(e){var t=n[e].form_structure;Object.keys(t).forEach((function(e){var n=t[e];t&&Object.keys(n).forEach((function(e){"field"===n[e].type&&(n[e]=n[e].required)}))}))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kr(e){return Br("/settings/update_provider_fields/",e)}var Yr={address:{label:"Address"},alt_phone_number:{component:"GeneralField",type:"tel",label:"Alternative Phone Number"},arrival_date:{component:"GeneralField",type:"date",label:"Arrival Date (if different from landing_date)"},birth_date:{component:"GeneralField",type:"date",label:"Date of Birth"},completed_education_level:{component:"SelectField",label:"Completed Education Level",options:u.educationLevelOptions},country_of_last_residence:{component:"GeneralField",type:"text",label:"Country of Last Residence"},country_of_origin:{component:"GeneralField",type:"text",label:"Country of Origin"},current_education_level:{component:"SelectField",label:"Current Education Level",options:u.educationLevelOptions},ngo_conditions:{component:"CheckboxField",label:"NGO Conditions"},email:{component:"GeneralField",type:"email",label:"Email"},family:{label:"Family"},file_id:{component:"GeneralField",type:"text",label:"File ID"},first_language:{component:"SelectField",label:"First Language"},first_name:{component:"GeneralField",type:"text",label:"First Name"},gender:{component:"SelectField",label:"Gender",options:u.genderOptions},has_children:{component:"RadioField",label:"Do you have children?",options:{Yes:!0,No:!1}},immigration_doc_number:{component:"GeneralField",type:"text",label:"Immigration Document Number (if different from PR card)"},income_source:{component:"SelectField",label:"Income Source",options:u.incomeSourceOptions},landing_date:{component:"GeneralField",type:"date",label:"Landing Date"},last_name:{component:"GeneralField",type:"text",label:"Last Name"},marital_status:{component:"SelectField",label:"Marital Status",options:u.maritalStatusOptions},middle_name:{component:"GeneralField",type:"text",label:"Middle Name"},num_of_children:{component:"GeneralField",type:"number",label:"Number of Children"},num_of_dependants:{component:"GeneralField",type:"number",label:"Number of Dependants"},other_languages:{component:"MultiSelectField",label:"Other languages"},preferred_name:{component:"GeneralField",type:"text",label:"Preferred Name"},primary_phone_number:{component:"GeneralField",type:"tel",label:"Telephone"},pr_number:{component:"GeneralField",type:"text",label:"Permanent Residence Card Number (PR card)"},status_in_canada:{component:"SelectField",label:"Status in Canada",options:u.statusInCanadaOptions}};function Xr(){return Rr("/eligibility_criteria/")}function Zr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr("/eligibility_criteria/"+t+"/",n);case 2:if(204===e.sent.status){e.next=5;break}throw Error("Server does not return correct code.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $r=Object(at.a)((function(e){return{root:{},paper:{position:"relative",paddingLeft:28,paddingBottom:20,marginBottom:20,width:380}}}));function ei(e){var t=e.index,n=e.clientId,a=e.member,r=e.handleRemoveFamily,i=e.errMsg,o=void 0===i?{}:i,c=$r(),s=function(e){return function(t){a.person[e]=t.target.value}},l=n&&a.person.id===n;return Object(jt.jsxs)("div",{className:c.root,children:[Object(jt.jsxs)(Yt.a,{component:"legend",children:["Family Member #",t+1+"  ",Object(jt.jsx)(nt.a,{disabled:l,onClick:function(e){return r(t)},color:"secondary",children:"Remove"})]}),Object(jt.jsxs)(bt.a,{variant:"outlined",className:c.paper,children:[Object(jt.jsx)(on,{type:"text",onChange:s("first_name"),value:a.person.first_name,label:"First name",disabled:l,error:!!o.first_name,helperText:o.first_name}),Object(jt.jsx)(on,{type:"text",value:a.person.last_name,onChange:s("last_name"),label:"Last name",disabled:l,error:!!o.last_name,helperText:o.last_name}),Object(jt.jsx)(on,{type:"date",value:a.person.birth_date,onChange:s("birth_date"),label:"Birth date",disabled:l,error:!!o.birth_date,helperText:o.birth_date}),Object(jt.jsx)(pn,{options:u.genderOptions,value:a.person.gender,onChange:s("gender"),label:"Gender",disabled:l,error:!!o.gender,helperText:o.gender}),Object(jt.jsx)(pn,{options:u.familyRelationshipOptions,value:a.relationship,onChange:function(e){return a.relationship=e.target.value},label:n&&a.person.id===n?"Self":"Relationship",disabled:l,error:!!o.relationship,helperText:o.relationship})]})]})}function ti(e){var t=e.family,n=e.clientId,a=e.errMsg,r=void 0===a?{}:a,i=Object(ze.useState)(!0),o=Object(Ke.a)(i,2),c=o[0],s=o[1],l=function(){return s(!c)},d=function(e){t.members.splice(e,1),l()};return Object(jt.jsxs)("div",{children:[r&&"string"===typeof r&&Object(jt.jsx)(qt.a,{severity:"error",children:r}),t.members.map((function(e,t){return Object(jt.jsx)(ei,{index:t,member:e,clientId:n,handleRemoveFamily:d,errMsg:r[t]},t)})),Object(jt.jsx)(nt.a,{onClick:function(){t.members.push({person:{first_name:"",last_name:"",birth_date:null,gender:""},relationship:""}),l()},variant:"outlined",children:"Add Family Member"})]})}var ni=n(725),ai=n(795),ri=n(751),ii=["row","noStar","label","required","options","onChange","value","helperText"],oi=Object(at.a)((function(e){return{formControl:{position:"relative",top:16},formControlRow:{position:"relative",flexDirection:"row",alignItems:"center"},labelRow:{width:200,marginRight:20}}}));function ci(e){var t=e.row,n=e.noStar,a=e.label,r=e.required,i=e.options,o=e.onChange,c=e.value,s=void 0===c?un:c,l=e.helperText,d=Object(Ye.a)(e,ii),u=oi(),b=Object(ze.useState)(s),j=Object(Ke.a)(b,2),h=j[0],p=j[1],m=Object(ze.useCallback)((function(e){var t=function(e){return"true"===e||"false"!==e&&e}(e.target.value);p(t),o({target:{value:t===un?null:t}})}),[o]);return Object(jt.jsxs)(cn.a,{className:t?u.formControlRow:u.formControl,error:d.error,children:[Object(jt.jsx)(Yt.a,{className:t&&u.labelRow,required:r&&!n,component:"legend",children:a}),Object(jt.jsx)(ni.a,{value:h,onChange:m,row:!0,children:Object.entries(i).map((function(e){var t=Object(Ke.a)(e,2),n=t[0],a=t[1];return Object(jt.jsx)(ai.a,{value:a,control:Object(jt.jsx)(ri.a,{color:"primary"}),label:n,labelPlacement:"end"},a)}))}),l&&Object(jt.jsx)(dn.a,{children:l})]})}var si=n(637),li=["label","required","options","onChange","helperText"],di=Object(at.a)((function(e){return{formControl:{marginTop:16}}}));function ui(e){var t=e.label,n=e.required,a=e.options,r=e.onChange,i=e.helperText,o=Object(Ye.a)(e,li),l=Object(ze.useMemo)((function(){return Array.isArray(a)?a:Object.values(a)}),[a]),d=Object(ze.useState)((function(){var e={};return l.forEach((function(t){e[t]=o.value.includes(t)})),e})),u=Object(Ke.a)(d,2),b=u[0],j=u[1],h=Object(ze.useCallback)((function(e){return function(t){var n=t.target.checked,a=Object(s.a)(Object(s.a)({},b),{},Object(c.a)({},e,n));j(a);var i=[];Object.entries(a).forEach((function(e){var t=Object(Ke.a)(e,2),n=t[0];t[1]&&i.push(n)})),r({target:{value:i}})}}),[r,b]),p=di();return Object(jt.jsxs)(cn.a,{component:"fieldset",className:p.formControl,error:o.error,children:[Object(jt.jsx)(Yt.a,{required:n,component:"legend",children:t}),Object(jt.jsx)(si.a,{row:!0,children:l.map((function(e){return Object(jt.jsx)(ai.a,{label:e,control:Object(jt.jsx)(ba.a,{color:"primary",checked:b[e],onChange:h(e)})},e)}))}),i&&Object(jt.jsx)(dn.a,{children:i})]})}var bi=n(772),ji=n(50),hi=Object(at.a)((function(e){return{root:{paddingTop:18,paddingBottom:8,width:"100%"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2,zIndex:1e5},select:{whiteSpace:"initial",minWidth:326},search:{padding:4,paddingBottom:6,width:"80%",verticalAlign:"middle"},searchIcon:{marginLeft:16,marginRight:4,fill:"#787878",verticalAlign:"middle"},options:{overflow:"auto",maxHeight:"70vh"}}})),pi={getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},PaperProps:{style:{maxHeight:null,minWidth:null}},MenuListProps:{autoFocus:!1}};function mi(e,t,n){var a=-1!==t.indexOf(e);return{fontWeight:a?n.typography.fontWeightMedium:n.typography.fontWeightRegular,background:a?"#ccc":""}}function fi(e){var t=e.options,n=e.label,a=e.value,r=e.onChange,i=e.helperText,l=Object(ze.useState)({selected:a||[],filteredOptions:t?Object(o.a)(t):[],searchValue:""}),d=Object(Ke.a)(l,2),u=d[0],b=d[1],j=Object(ze.useState)(!1),h=Object(Ke.a)(j,2),p=h[0],m=h[1],f=hi(),O=Object(ji.a)();Object(ze.useEffect)((function(){b((function(e){return Object(s.a)(Object(s.a)({},e),{},{searchValue:"",selected:[],filteredOptions:t?Object(o.a)(t):[]})}))}),[t]);var g=Object(ze.useCallback)((function(e,t){b((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(c.a)({},e,t))})),"selected"===e&&r&&r({target:{value:t}})}),[r]),v=function(e){return function(){-1===u.selected.indexOf(e)?g("selected",[].concat(Object(o.a)(u.selected),[e])):x(e)()}},x=Object(ze.useCallback)((function(e){return function(){g("selected",u.selected.filter((function(t){return t!==e})))}}),[g,u.selected]),y=Object(ze.useCallback)((function(e){g("searchValue",e.target.value);var n=e.target.value||"";n=n.toLowerCase();for(var a=[],r=0,i=t.length;r<i;r++){var o=t[r];o.toLowerCase().includes(n)&&a.push(o)}g("filteredOptions",a)}),[g,t]),_=Object(ze.useCallback)((function(e){var n=[];return t.forEach((function(t){-1!==e.indexOf(t)&&n.push(Object(jt.jsx)(it.a,{label:t,className:f.chip,onDelete:x(t)},t))})),n}),[f.chip,x,t]);return Object(jt.jsx)("div",{className:f.root,children:Object(jt.jsxs)(cn.a,{error:e.error,children:[Object(jt.jsx)(sn.a,{children:n}),Object(jt.jsx)(ln.a,{multiple:!0,value:u.selected,input:Object(jt.jsx)(bi.a,{}),renderValue:_,MenuProps:pi,classes:{select:f.select},open:p,onOpen:function(e){var t=e.target.tagName;"svg"!==t&&"path"!==t&&m(!0)},onClose:function(){return m(!1)},children:Object(jt.jsxs)("div",{children:[Object(jt.jsx)(_a.a,{className:f.searchIcon}),Object(jt.jsx)(St.c,{autoFocus:!0,className:f.search,placeholder:"Search",value:u.searchValue,onChange:y,onKeyDown:function(e){e.stopPropagation()}}),Object(jt.jsx)("div",{className:f.options,children:u.filteredOptions.map((function(e,t){return Object(jt.jsx)(ct.a,{value:e,onClick:v(e),style:mi(e,u.selected,O),children:e},t)}))})]})}),i&&Object(jt.jsx)(dn.a,{children:i})]})})}var Oi=["component","options","value"];function gi(e){var t=e.component,n=e.options,a=e.value,r=Object(Ye.a)(e,Oi);return"GeneralField"===t?Object(jt.jsx)(on,Object(s.a)(Object(s.a)({},r),{},{value:a})):"SelectField"===t?Object(jt.jsx)(pn,Object(s.a)(Object(s.a)({options:n},r),{},{value:a})):"MultiSelectField"===t?Object(jt.jsx)(fi,Object(s.a)({options:n,value:a},r)):"RadioField"===t?Object(jt.jsx)(ci,Object(s.a)({options:n,value:a},r)):"CheckboxField"===t?Object(jt.jsx)(ui,Object(s.a)({options:n,value:a},r)):Object(jt.jsxs)("div",{children:["Unknown field ",t]})}function vi(e,t){var n=function(e){var t={};Mn(e.address.postal_code,t,"address"),e.profile&&Vn(e.profile,t);return t}(e),a=function(e,t){var n,a={},r=Object(Nn.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,c=Object.entries(i);o<c.length;o++){var s=Object(Ke.a)(c[o],2),l=s[0];s[1]&&(l in e&&Dn(e[l])||l in e.profile&&Dn(e.profile[l])?a[l]="This field is required":"family"===l&&l in e?0===e[l].length?a.family="Please add at least one family member!":(a[l]={},Hn(e[l].members,a[l]),0===Object.entries(a[l]).length&&delete a[l]):"address"===l&&(a[l]={},Ln(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]))}}catch(d){r.e(d)}finally{r.f()}return a}(e,t);return Rn(a,n)}var xi=Object(at.a)((function(e){return{content:{width:"80%",margin:"auto",paddingBottom:10}}}));function yi(){var e=xi(),t=Object(Xe.g)(),n=Object(We.c)(),a=Object(Xe.h)().id,r=a?"edit":"new",i=Object(ze.useState)({loading:!0,languageOptions:[],all_ngo_conditions:[],stepNames:[],steps:[],client:null,dispatchErrorMsg:[],fieldErrorMsg:{}}),o=Object(Ke.a)(i,2),c=o[0],l=o[1],b=Object(ze.useMemo)((function(){return function(e){var t={profile:Object(s.a)({},$n),address:Object(s.a)({},ta),family:{members:[]},marital_status:"",has_children:!1,num_of_children:"",country_of_origin:"",country_of_last_residence:"",first_language:"",other_languages:[],pr_number:"",immigration_doc_number:"",landing_date:null,arrival_date:null,status_in_canada:"",income_source:"",current_education_level:"",completed_education_level:"",num_of_dependants:"",file_id:"",ngo_conditions:[]};return e?Rn(t,e):t}(c.client)}),[c.client]);Object(ze.useEffect)((function(){var e=[];e.push(n(M("languages")).then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{languageOptions:e})}))}))),e.push(Xr().then((function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{all_ngo_conditions:e.map((function(e){return e.title}))})}))}))),e.push(qr().then((function(e){null==e||0===e.steps_order.length||0===Object.values(e.form_structure).length?l((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0,dispatchErrorMsg:["No fields are available."]})})):l((function(t){return Object(s.a)(Object(s.a)({},t),{},{stepNames:e.steps_order,steps:Object.values(e.form_structure)})}))}))),a&&e.push(n(Y(a)).then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{client:e})}))}))),Promise.all(e).then((function(){return l((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[n,a]);var j=Object(ze.useCallback)((function(e){return function(t){var n=t.target.value,a=e.split(".");if(1===a.length)b[e]=n;else{for(var r=b,i=0;i<a.length-1;i++)r=r[a[i]];r[a[a.length-1]]=n||""}}}),[b]);return c.loading?Object(jt.jsx)(Fa,{message:"Loading..."}):Object(jt.jsx)(Mt.a,{children:Object(jt.jsx)(Ut,{getStepContent:function(t){var n=c.steps[t];return Object(jt.jsx)("div",{className:e.content,children:Object.entries(n).map((function(e){var t,n=Object(Ke.a)(e,2),r=n[0],i=n[1],o=c.fieldErrorMsg[r];if("first_language"===r?t=c.languageOptions:"other_languages"===r?t=c.languageOptions.filter((function(e){return e!==b.first_language})):"ngo_conditions"===r&&(t=c.all_ngo_conditions),"address"===r)return Object(jt.jsx)(mn,{address:b.address,required:i,errMsg:o},"address");if("family"===r)return Object(jt.jsx)(ti,{family:b.family,clientId:a,required:i,errMsg:o},"family");var s=Object.keys($n).includes(r);return Object(jt.jsx)(gi,{label:Yr[r].label,type:Yr[r].type,component:Yr[r].component,value:s?b.profile[r]:b[r],onChange:j(s?"profile."+r:r),required:i,options:Yr[r].options||t,error:null!=o,helperText:o},r)}))})},handleFinish:function(){var e,i,o=vi(b,c.steps);0===Object.keys(o).length?n("edit"===r?function(e,t,n){return console.log("updateClient id, params",e,t),function(a){var r=u.serverHost+"/client/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){a(J(e.id,e)),n(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){n(u.ACTION_ERROR,e)}))}}(a,b,(function(e,n,a){e===u.ACTION_SUCCESS?t.push("/clients/".concat(a)):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{dispatchErrorMsg:[n.toString()]})}))})):(e=b,i=function(e,n,a){e===u.ACTION_SUCCESS?t.push("/clients/"+a):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{dispatchErrorMsg:[n.toString()]})}))},console.log("createClient params",e),function(t){var n=u.serverHost+"/clients/";return d()(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("createClient response.status",t.status),201!==t.status){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.next=7,t.json();case 7:throw n=e.sent,new Error(JSON.stringify(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){t(J(e.id,e)),i(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){i(u.ACTION_ERROR,e)}))})):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fieldErrorMsg:o})}))},stepNames:c.stepNames,error:c.dispatchErrorMsg})})}var _i=n(726);function Ci(e,t){return Gr("/user/"+e+"/",t)}function Si(e){return Rr("/user/"+e+"/")}function ki(e,t,n){if(204!==Vr("/user/"+e+"/").status)throw Error("Server does not return correct code.")}var wi={is_superuser:Object(s.a)(Object(s.a)({},bn),{},{label:"Admin?",component:ci,options:{Yes:!0,No:!1},required:!0}),username:Object(s.a)(Object(s.a)({},bn),{},{label:"Username",required:!0}),password:Object(s.a)(Object(s.a)({},bn),{},{label:"Password",type:"password",required:!0,validator:Kn.password}),first_name:Object(s.a)(Object(s.a)({},bn),{},{label:"First name"}),last_name:Object(s.a)(Object(s.a)({},bn),{},{label:"Last name"}),email:Object(s.a)(Object(s.a)({},bn),{},{label:"Email",type:"email",validator:Kn.email}),primary_phone_number:Object(s.a)(Object(s.a)({},bn),{},{label:"Telephone",validator:Kn.phone}),alt_phone_number:Object(s.a)(Object(s.a)({},bn),{},{label:"Alternate phone number",validator:Kn.phone})},Ii=Object(at.a)((function(){return{root:{width:"80%"},button:{marginTop:12,marginBottom:12}}}));function Ti(){var e=Ii(),t=Object(Xe.g)(),n=Object(Xe.h)().id,a=null==n?"new":"edit",r=Object(ze.useState)({form:Object(s.a)({},na),errors:{},loading:!0}),i=Object(Ke.a)(r,2),o=i[0],c=i[1];Object(ze.useEffect)((function(){"edit"===a?Si(n).then((function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{form:Object(s.a)(Object(s.a)({},t.form),e),loading:!1})}))})):c((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}),[a,n]);var l=function(){for(var e={},t=0,n=Object.entries(wi);t<n.length;t++){var a=Object(Ke.a)(n[t],2),r=a[0],i=a[1],l=Dn(o.form[r]);i.required&&l&&(e[r]="This field is required");var d=void 0;!l&&i.validator&&(d=i.validator(o.form[r]))&&(e[r]=d)}return 0===Object.keys(e).length||(c((function(t){return Object(s.a)(Object(s.a)({},t),{},{errors:e})})),!1)},d=function(){var e=Object(T.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l()){e.next=16;break}if(e.prev=1,"new"!==a){e.next=8;break}return e.next=5,Br("/users/",o.form);case 5:t.push("/users/"),e.next=11;break;case 8:return e.next=10,Ci(n,o.form);case 10:t.push("/users/"+n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.json&&c((function(t){return Object(s.a)(Object(s.a)({},t),{},{errors:e.t0.json})}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return o.loading?Object(jt.jsx)(Fa,{message:"Loading user form..."}):Object(jt.jsxs)(Mt.a,{className:e.root,children:[Object(jt.jsx)(tt.a,{variant:"h5",children:"new"===a?"Create new user":"Edit user"}),Object.entries(wi).map((function(e){var t=Object(Ke.a)(e,2),n=t[0],a=t[1];return Object(jt.jsx)(a.component,{label:a.label,type:a.type,options:a.options,value:o.form[n],required:a.required,onChange:function(e){return o.form[n]=e.target.value},error:!!o.errors[n],helperText:o.errors[n]},n)})),Object(jt.jsx)(nt.a,{variant:"contained",color:"primary",className:e.button,onClick:d,children:"Submit"})]})}var Ni=n(37);var Ei=n(727),Ai=n(728),Pi=n(363),Ri=n(744),Di=n(364),Fi=n(366),Li=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;Object(Ya.a)(this,n);var r={};return(a=t.call(this,e)).props.match.params.need_id&&(r=a.props.needsById[a.props.match.params.need_id]),a.state={needId:r.id,mode:r.id?"edit":"new",form:{type:r.type||void 0,category:r.category||"",description:r.description||"",needed_by:r.needed_by||"",condition:r.condition||"",status:r.status||"",is_urgent:r.is_urgent||!1,languages:r.languages||[]}},a.formValChange=a.formValChange.bind(Object(Ni.a)(a)),a.submit=a.submit.bind(Object(Ni.a)(a)),a.handleMultiSelectChange=a.handleMultiSelectChange.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(M("needs"))}},{key:"formValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.target.value,a=Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},t,n));this.setState({form:a})}},{key:"handleMultiSelectChange",value:function(e,t,n){var a=function(e,t,n){var a;switch(n.action){case"pop-value":case"remove-value":k.a.remove(e,(function(e){return e===n.removedValue.value})),a=e;break;case"clear":a=[];break;default:e.push(n.option.value),a=e}return a}(this.state.form[e],0,n);this.setState({form:Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},e,a))})}},{key:"submit",value:function(){var e,t,n;"edit"===this.state.mode?this.props.dispatch((e=this.props.clientId,t=this.state.needId,n=this.state.form,function(a){var r=u.serverHost+"/clients/"+e+"/needs/"+t+"/";return d()(r,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return a(v(e,t.need,t.need_group))}))})):this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/clients/"+e+"/needs/";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return n(v(e,t.need,t.need_group))}))}}(this.props.clientId,this.state.form)),this.props.history.push("/clients/".concat(this.props.clientId))}},{key:"render",value:function(){var e=this,t=this.props,n="edit"===this.state.mode?"Edit Need":"Create Need";return void 0===this.state.form.type?Object(jt.jsx)("div",{className:"outer",children:Object(jt.jsx)("div",{className:"middle",children:Object(jt.jsxs)("div",{className:"need-type-buttons",children:[Object(jt.jsx)(Ei.a,{onClick:function(t){return e.formValChange(t,"type","Good")},children:"Goods"}),Object(jt.jsx)(Ei.a,{onClick:function(t){return e.formValChange(t,"type","Service")},children:"Service"})]})})}):Object(jt.jsxs)(Ai.a,{className:"content",children:[Object(jt.jsxs)(Pi.a,{sm:12,children:[Object(jt.jsx)("h3",{children:n}),Object(jt.jsx)("hr",{})]}),Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsxs)(Ri.a,{horizontal:!0,children:[Object(jt.jsxs)(Di.a,{controlId:"type",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Type"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)("div",{className:"need-type",children:this.state.form.type})})]}),Object(jt.jsxs)(Di.a,{controlId:"is_urgent",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Urgent?"}),Object(jt.jsxs)(Pi.a,{sm:9,children:[Object(jt.jsx)(Ri.a.Check,{name:"radioGroup",value:"1",onChange:function(t){return e.formValChange(t,"is_urgent")},defaultChecked:!0===this.state.form.is_urgent,type:"radio",inline:!0,children:"Yes"})," ",Object(jt.jsxs)(Ri.a.Check,{name:"radioGroup",value:"0",onChange:function(t){return e.formValChange(t,"is_urgent")},defaultChecked:!1===this.state.form.is_urgent,type:"radio",inline:!0,children:["No",!1===this.state.form.is_urgent]})," "]})]}),Object(jt.jsx)(pn,{label:"Category",options:t.needsCategories,value:this.state.form.category,onChange:function(t){return e.formValChange(t,"category")},required:!0}),Object(jt.jsx)(on,{label:"Needed By",type:"date",value:this.state.form.needed_by,onChange:function(t){return e.formValChange(t,"needed_by")}}),Object(jt.jsx)(fi,{label:"Languages",options:t.languagesCategories,value:this.state.form.languages,onChange:function(t){return e.handleMultiSelectChange(t,null,null)}}),Object(jt.jsx)(on,{label:"Description",value:this.state.form.description,onChange:function(t){return e.formValChange(t,"description")},required:!0,multiline:!0,fullWidth:!0}),"Good"===this.state.form.type&&Object(jt.jsx)(on,{label:"Condition",type:"textarea",value:this.state.form.condition,onChange:function(t){return e.formValChange(t,"condition")}}),Object(jt.jsx)(Di.a,{children:Object(jt.jsx)(Pi.a,{smOffset:3,sm:9,children:Object(jt.jsx)(Ei.a,{onClick:this.submit,children:"Submit"})})})]})})]})}}]),n}(ze.Component),Bi=Object(We.b)((function(e){return{needsById:e.needs.byId,clientId:e.needs.clientId,needsCategories:e.ontology.needs.categories,languagesCategories:e.ontology.languages.categories,categoriesLoaded:e.ontology.needs.loaded}}))(Object(Xe.i)(Li)),Mi=n(743);var Gi=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;return Object(Ya.a)(this,n),(a=t.call(this,e)).state={form:{type:"",category:"",status:"",description:"",date:"",start_time:"",end_time:"",reminder_type:"",reminder_frequency:""}},a.formValChange=a.formValChange.bind(Object(Ni.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"handleSubmit",value:function(){var e,t,n=this,a=Object.assign({},this.state.form);a.service_id=this.props.serviceId,a.client_id=this.props.clientId,this.props.dispatch((e=a,t=function(e,t,a){n.props.onHide()},function(n){var a=u.serverHost+"/appointments/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){t(u.ACTION_SUCCESS,null,e)})).catch((function(e){t(u.ACTION_ERROR,e)}))}))}},{key:"formValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id,n=Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},t,e.target.value));this.setState({form:n})}},{key:"render",value:function(){return Object(jt.jsxs)(Mi.a,{show:this.props.show,onHide:this.props.onHide,bsSize:"large","aria-labelledby":"contained-modal-title-sm",children:[Object(jt.jsx)(Mi.a.Header,{closeButton:!0,children:Object(jt.jsxs)(Mi.a.Title,{id:"contained-modal-title-sm",children:["Appointment",this.state.form.service_id,this.state.form.provider_id]})}),Object(jt.jsx)(Mi.a.Body,{children:Object(jt.jsxs)(Ri.a,{horizontal:!0,children:[Object(jt.jsx)(pn,{id:"type",label:"Type",options:["External","Internal"],componentClass:"select",value:this.state.form.type,onChange:this.formValChange,required:!0}),Object(jt.jsx)(on,{id:"category",label:"Category",type:"text",value:this.state.form.category,onChange:this.formValChange}),Object(jt.jsx)(on,{id:"status",label:"Status",type:"text",value:this.state.form.status,onChange:this.formValChange}),Object(jt.jsx)(on,{id:"description",label:"Description",type:"text",value:this.state.form.description,onChange:this.formValChange}),Object(jt.jsx)(on,{id:"date",label:"Date",type:"date",value:this.state.form.date,onChange:this.formValChange,required:!0}),Object(jt.jsx)(on,{id:"start_time",label:"Start Time",type:"time",value:this.state.form.start_time,onChange:this.formValChange,required:!0}),Object(jt.jsx)(on,{id:"end_time",label:"End Time",type:"time",value:this.state.form.end_time,onChange:this.formValChange,required:!0}),Object(jt.jsx)(pn,{id:"reminder_type",label:"Reminder Type",options:["Email","Text","Phone"],componentClass:"select",value:this.state.form.reminder_type,onChange:this.formValChange}),Object(jt.jsx)(on,{id:"reminder_frequency",label:"Reminder Frequecy",type:"text",value:this.state.form.reminder_frequency,onChange:this.formValChange})]})}),Object(jt.jsx)(Mi.a.Footer,{children:Object(jt.jsx)(Ei.a,{onClick:this.handleSubmit,children:"Submit"})})]})}}]),n}(ze.Component),zi=Object(We.b)()(Gi),Vi=n(756),Hi=n(796),qi=n(365),Wi=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;return Object(Ya.a)(this,n),(a=t.call(this,e)).state={activeKey:null,matchStatusForm:{},noteForm:{},modalShow:!1,appointmentServiceId:null},a.handleSelect=a.handleSelect.bind(Object(Ni.a)(a)),a.matchStatusChange=a.matchStatusChange.bind(Object(Ni.a)(a)),a.textAreaChange=a.textAreaChange.bind(Object(Ni.a)(a)),a.submitMatchStatus=a.submitMatchStatus.bind(Object(Ni.a)(a)),a.submitNote=a.submitNote.bind(Object(Ni.a)(a)),a.handleModalHide=a.handleModalHide.bind(Object(Ni.a)(a)),a.handleModalShow=a.handleModalShow.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"submitMatchStatus",value:function(e){this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/matches/"+e+"/";return d()(a,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(e){return n(x(e.client_id,e.id,e))}))}}(e,this.state.matchStatusForm[e]))}},{key:"submitNote",value:function(e){var t,n=Object(s.a)(Object(s.a)({},this.state.noteForm[e]),{},{object_id:e,model:"match"});this.props.dispatch((t=n,function(e){var n=u.serverHost+"/notes/";return d()(n,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return e(x(t.client_id,t.id,t))}))}))}},{key:"matchStatusChange",value:function(e,t){var n=Object(s.a)(Object(s.a)({},this.state.matchStatusForm),{},Object(c.a)({},t,{status:e.target.value}));this.setState({matchStatusForm:n})}},{key:"textAreaChange",value:function(e,t){var n=Object(s.a)(Object(s.a)({},this.state.noteForm),{},Object(c.a)({},t,{text:e.target.value}));this.setState({noteForm:n})}},{key:"handleModalHide",value:function(){this.setState({modalshow:!1})}},{key:"handleModalShow",value:function(e){this.setState({modalshow:!0,appointmentServiceId:e})}},{key:"handleSelect",value:function(e){this.setState({activeKey:e})}},{key:"render",value:function(){var e=this,t=this.props.matches;return Object(jt.jsxs)("div",{children:[Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsx)("h3",{children:"Matched Services"})}),Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsx)(Vi.a,{id:"accordion",activeKey:this.state.activeKey,children:k.a.map(t,(function(t,n){return Object(jt.jsxs)(Hi.a,{eventKey:t.id,bsStyle:"info",children:[Object(jt.jsxs)(Hi.a.Header,{onClick:function(){return e.handleSelect(n)},children:[Object(jt.jsx)(Pi.a,{sm:11,children:Object(jt.jsxs)(Hi.a.Title,{toggle:!0,children:[n+1,". ",t.service.name," "]})}),Object(jt.jsx)(Ri.a.Label,{bsStyle:"primary",children:t.status})]}),Object(jt.jsx)(Vi.a.Collapse,{eventKey:n,children:Object(jt.jsxs)(Hi.a.Body,{collapsible:!0,children:[Object(jt.jsxs)(Pi.a,{sm:8,children:[Object(jt.jsxs)(Di.a,{controlId:"match_status",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Status"}),Object(jt.jsx)(Pi.a,{sm:6,children:Object(jt.jsxs)(qi.a,{componentClass:"select",placeholder:"select",defaultValue:t.status,onChange:function(n){return e.matchStatusChange(n,t.id)},children:[Object(jt.jsx)("option",{value:"select",children:"--- Not Set ---"}),u.matchStatusOptions.map((function(e){return Object(jt.jsx)("option",{value:e,children:e},e)}))]})}),Object(jt.jsx)(Pi.a,{sm:3,children:Object(jt.jsx)(Ei.a,{disabled:e.state.activeKey!==t.id||!e.state.matchStatusForm[t.id],onClick:function(n){return e.submitMatchStatus(t.id)},children:"Update Status"})})]}),Object(jt.jsxs)(Ri.a.Label,{className:"note-form",children:[Object(jt.jsxs)(Di.a,{controlId:"notes",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Notes"}),Object(jt.jsxs)(Pi.a,{sm:9,children:[k.a.map(t.notes,(function(e,t){return Object(jt.jsx)("div",{children:e},t)})),Object(jt.jsx)(qi.a,{componentClass:"textarea",onChange:function(n){return e.textAreaChange(n,t.id)}})]})]}),Object(jt.jsx)(Di.a,{children:Object(jt.jsx)(Pi.a,{smOffset:3,sm:9,children:Object(jt.jsx)(Ei.a,{disabled:e.state.activeKey!==t.id||!e.state.noteForm[t.id],onClick:function(n){return e.submitNote(t.id)},children:"Add Note"})})})]}),Object(jt.jsx)(Ei.a,{bsStyle:"default",onClick:function(n){return e.handleModalShow(t.service.id)},children:"Add appointment"})]}),Object(jt.jsxs)(Pi.a,{sm:4,children:[Object(jt.jsx)(Ue.b,{to:"/service/".concat(t.service.id),target:"_blank",children:Object(jt.jsx)("h5",{children:"View Service Detail"})}),Object(jt.jsx)(Ue.b,{to:"/provider/".concat(t.service.provider.id),target:"_blank",children:Object(jt.jsx)("h5",{children:"View Provider Detail"})})]})]})})]},t.id)}))})}),Object(jt.jsx)(zi,{clientId:this.props.clientId,serviceId:this.state.appointmentServiceId,show:this.state.modalshow,onHide:this.handleModalHide})]})}}]),n}(ze.Component),Ui=Object(We.b)()(Object(Xe.i)(Wi)),Ji=n(249),Ki=n(729),Yi=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;return Object(Ya.a)(this,n),(a=t.call(this,e)).submit=a.submit.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"submit",value:function(e,t){var n={service_id:t};this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/needs/"+e+"/matches/";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){n(x(t.client_id,e,t))}))}}(e,n))}},{key:"render",value:function(){var e=this,t=this.props.service,n=this.props.needId,a=this.props.label;return Object(jt.jsx)(Ki.a,{className:"recommended-service",children:Object(jt.jsxs)(Ai.a,{children:[Object(jt.jsxs)(Pi.a,{sm:8,children:[Object(jt.jsxs)("h5",{children:[a,"."]}),Object(jt.jsx)(Ue.b,{to:"/service/".concat(t.id),children:Object(jt.jsx)("h5",{children:t.name})}),Object(jt.jsx)(tt.a,{children:t.category})," ",Object(jt.jsxs)(tt.a,{children:[Math.round(100*t.distance)/100," km"]}),Object(jt.jsx)("p",{children:t.desc}),Object(jt.jsx)("p",{children:jr(t.location)})]}),Object(jt.jsxs)(Pi.a,{sm:4,children:[Object(jt.jsx)("h5",{children:"Provider"}),Object(jt.jsx)(tt.a,{color:"primary",children:t.provider.type}),Object(jt.jsx)(Ue.b,{to:"/provider/".concat(t.provider.id),children:"Individual"===t.provider.type?Object(jt.jsx)("p",{children:"".concat(t.provider.profile.first_name," ").concat(t.provider.profile.last_name)}):Object(jt.jsx)("p",{children:t.provider.company})})]}),Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsx)(Ei.a,{bsStyle:"default",onClick:function(a){return e.submit(n,t.id)},children:"Select"})})]})})}}]),n}(ze.Component),Xi=Object(We.b)()(Object(Xe.i)(Yi)),Zi=Object(Ji.withGoogleMap)((function(e){return Object(jt.jsx)(Ji.GoogleMap,{zoom:10,center:e.latlng,children:k.a.map(e.services,(function(e,t){return Object(jt.jsx)(Ji.Marker,{label:(t+1).toString(),position:{lat:parseFloat(e.location.lat),lng:parseFloat(e.location.lng)}},e.id)}))})}));function Qi(e){var t=e.need,n=e.services,a=e.latlng;return Object(jt.jsxs)(Ai.a,{children:[Object(jt.jsx)(Pi.a,{sm:8,children:k.a.map(n,(function(e,n){return Object(jt.jsx)(Xi,{needId:t.id,label:n+1,service:e},e.id)}))}),Object(jt.jsx)(Pi.a,{sm:4,children:Object(jt.jsx)("div",{style:{width:"100%",height:"400px"},children:Object(jt.jsx)(Zi,{containerElement:Object(jt.jsx)("div",{style:{height:"100%"}}),mapElement:Object(jt.jsx)("div",{style:{height:"100%"}}),latlng:a,services:n})})})]})}var $i=n(730),eo=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;return Object(Ya.a)(this,n),(a=t.call(this,e)).state={queryTerm:"",location:e.location.street_address},a.handleFormValChange=a.handleFormValChange.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"handleFormValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id;this.setState(Object(c.a)({},t,e.target.value))}},{key:"render",value:function(){var e=this;return Object(jt.jsx)(Ri.a,{horizontal:!0,children:Object(jt.jsx)(Di.a,{children:Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsxs)($i.a,{children:[this.props.enableQueryTerm&&Object(jt.jsx)($i.a.Addon,{children:"Find"}),this.props.enableQueryTerm&&Object(jt.jsx)(qi.a,{type:"text",value:this.state.queryTerm,onChange:function(t){return e.handleFormValChange(t,"queryTerm")},placeholder:"Dental service, language class..."}),Object(jt.jsx)($i.a.Addon,{children:"Near"}),Object(jt.jsx)(qi.a,{type:"text",value:this.state.location,onChange:function(t){return e.handleFormValChange(t,"location")}}),Object(jt.jsx)($i.a.Button,{children:this.props.enableQueryTerm?Object(jt.jsx)(Ei.a,{onClick:function(t){return e.props.search(e.state.queryTerm,e.state.location)},children:"Search"}):Object(jt.jsx)(Ei.a,{onClick:function(t){return e.props.search(e.state.location,e.props.needId)},children:"Search"})})]})})})})}}]),n}(ze.Component),to=n(731),no=n(732),ao=n(745),ro=n(733),io=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;Object(Ya.a)(this,n),a=t.call(this,e);var r=e.needsById[e.match.params.need_id];return a.state={searchResult:[],location:e.client.address?{lat:parseFloat(e.client.address.lat),lng:parseFloat(e.client.address.lng)}:u.torontoCoordinates,recommendedServices:r&&r.recommended_services||[]},a.handleSearchService=a.handleSearchService.bind(Object(Ni.a)(a)),a.handleSearchRecommendedServices=a.handleSearchRecommendedServices.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.need_id;this.props.dispatch(C(t,(function(t){e.setState({recommendedServices:t.recommended_services})})))}},{key:"handleSearchService",value:function(e,t){var n=this,a=u.serverHost+"/services/search?query_term="+e+"&location="+t;fetch(a,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(e){n.setState({searchResult:e.data,location:e.location})}))}},{key:"handleSearchRecommendedServices",value:function(e,t){var n=this,a=u.serverHost+"/needs/"+t+"/recommended_services?location="+e;fetch(a,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(e){n.setState({recommendedServices:e.data,location:e.location})}))}},{key:"render",value:function(){var e=this.props,t=e.match.params.need_id,n=e.needsById[t],a=e.client;function r(e){return e.is_deleted?Object(jt.jsx)("h4",{children:Object(jt.jsx)("div",{style:{color:"rgb(213,87,79)"},children:"Deleted"})}):null}function i(e){return e.is_urgent?Object(jt.jsx)("h4",{children:Object(jt.jsx)("div",{style:{color:"rgb(213,87,79)"},children:"Urgent"})}):null}return Object(jt.jsx)(to.a,{className:"content",children:n&&n.loaded&&Object(jt.jsxs)(Ai.a,{children:[Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsx)("h3",{children:"Need"})}),Object(jt.jsxs)(Pi.a,{sm:12,children:[Object(jt.jsx)(r,{is_deleted:n.is_deleted}),Object(jt.jsx)(i,{is_urgent:n.is_urgent}),Object(jt.jsx)(no.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object(jt.jsxs)("tbody",{children:[Object(jt.jsx)(Tr,{title:"Type",value:n.type}),Object(jt.jsx)(Tr,{title:"Category",value:n.category}),Object(jt.jsx)(Tr,{title:"Needed By",value:n.needed_by}),Object(jt.jsx)(Tr,{title:"Description",value:n.description}),Object(jt.jsx)(Tr,{title:"Condition",value:n.condition}),Object(jt.jsx)(Tr,{title:"Status",value:n.status}),Object(jt.jsx)(Tr,{title:"Languages",value:(n.languages||[]).join(", ")})]})})]}),n.matches.length>0&&Object(jt.jsx)(Ui,{clientId:a.id,matches:n.matches}),Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsxs)(ao.a,{defaultActiveKey:1,id:"serviceList",children:[Object(jt.jsxs)(ro.a,{eventKey:1,title:"RecommendedServices",children:[Object(jt.jsx)(eo,{search:this.handleSearchRecommendedServices,location:a.address,needId:n.id}),n.recommended_services&&n.recommended_services.length>0&&Object(jt.jsx)(Qi,{need:n,services:this.state.recommendedServices,latlng:this.state.location})]}),Object(jt.jsxs)(ro.a,{eventKey:2,title:"Search for Services",children:[Object(jt.jsx)(eo,{search:this.handleSearchService,location:a.address,enableQueryTerm:!0}),this.state.searchResult&&this.state.searchResult.length>0&&Object(jt.jsx)(Qi,{need:n,services:this.state.searchResult,latlng:this.state.location})]})]})})]})})}}]),n}(ze.Component),oo=Object(We.b)((function(e){return{needsById:e.needs.byId,client:e.clients.byId[e.needs.clientId]}}))(io),co=["component","isLoggedin"],so=Object(We.b)((function(e){return{isLoggedin:e.auth.isLoggedin}}))((function(e){var t=e.component,n=e.isLoggedin,a=Object(Ye.a)(e,co);return Object(jt.jsx)(Xe.b,Object(s.a)(Object(s.a)({},a),{},{render:function(e){return!0===n?Object(jt.jsx)(t,Object(s.a)({},e)):Object(jt.jsx)(Xe.a,{to:"/login-pane"})}}))})),lo=["component","isLoggedin","isAdmin"],uo=Object(We.b)((function(e){return{isAdmin:e.auth.currentUser&&e.auth.currentUser.is_admin,isLoggedin:e.auth.isLoggedin}}))((function(e){var t=e.component,n=e.isLoggedin,a=e.isAdmin,r=Object(Ye.a)(e,lo);return Object(jt.jsx)(Xe.b,Object(s.a)(Object(s.a)({},r),{},{render:function(e){return!0===n&&!0===a?Object(jt.jsx)(t,Object(s.a)({},e)):Object(jt.jsx)(Xe.a,{to:"/login-pane"})}}))})),bo="providers",jo=function(e){var t=e.profile;return"Individual"===e.type?t&&t.first_name+" "+t.last_name:e.company},ho=[{name:"id",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"company",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"profile",label:"Name",options:{sort:!0,customBodyRender:function(e,t){var n=t.rowData;return Object(jt.jsx)(Ra,{color:!0,to:"/".concat(bo,"/").concat(n[0]),children:jo({company:n[1],type:n[3],profile:e})})}}},{name:"type",label:"Type",options:{sort:!0}},{name:"profile.email",label:"Email"},{name:"profile.primary_phone_number",label:"Phone Number",options:{customBodyRender:function(e){return e?hr(e):"Not Provided"}}},{name:"main_address",label:"Address",options:{sort:!1,customBodyRender:function(e){return e?jr(e):"Not Provided"}}}];var po=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(){return Object(Ya.a)(this,n),t.apply(this,arguments)}return Object(Xa.a)(n,[{key:"render",value:function(){return Object(jt.jsx)(Ai.a,{className:"content",children:Object(jt.jsxs)(Pi.a,{sm:12,children:[Object(jt.jsx)("h2",{children:"Would you like to add a service for this provider?"}),Object(jt.jsx)("hr",{}),Object(jt.jsx)(Ue.b,{to:"/service/new",children:Object(jt.jsx)(Ei.a,{bsStyle:"default",children:"Yes"})})," ",Object(jt.jsx)(Ue.b,{to:"/providers",children:Object(jt.jsx)(Ei.a,{bsStyle:"default",children:"No"})})]})})}}]),n}(ze.Component);function mo(e,t){var n=function(e){var t={};if(Mn(e.main_address.postal_code,t,"main_address"),e.other_addresses.length>0){t.other_addresses={};var n,a=0,r=Object(Nn.a)(e.other_addresses);try{for(r.s();!(n=r.n()).done;){Mn(n.value.postal_code,t.other_addresses,a),a++}}catch(i){r.e(i)}finally{r.f()}0===Object.entries(t.other_addresses).length&&delete t.other_addresses}e.primary_contact.profile&&(t.primary_contact||(t.primary_contact={}),Vn(e.primary_contact.profile,t.primary_contact),0===Object.entries(t.primary_contact).length&&delete t.primary_contact);e.secondary_contact.profile&&(t.secondary_contact||(t.secondary_contact={}),Vn(e.secondary_contact.profile,t.secondary_contact),0===Object.entries(t.secondary_contact).length&&delete t.secondary_contact);0!==e.reference1_email.length&&Gn(e.reference1_email,"reference1_email",t);0!==e.reference2_email.length&&Gn(e.reference2_email,"reference2_email",t);0!==e.reference1_phone.length&&zn(e.reference1_phone,"reference1_phone",t);0!==e.reference2_phone.length&&zn(e.reference2_phone,"reference2_phone",t);"Individual"===e.type&&(0!==e.profile.email.length&&Gn(e.profile.email,"email",t),0!==e.profile.primary_phone_number.length&&zn(e.profile.primary_phone_number,"primary_phone_number",t),0!==e.profile.alt_phone_number.length&&zn(e.profile.alt_phone_number,"alt_phone_number",t));return t}(e),a=function(e,t){var n,a={},r=Object(Nn.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,c=Object.entries(i);o<c.length;o++){var s=Object(Ke.a)(c[o],2),l=s[0];s[1]&&("availability"===l&&Fn(e.operation_hours)?a.availability="Please fill in at least one availability time slot!":"main_address"===l?(a[l]={},Ln(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]):"other_addresses"===l?0===e[l].length?a[l]="Please create at least one other address form!":(a[l]={},Bn(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]):"primary_contact"===l?fo(l,e,a,"primary_contact"):"secondary_contact"===l?fo(l,e,a,"secondary_contact"):Oo(l,e,a))}}catch(d){r.e(d)}finally{r.f()}return a}(e,t);return Rn(a,n)}function fo(e,t,n,a){for(var r=0,i=Object.keys(t[a].profile);r<i.length;r++){var o=i[r];Dn(t[a].profile[o])&&(n[a]||(n[a]={}),n[a][o]="This field is required")}}function Oo(e,t,n){"Individual"===t.type?(e in t.profile&&Dn(t.profile[e])||e in t&&!["email","primary_phone_number","alt_phone_number"].includes(e)&&Dn(t[e]))&&(n[e]="This field is required"):"Organization"===t.type&&e in t&&!["email","primary_phone_number","alt_phone_number","profile"].includes(e)&&Dn(t[e])&&(n[e]="This field is required")}var go=n(734),vo=Object(at.a)((function(e){return{weekday:{minWidth:110,alignSelf:"start",top:28,position:"relative"},day:{display:"flex",alignItems:"center"},times:{display:"flex",minWidth:350,alignItems:"start",flexDirection:"column"},date:{display:"flex",width:170},time:{display:"flex",alignItems:"center",flexDirection:"row"},select:{minWidth:120,margin:10},button:{position:"relative",top:8},arrow:{paddingTop:24,marginLeft:12,marginRight:12}}}));function xo(e){var t=e.operationHours,n=e.operationDates,a=e.errMsg,r=vo(),i=Object(ze.useState)(!0),o=Object(Ke.a)(i,2),c=o[0],l=o[1],d=function(){return l(!c)},u=function(e,n,a){"add"===a?t[n].push(Object(s.a)({},fn)):t[n].pop(),d()},b=function(e,n,a,r){var i=e.target.value;t[n][a][r]=null==i?"":i,d()};return Object(jt.jsxs)(Kt,{label:"Availability",children:[n.map((function(e,t){var a=e.start_date,i=e.end_date;return null==a&&(a=n[t].start_date=Object(Qt.a)(new Date,an)),Object(jt.jsxs)(er.a,{container:!0,direction:"row",alignItems:"center",children:[Object(jt.jsx)(on,{label:"Start Date",className:r.date,type:"date",value:a,onChange:function(e){return n[t].start_date=e.target.value}}),Object(jt.jsx)(go.a,{className:r.arrow}),Object(jt.jsx)(on,{label:"End Date",className:r.date,type:"date",value:i,onChange:function(e){return n[t].end_date=e.target.value},helperText:"leave empty if not sure"}),t===n.length-1&&Object(jt.jsx)(Et.a,{className:r.button,onClick:function(e){n.push({start_date:null,end_date:null}),d()},size:"large",children:Object(jt.jsx)(dt.a,{})}),0!==t&&t===n.length-1&&Object(jt.jsx)(Et.a,{className:r.button,onClick:function(e){n.splice(t,1),d()},size:"large",children:Object(jt.jsx)(Ft.a,{})})]},t)})),Object.entries(t).map((function(e){var t=Object(Ke.a)(e,2),n=t[0],a=t[1];return Object(jt.jsxs)("div",{className:r.day,children:[Object(jt.jsx)(tt.a,{color:"textSecondary",variant:"subtitle1",className:r.weekday,children:n}),Object(jt.jsx)("div",{className:r.times,children:a.map((function(e,t){return Object(jt.jsxs)("div",{className:r.time,children:[Object(jt.jsx)(pn,{className:r.select,value:e.start_time,label:"Start",options:wn,onChange:function(e){return b(e,n,t,"start_time")}}),Object(jt.jsx)(pn,{className:r.select,value:e.end_time,label:"End",options:wn,onChange:function(e){return b(e,n,t,"end_time")}}),t===a.length-1&&Object(jt.jsx)(Et.a,{className:r.button,onClick:function(e){return u(0,n,"add")},size:"large",children:Object(jt.jsx)(dt.a,{})}),0!==t&&t===a.length-1&&Object(jt.jsx)(Et.a,{className:r.button,onClick:function(e){return u(0,n,"remove")},size:"large",children:Object(jt.jsx)(Ft.a,{})})]},t)}))})]},n)})),a&&Object(jt.jsx)(qt.a,{severity:"error",children:a})]})}var yo=Object(at.a)((function(e){return{content:{width:"80%",margin:"auto",paddingBottom:10},addressPaper:{position:"relative",paddingLeft:28,paddingBottom:20,width:380}}}));function _o(){var e=yo(),t=Object(Xe.g)(),n=Object(We.c)(),a=Object(Xe.h)(),r=a.id,i=a.formType,o=r?"edit":"new",c=Object(ze.useState)({loading:!0,category:i,languageOptions:[],eligibilities:[],stepNames:[],steps:[],provider:null,dispatchErrorMsg:[],fieldErrorMsg:{}}),l=Object(Ke.a)(c,2),b=l[0],j=l[1],h=Object(ze.useMemo)((function(){return"new"===o?"organization"===i?"Organization":"Individual":b.provider?"organization"===b.provider.category?"Organization":"Individual":void 0}),[b.provider,i,o]),p=Object(ze.useMemo)((function(){return function(e,t,n){var a={type:e,category:Yn[t]||"",languages:[],company:"",email:"",primary_phone_number:"",alt_phone_number:"",primary_contact:{profile:Object(s.a)({},ea)},secondary_contact:{profile:Object(s.a)({},ea)},main_address:Object(s.a)({},ta),other_addresses:[],operation_hours:Object(s.a)({},On),operation_dates:[{start_date:null,end_date:null}],profile:Object(s.a)({},$n),referrer:"",own_car:!1,skills:"",visibility:!1,status:"",notes:"",commitment:"",start_date:"",reference1_name:"",reference1_phone:"",reference1_email:"",reference2_name:"",reference2_phone:"",reference2_email:"",responses:[]};if(n){var r=Object(s.a)({},Rn(a,n));return r.operation_hours=Object(s.a)(Object(s.a)({},On),In(n.operation_hours)),console.log(r),r}return a}(h,b.category,b.provider)}),[h,b.category,b.provider]),m=Object(ze.useCallback)((function(e){console.log(e);var t=[];t.push(n(M("languages")).then((function(e){return j((function(t){return Object(s.a)(Object(s.a)({},t),{},{languageOptions:e})}))}))),t.push(Ur().then((function(t){null==t[e]||0===t[e].steps_order.length||0===Object.values(t[e].form_structure).length?j((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0,errorMessage:["No fields are available."]})})):j((function(n){return Object(s.a)(Object(s.a)({},n),{},{stepNames:t[e].steps_order,steps:Object.values(t[e].form_structure)})}))}))),Promise.all(t).then((function(){return j((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[n]);Object(ze.useEffect)((function(){r?n(fe(r)).then((function(e){var t=e.provider,n="Organization"===t.type?"organization":Zn[t.category];j((function(e){return Object(s.a)(Object(s.a)({},e),{},{provider:t,category:n})})),m(n)})):m(i)}),[n,r,i,m]);var f=Object(ze.useCallback)((function(e){return function(t){var n=t.target.value,a=e.split(".");if(1===a.length)p[e]=n;else{for(var r=p,i=0;i<a.length-1;i++)r=r[a[i]];r[a[a.length-1]]=n||""}}}),[p]);return b.loading?Object(jt.jsx)(Fa,{message:"Loading..."}):(console.log(b.category),Object(jt.jsx)(Mt.a,{children:Object(jt.jsx)(Ut,{getStepContent:function(t){var n=b.steps[t];return n?Object(jt.jsx)("div",{className:e.content,children:Object.entries(n).map((function(e){var t,n=Object(Ke.a)(e,2),a=n[0],r=n[1],i=b.fieldErrorMsg[a];if("languages"===a&&(t=b.languageOptions),"main_address"===a)return Object(jt.jsx)(Kt,{label:"Main address",children:Object(jt.jsx)(mn,{address:p.main_address,required:r,errMsg:i})},a);if("other_addresses"===a)return Object(jt.jsx)(ia,{otherLocations:p.other_addresses,required:r,errMsg:i},a);if("primary_contact"===a||"secondary_contact"===a)return Object(jt.jsx)(Kt,{label:Qn[a].label,children:Object.keys(ea).map((function(e){return Object(jt.jsx)(gi,{label:Qn[e].label,type:Qn[e].type,component:Qn[e].component,value:p[a].profile[e],onChange:f(a+"."+e),error:null!=i&&null!=i[e],helperText:i?i[e]:null},e)}))},a);if("availability"===a)return Object(jt.jsx)(xo,{operationHours:p.operation_hours,operationDates:p.operation_dates,errMsg:i},a);if("notes"===a)return Object(jt.jsx)(on,{label:Qn[a].label,value:p[a],onChange:f(a),required:r,multiline:!0,variant:"outlined",fullWidth:!0,error:null!=i,helperText:i},a);var o=Object.keys($n).includes(a);if(o&&"Individual"!==h)return null;var c=Qn[a];return null==c&&(c={}),Object(jt.jsx)(gi,{label:Qn[a].label,type:Qn[a].type,component:Qn[a].component,value:o?p.profile[a]:p[a],onChange:f(o?"profile."+a:a),required:r,options:Qn[a].options||t,error:null!=i,helperText:i},a)}))}):null},handleFinish:function(){var e=Object(s.a)({},p);e.operation_hours=function(e){var t=[];return k.a.each(e,(function(e,n){k.a.each(e,(function(e){t.push({week_day:n,start_time:e.start_time,end_time:e.end_time})}))})),t}(e.operation_hours),""===e.status&&(e.status=void 0),console.log(e);var a=mo(p,b.steps);0===Object.keys(a).length?n("edit"===o?function(e,t,n){return console.log("updateProvider id, params",e,t),function(a){var r=u.serverHost+"/provider/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=6;break}return e.next=3,t.json();case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,t.json();case 8:throw n=e.sent,new Error(JSON.stringify(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){console.log("updateProvider provider.id, provider",e.id,e),a(pe(e.id,e)),n(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){n(u.ACTION_ERROR,e)}))}}(r,e,(function(e,n,a){e===u.ACTION_SUCCESS?t.push("/providers/".concat(a)):j((function(e){return Object(s.a)(Object(s.a)({},e),{},{errorMessage:[n.toString()]})}))})):ge(e,(function(e,n,a){e===u.ACTION_SUCCESS?t.push("/providers/"+a):j((function(e){return Object(s.a)(Object(s.a)({},e),{},{errorMessage:[n.toString()]})}))}))):j((function(e){return Object(s.a)(Object(s.a)({},e),{},{fieldErrorMsg:a})}))},stepNames:b.stepNames,error:b.dispatchErrorMsg,title:("new"===o?"Create ":"Edit ")+Yn[b.category]})}))}var Co=n(735),So=n(759);function ko(e){var t,n,a=e.step,r=e.provider,i=e.infoFields,o=e.providerFields,c=k.a.map(i,(function(e,a){if("field"===e.type)switch(t=o[a].label,a){case"first_name":case"middle_name":case"last_name":case"preferred_name":case"gender":case"birth_date":case"email":n="Individual"===r.type?r.profile[a]:r[a];break;case"primary_phone_number":case"alt_phone_number":n="Individual"===r.type?r.profile[a]?hr(r.profile[a]):"None provided":r[a]?hr(r[a]):"None provided";break;case"main_address":n=r[a]?jr(r[a]):"None provided";break;case"other_addresses":n=r[a]?k.a.map(r[a],(function(e,t){return Object(jt.jsx)("p",{children:jr(e)},t)})):null;break;case"languages":n=(r[a]||[]).join(", ");break;case"availability":var i=In(r.operation_hours);n=Object(jt.jsx)(Tn,{operationHourObj:i});break;case"primary_contact":case"secondary_contact":n=r[a]?k.a.map(k.a.keys(ea),(function(e){if(r[a].profile[e])return Object(jt.jsx)("li",{children:"".concat(o[e].label,": ").concat(r[a].profile[e])},e)})):null;break;default:n=r[a]}else if("question"===e.type){t=a;var c=k.a.find(r.responses,(function(t){return t.question_id===e.id.toString()}));n=c?c.text:null}return Object(jt.jsx)(Tr,{title:t,value:n},a)})),s=Nr();return Object(jt.jsx)(ca.a,{className:s.table,component:bt.a,children:Object(jt.jsxs)(sa.a,{"aria-label":"Profile table",children:[Object(jt.jsx)(pa.a,{children:Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{className:s.title,children:a}),Object(jt.jsx)(ua.a,{className:s.title2})]})}),Object(jt.jsx)(la.a,{children:c})]})})}var wo=n(370),Io=n.n(wo),To=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;Object(Ya.a)(this,n),(a=t.call(this,e)).handleStarSelection=a.handleStarSelection.bind(Object(Ni.a)(a)),a.handleCommentChange=a.handleCommentChange.bind(Object(Ni.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ni.a)(a)),a.handleTextRating=a.handleTextRating.bind(Object(Ni.a)(a));var r=a.props.match.params.id;return a.state={id:r,rating:0,comment:""},a}return Object(Xa.a)(n,[{key:"handleStarSelection",value:function(e,t){this.setState({rating:e})}},{key:"handleTextRating",value:function(e){this.setState({rating:e.target.value})}},{key:"handleCommentChange",value:function(e){this.setState({comment:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.match.params.id;this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/provider/"+e+"/rate";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()}))}}(t,this.state)),this.props.history.push("/provider/"+t)}},{key:"render",value:function(){return Object(jt.jsxs)("div",{className:"content",children:[Object(jt.jsxs)(Pi.a,{sm:9,children:[Object(jt.jsx)("h3",{children:" Rate Provider "}),Object(jt.jsx)("hr",{})]}),Object(jt.jsxs)(Di.a,{controlId:"rating",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:5,children:"Rate this provider (0-5)"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",placeholder:"A number between 0 and 5",value:this.state.rating,onChange:this.handleTextRating})})]}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(Io.a,{name:"rating",starCount:5,value:this.state.rating,onStarClick:this.handleStarSelection})}),Object(jt.jsxs)(Pi.a,{sm:9,children:[Object(jt.jsx)("hr",{}),Object(jt.jsxs)(Di.a,{controlId:"comments",children:[Object(jt.jsx)(Fi.a,{children:"Comments"}),Object(jt.jsx)(qi.a,{componentClass:"textarea",placeholder:"Comments about this provider...",onChange:this.handleCommentChange})]})]}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(Ei.a,{type:"submit",onClick:this.handleSubmit,children:" Submit "})})]})}}]),n}(ze.Component),No=Object(We.b)((function(e){return{providersById:e.providers.byId||{},providerLoaded:e.providers.indexLoaded}}))(To),Eo="services",Ao=function(e){var t=e.provider;return"Organization"===t.type?t.company:t.profile?"".concat(t.profile.first_name," ").concat(t.profile.last_name):"Not provided"},Po=[{name:"id",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"name",label:"Name",options:{sort:!0,customBodyRender:function(e,t){var n=t.rowData;return Object(jt.jsx)(Ra,{color:!0,to:"/".concat(Eo,"/")+n[0],children:e})}}},{name:"provider",label:"Provider",options:{sort:!0,customBodyRender:function(e){return Object(jt.jsx)(Ra,{color:!0,to:"/".concat(Eo,"/").concat(e.id),children:Ao({provider:e})})}}},{name:"desc",label:"Description"},{name:"category",label:"Category"}];function Ro(e,t){return t instanceof Array?"".concat(e,": ").concat(t.join(", ")):"".concat(e,": ").concat(t)}var Do=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(){return Object(Ya.a)(this,n),t.apply(this,arguments)}return Object(Xa.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(oe(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.servicesById[t];return Object(jt.jsxs)("div",{className:"content client",children:[Object(jt.jsx)("h3",{children:"Service Profile"}),Object(jt.jsx)(Ue.b,{to:"/services/".concat(n.id,"/edit"),children:Object(jt.jsx)(Ei.a,{bsStyle:"primary",children:"Edit"})})," ",Object(jt.jsx)(Ei.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object(jt.jsx)(fr.a,{fontSize:"small"})}),n&&n.servicesLoaded&&Object(jt.jsx)(no.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object(jt.jsxs)("tbody",{children:[Object(jt.jsx)(Tr,{title:"Name",value:n.name}),Object(jt.jsx)(Tr,{title:"Type",value:n.type}),Object(jt.jsx)(Tr,{title:"Description",value:n.desc}),Object(jt.jsx)(Tr,{title:"Category",value:n.category}),Object(jt.jsx)(Tr,{title:"Eligibility",value:n.eligibility}),Object(jt.jsx)(Tr,{title:"Available from",value:n.available_from}),Object(jt.jsx)(Tr,{title:"Available until",value:n.available_to}),Object(jt.jsx)(Tr,{title:"Languages",value:(n.languages||[]).join(", ")}),Object(jt.jsx)(Tr,{title:"Max Capacity",value:n.max_capacity}),Object(jt.jsx)(Tr,{title:"Current capacity",value:n.current_capacity}),Object(jt.jsx)(Tr,{title:"Frequency",value:n.frequency}),Object(jt.jsx)(Tr,{title:"Billable",value:n.billable}),Object(jt.jsx)(Tr,{title:"Price",value:n.price}),Object(jt.jsx)(Tr,{title:"Method of delivery",value:n.method_of_delivery}),Object(jt.jsx)(Tr,{title:"Method of registration",value:n.method_of_registration}),Object(jt.jsx)(Tr,{title:"Registration",value:n.registration}),Object(jt.jsx)(Tr,{title:"Contact Person Email",value:n.email}),Object(jt.jsx)(Tr,{title:"Contact Person Phone",value:n.primary_phone_number}),Object(jt.jsx)(Tr,{title:"Secondary Phone",value:n.alt_phone_number}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Location"})}),Object(jt.jsx)("td",{children:jr(n.location)})]}),k.a.keys(k.a.omit(n.eligibility_conditions,["lower_age_limit","upper_age_limit"]))>0&&Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Eligibility Conditions"})}),Object(jt.jsxs)("td",{children:[k.a.map(k.a.omit(n.eligibility_conditions,["lower_age_limit","upper_age_limit"]),(function(e,t){return Object(jt.jsx)("li",{children:Ro(t,e)},t)})),n.eligibility_conditions.lower_age_limit&&Object(jt.jsx)("li",{children:Ro("Age greater than",n.eligibility_conditions.lower_age_limit)}),n.eligibility_conditions.upper_age_limit&&Object(jt.jsx)("li",{children:Ro("Age less than",n.eligibility_conditions.upper_age_limit)})]})]}),Object(jt.jsx)(Tr,{title:"Public?",value:n.is_public?"Yes":"No"}),Object(jt.jsx)(Tr,{title:"Share with",value:(n.share_with||[]).join(", ")}),Object(jt.jsx)(Tr,{title:"Notes",value:n.notes}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Provider"})}),Object(jt.jsx)("td",{children:Object(jt.jsx)(Ue.b,{to:"/provider/".concat(n.provider.id),children:"Organization"===n.provider.type?n.provider.company:"".concat(n.provider.profile.first_name," ").concat(n.provider.profile.last_name)})})]})]})})]})}}]),n}(ze.Component),Fo=Object(We.b)((function(e){return{servicesById:e.services.byId,serviceLoaded:e.services.indexLoaded}}))(Do);var Lo=["<",">","<=",">=","=="],Bo=["in"],Mo=1,Go=2,zo=3,Vo=5,Ho={operators:[].concat(Lo,Bo),type:zo},qo=["alt_phone_number","apt_number","city","landing_date","last_name","middle_name","phone_numbers","postal_code","pr_number","preferred_name","primary_phone_number","service_set","street_address"],Wo={age:{operators:Lo,type:Mo},arrival_date:{operators:Lo,type:Go},birth_date:{operators:Lo,type:Go},completed_education_level:{operators:Bo,type:Vo,options:u.educationLevelOptions,multipleSelect:!0},country_of_last_residence:{operators:Bo,type:Vo,options:u.countryOptions,multipleSelect:!0},country_of_origin:{operators:Bo,type:Vo,options:u.countryOptions,multipleSelect:!0},current_education_level:{operators:Bo,type:Vo,options:u.educationLevelOptions,multipleSelect:!0},first_language:{operators:Bo,type:Vo,options:[],multipleSelect:!0},gender:{operators:Bo,type:Vo,options:u.genderOptions,multipleSelect:!0},has_children:{operators:Bo,type:Vo,options:["True","False"],multipleSelect:!0},income_source:{operators:Bo,type:Vo,options:u.incomeSourceOptions,multipleSelect:!0},landing_date:{operators:Lo,type:Go},lat:{operators:Lo,type:Mo},lng:{operators:Lo,type:Mo},marital_status:{operators:Bo,type:Vo,options:u.maritalStatusOptions,multipleSelect:!0},ngo_conditions:{operators:Bo,type:Vo,options:["example"],multipleSelect:!0},num_of_children:{operators:Lo,type:Mo},num_of_dependants:{operators:Lo,type:Mo},other_languages:{operators:Bo,type:Vo,options:u.languageOptions,multipleSelect:!0},province:{operators:Bo,type:Vo,options:u.provinceOptions,multipleSelect:!0},status_in_canada:{operators:Bo,type:Vo,options:u.statusInCanadaOptions,multipleSelect:!0}};function Uo(e){var t,n,a=e.value,r=e.handleChange,i=e.fields,o=e.onDelete,c=Object(ze.useState)(Object(s.a)({operator:a[1]||""},Wo[a[0]]||Ho)),l=Object(Ke.a)(c,2),d=l[0],u=l[1];return t=d.type===zo?Object(jt.jsx)(It.a,{style:{marginLeft:20},label:"Right Operand",defaultValue:(n=a[2],n.slice(1,-1).replace(/\\([\\"])/g,"$1")),onChange:function(e){return r({rightOperand:An(e.target.value)})}}):d.type===Mo?Object(jt.jsx)(It.a,{style:{marginLeft:20},label:"Right Operand",defaultValue:"number"===typeof+a[2]?a[2]:0,onChange:function(e){return r({rightOperand:e.target.value})}}):d.type===Vo&&d.multipleSelect?Object(jt.jsx)(fi,{label:"Right Operand",options:d.options,value:Pn(a[2])||[],onChange:function(e){return r({rightOperand:(t=e.target.value,JSON.stringify(t))});var t},noDefaultStyle:!0}):d.type!==Vo||d.multipleSelect?"Not implemented":Object(jt.jsx)(pn,{style:{marginRight:20},noEmpty:!0,noDefaultStyle:!0,options:d.options,value:a[2],label:"Right Operand",onChange:function(e){return r({rightOperand:e.target.value})}}),Object(jt.jsx)("div",{style:{padding:20},children:Object(jt.jsxs)(er.a,{container:!0,direction:"row",spacing:1,children:[Object(jt.jsx)(pn,{style:{marginRight:20},noEmpty:!0,noDefaultStyle:!0,options:i,value:a[0],label:"Field",onChange:function(e){var t=e.target.value,n={leftOperand:t,rightOperand:""},i=Wo[t]||Ho,o=i.operators;o.includes(a[1])?u((function(e){return Object(s.a)(Object(s.a)({},e),i)})):(n.operator=o[0],u((function(e){return Object(s.a)(Object(s.a)({},e),{},{operator:o[0]},i)}))),r(n),a[2]=""}}),Object(jt.jsx)(pn,{style:{width:60},noEmpty:!0,noDefaultStyle:!0,options:d.operators,label:"Operator",value:d.operator,controlled:!0,onChange:function(e){var t=e.target.value;u((function(e){return Object(s.a)(Object(s.a)({},e),{},{operator:t})})),r({operator:t})}}),t,Object(jt.jsx)(Et.a,{onClick:o,size:"large",children:Object(jt.jsx)(Ft.a,{})})]})})}function Jo(e){var t=e.value,n=e.formValChange,a=Object(ze.useState)(t),r=Object(Ke.a)(a,2),i=r[0],c=r[1],s=Object(ze.useState)({}),l=Object(Ke.a)(s,2),d=l[0],u=l[1];Object(ze.useEffect)((function(){Rr("/formula/fields/").then((function(e){var t=e.fields,n=(e.dynamic_fields,e.functions,{});console.log(t),t.forEach((function(e){qo.includes(e)||(n[e]=e.replace(/(^\w|_\w)/g,(function(e){return e.toUpperCase().replace("_"," ")})).replace("In","in").replace("Of","of"))})),u(n)}))}),[]);for(var b=function(e){return function(t){var n=t.leftOperand,a=t.operator,r=t.rightOperand;e[0]=n||e[0],e[1]=void 0===a?e[1]:a,e[2]=r||e[2]}},j=function(e){return function(){c((function(t){return t[e].push(["age","==",""]),n({target:{value:t}}),Object(o.a)(t)}))}},h=function(e,t){return function(){c((function(a){return a[e].splice(t,1),n({target:{value:a}}),Object(o.a)(a)}))}},p=function(e){return function(){c((function(t){return t.splice(e,1),n({target:{value:t}}),Object(o.a)(t)}))}},m=[],f=0;f<i.length;f++){var O=i[f],g=[];m.push(g);for(var v=0;v<O.length;v++){var x=Object(Ke.a)(O[v],3);x[0],x[1],x[2];g.push(Object(jt.jsx)(er.a,{item:!0,xs:12,children:Object(jt.jsx)(Uo,{value:O[v],handleChange:b(O[v]),fields:d,onDelete:h(f,v)})},v))}}return Object(jt.jsxs)("div",{children:[m.map((function(e,t){return Object(jt.jsx)(bt.a,{variant:"outlined",children:Object(jt.jsxs)(er.a,{container:!0,children:[e,Object(jt.jsxs)(er.a,{item:!0,xs:12,children:[Object(jt.jsx)(nt.a,{onClick:p(t),style:{margin:12,float:"right"},variant:"contained",startIcon:Object(jt.jsx)(Ft.a,{}),children:"Remove"}),Object(jt.jsx)(nt.a,{style:{margin:12,float:"right"},variant:"contained",startIcon:Object(jt.jsx)(dt.a,{}),onClick:j(t),children:"And"})]})]})},t)})),Object(jt.jsx)(nt.a,{style:{margin:12},variant:"contained",onClick:function(){c((function(e){return e.push([]),n({target:{value:e}}),Object(o.a)(e)}))},startIcon:Object(jt.jsx)(dt.a,{}),children:"OR"})]})}var Ko=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;Object(Ya.a)(this,n),(a=t.call(this,e)).formValChange=function(e,t){return function(n){var r=n.target.value,i=e.split("."),o=a.state.form;if(1===i.length)o[e]=r;else{for(var c=a.state.form,l=0;l<i.length-1;l++)c=c[i[l]];c[i[i.length-1]]=r||""}t&&a.setState((function(e){return{form:Object(s.a)({},e.form)}}))}},a.submit=function(){console.log(a.state.form);var e,t,n,r=Object.assign({},a.state.form);r.eligibility_conditions.age=[r.eligibility_conditions.lower_age_limit||null,r.eligibility_conditions.upper_age_limit||null],delete r.eligibility_conditions.lower_age_limit,delete r.eligibility_conditions.upper_age_limit,r.eligibility_criteria=function(e){var t,n=[],a=Object(Nn.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=[];n.push({condition_clauses:i});var o,c=Object(Nn.a)(r);try{var s=function(){var e=Object(Ke.a)(o.value,3),t=e[0],n=e[1],a=e[2],r=i.findIndex((function(e){return e.field_name===t}));-1!==r?i[r].clauses.push({left_operand:t,right_operand:a,operator:n}):i.push({field_name:t,clauses:[{left_operand:t,right_operand:a,operator:n}]})};for(c.s();!(o=c.n()).done;)s()}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}return n}(r.eligibility_criteria),a.validateForm()&&("edit"===a.state.mode?a.props.dispatch((e=a.state.serviceId,t=r,n=function(e,t,n){e===u.ACTION_SUCCESS&&(a.props.history.push("/services"),a.forceUpdate())},function(a){var r=u.serverHost+"/service/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){a(re(e.id,e)),n(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){n(u.ACTION_ERROR,e)}))})):a.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/services/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n(re(e.id,e)),t(u.ACTION_SUCCESS,null,e.id)})).catch((function(e){t(u.ACTION_ERROR,e)}))}}(a.state.form,(function(e,t,n){a.props.history.push("/services"),a.forceUpdate()}))))},a.validateForm=function(){var e={},t=!0;if(a.state.form.provider_id||(t=!1,e.provider_id="*Please enter a provider."),a.state.form.type||(t=!1,e.type="*Please enter the type."),a.state.form.name||(t=!1,e.name="*Please enter the name."),a.state.form.category||(t=!1,e.category="*Please enter the category."),a.state.form.primary_phone_number){var n=Kn.phone(a.state.form.primary_phone_number);n&&(e.primary_phone_number="*"+n)}if(a.state.form.alt_phone_number){var r=Kn.phone(a.state.form.alt_phone_number);r&&(e.alt_phone_number="*"+r)}if(a.state.form.email){var i=Kn.email(a.state.form.email);i&&(e.email="*"+i)}if(a.state.form.location.postal_code){var o=Kn.postalCode(a.state.form.location.postal_code);o&&(e.postal_code="*"+o)}return a.setState({errors:e}),t};var r={};return a.props.match.params.id&&(r=a.props.servicesById[a.props.match.params.id]),a.state={errors:{},serviceId:r.id,mode:r.id?"edit":"new",form:{name:r.name||"",type:r.type||"",desc:r.desc||"",category:r.category||"",available_from:r.available_from||"",available_to:r.available_to||"",languages:r.languages||[],max_capacity:r.max_capacity||"",current_capacity:r.current_capacity||0,frequency:r.frequency||"",billable:r.billable||"No",price:r.price||"",method_of_delivery:r.method_of_delivery||"",method_of_registration:r.method_of_registration||"",registration:r.registration||"",email:r.email||"",primary_phone_number:r.primary_phone_number||"",alt_phone_number:r.alt_phone_number||"",location:Object.assign({id:"",street_address:"",apt_number:"",city:"",province:"",postal_code:""},r.location),location_same_as_provider:r.location_same_as_provider||!1,share_with:r.share_with||[],notes:r.notes||"",eligibility_conditions:Object.assign({upper_age_limit:"",lower_age_limit:"",immigration_status:[],current_education_level:[],completed_education_level:[]},r.eligibility_conditions),provider_id:r.provider&&r.provider.id||"",is_public:r.is_public||!1,eligibility_criteria:En(r.eligibility_criteria)||[]}},a.props.dispatch(M("services")),a.props.dispatch(M("languages")),a.props.dispatch(Oe()),a}return Object(Xa.a)(n,[{key:"render",value:function(){var e,t,n,a=this,r=this.props.classes,i=this.props,o="edit"===this.state.mode?"Edit Service Profile":"New Service";n=this.state.form.provider_id,isNaN(n)||parseInt(Number(n))!==n||isNaN(parseInt(n,10))||(t=(e=this.props.providersById&&this.props.providersById.providersById[this.state.form.provider_id]).other_addresses?e.other_addresses.concat([e.main_address]):[]);var c={},l={};return t&&t.forEach((function(e,t){var n=jr(e);c[n]=n,l[n]=e})),Object(jt.jsxs)(Mt.a,{className:r.root,children:[Object(jt.jsx)(tt.a,{variant:"h5",className:r.title,children:o}),this.state.showAlert&&this.state.error_messages.map((function(e,t){return Object(jt.jsx)(qt.a,{severity:"error",children:e},t)})),Object(jt.jsx)(ar.a,{className:r.divider}),Object(jt.jsx)(tt.a,{variant:"h5",children:"Service Information"}),Object(jt.jsx)(pn,{label:"Provider",options:k.a.reduce(i.providers,(function(e,t){return"Individual"===t.type?e[t.id]=t.profile&&t.profile.first_name+" "+t.profile.last_name:e[t.id]=t.company,e}),{}),value:this.state.form.provider_id,onChange:this.formValChange("provider_id"),required:!0}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.provider_id}),Object(jt.jsx)(Ra,{to:"/providers",color:!0,children:Object(jt.jsx)(tt.a,{children:"Add new provider"})}),Object(jt.jsx)(pn,{label:"Type",options:u.serviceTypeOptions,value:this.state.form.type,onChange:this.formValChange("type"),required:!0}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.type}),Object(jt.jsx)(on,{label:"Name",type:"text",value:this.state.form.name,onChange:this.formValChange("name"),required:!0}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.name}),Object(jt.jsx)(on,{label:"Description",type:"text",value:this.state.form.desc,onChange:this.formValChange("desc")}),Object(jt.jsx)(pn,{label:"Category",options:i.servicesCategories,value:this.state.form.category,onChange:this.formValChange("category"),required:!0}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.category}),Object(jt.jsx)(on,{label:"Available from",type:"date",value:this.state.form.available_from,onChange:this.formValChange("available_from")}),Object(jt.jsx)(on,{label:"Available until",type:"date",value:this.state.form.available_to,onChange:this.formValChange("available_to")}),Object(jt.jsx)(fi,{label:"Languages",options:i.languagesCategories,value:this.state.form.languages,onChange:this.formValChange("languages")}),Object(jt.jsx)(on,{label:"Max Capacity",type:"number",value:this.state.form.max_capacity,min:"0",onChange:this.formValChange("max_capacity")}),parseInt(this.state.form.max_capacity,10)>0&&Object(jt.jsx)(on,{label:"Current Capacity",type:"number",value:this.state.form.current_capacity,min:"0",onChange:this.formValChange("current_capacity")}),Object(jt.jsx)(pn,{label:"Frequency",value:this.state.form.frequency,onChange:this.formValChange("frequency"),options:["Weekly","Biweekly","Monthly","Non-repeated"]}),Object(jt.jsx)(ci,{label:"Billable",value:this.state.form.billable,onChange:this.formValChange("billable",!0),options:{Yes:"Yes",No:"No"}}),"Yes"===this.state.form.billable&&Object(jt.jsx)(on,{label:"Price",type:"text",value:this.state.form.price,onChange:this.formValChange("price")}),Object(jt.jsx)(pn,{label:"Method of delivery",value:this.state.form.method_of_delivery,onChange:this.formValChange("method_of_delivery"),options:{Online:"Online","One on one (In person)":"One on one (In person)",Group:"Group (In person)"}}),Object(jt.jsx)(pn,{label:"Method of registration",value:this.state.form.method_of_registration,onChange:this.formValChange("method_of_registration"),options:["Self registration","Registration by social worker","No registration"]}),Object(jt.jsx)(pn,{label:"Registration",placeholder:"select",value:this.state.form.registration,onChange:this.formValChange("registration"),options:["Online","In person","By phone"]}),Object(jt.jsx)(ar.a,{className:r.divider}),Object(jt.jsx)(tt.a,{variant:"h5",children:"Eligibility"}),Object(jt.jsx)(Jo,{value:this.state.form.eligibility_criteria,formValChange:this.formValChange("eligibility_criteria")}),Object(jt.jsx)(fi,{label:"Immigration Status",options:u.statusInCanadaOptions,value:this.state.form.eligibility_conditions.immigration_status,onChange:this.formValChange("eligibility_conditions.immigration_status")}),Object(jt.jsx)(on,{label:"Age greater than",type:"text",value:this.state.form.eligibility_conditions.lower_age_limit,onChange:this.formValChange("eligibility_conditions.lower_age_limit")}),Object(jt.jsx)(on,{id:"upper_age_limit",label:"Age less than",type:"text",value:this.state.form.eligibility_conditions.upper_age_limit,onChange:this.formValChange("eligibility_conditions.upper_age_limit")}),Object(jt.jsx)(fi,{label:"Current Education",options:u.educationLevelOptions,value:this.state.form.eligibility_conditions.current_education_level,onChange:this.formValChange("eligibility_conditions.current_education_level")}),Object(jt.jsx)(fi,{label:"Completed Education Level",options:u.educationLevelOptions,value:this.state.form.eligibility_conditions.completed_education_level,onChange:this.formValChange("eligibility_conditions.completed_education_level")}),Object(jt.jsx)(ar.a,{className:r.divider}),Object(jt.jsx)(tt.a,{variant:"h5",children:"Contact Information"}),Object(jt.jsx)(on,{label:"Contact Person Email",type:"email",value:this.state.form.email,onChange:this.formValChange("email")}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.email}),Object(jt.jsx)(on,{label:"Telephone",type:"tel",value:this.state.form.primary_phone_number,onChange:this.formValChange("primary_phone_number")}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.primary_phone_number}),Object(jt.jsx)(on,{label:"Alternative Phone Number",type:"tel",value:this.state.form.alt_phone_number,onChange:this.formValChange("alt_phone_number")}),Object(jt.jsx)("div",{className:r.errorText,children:this.state.errors.alt_phone_number}),Object(jt.jsx)(ci,{label:"Location",options:{"Same as provider":!0,Other:!1},onChange:this.formValChange("location_same_as_provider",!0),value:this.state.form.location_same_as_provider}),this.state.form.location_same_as_provider&&this.state.form.provider_id&&Object(jt.jsxs)("div",{children:[Object(jt.jsx)(ci,{label:"Select the location this service is provided at",value:this.state.form.location,options:c,onChange:function(e){a.state.form.location=Object(s.a)({},c[e.target.value]),a.formValChange("location")}}),!k.a.includes(k.a.map(t,"id"),this.state.form.location.id)&&Object(jt.jsx)(tt.a,{style:{marginTop:10},children:"The current location of service is at\n                          ".concat(jr(this.state.form.location),", which has\n                          been removed from provider locations. Please select a\n                          new location.")})]}),!this.state.form.location_same_as_provider&&Object(jt.jsx)(mn,{address:this.state.form.location,errMsg:this.state.errors},"address"),Object(jt.jsx)(ci,{label:"Public?",options:{Yes:!0,No:!1},onChange:this.formValChange("is_public"),value:this.state.form.is_public}),Object(jt.jsx)(ar.a,{className:r.divider}),Object(jt.jsx)(tt.a,{variant:"h5",children:"Other Information"}),Object(jt.jsx)(fi,{label:"Share with",options:u.serviceSharedWithOptions,value:this.state.form.share_with,onChange:this.formValChange("share_with")}),Object(jt.jsx)(on,{label:"Notes",type:"text",value:this.state.form.notes,onChange:this.formValChange("notes"),multiline:!0,variant:"outlined",fullWidth:!0}),Object(jt.jsx)(nt.a,{onClick:this.submit,variant:"outlined",color:"primary",style:{margin:"12px 0"},children:"Submit"})]})}}]),n}(ze.Component);var Yo=Object(We.b)((function(e){return{servicesById:e.services.byId,servicesCategories:e.ontology.services.categories,categoriesLoaded:e.ontology.services.loaded,languagesCategories:e.ontology.languages.categories,languagesLoaded:e.ontology.languages.loaded,providers:e.providers.filteredProviders||[],providersById:e.providers.byId,providersLoaded:e.providers.loaded,providerIndex:e.providers.index}}))(Object(Xe.i)(Object(rt.a)({root:{width:"80%"},divider:{margin:"20px 0"},errorText:{color:"#e41919"},title:{fontWeight:600}})(Ko))),Xo="goods",Zo=function(e){var t=e.provider;return"Organization"===t.type?t.company:t.profile?"".concat(t.profile.first_name," ").concat(t.profile.last_name):"Not provided"},Qo=[{name:"id",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"name",label:"Name",options:{sort:!0,customBodyRender:function(e,t){var n=t.rowData;return Object(jt.jsx)(Ra,{color:!0,to:"/".concat(Xo,"/").concat(n[0]),children:e})}}},{name:"provider",label:"Provider",options:{sort:!0,customBodyRender:function(e){return Object(jt.jsx)(Ra,{color:!0,to:"/".concat(Xo,"/").concat(e.id),children:Zo({provider:e})})}}},{name:"desc",label:"Description"},{name:"category",label:"Category"}];var $o=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(){return Object(Ya.a)(this,n),t.apply(this,arguments)}return Object(Xa.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(Ae(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.goodsById[t];return Object(jt.jsxs)("div",{className:"content client",children:[Object(jt.jsx)("h3",{children:"Good Profile"}),Object(jt.jsx)(Ue.b,{to:"/goods/".concat(n.id,"/edit"),children:Object(jt.jsx)(Ei.a,{bsStyle:"primary",children:"Edit"})})," ",Object(jt.jsx)(Ei.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object(jt.jsx)(fr.a,{fontSize:"small"})}),n&&n.goodsLoaded&&Object(jt.jsx)(no.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object(jt.jsxs)("tbody",{children:[Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Name"})}),Object(jt.jsx)("td",{children:n.name})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Description"})}),Object(jt.jsx)("td",{children:n.desc})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Category"})}),Object(jt.jsx)("td",{children:n.category})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Available from"})}),Object(jt.jsx)("td",{children:n.available_from})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Available until"})}),Object(jt.jsx)("td",{children:n.available_to})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Transportation"})}),Object(jt.jsx)("td",{children:n.transportation})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Condition"})}),Object(jt.jsx)("td",{children:n.condition})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Material"})}),Object(jt.jsx)("td",{children:n.material})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Quantity"})}),Object(jt.jsx)("td",{children:n.quantity})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Length"})}),Object(jt.jsx)("td",{children:n.length})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Width"})}),Object(jt.jsx)("td",{children:n.width})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Height"})}),Object(jt.jsx)("td",{children:n.height})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Diameter"})}),Object(jt.jsx)("td",{children:n.diameter})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Contact Person Email"})}),Object(jt.jsx)("td",{children:n.email})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Contact Person Phone"})}),Object(jt.jsx)("td",{children:n.primary_phone_number})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Secondary Phone"})}),Object(jt.jsx)("td",{children:n.alt_phone_number})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Location"})}),Object(jt.jsx)("td",{children:jr(n.location)})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Share with"})}),Object(jt.jsx)("td",{children:(n.share_with||[]).join(", ")})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Notes"})}),Object(jt.jsx)("td",{children:n.notes})]}),Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Provider"})}),Object(jt.jsx)("td",{children:Object(jt.jsx)(Ue.b,{to:"/provider/".concat(n.provider.id),children:"".concat(n.provider.profile.first_name," ").concat(n.provider.profile.last_name)})})]})]})})]})}}]),n}(ze.Component),ec=Object(We.b)((function(e){return{goodsById:e.goods.byId,goodLoaded:e.goods.indexLoaded}}))($o),tc=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;Object(Ya.a)(this,n);var r={};return(a=t.call(this,e)).props.match.params.id&&(r=a.props.goodsById[a.props.match.params.id]),a.state={goodId:r.id,mode:r.id?"edit":"new",is_provider_location:!1,form:{name:r.name||"",desc:r.desc||"",category:r.category||"",available_from:r.available_from||"",available_to:r.available_to||"",transportation:r.transportation||"",condition:r.condition||"",material:r.material||"",quantity:r.quantity||"",length:r.length||"",width:r.width||"",height:r.height||"",diameter:r.diameter||"",email:r.email||"",primary_phone_number:r.primary_phone_number||"",alt_phone_number:r.alt_phone_number||"",location:Object.assign({street_address:"",apt_number:"",city:"",province:"",postal_code:""},r.location),share_with:r.share_with||"",notes:r.notes||"",provider_id:r.provider&&r.provider.id||""}},a.formValChange=a.formValChange.bind(Object(Ni.a)(a)),a.locationChange=a.locationChange.bind(Object(Ni.a)(a)),a.submit=a.submit.bind(Object(Ni.a)(a)),a.indicatorChange=a.indicatorChange.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(M("goods")),this.props.dispatch(Oe())}},{key:"formValChange",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id;t="location"===n?Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},n,JSON.parse(e.target.value))):Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},n,e.target.value)),this.setState({form:t})}},{key:"locationChange",value:function(e){var t=k.a.clone(this.state.form);t.location[e.target.id]=e.target.value,this.setState({form:t})}},{key:"indicatorChange",value:function(e,t){this.setState(Object(c.a)({},t,JSON.parse(e.target.value)))}},{key:"submit",value:function(){var e,t,n,a=this,r=Object.assign({},this.state.form);"edit"===this.state.mode?this.props.dispatch((e=this.state.goodId,t=r,n=function(e,t,n){if(e===Ie)a.props.history.push("/goods/");else{var r=k.a.reduce(JSON.parse(t.message),(function(e,t,n){var a=(n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" ");return k.a.each(t,(function(t){e.push(t.replace("This field",a))})),e}),[]);a.setState({showAlert:!0,error_messages:r})}},function(a){var r=u.serverHost+"/good/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){a(Ne(e.id,e)),n(Ie,null,e.id)})).catch((function(e){n(we,e)}))})):this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/goods/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(T.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n(Ne(e.id,e)),t(Ie,null,e.id)})).catch((function(e){t(we,e)}))}}(this.state.form,(function(e,t,n){if(e===Ie)a.props.history.push("/goods/");else{var r=k.a.reduce(JSON.parse(t.message),(function(e,t,n){var a=(n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" ");return k.a.each(t,(function(t){e.push(t.replace("This field",a))})),e}),[]);a.setState({showAlert:!0,error_messages:r})}})))}},{key:"render",value:function(){var e,t=this,n=this.props,a="edit"===this.state.mode?"Edit Good Profile":"New Good";return this.state.form.provider_id&&(e=this.props.providersById&&this.props.providersById[this.state.form.provider_id]),Object(jt.jsxs)(Ai.a,{className:"content",children:[Object(jt.jsxs)(Pi.a,{sm:12,children:[Object(jt.jsx)("h3",{children:a}),Object(jt.jsx)("hr",{})]}),Object(jt.jsx)(Pi.a,{sm:12,children:Object(jt.jsxs)(Ri.a,{horizontal:!0,children:[this.state.showAlert&&Object(jt.jsx)(Pi.a,{sm:12,className:"flash-error",children:k.a.map(this.state.error_messages,(function(e,t){return Object(jt.jsx)("li",{children:e},t)}))}),Object(jt.jsx)(pn,{id:"provider_id",label:"Provider",options:k.a.reduce(n.providers,(function(e,t){return"Individual"===t.type?e[t.id]=t.profile.first_name+" "+t.profile.last_name:e[t.id]=t.company,e}),{}),componentClass:"select",value:this.state.form.provider_id,onChange:this.formValChange,required:!0}),Object(jt.jsx)(Di.a,{children:Object(jt.jsx)(Pi.a,{smOffset:3,sm:9,children:Object(jt.jsx)(Ue.b,{to:"/providers/new",children:Object(jt.jsx)(Ei.a,{children:"Add new provider"})})})}),Object(jt.jsx)(on,{id:"name",label:"Name",type:"text",value:this.state.form.name,onChange:this.formValChange,required:!0}),Object(jt.jsxs)(Di.a,{controlId:"desc",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Description"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.desc,onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"category",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Category *"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsxs)(qi.a,{componentClass:"select",placeholder:"select",value:this.state.form.category,onChange:this.formValChange,required:!0,children:[Object(jt.jsx)("option",{value:"select",children:"-- Not Set --"}),Object(jt.jsx)("option",{value:"Furniture",children:"Furniture"}),Object(jt.jsx)("option",{value:"Food",children:"Food"}),Object(jt.jsx)("option",{value:"Clothing",children:"Clothing"}),Object(jt.jsx)("option",{value:"Utensils",children:"Utensils"}),Object(jt.jsx)("option",{value:"Books",children:"Books"})]})})]}),Object(jt.jsxs)(Di.a,{controlId:"transportation",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Transportation"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.transportation,onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"available_from",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Available from"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"date",value:this.state.form.available_from,onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"available_to",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Available until"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"date",value:this.state.form.available_to,onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"condition",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Condition"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.condition,onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"material",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Material"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.material,onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"quantity",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Quantity"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.quantity,placeholder:"",onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"length",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Length"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.length,placeholder:"",onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"width",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Width"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.width,placeholder:"",onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"height",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Height"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.height,placeholder:"",onChange:this.formValChange})})]}),Object(jt.jsxs)(Di.a,{controlId:"diameter",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Diameter"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.diameter,placeholder:"",onChange:this.formValChange})})]}),Object(jt.jsx)(on,{id:"email",label:"Contact Person Email",type:"email",value:this.state.form.email,onChange:this.formValChange,required:!0}),Object(jt.jsx)(on,{id:"primary_phone_number",label:"Telephone",type:"tel",value:this.state.form.primary_phone_number,onChange:this.formValChange,required:!0}),Object(jt.jsx)(on,{id:"alt_phone_number",label:"Alternative Phone Number",type:"tel",value:this.state.form.alt_phone_number,onChange:this.formValChange,required:!0}),Object(jt.jsx)(ci,{id:"is_provider_location",label:"Location",options:{"Same as provider":!0,Other:!1},onChange:this.indicatorChange,defaultChecked:this.state.is_provider_location,required:!0}),this.state.is_provider_location&&this.state.form.provider_id&&Object(jt.jsx)("div",{children:Object(jt.jsxs)(Di.a,{controlId:"location",children:[Object(jt.jsx)(Pi.a,{className:"required",componentClass:Fi.a,sm:3,children:"Select the location this good is provided at"}),Object(jt.jsxs)(Pi.a,{sm:9,children:[Object(jt.jsx)(Ri.a.Check,{name:"provider_address",value:JSON.stringify(e.main_address),onChange:function(e){return t.formValChange(e,"location")},type:"radio",children:jr(e.main_address)})," ",e.other_addresses.map((function(e,n){return Object(jt.jsx)(Ri.a.Check,{name:"provider_address",value:JSON.stringify(e),onChange:function(e){return t.formValChange(e,"location")},type:"radio",children:jr(e)},n)}))]})]})}),!this.state.is_provider_location&&Object(jt.jsxs)("div",{children:[Object(jt.jsx)(on,{id:"street_address",label:"Street Address",type:"text",value:this.state.form.location.street_address,onChange:this.locationChange}),Object(jt.jsx)(on,{id:"apt_number",label:"Apt. #",type:"text",value:this.state.form.location.apt_number,onChange:this.locationChange}),Object(jt.jsx)(on,{id:"city",label:"City",type:"text",value:this.state.form.location.city,onChange:this.locationChange}),Object(jt.jsx)(pn,{id:"province",label:"Province",options:u.provinceOptions,componentClass:"select",value:this.state.form.location.province,onChange:this.locationChange}),Object(jt.jsx)(on,{id:"postal_code",label:"Postal Code",type:"text",value:this.state.form.location.postal_code,onChange:this.locationChange})]}),Object(jt.jsxs)(Di.a,{controlId:"share_with",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Share with"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsxs)(qi.a,{componentClass:"select",placeholder:"select",value:this.state.form.share_with,onChange:this.formValChange,children:[Object(jt.jsx)("option",{value:"select",children:"-- Not Set --"}),Object(jt.jsx)("option",{value:"Private",children:"Private"}),Object(jt.jsx)("option",{value:"Public",children:"Public"}),Object(jt.jsx)("option",{value:"Boost Child & Youth Advocacy Centre",children:"Boost Child & Youth Advocacy Centre"}),Object(jt.jsx)("option",{value:"Children's Aid Society of Toronto",children:"Children's Aid Society of Toronto"}),Object(jt.jsx)("option",{value:"Abrigo Centre",children:"Abrigo Centre"}),Object(jt.jsx)("option",{value:"Barbra Schlifer Commemorative Clinic",children:"Barbra Schlifer Commemorative Clinic"}),Object(jt.jsx)("option",{value:"Durham Rape Crisis Centre",children:"Durham Rape Crisis Centre"}),Object(jt.jsx)("option",{value:"Durham Children's Aid Society",children:"Durham Children's Aid Society"}),Object(jt.jsx)("option",{value:"Alexandra Park Community Centre",children:"Alexandra Park Community Centre"}),Object(jt.jsx)("option",{value:"Applegrove Community Complex",children:"Applegrove Community Complex"}),Object(jt.jsx)("option",{value:"Albion Neighbourhood Goods",children:"Albion Neighbourhood Goods"}),Object(jt.jsx)("option",{value:"Applegrove Community Complex",children:"Applegrove Community Complex"}),Object(jt.jsx)("option",{value:"Kababayan Multicultural Centre",children:"Kababayan Multicultural Centre"}),Object(jt.jsx)("option",{value:"Central Toronto Youth Goods",children:"Central Toronto Youth Goods"}),Object(jt.jsx)("option",{value:"Covenant House Toronto",children:"Covenant House Toronto"}),Object(jt.jsx)("option",{value:"Durham Youth Housing and Support Goods",children:"Durham Youth Housing and Support Goods"}),Object(jt.jsx)("option",{value:"Eva's Initiatives",children:"Eva's Initiatives"}),Object(jt.jsx)("option",{value:"Horizons for Youth",children:"Horizons for Youth"}),Object(jt.jsx)("option",{value:"AIDS Committee of Durham Region",children:"AIDS Committee of Durham Region"}),Object(jt.jsx)("option",{value:"Arab Community Centre of Toronto",children:"Arab Community Centre of Toronto"}),Object(jt.jsx)("option",{value:"Pediatric Oncology Group of Ontario",children:"Pediatric Oncology Group of Ontario"}),Object(jt.jsx)("option",{value:"Adventist community goods",children:"Adventist community goods"}),Object(jt.jsx)("option",{value:"Aurora Food Pantry",children:"Aurora Food Pantry"}),Object(jt.jsx)("option",{value:"Bluffs Food Bank",children:"Bluffs Food Bank"}),Object(jt.jsx)("option",{value:"Brock Community Food Bank",children:"Brock Community Food Bank"}),Object(jt.jsx)("option",{value:"Markham Food Bank",children:"Markham Food Bank"}),Object(jt.jsx)("option",{value:"Parkdale Community Food Bank",children:"Parkdale Community Food Bank"})]})})]}),Object(jt.jsxs)(Di.a,{controlId:"notes",children:[Object(jt.jsx)(Pi.a,{componentClass:Fi.a,sm:3,children:"Notes"}),Object(jt.jsx)(Pi.a,{sm:9,children:Object(jt.jsx)(qi.a,{type:"text",value:this.state.form.notes,onChange:this.formValChange})})]}),Object(jt.jsx)(Di.a,{children:Object(jt.jsx)(Pi.a,{smOffset:3,sm:9,children:Object(jt.jsx)(Ei.a,{onClick:this.submit,children:"Submit"})})})]})})]})}}]),n}(ze.Component),nc=Object(We.b)((function(e){return{goodsById:e.goods.byId,servicesCategories:e.ontology.services.categories,categoriesLoaded:e.ontology.services.loaded,providers:e.providers.filteredProviders||[],providersById:e.providers.byId,providersLoaded:e.providers.loaded,providerIndex:e.providers.index}}))(Object(Xe.i)(tc));function ac(){return(ac=Object(T.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr("/admin_logs/"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(e,t){return"Person"===e?"/clients/".concat(t):"EligibilityCriteria"===e?"/eligibility-criteria/".concat(t):"/".concat(e.toLowerCase(),"s/").concat(t)}var ic=[{name:"action_time",label:"Time",options:{customBodyRender:function(e){return new Date(e).toLocaleString()}}},{name:"user",label:"Username",options:{customBodyRender:function(e){return Object(jt.jsx)(Ra,{color:!0,to:"/users/".concat(e.id),children:e.username})}}},{name:"object_id",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"object_repr",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"action",label:"Action",options:{customBodyRender:function(e,t){var n=t.rowData,a=n[2],r=n[3];return Object(jt.jsxs)("span",{children:[e+" ",Object(jt.jsx)(Ra,{color:!0,to:rc(r,a),children:a})]})}}},{name:"change_message",label:"Message",options:{customBodyRender:function(e){if(e)try{if(null!=(e=JSON.parse(e)).reason)return"Reason: "+e.reason}catch(t){}return"N/A"}}}];var oc=n(130),cc=(n(623),[1931,1941,1951,1961,1971,1981,1991,2001,2011]),sc=function(e){Object(Za.a)(n,e);var t=Object(Qa.a)(n);function n(e){var a;return Object(Ya.a)(this,n),(a=t.call(this,e)).state={total_clients:0,number_of_clients_by_gender:{},number_of_clients_by_birth_year:{},number_of_clients_by_marital_status:{},number_of_clients_by_language:{},number_of_providers_by_status:{},number_of_providers_by_type:{},number_of_individual_providers_by_category:{},selectedCategory:"",selectedAttribute:""},a.handleSelectChange=a.handleSelectChange.bind(Object(Ni.a)(a)),a}return Object(Xa.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=u.serverHost+"/reporting?years="+cc;fetch(t,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(t){e.setState({total_clients:t.total_clients,number_of_clients_by_gender:t.number_of_clients_by_gender,number_of_clients_by_birth_year:t.number_of_clients_by_birth_year,number_of_clients_by_marital_status:t.number_of_clients_by_marital_status,number_of_clients_by_language:t.number_of_clients_by_language,number_of_providers_by_status:t.number_of_providers_by_status,number_of_providers_by_type:t.number_of_providers_by_type,number_of_individual_providers_by_category:t.number_of_individual_providers_by_category})}))}},{key:"handleSelectChange",value:function(e){this.setState(Object(c.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e={labels:k.a.map(cc,(function(e){return"".concat(e,"-").concat(e+9)})),datasets:[{data:Object.values(this.state.number_of_clients_by_birth_year)}]},t={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},n={labels:Object.keys(this.state.number_of_clients_by_language),datasets:[{data:Object.values(this.state.number_of_clients_by_language)}]},a=[{value:this.state.number_of_clients_by_gender.Female,color:"#F7464A",highlight:"#FF5A5E",label:"Female"},{value:this.state.number_of_clients_by_gender.Male,color:"#46BFBD",highlight:"#5AD3D1",label:"Male"},{value:this.state.number_of_clients_by_gender.Other,color:"#FDB45C",highlight:"#FFC870",label:"Other"}],r=[{value:this.state.number_of_providers_by_status.Internal,color:"#46BFBD",highlight:"#5AD3D1",label:"Internal"},{value:this.state.number_of_providers_by_status.External,color:"#FDB45C",highlight:"#FFC870",label:"External"}],i=[{value:this.state.number_of_individual_providers_by_category["Volunteer/Goods Donor"],color:"#46BFBD",highlight:"#5AD3D1",label:"Volunteer/Goods Donor"},{value:this.state.number_of_individual_providers_by_category["Professional Service Provider"],color:"#FDB45C",highlight:"#FFC870",label:"Professional Service Provider"}],o=[{value:this.state.number_of_providers_by_type.Individual,color:"#46BFBD",highlight:"#5AD3D1",label:"Individual"},{value:this.state.number_of_providers_by_type.Organization,color:"#FDB45C",highlight:"#FFC870",label:"Organization"}],c={labels:Object.keys(this.state.number_of_clients_by_marital_status),datasets:[{data:Object.values(this.state.number_of_clients_by_marital_status)}]},s={maintainAspectRatio:!1,responsive:!1,legend:{display:!0,position:"right",labels:{boxWidth:10}}};return Object(jt.jsxs)("div",{className:"content client",children:[Object(jt.jsx)(Ei.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object(jt.jsx)(fr.a,{fontSize:"small"})}),Object(jt.jsx)(pn,{id:"selectedCategory",componentClass:"select",label:"Get a report on",value:this.state.selectedCategory,options:["Clients","Providers","Services","Matches"],onChange:this.handleSelectChange}),Object(jt.jsx)("br",{}),Object(jt.jsx)("br",{}),Object(jt.jsx)(pn,{id:"selectedAttribute",componentClass:"select",label:"Select attribute",value:this.state.selectedAttribute,options:""!==this.state.selectedCategory?{Clients:["Birth Year","Gender","Language","Marital Status"],Providers:["Individuals by Category","Status","Type"],Services:["Category","Type"],Matches:["Time between selected and matched","Time between selected and fulfilled"]}[this.state.selectedCategory]:[],onChange:this.handleSelectChange}),Object(jt.jsx)("br",{}),Object(jt.jsx)("br",{}),Object(jt.jsx)("br",{}),Object(jt.jsx)("br",{}),"Clients"===this.state.selectedCategory&&"Gender"===this.state.selectedAttribute&&Object(jt.jsx)(lc,{data:a,options:s,totalClientsCount:this.state.total_clients,ClientsCountByGender:this.state.number_of_clients_by_gender}),"Clients"===this.state.selectedCategory&&"Language"===this.state.selectedAttribute&&Object(jt.jsx)(jc,{data:n,options:t,totalClientsCount:this.state.total_clients,ClientsCountByLanguage:this.state.number_of_clients_by_language}),"Clients"===this.state.selectedCategory&&"Marital Status"===this.state.selectedAttribute&&Object(jt.jsx)(hc,{data:c,options:t,totalClientsCount:this.state.total_clients,ClientsCountByMaritalStatus:this.state.number_of_clients_by_marital_status}),"Clients"===this.state.selectedCategory&&"Birth Year"===this.state.selectedAttribute&&Object(jt.jsx)(pc,{data:e,options:t,ClientsCountByBirthYear:this.state.number_of_clients_by_birth_year}),"Providers"===this.state.selectedCategory&&"Status"===this.state.selectedAttribute&&Object(jt.jsx)(dc,{data:r,options:s,ProvidersCountByStatus:this.state.number_of_providers_by_status}),"Providers"===this.state.selectedCategory&&"Type"===this.state.selectedAttribute&&Object(jt.jsx)(bc,{data:o,options:s,ProvidersCountByType:this.state.number_of_providers_by_type}),"Providers"===this.state.selectedCategory&&"Individuals by Category"===this.state.selectedAttribute&&Object(jt.jsx)(uc,{data:i,options:s,IndividualProvidersCountByCategory:this.state.number_of_individual_providers_by_category})]})}}]),n}(ze.Component);function lc(e){var t=e.data,n=e.options,a=e.totalClientsCount,r=e.ClientsCountByGender;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Breakdown of clients by Gender"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Pie,{data:t,options:n}),Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:["Total = ",a]})}),k.a.map(r,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function dc(e){var t=e.data,n=e.options,a=e.ProvidersCountByStatus;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Breakdown of providers by Status"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function uc(e){var t=e.data,n=e.options,a=e.IndividualProvidersCountByCategory;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Breakdown of individual providers by Category"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function bc(e){var t=e.data,n=e.options,a=e.ProvidersCountByType;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Breakdown of providers by type"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function jc(e){var t=e.data,n=e.options,a=e.ClientsCountByLanguage;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Breakdown of clients by Language"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function hc(e){var t=e.data,n=e.options,a=e.ClientsCountByMaritalStatus;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Breakdown of clients by Marital Status"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function pc(e){var t=e.data,n=e.options,a=e.ClientsCountByBirthYear;return Object(jt.jsx)(no.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object(jt.jsx)("tbody",{children:Object(jt.jsxs)("tr",{children:[Object(jt.jsx)("td",{children:Object(jt.jsx)("b",{children:"Distribution of clients by Birth Year"})}),Object(jt.jsxs)("td",{children:[Object(jt.jsx)(oc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object(jt.jsx)("div",{children:Object(jt.jsxs)("b",{children:["Clients born between ",t," and ",parseInt(t,10)+9," = ",e]})},t)}))]})]})})})}var mc=Object(at.a)((function(){return{button:{padding:4}}})),fc="Add Eligibility Criteria";function Oc(e){var t=e.open,n=e.title,a=e.value,r=e.handleConfirm,i=e.handleClose,o=Object(ze.useState)({title:""}),c=Object(Ke.a)(o,2),s=c[0],l=c[1];return Object(jt.jsxs)(yt.a,{open:t,onClose:i,fullWidth:!0,children:[Object(jt.jsx)(_t.a,{children:n}),Object(jt.jsx)(Ct.a,{children:Object(jt.jsx)(on,{autoFocus:!0,label:"Eligible criteria",value:a.title,onChange:function(e){return a.title=e.target.value},error:!!s.title,helperText:s.title,fullWidth:!0,InputLabelProps:{}})}),Object(jt.jsxs)(kt.a,{children:[Object(jt.jsx)(nt.a,{onClick:function(){(function(){var e={};return""===a.title&&(e.title="This field is required"),l(e),""!==a.title})()&&r()},color:"primary",children:"Confirm"}),Object(jt.jsx)(nt.a,{onClick:i,children:"Cancel"})]})]})}function gc(){return Rr("/questions/")}function vc(e,t){return xc.apply(this,arguments)}function xc(){return(xc=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr("/questions/"+t+"/",n);case 2:if(204===e.sent.status){e.next=5;break}throw Error("Server does not return correct code.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yc=n(251),_c=n(736),Cc=Object(at.a)((function(e){return{root:{paddingTop:8},droppable:{display:"flex",flexDirection:"column"},submitButton:{margin:"10px 0"}}})),Sc={Mandatory:!0,"Not mandatory":!1};function kc(e){var t=e.stepFields,n=e.fields,a=e.stepName,r=e.handleRadioChange,i=e.handleDeleteField;return t.map((function(e,t){var o=e.field,c=e.required;e.type;return Object(jt.jsx)(yc.b,{draggableId:o,index:t,children:function(e,l){return Object(jt.jsxs)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{style:Object(s.a)({backgroundColor:l.isDragging?"#bbb":null},e.draggableProps.style),children:[Object(jt.jsx)(ci,{required:!0,noStar:!0,row:!0,label:n[o]&&n[o].label||o,onChange:r(o,a),options:Sc,value:c},o),Object(jt.jsx)(Et.a,{onClick:function(){return!l.isDragging&&i(t,a)},size:"large",children:Object(jt.jsx)(_c.a,{})})]}))}},o)}))}var wc=Object(at.a)((function(){return{button:{padding:4},formControl:{margin:null}}})),Ic="Add Question",Tc="Edit Question",Nc={provider:"Provider"};function Ec(e){var t=e.open,n=e.title,a=e.value,r=(e.objectId,e.handleConfirm),i=e.handleClose,o=Object(ze.useState)({type:"",value:""}),c=Object(Ke.a)(o,2),s=c[0],l=c[1];return Object(jt.jsxs)(yt.a,{open:t,onClose:i,fullWidth:!0,children:[Object(jt.jsx)(_t.a,{children:n}),Object(jt.jsxs)(Ct.a,{children:[Object(jt.jsx)(pn,{label:"Content type",value:a.content_type,options:Nc,onChange:function(e){return a.content_type=e.target.value},disabled:n===Tc,formControlProps:{fullWidth:!0},error:!!s.content_type,helperText:s.content_type,required:!0,noDefaultStyle:!0,noEmpty:!0}),Object(jt.jsx)(on,{label:"Question",value:a.text,onChange:function(e){return a.text=e.target.value},error:!!s.text,helperText:s.text,fullWidth:!0})]}),Object(jt.jsxs)(kt.a,{children:[Object(jt.jsx)(nt.a,{onClick:function(){(function(){var e={};return""===a.content_type&&(e.content_type="This field is required"),""===a.text&&(e.text="This field is required"),l(e),""!==a.content_type&&""!==a.text})()&&r()},color:"primary",children:"Confirm"}),Object(jt.jsx)(nt.a,{onClick:i,children:"Cancel"})]})]})}var Ac=Object(jt.jsxs)(Xe.d,{children:[Object(jt.jsx)(Xe.b,{exact:!0,path:"/",component:$a}),Object(jt.jsx)(Xe.b,{path:"/login",component:nr}),Object(jt.jsx)(Xe.b,{path:"/login-pane",component:ir}),Object(jt.jsx)(so,{path:"/dashboard",component:br}),Object(jt.jsx)(so,{path:"/clients/:id/edit",component:yi}),Object(jt.jsx)(so,{path:"/clients/:id/needs/new",component:Bi}),Object(jt.jsx)(so,{path:"/clients/new",component:yi}),Object(jt.jsx)(so,{path:"/clients/:id",component:function(){var e=Object(We.c)(),t=Object(Xe.h)().id,n=Object(ze.useState)({data:null,CF:null,CN:null}),a=Object(Ke.a)(n,2),r=a[0],i=a[1];if(Object(ze.useEffect)((function(){e(Y(t)).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e})}))}))}),[e,t]),Object(ze.useEffect)((function(){null==r.CF&&qr().then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{CF:e})}))}))}),[e,r.CF]),r.data&&r.CF){var o=r.data,c=r.CF.form_structure;if(o.family){var l=k.a.clone(o.family.members);k.a.remove(l,{person:{id:t}})}return Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)("h3",{children:"Client Profile"}),Object(jt.jsxs)("div",{children:[Object(jt.jsx)(Ra,{to:"/clients/".concat(t,"/edit/"),children:Object(jt.jsx)(nt.a,{variant:"contained",startIcon:Object(jt.jsx)(Dt.a,{}),children:"Edit"})}),"\xa0",Object(jt.jsx)(nt.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},startIcon:Object(jt.jsx)(fr.a,{}),children:"Print"}),Object(jt.jsxs)("div",{children:[o.is_deleted&&Object(jt.jsx)(qt.a,{variant:"filled",severity:"error",children:"The client has been deleted"}),k.a.map(c,(function(e,t){return Object(jt.jsx)(Er,{step:t,client:o,infoFields:k.a.keys(k.a.omit(e,"family")),clientFields:Yr},t)})),o.family&&o.family.members.length>0&&Object(jt.jsx)(ca.a,{children:Object(jt.jsxs)(sa.a,{children:[Object(jt.jsx)(pa.a,{children:Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{children:"First name"}),Object(jt.jsx)(ua.a,{children:"Last name"}),Object(jt.jsx)(ua.a,{children:"Date of Birth"}),Object(jt.jsx)(ua.a,{children:"Gender"}),Object(jt.jsx)(ua.a,{children:"Relationship"})]})}),k.a.map(k.a.filter(o.family.members,(function(e){return e.person.id!==o.id})),(function(e,t){return Object(jt.jsx)("clientFamilyTableRow",{member:e,index:t})}))]})})]}),Object(jt.jsx)("h3",{children:"Needs"}),Object(jt.jsx)(Ra,{to:"/clients/".concat(o.id,"/needs/new"),children:Object(jt.jsx)(nt.a,{variant:"contained",children:"Add need"})}),o&&o.need_groups.length>0&&Object(jt.jsx)(Ir,{clientId:o.id,needGroups:o.need_groups}),Object(jt.jsx)("h3",{children:"Appointments"}),o&&o.appointments.length>0&&Object(jt.jsx)(ca.a,{children:Object(jt.jsxs)(sa.a,{children:[Object(jt.jsx)(pa.a,{children:Object(jt.jsxs)(da.a,{children:[Object(jt.jsx)(ua.a,{children:"Category"}),Object(jt.jsx)(ua.a,{children:"Date"}),Object(jt.jsx)(ua.a,{children:"Time"}),Object(jt.jsx)(ua.a,{children:"Description"})]})}),Object(jt.jsx)(la.a,{children:o.appointments.map((function(e){return Object(jt.jsx)(Ar,{appointment:e},e.id)}))})]})}),Object(jt.jsx)("hr",{})]})]})}return null}}),Object(jt.jsx)(so,{path:"/clients",component:function(){var e=function(e){return e.profile.first_name+" "+e.profile.last_name};return Object(jt.jsx)(Gt,{type:pr,columnsWithoutOptions:mr,fetchData:X,deleteItem:Z,generateMarkers:function(t,n,a){return t.slice((n-1)*a,n*a).map((function(t){return{position:{lat:Number(t.address.lat),lng:Number(t.address.lng)},title:e(t),link:"/".concat(pr,"/").concat(t.id),content:t.address&&jr(t.address)}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:e,tableOptions:{idField:"id"}})}}),Object(jt.jsx)(uo,{path:"/users/:id/edit",component:Ti}),Object(jt.jsx)(uo,{path:"/users/new",component:Ti}),Object(jt.jsx)(uo,{path:"/users/:id",component:function(){var e=Object(ze.useState)(!0),t=Object(Ke.a)(e,2),n=t[0],a=t[1],r=Object(ze.useState)({}),i=Object(Ke.a)(r,2),o=i[0],c=i[1],s=Object(Xe.h)().id;return Object(ze.useEffect)((function(){Si(s).then((function(e){c(e),a(!1)}))}),[s]),n?Object(jt.jsx)(Fa,{message:"Loading user..."}):Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)(tt.a,{variant:"h5",gutterBottom:!0,children:"User profile"}),Object(jt.jsx)(Ra,{to:"/users/".concat(s,"/edit"),children:Object(jt.jsx)(nt.a,{color:"primary",variant:"contained",style:{marginBottom:12},children:"Edit"})}),Object(jt.jsx)(bt.a,{elevation:4,children:Object(jt.jsx)(sa.a,{children:Object(jt.jsxs)(la.a,{children:[Object(jt.jsx)(Tr,{title:"First Name",value:o.first_name}),Object(jt.jsx)(Tr,{title:"Last Name",value:o.last_name}),Object(jt.jsx)(Tr,{title:"Username",value:o.username}),Object(jt.jsx)(Tr,{title:"Email",value:o.email}),Object(jt.jsx)(Tr,{title:"Role",value:o.is_superuser?"Admin":"User"}),Object(jt.jsx)(Tr,{title:"Phone Number",value:o.primary_phone_number}),Object(jt.jsx)(Tr,{title:"Alternative Phone Number",value:o.alt_phone_number})]})})})]})}}),Object(jt.jsx)(uo,{path:"/users",component:function(){var e=Object(Xe.g)(),t=Object(ze.useState)({loading:!0,data:[],selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1}),n=Object(Ke.a)(t,2),a=n[0],r=n[1];Object(ze.useEffect)((function(){Rr("/users/").then((function(e){r((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(){var e=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ki(t);case 3:r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),o=[{name:"username",label:"Username",options:{customBodyRender:function(e,t){var n=t.rowData;return Object(jt.jsx)(Ra,{color:!0,to:"/users/".concat(n[n.length-1]),children:e})}}},{name:"email",label:"Email"},{name:"first_name",label:"First name"},{name:"last_name",label:"Last name"},{name:"primary_phone_number",label:"Primary phone",options:{display:!1}},{name:"secondary_phone_number",label:"Secondary phone",options:{display:!1}},{name:"is_superuser",label:"Admin",options:{customBodyRender:function(e){if(e)return Object(jt.jsx)(_i.a,{color:"primary"})}}},{name:"id",label:" ",options:{sort:!1,filter:!1,viewColumns:!1,searchable:!1,download:!1,customBodyRender:function(e,t){var n=t.rowData;t.rowIndex;return Object(jt.jsx)(Lt,{urlPrefix:"users",objectId:e,handleDelete:function(){return function(e,t){return function(){r((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}}(e,n[0])}})}}}];return a.loading?Object(jt.jsx)(Fa,{message:"Loading users..."}):Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)(Ea,{title:"Users",data:a.data,columns:o,options:{filter:!1,selectableRows:"none",responsive:"scrollMaxHeight",customToolbar:function(){return Object(jt.jsx)(it.a,{onClick:function(){return e.push("/users/new")},color:"primary",icon:Object(jt.jsx)(dt.a,{}),label:"Add",variant:"outlined"})}}}),Object(jt.jsx)(Nt,{objectId:a.selectedId,title:a.deleteDialogTitle,show:a.showDeleteDialog,onHide:function(){return r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:i})]})}}),Object(jt.jsx)(uo,{path:"/admin-logs",component:function(){var e=Object(ze.useState)(!0),t=Object(Ke.a)(e,2),n=t[0],a=t[1],r=Object(ze.useState)([]),i=Object(Ke.a)(r,2),o=i[0],c=i[1];return Object(ze.useEffect)((function(){(function(){return ac.apply(this,arguments)})().then((function(e){c(e),a(!1)}))}),[]),n?Object(jt.jsx)(Fa,{message:"Loading admin logs..."}):Object(jt.jsx)(Mt.a,{children:Object(jt.jsx)(Ea,{title:"Admin Logs",data:o,columns:ic,options:{selectableRows:"none",responsive:"scrollMaxHeight"}})})}}),Object(jt.jsx)(so,{path:"/needs/:need_id/edit",component:Bi}),Object(jt.jsx)(so,{path:"/needs/:need_id",component:oo}),Object(jt.jsx)(so,{path:"/providers/:id/rate",component:No}),Object(jt.jsx)(so,{path:"/providers/new/add-service",component:po}),Object(jt.jsx)(so,{path:"/providers/:formType/new",component:_o}),Object(jt.jsx)(so,{path:"/providers/:id/edit/",component:_o}),Object(jt.jsx)(so,{path:"/providers/:id",component:function(){var e=Object(We.c)(),t=Object(Xe.h)().id,n=Object(ze.useState)({data:null,formSetting:null}),a=Object(Ke.a)(n,2),r=a[0],i=a[1];if(Object(ze.useEffect)((function(){e(fe(t)).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e})}))}))}),[e,t]),Object(ze.useEffect)((function(){null==r.formSetting&&Ur(!1).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{formSetting:e})}))}))}),[e,r.formSetting]),r.data&&r.formSetting){var o,c=r.data.provider,l=r.formSetting;"Organization"===c.type?o="organization":"Individual"===c.type&&(o=c.category.split(" ").join("_").toLowerCase());var d=c.reviews.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0)/c.reviews.length;return Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)("h3",{children:"Provider Profile"}),Object(jt.jsxs)("div",{children:[Object(jt.jsx)(Ra,{to:"/providers/".concat(t,"/edit/"),children:Object(jt.jsx)(nt.a,{variant:"contained",startIcon:Object(jt.jsx)(Dt.a,{}),children:"Edit"})}),"\xa0",Object(jt.jsx)(Ra,{to:"/providers/".concat(t,"/rate"),children:Object(jt.jsx)(nt.a,{variant:"contained",startIcon:Object(jt.jsx)(Co.a,{}),children:"Rate Provider"})})," ",Object(jt.jsx)(nt.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},startIcon:Object(jt.jsx)(fr.a,{}),children:"Print"}),l[o]&&k.a.map(l[o].form_structure,(function(e,t){return Object(jt.jsx)(ko,{step:t,provider:c,providerFields:Qn,infoFields:e},t)})),Object(jt.jsx)("h3",{children:" Reviews "}),Object(jt.jsx)(Or.a,{component:"fieldset",mb:3,borderColor:"transparent",children:Object(jt.jsx)(So.a,{size:"large",name:"provider-rating",value:d})}),Object(jt.jsx)("h3",{children:"Services"}),Object(jt.jsx)(Ra,{to:"/services/new",children:Object(jt.jsx)(nt.a,{variant:"contained",children:"Add Service"})})]})]})}return""}}),Object(jt.jsx)(so,{path:"/providers",component:function(){return Object(jt.jsx)(Gt,{type:bo,columnsWithoutOptions:ho,fetchData:Oe,deleteItem:ve,generateMarkers:function(e,t,n){return e.slice((t-1)*n,t*n).map((function(e){return{position:{lat:Number(e.main_address.lat),lng:Number(e.main_address.lng)},title:jo(e),link:"/".concat(bo,"/").concat(e.id),content:e.main_address&&jr(e.main_address)}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:jo})}}),Object(jt.jsx)(so,{path:"/services/:id/edit",component:Yo}),Object(jt.jsx)(so,{path:"/services/new",component:Yo}),Object(jt.jsx)(so,{path:"/services/:id",component:Fo}),Object(jt.jsx)(so,{path:"/services",component:function(){return Object(jt.jsx)(Gt,{type:Eo,columnsWithoutOptions:Po,fetchData:ce,deleteItem:se,generateMarkers:function(e,t,n){return e.slice((t-1)*n,t*n).map((function(e){return{position:{lat:Number(e.location.lat),lng:Number(e.location.lng)},title:e.name,link:"/".concat(Eo,"/").concat(e.id),content:e.desc}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:function(e){return e.name}})}}),Object(jt.jsx)(so,{path:"/goods/:id/edit",component:nc}),Object(jt.jsx)(so,{path:"/goods/new",component:nc}),Object(jt.jsx)(so,{path:"/goods/:id",component:ec}),Object(jt.jsx)(so,{path:"/goods",component:function(){var e=function(e){return e.name};return Object(jt.jsx)(Gt,{type:Xo,columnsWithoutOptions:Qo,fetchData:Pe,deleteItem:Re,generateMarkers:function(t,n,a){t.slice((n-1)*a,n*a).map((function(t){return{position:{lat:Number(t.location.lat),lng:Number(t.location.lng)},title:e(t),link:"/".concat(Xo,"/").concat(t.id),content:t.desc}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:e})}}),Object(jt.jsx)(so,{path:"/reporting",component:sc}),Object(jt.jsx)(so,{path:"/eligibility-criteria",component:function(){var e=Object(ze.useState)({loading:!0,data:[],value:{},selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1,dialogTitle:"",showAddEditDialog:!1}),t=Object(Ke.a)(e,2),n=t[0],a=t[1],r=mc();Object(ze.useEffect)((function(){Xr().then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(e,t){return function(){a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}},c=function(e,t){return function(){return a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:t,value:{title:e,id:t},showAddEditDialog:!0,dialogTitle:"Edit Eligibility Criteria"})}))}},l=function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:{title:""},showAddEditDialog:!0,dialogTitle:fc})}))},d=function(){var e=Object(T.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Br("/eligibility_criteria/",n.value);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:[].concat(Object(o.a)(e.data),[t])})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zr(t,n);case 3:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(T.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=n.value.id,i=n.value,Gr("/eligibility_criteria/"+r+"/",i);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:e.data.map((function(n){return n.id===e.selectedId?t:n}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var r,i}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=[{name:"title",label:"Title",options:{setCellHeaderProps:function(){return{style:{width:"80%"}}}}},{name:"id",label:" ",options:{sort:!1,filter:!1,viewColumns:!1,searchable:!1,download:!1,customBodyRender:function(e,t){var n=t.rowData;return Object(jt.jsxs)("span",{children:[Object(jt.jsx)(Et.a,{onClick:c.apply(void 0,Object(o.a)(n)),className:r.button,size:"large",children:Object(jt.jsx)(Dt.a,{fontSize:"small",color:"primary"})}),Object(jt.jsx)(Et.a,{onClick:i(e,n[0]),className:r.button,size:"large",children:Object(jt.jsx)(Ft.a,{fontSize:"small",color:"secondary"})})]})}}}];return n.loading?Object(jt.jsx)(Fa,{message:"Loading eligibilities..."}):Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)(Ea,{title:"Eligibility Criteria",data:n.data,columns:j,options:{filter:!1,selectableRows:"none",responsive:"scrollMaxHeight",customToolbar:function(){return Object(jt.jsx)(it.a,{onClick:l,color:"primary",icon:Object(jt.jsx)(dt.a,{}),label:"Add",variant:"outlined"})}}}),Object(jt.jsx)(Nt,{objectId:n.selectedId,title:n.deleteDialogTitle,show:n.showDeleteDialog,onHide:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:u}),Object(jt.jsx)(Oc,{open:n.showAddEditDialog,value:n.value,title:n.dialogTitle,handleClose:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1})}))},handleConfirm:n.dialogTitle===fc?d:b})]})}}),Object(jt.jsx)(so,{path:"/questions",component:function(){var e=Object(ze.useState)({loading:!0,data:[],value:{},selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1,dialogTitle:"",showAddEditDialog:!1}),t=Object(Ke.a)(e,2),n=t[0],a=t[1],r=wc();Object(ze.useEffect)((function(){gc().then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(e,t){return function(){a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}},c=function(e,t,n){return function(){return a((function(a){return Object(s.a)(Object(s.a)({},a),{},{value:{id:n,text:e,content_type:t},selectedId:n,showAddEditDialog:!0,dialogTitle:Tc})}))}},l=function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:{text:"",content_type:""},showAddEditDialog:!0,dialogTitle:Ic})}))},d=function(){var e=Object(T.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Br("/questions/",n.value);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:[].concat(Object(o.a)(e.data),[t])})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(T.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vc(t,n);case 3:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(T.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=n.value.id,i=n.value,Gr("/questions/"+r+"/",i);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:e.data.map((function(n){return n.id===e.selectedId?t:n}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var r,i}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=[{name:"text",label:"Text",options:{setCellHeaderProps:function(){return{style:{width:"60%"}}}}},{name:"content_type",label:"Content type"},{name:"id",label:" ",options:{sort:!1,filter:!1,viewColumns:!1,searchable:!1,download:!1,customBodyRender:function(e,t){var n=t.rowData;return Object(jt.jsxs)("span",{children:[Object(jt.jsx)(Et.a,{onClick:c.apply(void 0,Object(o.a)(n)),className:r.button,size:"large",children:Object(jt.jsx)(Dt.a,{fontSize:"small",color:"primary"})}),Object(jt.jsx)(Et.a,{onClick:i(e,n[0]),className:r.button,size:"large",children:Object(jt.jsx)(Ft.a,{fontSize:"small",color:"secondary"})})]})}}}];return n.loading?Object(jt.jsx)(Fa,{message:"Loading questions..."}):Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)(Ea,{title:"Questions",data:n.data,columns:j,options:{filter:!1,selectableRows:"none",responsive:"scrollMaxHeight",customToolbar:function(){return Object(jt.jsx)(it.a,{onClick:l,color:"primary",icon:Object(jt.jsx)(dt.a,{}),label:"Add",variant:"outlined"})}}}),Object(jt.jsx)(Nt,{objectId:n.selectedId,title:n.deleteDialogTitle,show:n.showDeleteDialog,onHide:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:u}),Object(jt.jsx)(Ec,{open:n.showAddEditDialog,value:n.value,objectId:n.selectedId,title:n.dialogTitle,handleClose:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1})}))},handleConfirm:n.dialogTitle===Ic?d:b})]})}}),Object(jt.jsx)(uo,{path:"/settings/manage-fields",component:function(){var e=Cc(),t=Object(Xe.g)(),n=Object(We.c)(),a=Object(ze.useState)({category:"",stepToAdd:"",selectedStep:"",selectedField:"",questions:{},fields:{}}),r=Object(Ke.a)(a,2),i=r[0],l=r[1];Object(ze.useEffect)((function(){gc().then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{questions:e})}))})),Ur(!1).then((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a,r=n[t],i=e[r].form_structure,o=e[r].steps_order,c=Object(Nn.a)(o);try{for(c.s();!(a=c.n()).done;){for(var d=a.value,u=[],b=i[d],j=0,h=Object.entries(b);j<h.length;j++){var p=Object(Ke.a)(h[j],2),m=p[0],f=p[1];u.push(Object(s.a)({field:m},f))}e[r].form_structure[d]=u}}catch(x){c.e(x)}finally{c.f()}}for(var O=0,g=Object.keys(Yn);O<g.length;O++){var v=g[O];e[v]||(e[v]={form_structure:[],steps_order:[]})}l((function(t){return Object(s.a)(Object(s.a)({},t),{},{fields:Object(s.a)(Object(s.a)({},t.fields),e)})}))})),qr().then((function(e){for(var t=e.form_structure,n=0,a=Object.keys(t);n<a.length;n++){for(var r=a[n],i=[],o=0,c=Object.entries(t[r]);o<c.length;o++){var d=Object(Ke.a)(c[o],2),u=d[0],b=d[1];i.push({field:u,type:"field",required:b})}t[r]=i}l((function(t){return Object(s.a)(Object(s.a)({},t),{},{fields:Object(s.a)(Object(s.a)({},t.fields),{},{client:e})})}))}))}),[n]);var d=function(){var e=Object(T.a)(I.a.mark((function e(){var n,a,r,o,c,s,l,d,u,b,j,h,p,m,f,O,g,v,x,y,_,C,S,k,w;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"client"===i.category)for(a=Wr,n={steps_order:i.fields.client.steps_order,form_structure:{}},r=i.fields.client.form_structure,o=0,c=Object.keys(r);o<c.length;o++){s=c[o],l=n.form_structure[s]={},d=Object(Nn.a)(r[s]);try{for(d.s();!(u=d.n()).done;)b=u.value,j=b.field,h=b.required,l[j]=h}catch(I){d.e(I)}finally{d.f()}}else{for(a=Kr,p=0,m=Object.keys(i.fields);p<m.length;p++)for(f=m[p],n[f]={steps_order:i.fields[f].steps_order,form_structure:{}},O=i.fields[f].form_structure,g=0,v=Object.keys(O);g<v.length;g++){x=v[g],y=n[f].form_structure[x]={},_=Object(Nn.a)(O[x]);try{for(_.s();!(C=_.n()).done;)S=C.value,k=S.field,w=S.required,y[k]={type:"field",required:w}}catch(I){_.e(I)}finally{_.f()}}delete n.client}return console.log(n),e.prev=3,e.next=6,a(n);case 6:t.push("/dashboard"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),u=Object(ze.useMemo)((function(){for(var e={},t="client"===i.category?Yr:Qn,n=0,a=Object.entries(t);n<a.length;n++){var r=Object(Ke.a)(a[n],2),o=r[0],c=r[1].label;e[o]=c}return e}),[i.category]),b=Object(ze.useMemo)((function(){if(!i.category)return{};for(var e=Object(s.a)({},u),t=0,n=Object.values(i.fields[i.category].form_structure);t<n.length;t++){var a,r=n[t],o=Object(Nn.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value.field;Object.keys(e).includes(c)&&delete e[c]}}catch(l){o.e(l)}finally{o.f()}}return e}),[i.fields,i.category,u]),j=Object(ze.useCallback)((function(e){return function(t){var n=t.target.value;"category"===e?i.fields[n]&&l((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},(a={},Object(c.a)(a,e,n),Object(c.a)(a,"selectedField",""),Object(c.a)(a,"selectedStep",""),Object(c.a)(a,"stepToAdd",""),a))})):l((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e,n))}))}}),[i.fields]),h=Object(ze.useCallback)((function(e,t){return function(n){var a,r=i.fields[i.category].form_structure[t],o=Object(Nn.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value;c.field===e&&(c.required=n.target.value)}}catch(s){o.e(s)}finally{o.f()}}}),[i.fields,i.category]),p=Object(ze.useCallback)((function(e,t){var n=Object(o.a)(i.fields[i.category].form_structure[t]);n.splice(e,1),i.fields[i.category].form_structure[t]=n,l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))}),[i.fields,i.category]),m=Object(ze.useCallback)((function(){for(var e=i.fields[i.category].form_structure,t=0,n=Object.values(e);t<n.length;t++){var a,r=n[t],o=Object(Nn.a)(r);try{for(o.s();!(a=o.n()).done;){if(a.value.field===i.selectedField)return}}catch(c){o.e(c)}finally{o.f()}}i.fields[i.category].form_structure[i.selectedStep].push({field:i.selectedField,type:"field",required:!1}),l((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedField:"",fields:Object(s.a)({},e.fields)})}))}),[i.fields,i.category,i.selectedStep,i.selectedField]),f=Object(ze.useCallback)((function(e,t){return function(){i.fields[i.category].steps_order.splice(e,1),delete i.fields[i.category].form_structure[t],l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))}}),[i.fields,i.category]),O=Object(ze.useMemo)((function(){return i.category?Object(jt.jsxs)(er.a,{container:!0,alignItems:"flex-end",spacing:2,className:e.root,children:[Object(jt.jsx)(er.a,{item:!0,children:Object(jt.jsx)(It.a,{label:"New step name",value:i.stepToAdd,onChange:j("stepToAdd")})}),Object(jt.jsx)(er.a,{item:!0,children:Object(jt.jsx)(nt.a,{variant:"outlined",color:"primary",disabled:!i.stepToAdd,onClick:function(){l((function(e){return e.fields[e.category].form_structure[e.stepToAdd]=[],e.fields[e.category].steps_order.push(e.stepToAdd),Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))},children:"Add Step"})})]}):null}),[i.stepToAdd,i.category,e.root,j]),g=Object(ze.useMemo)((function(){return i.category?Object(jt.jsxs)(er.a,{container:!0,alignItems:"flex-end",spacing:2,children:[Object(jt.jsx)(er.a,{item:!0,sm:3,xs:4,children:Object(jt.jsx)(pn,{label:"Choose step",value:i.selectedStep,onChange:j("selectedStep"),options:i.fields[i.category].steps_order,noDefaultStyle:!0,formControlProps:{fullWidth:!0},noEmpty:!0,controlled:!0})}),Object(jt.jsx)(er.a,{item:!0,sm:7,xs:8,children:Object(jt.jsx)(pn,{label:"Choose field",value:i.selectedField,onChange:j("selectedField"),options:b,noDefaultStyle:!0,formControlProps:{fullWidth:!0},noEmpty:!0,controlled:!0})}),Object(jt.jsx)(er.a,{item:!0,sm:2,children:Object(jt.jsx)(nt.a,{variant:"outlined",color:"primary",onClick:m,disabled:!i.selectedField||!i.selectedStep,children:"Add Field"})})]}):null}),[i.fields,i.category,j,m,i.selectedField,i.selectedStep,b]),v=Object(ze.useMemo)((function(){if(!i.fields[i.category])return null;var t=i.fields[i.category].form_structure;return Object.keys(t).map((function(n,a){return Object(jt.jsxs)("div",{className:e.root,children:[Object(jt.jsxs)(tt.a,{variant:"h6",color:"textSecondary",children:[n,Object(jt.jsx)(Et.a,{onClick:f(a,n),size:"large",children:Object(jt.jsx)(_c.a,{})})]}),Object(jt.jsx)(yc.c,{droppableId:n,className:e.droppable,children:function(e,a){return Object(jt.jsxs)("div",Object(s.a)(Object(s.a)({},e.droppableProps),{},{ref:e.innerRef,children:[Object(jt.jsx)(kc,{stepName:n,stepFields:t[n],handleRadioChange:h,handleDeleteField:p,fields:"client"===i.category?Yr:Qn}),e.placeholder]}))}}),Object(jt.jsx)(ar.a,{})]},a)}))}),[i.fields,i.category,e.root,e.droppable,h,p,f]);return Object(jt.jsxs)(Mt.a,{children:[Object(jt.jsx)(tt.a,{variant:"h5",children:"Manage Fields"}),Object(jt.jsx)(pn,{label:"Please select",value:i.category,onChange:j("category"),options:Xn,noEmpty:!0}),O,g,Object(jt.jsx)(yc.a,{onDragEnd:function(e){var t=e.source,n=e.destination;if(n){var a=n.droppableId,r=t.droppableId;if(t.droppableId!==n.droppableId){var o=i.fields[i.category].form_structure[r],c=i.fields[i.category].form_structure[a],s=o.splice(t.index,1),l=Object(Ke.a)(s,1)[0];c.splice(n.index,0,l)}else!function(e,t,n){var a=e.splice(t,1),r=Object(Ke.a)(a,1)[0];e.splice(n,0,r)}(i.fields[i.category].form_structure[a],t.index,n.index)}},children:v}),i.category&&Object(jt.jsx)(nt.a,{variant:"outlined",color:"primary",onClick:d,className:e.submitButton,children:"Submit"})]})}})]}),Pc=(n(624),Object(Ha.a)(Object(qa.a)({palette:{primary:{main:Wa.a[700]},secondary:Ua.a}})));function Rc(){return Object(jt.jsx)("div",{className:"App",children:Object(jt.jsx)(Ja.a,{injectFirst:!0,children:Object(jt.jsxs)(Ka.a,{theme:Pc,children:[Object(jt.jsx)(za,{}),Object(jt.jsx)("div",{style:{paddingTop:50,paddingBottom:22},children:Ac}),Object(jt.jsx)(Va,{})]})})})}var Dc=function(e){console.log("File: store.js - Function: configureStore  Parameters: preloadedState ->  ",e);var t=Object(a.e)(Me,e,Object(a.a)(i.a,Ge));return{store:t,persistor:Object(r.b)(t)}}(),Fc=Dc.store,Lc=Dc.persistor;qe.a.render(Object(jt.jsx)(We.a,{store:Fc,children:Object(jt.jsx)(Je.a,{loading:null,persistor:Lc,children:Object(jt.jsx)(Ue.a,{children:Object(jt.jsx)(Rc,{})})})}),document.getElementById("root"))}},[[625,1,2]]]);
//# sourceMappingURL=main.23b22997.chunk.js.map