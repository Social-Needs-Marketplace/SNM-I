{"version":3,"sources":["store/defaults.js","store/actions/needActions.js","store/actions/authAction.js","store/reducers/authReducer.js","store/actions/ontologyActions.js","store/reducers/ontologyReducers.js","store/actions/clientActions.js","store/actions/serviceActions.js","store/actions/providerActions.js","store/actions/goodActions.js","store/reducers.js","store/reducers/serviceReducer.js","store/reducers/clientReducer.js","store/reducers/goodReducer.js","store/reducers/needReducers.js","store/reducers/providerReducers.js","store.js","components/shared/GoogleMap.js","components/shared/CSVUploadModal.js","components/shared/DeleteModal.js","components/shared/DropdownMenu.js","components/shared/GenericPage.js","components/shared/FormStepper.js","components/shared/FieldsWrapper.js","components/shared/fields/GeneralField.js","constants/index.js","components/shared/fields/SelectField.js","components/shared/LocationFieldGroup.js","helpers/operation_hour_helpers.js","helpers/formulaHelpers.js","helpers/index.js","constants/provider_fields.js","constants/default_fields.js","components/shared/OtherLocationsFields.js","components/shared/Table/EnhancedTableHead.js","components/shared/Table/EnhancedTableToolbar.js","components/shared/Table/index.js","components/shared/index.js","components/layouts/TopNavbar.js","components/layouts/Footer.js","components/Landing.js","components/Login.js","components/LoginPane.js","components/Dashboard.js","helpers/location_helpers.js","helpers/phone_number_helpers.js","components/Clients.js","components/client_needs/NeedGroupPanel.js","components/ClientNeeds.js","components/shared/TR.js","stylesheets/profile-table.js","components/clients/client_table/ClientInfoTable.js","components/appointments/AppointmentRow.js","api/index.js","api/settingApi.js","constants/client_fields.js","api/eligibilityApi.js","components/clients/client_form/FamilyFields.js","components/shared/fields/RadioField.js","components/shared/fields/CheckboxField.js","components/shared/fields/MultiSelectField.js","components/shared/FieldGroup.js","helpers/client_verify_form.js","components/clients/ClientForm.js","api/userApi.js","constants/userFields.js","components/users/UserForm.js","components/client_needs/NeedForm.js","helpers/select_field_helpers.jsx","components/appointments/AppointmentModal.js","store/actions/appointmentActions.js","components/client_needs/MatchedServices.js","components/client_needs/ServiceListItem.js","components/client_needs/ServiceList.js","components/client_needs/ServiceSearchBar.js","components/client_needs/Need.js","components/routes/PrivateRoute.js","components/routes/AdminRoute.js","components/Providers.js","components/providers/AddServicePrompt.js","helpers/provider_verify_form.js","components/shared/OperationHoursFieldGroup.js","components/providers/ProviderForm.js","components/providers/provider_table/ProviderInfoTable.js","components/providers/ProviderRatingForm.js","components/Services.js","helpers/eligibility_condition_helpers.js","components/services/Service.js","components/services/conditionConfig.js","components/services/EligibilityCondition.js","api/formulaApi.js","components/services/ServiceForm.js","components/Goods.js","components/goods/Good.js","components/goods/GoodForm.js","api/adminLogApi.js","components/AdminLogs.js","components/Reporting.js","components/additionalFIelds/Eligibilities.js","api/questionApi.js","components/settings/ManageFields.js","components/additionalFIelds/Questions.js","routes.js","components/clients/Client.js","components/users/User.js","components/Users.js","components/providers/ProviderProfile.js","App.js","index.js"],"names":["serverHost","window","location","hostname","module","exports","Object","freeze","torontoCoordinates","lat","lng","countryOptions","languageOptions","genderOptions","maritalStatusOptions","statusInCanadaOptions","educationLevelOptions","incomeSourceOptions","matchStatusOptions","familyRelationshipOptions","needStatusOptions","serviceTypeOptions","serviceSharedWithOptions","provinceOptions","ACTION_SUCCESS","ACTION_ERROR","RECEIVE_CLIENT_NEEDS","RECEIVE_CLIENT_NEED","REMOVE_CLIENT_NEED","REQUEST_NEED","REQUEST_NEEDS","RECEIVE_NEEDS","RECEIVE_CLIENT_NEED_GROUP","RECEIVE_CLIENT_NEED_INFO","receiveClientNeed","clientId","need","needGroup","type","receiveClientNeedInfo","needId","updateClientNeedGroup","needGroupId","params","dispatch","url","fetch","method","body","JSON","stringify","headers","localStorage","getItem","then","response","json","receiveClientNeedGroup","deleteClientNeed","status","removeClientNeed","fetchNeed","callback","client_id","id","LOGIN_SUCCESS","LOGIN_FAILURE","LOGGED_OUT","UPDATE_ORGANIZATION","login","console","log","a","error","Error","decoded_token","jwt_decode","token","user","user_id","username","email","is_admin","organization","provider_id","name","organization_name","setItem","login_success","catch","err","alert","message","login_failure","logout","sessionExpired","logged_out","removeItem","DEFAULT_STATE","currentUser","isLoggedin","RECEIVE_CATEGORIES","fetchOntologyCategories","categories","category_type","receiveCategories","DEFAULT_CATEGORY_STATE","loaded","REQUEST_CLIENT","RECEIVE_CLIENT","REQUEST_CLIENTS","REMOVE_CLIENT","RECEIVE_CLIENTS","SEARCH_CLIENTS","receiveClient","client","receiveClients","clients","fetchClient","requestClient","needGroups","needs","receiveClientNeeds","fetchClients","deleteClient","removeClient","REQUEST_SERVICE","RECEIVE_SERVICE","REQUEST_SERVICES","REMOVE_SERVICE","RECEIVE_SERVICES","SEARCH_SERVICES","receiveService","service","receiveServices","services","fetchService","requestService","fetchServices","deleteService","removeService","REQUEST_PROVIDERS","RECEIVE_PROVIDERS","REMOVE_PROVIDER","RECEIVE_PROVIDER","REQUEST_PROVIDER","SEARCH_PROVIDERS","receiveProvider","provider","receiveProviders","providers","receivedAt","Date","now","fetchProvider","requestProvider","fetchProviders","createProvider","updateAuthOrganization","deleteProvider","removeProvider","REQUEST_GOOD","RECEIVE_GOOD","REQUEST_GOODS","RECEIVE_ALL_GOODS","REMOVE_GOOD","RECEIVE_GOODS","GOOD_ERROR","GOOD_SUCCESS","SEARCH_GOODS","receiveGood","good","receiveGoods","goods","fetchGood","requestGood","fetchGoods","deleteGood","removeGood","appReducer","combineReducers","nextById","sortedServices","nextIndex","state","index","filteredServices","servicesLoaded","byId","action","newServicesById","_","keyBy","clone","remove","n","sortType","sort","b","toLowerCase","localeCompare","profile","first_name","desc","category","searchValue","searchType","filter","includes","company","last_name","sortedClients","filteredClients","clientsLoaded","newClientsById","reverse","address","sortedGoods","filteredGoods","goodsLoaded","newGoodsById","nextNeedGroup","needGroupIndex","map","indexOf","toString","need_group_id","needIndex","length","splice","sortedProviders","providersByType","providerLoaded","value","filteredProviders","providersById","displayType","primary_phone_number","auth","assign","ontology","languages","initialState","persistConfig","key","storage","persistedReducer","persistReducer","authMiddleware","store","next","getState","expired_at","google","maps","Map","Marker","InfoWindow","Size","createInfoWindow","markerElement","marker","history","idx","infoWindow","content","position","pixelOffset","addListener","e","render","ReactInfoWindow","document","getElementById","clicked","show","querySelector","open","close","event","title","link","Link","style","cursor","onClick","push","Typography","color","GoogleMap","props","useHistory","defaultCenter","useMemo","zoom","center","markers","useState","setMap","useEffect","i","currMarker","Paper","elevation","width","height","marginTop","info","CSVUploadModal","onHide","submit","Dialog","onClose","DialogTitle","DialogContent","InputBase","DialogActions","Button","DeleteModal","objectId","reason","form","setForm","fullWidth","TextField","variant","label","onChange","target","delete","DropdownMenu","urlPrefix","handleDelete","hideViewOption","anchorEl","setAnchorEl","Boolean","handleClose","handleLink","IconButton","currentTarget","size","MoreVert","Menu","keepMounted","PaperProps","maxHeight","ITEM_HEIGHT","MenuItem","ListItemIcon","OpenInBrowser","fontSize","Edit","Delete","GenericPage","fetchData","deleteItem","generateMarkers","nameFormatter","columnsWithoutOptions","charAt","toUpperCase","slice","useDispatch","showUploadDialog","showDeleteDialog","deleteId","deleteDialogTitle","data","pageNumber","rowsPerPage","loading","setState","hideDialog","useCallback","item","columns","tableOptions","customToolbar","CustomToolbar","handleAdd","handleUpload","onDelete","ids","onChangePage","onChangeRowsPerPage","Loading","Fade","in","Container","file","contentType","useStyles","makeStyles","theme","buttons","margin","paddingTop","paddingBottom","button","marginRight","spacing","backButton","FormStepper","stepNames","handleFinish","getStepContent","classes","React","activeStep","setActiveStep","Stepper","alternativeLabel","nonLinear","Step","StepButton","step","className","Alert","severity","disabled","prevActiveStep","root","paper","display","paddingLeft","minWidth","children","gutterBottom","dateFormat","GeneralField","defaultValue","parse","setValue","handleChange","val","onChangeDate","date","onAcceptDate","formattedDate","format","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","onAccept","renderInput","sx","TimePicker","mt","UN_SET","defaultField","component","validator","required","formControl","SelectField","InputLabelProps","options","noDefaultStyle","noEmpty","controlled","defaultOptionTitle","formControlProps","helperText","undefined","FormControl","InputLabel","Select","Array","isArray","option","entries","FormHelperText","LocationFieldGroup","errMsg","apt_number","street_address","city","province","postal_code","defaultTimeSlot","defaultOperationHour","mapping","hour","hourStringam","minutes","timeSlot","operationHourMapping","operationHourListToObject","operation_hour_list","operation_hours","each","operation_hour","weekday","start_time","end_time","OperationHourTable","operationHourObj","times","day","time","transformToFrontendType","condition_clauses","condition","clauses","field_name","left_operand","right_operand","operator","escapeString","string","replace","unescapeList","array","recursiveAssign","obj","forEach","isFieldEmpty","field","isAvailabilityEmpty","availability","keys","time_slot","verifyAddressField","result","fieldName","verifyOtherAddressesFields","validateAddressPostalCode","errsContainer","parentField","test","verifyEmail","concat","verifyPhoneNumber","validateContactFormat","alt_phone_number","verifyFamilyFields","families","family","emailRegex","phoneNumberRegex","passwordRegex","postalCodeRegex","Validator","phone","password","postalCode","providerFormTypes","allForms","providerCategoryValue2Key","ret","objectFlip","providerFields","commitment","gender","main_address","notes","other_addresses","own_car","primary_contact","reference1_email","reference1_name","reference1_phone","reference2_email","reference2_name","reference2_phone","referrer","secondary_contact","skills","start_date","visibility","sponsor","defaultProfileFields","middle_name","preferred_name","birth_date","defaultContactFields","defaultLocationFields","defaultUserFields","is_superuser","LocationFields","handleRemove","update","FormLabel","FieldsWrapper","OtherLocationsFields","otherLocations","forceUpdate","EnhancedTableHead","onSelectAllClick","order","orderBy","numSelected","rowCount","onRequestSort","TableHead","TableRow","TableCell","padding","Checkbox","indeterminate","checked","inputProps","headCell","sortDirection","sortBy","TableSortLabel","active","direction","getFieldValueFn","sortSpan","useToolbarStyles","paddingRight","highlight","palette","mode","primary","main","backgroundColor","lighten","light","text","secondary","dark","flex","EnhancedTableToolbar","Toolbar","clsx","Tooltip","descendingComparator","getValue","extraData","getComparator","stableSort","comparator","stabilizedThis","el","table","visuallyHidden","tableRow","EnhancedTable","rowsPerPageOptions","idField","defaultOrderBy","rowStyle","setOrder","setOrderBy","selected","setSelected","page","setPage","setRowsPerPage","findIndex","_id","emptyRows","Math","max","TableContainer","Table","stickyHeader","TableBody","row","isItemSelected","isSelected","hover","role","tabIndex","selectedIndex","newSelected","handleClick","cell","colSpan","TablePagination","count","onPageChange","newPage","onRowsPerPageChange","parseInt","textDecorationLine","linkWithHover","fontWeight","progress","chipButton","marginLeft","Chip","icon","Add","formType","textAlign","CircularProgress","StyledTabs","styled","Tabs","justifyContent","transition","StyledTab","Tab","textTransform","typography","fontWeightRegular","pxToRem","TopNavBar","useSelector","tabNames","pathname","AppBar","Box","whiteSpace","to","newValue","indicatorColor","href","Landing","Component","container","maxWidth","Login","Grid","alignItems","marginBottom","LoginPane","prev","onKeyPress","Divider","NavButton","startIcon","Dashboard","Create","People","formatLocation","format_location","formatPhoneNumber","number","codes","match","TYPE","NeedGroupPanel","needGroupCategory","handleShow","hasUrgentNeed","anyUrgentNeed","needsUnderCat","innerBox","xs","is_urgent","flexDirection","Alarm","highPriority","description","need_group","changeNeedGroupCategoryStatus","Accordion","panel","AccordionSummary","expandIcon","ExpandMoreOutlined","column","heading","PriorityHigh","secondaryHeading","AccordionDetails","panelDetail","outerBox","flexBasis","ClientNeeds","selectedId","needGroupData","showDeletedDiaglog","needsByNeedGroup","deleteNeedInData","copy","need_cat","TR","scope","align","useProfileTableStyles","title2","ClientInfoTable","rowTitle","rowValue","infoFields","clientFields","infoRows","infoField","join","AppointmentRow","appointment","this","normalizeError","getJson","sendJson","rawResponse","postJson","putJson","deleteJson","fetchClientFields","updateClientFields","fetchProviderFields","reformat","providerType","formStructure","form_structure","stepName","fields","updateProviderFields","arrival_date","completed_education_level","country_of_last_residence","country_of_origin","current_education_level","ngo_conditions","file_id","first_language","has_children","immigration_doc_number","income_source","landing_date","marital_status","num_of_children","num_of_dependants","other_languages","pr_number","status_in_canada","fetchEligibilities","deleteEligibility","FamilyMemberFields","member","handleRemoveFamily","handleChangeMember","person","relationship","FamilyFields","members","top","formControlRow","labelRow","RadioField","noStar","parentValue","tryCastBool","RadioGroup","FormControlLabel","control","Radio","labelPlacement","CheckboxField","optionsArray","values","FormGroup","chips","flexWrap","chip","zIndex","select","search","verticalAlign","searchIcon","fill","overflow","MenuProps","getContentAnchorEl","anchorOrigin","vertical","horizontal","MenuListProps","autoFocus","getStyles","fontWeightMedium","background","Dropdown","filteredOptions","setValues","setOpen","useTheme","handleItemClick","removeValue","handleSearch","l","renderValue","multiple","input","Input","onOpen","tagName","placeholder","onKeyDown","stopPropagation","FieldGroup","client_verify_form","steps","format_messages","verifyFormFormat","required_field_msg","step_page_fields","verifyRequiredField","ClientForm","useParams","all_ngo_conditions","dispatchErrorMsg","fieldErrorMsg","generateClientField","promises","steps_order","Promise","all","splits","split","parent","isProfile","updateClient","updateUser","fetchUser","deleteUser","userFormFields","Yes","No","UserForm","errors","validate","isEmpty","msg","handleSubmit","NeedForm","need_id","needsById","needed_by","formValChange","bind","handleMultiSelectChange","nextForm","selectedOption","actionMeta","preValue","removedValue","newMultiSelectFieldValue","needInfo","createClientNeed","p","formTitle","Row","Col","sm","Form","controlId","componentClass","Check","defaultChecked","inline","needsCategories","languagesCategories","multiline","smOffset","connect","categoriesLoaded","withRouter","AppointmentModal","serviceId","Modal","bsSize","Header","closeButton","Title","service_id","Body","reminder_type","reminder_frequency","Footer","MatchedServices","activeKey","matchStatusForm","noteForm","modalShow","appointmentServiceId","handleSelect","matchStatusChange","textAreaChange","submitMatchStatus","submitNote","handleModalHide","handleModalShow","matchId","updateMatchStatus","object_id","model","modalshow","matches","Card","eventKey","bsStyle","toggle","Label","Collapse","collapsible","note","ServiceListItem","matchClientNeed","ListGroupItem","round","distance","GMap","withGoogleMap","latlng","parseFloat","ServiceList","containerElement","mapElement","ServiceSearchBar","queryTerm","handleFormValChange","InputGroup","enableQueryTerm","Addon","Need","searchResult","recommendedServices","recommended_services","handleSearchService","handleSearchRecommendedServices","Headers","DeletedLabel","is_deleted","UrgentLabel","striped","bordered","condensed","defaultActiveKey","rest","isAdmin","formatProviderName","viewColumns","searchable","customBodyRender","rowData","AddServicePrompt","provider_verify_form","verifyContactEmptiness","verifyRequiredFieldByFormType","contactType","alignSelf","arrow","OperationHoursFieldGroup","operationHours","operationDates","handleOperationHourOnClick","weekDay","pop","slotIndex","startDate","endDate","end_date","timeSlots","addressPaper","ProviderForm","eligibilities","providerCategory","operation_dates","responses","generateProviderFields","load","errorMessage","cat","contactField","fieldProps","newForm","operation_hour_obj","week_day","operationHourObjectToList","updateProvider","ProviderInfoTable","fieldId","find","question_id","ProviderRatingForm","handleStarSelection","handleCommentChange","handleTextRating","rating","comment","nextValue","rateProvider","starCount","onStarClick","indexLoaded","formatProvider","formatEligibilityConditions","condType","condValue","Service","servicesById","print","Print","eligibility","available_from","available_to","max_capacity","current_capacity","frequency","billable","price","method_of_delivery","method_of_registration","registration","omit","eligibility_conditions","lower_age_limit","upper_age_limit","is_public","share_with","serviceLoaded","compareOps","IN","defaultConfig","operators","eligibilityConditionHideItems","eligibilityConditionConfigs","age","multipleSelect","CustomEligibilityField","rightOperand","list","leftOperand","changes","config","ops","EligibilityCondition","originalValue","setFields","fieldsObj","dynamic_fields","functions","m","handleFieldChange","clause","handleAddField","handleRemoveField","conditionIdx","fieldIdx","handleRemoveCondition","conditionComponents","field_components","float","ServiceForm","eligibility_criteria","conditionClauses","conditionClause","transformToBackendType","validateForm","createService","formIsValid","location_same_as_provider","provider_locations","isNaN","Number","locations","location2Obj","loc","showAlert","error_messages","divider","reduce","errorText","servicesCategories","min","Online","Group","immigration_status","languagesLoaded","providersLoaded","providerIndex","withStyles","Good","goodsById","transportation","material","quantity","diameter","goodLoaded","GoodForm","goodId","is_provider_location","locationChange","indicatorChange","titleizedField","createGood","object_url","toLocaleString","objectRepr","START_YEARS","Report","total_clients","number_of_clients_by_gender","number_of_clients_by_birth_year","number_of_clients_by_marital_status","number_of_clients_by_language","number_of_providers_by_status","number_of_providers_by_type","number_of_individual_providers_by_category","selectedCategory","selectedAttribute","handleSelectChange","barChartDataBirthYear","labels","start_year","datasets","barChartOptions","scales","yAxes","ticks","beginAtZero","barChartDataLanguage","pieChartDataGender","pieChartDataProviderStatus","pieChartDataIndividualProviderCategory","pieChartDataProviderType","barChartDataMaritalStatus","pieChartOptions","maintainAspectRatio","responsive","legend","boxWidth","GenderStats","totalClientsCount","ClientsCountByGender","LanguageStats","ClientsCountByLanguage","MaritalStatusStats","ClientsCountByMaritalStatus","BirthYearStats","ClientsCountByBirthYear","ProviderStatusStats","ProvidersCountByStatus","ProviderTypeStats","ProvidersCountByType","IndividualProviderCategoryStats","IndividualProvidersCountByCategory","startYear","ADD_TITLE","AddEditDialog","handleConfirm","setErr","newErr","check","fetchQuestions","deleteQuestion","droppable","submitButton","radioButtonOptions","StepFields","stepFields","handleRadioChange","handleDeleteField","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","isDragging","EDIT_TITLE","contentTypeOptions","content_type","routes","exact","path","CF","CN","need_groups","appointments","setLoading","setUser","download","rowIndex","selectableRows","setData","fetchAdminLogs","formSetting","reviewValue","reviews","review","first","second","RateReview","mb","borderColor","Rating","Reporting","dialogTitle","showAddEditDialog","shoeEditDialog","showAddDialog","newItem","handleEdit","setCellHeaderProps","showEditDialog","stepToAdd","selectedStep","selectedField","questions","stepsOrder","stepsList","submitFunction","newFormStructure","initialOptions","fieldOptions","availableOptions","curr_field","handleRemoveStep","newStepComponent","newFieldComponent","fieldsComponents","droppableId","droppableProps","onDragEnd","source","destination","targetStepName","sourceStepName","sourceSteps","targetSteps","removed","startIndex","endIndex","reorder","createTheme","adaptV4Theme","blue","pink","App","StyledEngineProvider","injectFirst","ThemeProvider","TopNavbar","preloadedState","createStore","applyMiddleware","thunkMiddleware","persistor","persistStore","configureStore","ReactDOM"],"mappings":"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","file":"static/js/main.9ead3977.chunk.js","sourcesContent":["const hostname = window && window.location && window.location.hostname;\n\nlet serverHost;\nif (hostname === 'jias.snmi.ca') {\n  // serverHost = 'https://3.97.37.175:8000';\n  // Obsolete\n  serverHost = 'https://jias-server.snmi.ca';\n}\nelse {\n  serverHost = 'http://127.0.0.1:8000';\n  // serverHost = 'https://3.97.37.175:8000';\n  // serverHost = 'https://jias-server.snmi.ca';\n}\n\n\nconst ACTION_SUCCESS = 'ACTION_SUCCESS';\nconst ACTION_ERROR = 'ACTION_ERROR';\n\nconst torontoCoordinates = { lat: 43.6497, lng: -79.3763 };\n\nconst countryOptions = ['Afghanistan', 'Åland Islands', 'Albania', 'Algeria', 'American Samoa', 'Andorra',\n  'Angola', 'Anguilla', 'Antarctica', 'Antigua & Barbuda', 'Argentina', 'Armenia', 'Aruba', 'Ascension Island',\n  'Australia', 'Austria', 'Azerbaijan', 'Bahamas', 'Bahrain', 'Bangladesh', 'Barbados', 'Belarus', 'Belgium',\n  'Belize', 'Benin', 'Bermuda', 'Bhutan', 'Bolivia', 'Bosnia & Herzegovina', 'Botswana', 'Brazil',\n  'British Indian Ocean Territory', 'British Virgin Islands', 'Brunei', 'Bulgaria', 'Burkina Faso', 'Burundi',\n  'Cambodia', 'Cameroon', 'Canada', 'Canary Islands', 'Cape Verde', 'Caribbean Netherlands', 'Cayman Islands',\n  'Central African Republic', 'Ceuta & Melilla', 'Chad', 'Chile', 'China', 'Christmas Island', 'Cocos (Keeling) Islands',\n  'Colombia', 'Comoros', 'Congo - Brazzaville', 'Congo - Kinshasa', 'Cook Islands', 'Costa Rica', 'Côte d’Ivoire',\n  'Croatia', 'Cuba', 'Curaçao', 'Cyprus', 'Czechia', 'Denmark', 'Diego Garcia', 'Djibouti', 'Dominica',\n  'Dominican Republic', 'Ecuador', 'Egypt', 'El Salvador', 'Equatorial Guinea', 'Eritrea', 'Estonia', 'Eswatini',\n  'Ethiopia', 'Falkland Islands', 'Faroe Islands', 'Fiji', 'Finland', 'France', 'French Guiana', 'French Polynesia',\n  'French Southern Territories', 'Gabon', 'Gambia', 'Georgia', 'Germany', 'Ghana', 'Gibraltar', 'Greece', 'Greenland',\n  'Grenada', 'Guadeloupe', 'Guam', 'Guatemala', 'Guernsey', 'Guinea', 'Guinea-Bissau', 'Guyana', 'Haiti', 'Honduras',\n  'Hong Kong SAR China', 'Hungary', 'Iceland', 'India', 'Indonesia', 'Iran', 'Iraq', 'Ireland', 'Isle of Man', 'Israel',\n  'Italy', 'Jamaica', 'Japan', 'Jersey', 'Jordan', 'Kazakhstan', 'Kenya', 'Kiribati', 'Kosovo', 'Kuwait', 'Kyrgyzstan',\n  'Laos', 'Latvia', 'Lebanon', 'Lesotho', 'Liberia', 'Libya', 'Liechtenstein', 'Lithuania', 'Luxembourg',\n  'Macao SAR China', 'Madagascar', 'Malawi', 'Malaysia', 'Maldives', 'Mali', 'Malta', 'Marshall Islands', 'Martinique',\n  'Mauritania', 'Mauritius', 'Mayotte', 'Mexico', 'Micronesia', 'Moldova', 'Monaco', 'Mongolia', 'Montenegro',\n  'Montserrat', 'Morocco', 'Mozambique', 'Myanmar (Burma)', 'Namibia', 'Nauru', 'Nepal', 'Netherlands', 'New Caledonia',\n  'New Zealand', 'Nicaragua', 'Niger', 'Nigeria', 'Niue', 'Norfolk Island', 'North Korea', 'North Macedonia',\n  'Northern Mariana Islands', 'Norway', 'Oman', 'Pakistan', 'Palau', 'Palestinian Territories', 'Panama',\n  'Papua New Guinea', 'Paraguay', 'Peru', 'Philippines', 'Pitcairn Islands', 'Poland', 'Portugal', 'Pseudo-Accents',\n  'Pseudo-Bidi', 'Puerto Rico', 'Qatar', 'Réunion', 'Romania', 'Russia', 'Rwanda', 'Samoa', 'San Marino',\n  'São Tomé & Príncipe', 'Saudi Arabia', 'Senegal', 'Serbia', 'Seychelles', 'Sierra Leone', 'Singapore', 'Sint Maarten',\n  'Slovakia', 'Slovenia', 'Solomon Islands', 'Somalia', 'South Africa', 'South Georgia & South Sandwich Islands',\n  'South Korea', 'South Sudan', 'Spain', 'Sri Lanka', 'St. Barthélemy', 'St. Helena', 'St. Kitts & Nevis', 'St. Lucia',\n  'St. Martin', 'St. Pierre & Miquelon', 'St. Vincent & Grenadines', 'Sudan', 'Suriname', 'Svalbard & Jan Mayen', 'Sweden',\n  'Switzerland', 'Syria', 'Taiwan', 'Tajikistan', 'Tanzania', 'Thailand', 'Timor-Leste', 'Togo', 'Tokelau', 'Tonga',\n  'Trinidad & Tobago', 'Tristan da Cunha', 'Tunisia', 'Turkey', 'Turkmenistan', 'Turks & Caicos Islands', 'Tuvalu',\n  'U.S. Outlying Islands', 'U.S. Virgin Islands', 'Uganda', 'Ukraine', 'United Arab Emirates', 'United Kingdom',\n  'United States', 'Uruguay', 'Uzbekistan', 'Vanuatu', 'Vatican City', 'Venezuela', 'Vietnam', 'Wallis & Futuna',\n  'Western Sahara', 'Yemen', 'Zambia', 'Zimbabwe']\n\nconst languageOptions = ['Abkhazian (ab)', 'Achinese (ace)', 'Acoli (ach)', 'Adangme (ada)', 'Adyghe (ady)',\n  'Afar (aa)', 'Afrihili (afh)', 'Afrikaans (af)', 'Aghem (agq)', 'Ainu (ain)', 'Akan (ak)', 'Akkadian (akk)',\n  'Akoose (bss)', 'Alabama (akz)', 'Albanian (sq)', 'Aleut (ale)', 'Algerian Arabic (arq)', 'American English (en_US)',\n  'American Sign Language (ase)', 'Amharic (am)', 'Ancient Egyptian (egy)', 'Ancient Greek (grc)', 'Angika (anp)',\n  'Ao Naga (njo)', 'Arabic (ar)', 'Aragonese (an)', 'Aramaic (arc)', 'Araona (aro)', 'Arapaho (arp)', 'Arawak (arw)',\n  'Armenian (hy)', 'Aromanian (rup)', 'Arpitan (frp)', 'Assamese (as)', 'Asturian (ast)', 'Asu (asa)', 'Atsam (cch)',\n  'Australian English (en_AU)', 'Austrian German (de_AT)', 'Avaric (av)', 'Avestan (ae)', 'Awadhi (awa)', 'Aymara (ay)',\n  'Azerbaijani (az)', 'Badaga (bfq)', 'Bafia (ksf)', 'Bafut (bfd)', 'Bakhtiari (bqi)', 'Balinese (ban)', 'Baluchi (bal)',\n  'Bambara (bm)', 'Bamun (bax)', 'Banjar (bjn)', 'Basaa (bas)', 'Bashkir (ba)', 'Basque (eu)', 'Batak Toba (bbc)',\n  'Bavarian (bar)', 'Beja (bej)', 'Belarusian (be)', 'Bemba (bem)', 'Bena (bez)', 'Bengali (bn)', 'Betawi (bew)',\n  'Bhojpuri (bho)', 'Bikol (bik)', 'Bini (bin)', 'Bishnupriya (bpy)', 'Bislama (bi)', 'Blin (byn)', 'Blissymbols (zbl)',\n  'Bodo (brx)', 'Bosnian (bs)', 'Brahui (brh)', 'Braj (bra)', 'Brazilian Portuguese (pt_BR)', 'Breton (br)', \n  'British English (en_GB)', 'Buginese (bug)', 'Bulgarian (bg)', 'Bulu (bum)', 'Buriat (bua)', 'Burmese (my)',\n  'Caddo (cad)', 'Cajun French (frc)', 'Canadian English (en_CA)', 'Canadian French (fr_CA)', 'Cantonese (yue)',\n  'Capiznon (cps)', 'Carib (car)', 'Catalan (ca)', 'Cayuga (cay)', 'Cebuano (ceb)', 'Central Atlas Tamazight (tzm)',\n  'Central Dusun (dtp)', 'Central Kurdish (ckb)', 'Central Yupik (esu)', 'Chadian Arabic (shu)', 'Chagatai (chg)',\n  'Chamorro (ch)', 'Chechen (ce)', 'Cherokee (chr)', 'Cheyenne (chy)', 'Chibcha (chb)', 'Chiga (cgg)',\n  'Chimborazo Highland Quichua (qug)', 'Chinese (zh)', 'Chinook Jargon (chn)', 'Chipewyan (chp)', 'Choctaw (cho)',\n  'Church Slavic (cu)', 'Chuukese (chk)', 'Chuvash (cv)', 'Classical Newari (nwc)', 'Classical Syriac (syc)',\n  'Colognian (ksh)', 'Comorian (swb)', 'Congo Swahili (swc)', 'Coptic (cop)', 'Cornish (kw)', 'Corsican (co)',\n  'Cree (cr)', 'Creek (mus)', 'Crimean Turkish (crh)', 'Croatian (hr)', 'Czech (cs)', 'Dakota (dak)', 'Danish (da)',\n  'Dargwa (dar)', 'Dazaga (dzg)', 'Delaware (del)', 'Dinka (din)', 'Divehi (dv)', 'Dogri (doi)', 'Dogrib (dgr)',\n  'Duala (dua)', 'Dutch (nl)', 'Dyula (dyu)', 'Dzongkha (dz)', 'Eastern Frisian (frs)', 'Efik (efi)',\n  'Egyptian Arabic (arz)', 'Ekajuk (eka)', 'Elamite (elx)', 'Embu (ebu)', 'Emilian (egl)', 'English (en)',\n  'Erzya (myv)', 'Esperanto (eo)', 'Estonian (et)', 'European Portuguese (pt_PT)', 'European Spanish (es_ES)',\n  'Ewe (ee)', 'Ewondo (ewo)', 'Extremaduran (ext)', 'Fang (fan)', 'Fanti (fat)', 'Faroese (fo)', 'Fiji Hindi (hif)',\n  'Fijian (fj)', 'Filipino (fil)', 'Finnish (fi)', 'Flemish (nl_BE)', 'Fon (fon)', 'Frafra (gur)', 'French (fr)',\n  'Friulian (fur)', 'Fulah (ff)', 'Ga (gaa)', 'Gagauz (gag)', 'Galician (gl)', 'Gan Chinese (gan)', 'Ganda (lg)',\n  'Gayo (gay)', 'Gbaya (gba)', 'Geez (gez)', 'Georgian (ka)', 'German (de)', 'Gheg Albanian (aln)', 'Ghomala (bbj)',\n  'Gilaki (glk)', 'Gilbertese (gil)', 'Goan Konkani (gom)', 'Gondi (gon)', 'Gorontalo (gor)', 'Gothic (got)',\n  'Grebo (grb)', 'Greek (el)', 'Guarani (gn)', 'Gujarati (gu)', 'Gusii (guz)', 'Gwichʼin (gwi)', 'Haida (hai)',\n  'Haitian (ht)', 'Hakka Chinese (hak)', 'Hausa (ha)', 'Hawaiian (haw)', 'Hebrew (he)', 'Herero (hz)',\n  'Hiligaynon (hil)', 'Hindi (hi)', 'Hiri Motu (ho)', 'Hittite (hit)', 'Hmong (hmn)', 'Hungarian (hu)',\n  'Hupa (hup)', 'Iban (iba)', 'Ibibio (ibb)', 'Icelandic (is)', 'Ido (io)', 'Igbo (ig)', 'Iloko (ilo)',\n  'Inari Sami (smn)', 'Indonesian (id)', 'Ingrian (izh)', 'Ingush (inh)', 'Interlingua (ia)', \n  'Interlingue (ie)', 'Inuktitut (iu)', 'Inupiaq (ik)', 'Irish (ga)', 'Italian (it)', 'Jamaican Creole English (jam)',\n  'Japanese (ja)', 'Javanese (jv)', 'Jju (kaj)', 'Jola-Fonyi (dyo)', 'Judeo-Arabic (jrb)', 'Judeo-Persian (jpr)',\n  'Jutish (jut)', 'Kabardian (kbd)', 'Kabuverdianu (kea)', 'Kabyle (kab)', 'Kachin (kac)', 'Kaingang (kgp)', 'Kako (kkj)',\n  'Kalaallisut (kl)', 'Kalenjin (kln)', 'Kalmyk (xal)', 'Kamba (kam)', 'Kanembu (kbl)', 'Kannada (kn)',\n  'Kanuri (kr)', 'Kara-Kalpak (kaa)', 'Karachay-Balkar (krc)', 'Karelian (krl)', 'Kashmiri (ks)', 'Kashubian (csb)',\n  'Kawi (kaw)', 'Kazakh (kk)', 'Kenyang (ken)', 'Khasi (kha)', 'Khmer (km)', 'Khotanese (kho)', 'Khowar (khw)',\n  'Kikuyu (ki)', 'Kimbundu (kmb)', 'Kinaray-a (krj)', 'Kinyarwanda (rw)', 'Kirmanjki (kiu)', 'Klingon (tlh)',\n  'Kom (bkm)', 'Komi (kv)', 'Komi-Permyak (koi)', 'Kongo (kg)', 'Konkani (kok)', 'Korean (ko)', 'Koro (kfo)',\n  'Kosraean (kos)', 'Kotava (avk)', 'Koyra Chiini (khq)', 'Koyraboro Senni (ses)', 'Kpelle (kpe)', 'Krio (kri)',\n  'Kuanyama (kj)', 'Kumyk (kum)', 'Kurdish (ku)', 'Kurukh (kru)', 'Kutenai (kut)', 'Kwasio (nmg)', 'Kyrgyz (ky)',\n  'Kʼicheʼ (quc)', 'Ladino (lad)', 'Lahnda (lah)', 'Lakota (lkt)', 'Lamba (lam)', 'Langi (lag)', 'Lao (lo)',\n  'Latgalian (ltg)', 'Latin (la)', 'Latin American Spanish (es_419)', 'Latvian (lv)', 'Laz (lzz)', 'Lezghian (lez)',\n  'Ligurian (lij)', 'Limburgish (li)', 'Lingala (ln)', 'Lingua Franca Nova (lfn)', 'Literary Chinese (lzh)',\n  'Lithuanian (lt)', 'Livonian (liv)', 'Lojban (jbo)', 'Lombard (lmo)', 'Low German (nds)', 'Lower Silesian (sli)',\n  'Lower Sorbian (dsb)', 'Lozi (loz)', 'Luba-Katanga (lu)', 'Luba-Lulua (lua)', 'Luiseno (lui)', 'Lule Sami (smj)',\n  'Lunda (lun)', 'Luo (luo)', 'Luxembourgish (lb)', 'Luyia (luy)', 'Maba (mde)', 'Macedonian (mk)', 'Machame (jmc)',\n  'Madurese (mad)', 'Mafa (maf)', 'Magahi (mag)', 'Main-Franconian (vmf)', 'Maithili (mai)', 'Makasar (mak)',\n  'Makhuwa-Meetto (mgh)', 'Makonde (kde)', 'Malagasy (mg)', 'Malay (ms)', 'Malayalam (ml)', 'Maltese (mt)', 'Manchu (mnc)',\n  'Mandar (mdr)', 'Mandingo (man)', 'Manipuri (mni)', 'Manx (gv)', 'Maori (mi)', 'Mapuche (arn)', 'Marathi (mr)',\n  'Mari (chm)', 'Marshallese (mh)', 'Marwari (mwr)', 'Masai (mas)', 'Mazanderani (mzn)', 'Medumba (byv)', 'Mende (men)',\n  'Mentawai (mwv)', 'Meru (mer)', 'Metaʼ (mgo)', 'Mexican Spanish (es_MX)', 'Micmac (mic)', 'Middle Dutch (dum)',\n  'Middle English (enm)', 'Middle French (frm)', 'Middle High German (gmh)', 'Middle Irish (mga)', 'Min Nan Chinese (nan)',\n  'Minangkabau (min)', 'Mingrelian (xmf)', 'Mirandese (mwl)', 'Mizo (lus)', 'Modern Standard Arabic (ar_001)',\n  'Mohawk (moh)', 'Moksha (mdf)', 'Moldavian (ro_MD)', 'Mongo (lol)', 'Mongolian (mn)', 'Morisyen (mfe)',\n  'Moroccan Arabic (ary)', 'Mossi (mos)', 'Multiple Languages (mul)', 'Mundang (mua)', 'Muslim Tat (ttt)', 'Myene (mye)',\n  'Nama (naq)', 'Nauru (na)', 'Navajo (nv)', 'Ndonga (ng)', 'Neapolitan (nap)', 'Nepali (ne)', 'Newari (new)',\n  'Ngambay (sba)', 'Ngiemboon (nnh)', 'Ngomba (jgo)', 'Nheengatu (yrl)', 'Nias (nia)', 'Niuean (niu)',\n  'No linguistic content (zxx)', 'Nogai (nog)', 'North Ndebele (nd)', 'Northern Frisian (frr)', 'Northern Sami (se)',\n  'Northern Sotho (nso)', 'Norwegian (no)', 'Norwegian Bokmål (nb)', 'Norwegian Nynorsk (nn)', 'Novial (nov)',\n  'Nuer (nus)', 'Nyamwezi (nym)', 'Nyanja (ny)', 'Nyankole (nyn)', 'Nyasa Tonga (tog)', 'Nyoro (nyo)', 'Nzima (nzi)',\n  'NʼKo (nqo)', 'Occitan (oc)', 'Ojibwa (oj)', 'Old English (ang)', 'Old French (fro)', 'Old High German (goh)',\n  'Old Irish (sga)', 'Old Norse (non)', 'Old Persian (peo)', 'Old Provençal (pro)', 'Oriya (or)', 'Oromo (om)',\n  'Osage (osa)', 'Ossetic (os)', 'Ottoman Turkish (ota)', 'Pahlavi (pal)', 'Palatine German (pfl)', 'Palauan (pau)',\n  'Pali (pi)', 'Pampanga (pam)', 'Pangasinan (pag)', 'Papiamento (pap)', 'Pashto (ps)', 'Pennsylvania German (pdc)',\n  'Persian (fa)', 'Phoenician (phn)', 'Picard (pcd)', 'Piedmontese (pms)', 'Plautdietsch (pdt)', 'Pohnpeian (pon)',\n  'Polish (pl)', 'Pontic (pnt)', 'Portuguese (pt)', 'Prussian (prg)', 'Punjabi (pa)', 'Quechua (qu)', 'Rajasthani (raj)',\n  'Rapanui (rap)', 'Rarotongan (rar)', 'Riffian (rif)', 'Romagnol (rgn)', 'Romanian (ro)', 'Romansh (rm)', 'Romany (rom)',\n  'Rombo (rof)', 'Root (root)', 'Rotuman (rtm)', 'Roviana (rug)', 'Rundi (rn)', 'Russian (ru)', 'Rusyn (rue)', 'Rwa (rwk)',\n  'Saho (ssy)', 'Sakha (sah)', 'Samaritan Aramaic (sam)', 'Samburu (saq)', 'Samoan (sm)', 'Samogitian (sgs)',\n  'Sandawe (sad)', 'Sango (sg)', 'Sangu (sbp)', 'Sanskrit (sa)', 'Santali (sat)', 'Sardinian (sc)', 'Sasak (sas)',\n  'Sassarese Sardinian (sdc)', 'Saterland Frisian (stq)', 'Saurashtra (saz)', 'Scots (sco)', 'Scottish Gaelic (gd)',\n  'Selayar (sly)', 'Selkup (sel)', 'Sena (seh)', 'Seneca (see)', 'Serbian (sr)', 'Serbo-Croatian (sh)', 'Serer (srr)',\n  'Seri (sei)', 'Shambala (ksb)', 'Shan (shn)', 'Shona (sn)', 'Sichuan Yi (ii)', 'Sicilian (scn)', 'Sidamo (sid)',\n  'Siksika (bla)', 'Silesian (szl)', 'Simplified Chinese (zh_Hans)', 'Sindhi (sd)', 'Sinhala (si)', 'Skolt Sami (sms)',\n  'Slave (den)', 'Slovak (sk)', 'Slovenian (sl)', 'Soga (xog)', 'Sogdien (sog)', 'Somali (so)', 'Soninke (snk)',\n  'South Azerbaijani (azb)', 'South Ndebele (nr)', 'Southern Altai (alt)', 'Southern Sami (sma)', 'Southern Sotho (st)',\n  'Spanish (es)', 'Sranan Tongo (srn)', 'Standard Moroccan Tamazight (zgh)', 'Sukuma (suk)', 'Sumerian (sux)',\n  'Sundanese (su)', 'Susu (sus)', 'Swahili (sw)', 'Swati (ss)', 'Swedish (sv)', 'Swiss French (fr_CH)', 'Swiss German (gsw)',\n  'Swiss High German (de_CH)', 'Syriac (syr)', 'Tachelhit (shi)', 'Tagalog (tl)', 'Tahitian (ty)', 'Taita (dav)',\n  'Tajik (tg)', 'Talysh (tly)', 'Tamashek (tmh)', 'Tamil (ta)', 'Taroko (trv)', 'Tasawaq (twq)', 'Tatar (tt)', \n  'Telugu (te)', 'Tereno (ter)', 'Teso (teo)', 'Tetum (tet)', 'Thai (th)', 'Tibetan (bo)', 'Tigre (tig)', 'Tigrinya (ti)',\n  'Timne (tem)', 'Tiv (tiv)', 'Tlingit (tli)', 'Tok Pisin (tpi)', 'Tokelau (tkl)', 'Tongan (to)', 'Tornedalen Finnish (fit)',\n  'Traditional Chinese (zh_Hant)', 'Tsakhur (tkr)', 'Tsakonian (tsd)', 'Tsimshian (tsi)', 'Tsonga (ts)', 'Tswana (tn)',\n  'Tulu (tcy)', 'Tumbuka (tum)', 'Tunisian Arabic (aeb)', 'Turkish (tr)', 'Turkmen (tk)', 'Turoyo (tru)', 'Tuvalu (tvl)',\n  'Tuvinian (tyv)', 'Twi (tw)', 'Tyap (kcg)', 'Udmurt (udm)', 'Ugaritic (uga)', 'Ukrainian (uk)', 'Umbundu (umb)',\n  'Unknown Language (und)', 'Upper Sorbian (hsb)', 'Urdu (ur)', 'Uyghur (ug)', 'Uzbek (uz)', 'Vai (vai)', 'Venda (ve)',\n  'Venetian (vec)', 'Veps (vep)', 'Vietnamese (vi)', 'Volapük (vo)', 'Võro (vro)', 'Votic (vot)', 'Vunjo (vun)',\n  'Walloon (wa)', 'Walser (wae)', 'Waray (war)', 'Warlpiri (wbp)', 'Washo (was)', 'Wayuu (guc)', 'Welsh (cy)',\n  'West Flemish (vls)', 'Western Frisian (fy)', 'Western Mari (mrj)', 'Wolaytta (wal)', 'Wolof (wo)', 'Wu Chinese (wuu)',\n  'Xhosa (xh)', 'Xiang Chinese (hsn)', 'Yangben (yav)', 'Yao (yao)', 'Yapese (yap)', 'Yemba (ybb)', 'Yiddish (yi)',\n  'Yoruba (yo)', 'Zapotec (zap)', 'Zarma (dje)', 'Zaza (zza)', 'Zeelandic (zea)', 'Zenaga (zen)', 'Zhuang (za)', \n  'Zoroastrian Dari (gbz)', 'Zulu (zu)', 'Zuni (zun)']\n\nconst genderOptions = [\n  'Female',\n  'Male',\n  'Other'\n]\n\nconst maritalStatusOptions = [\n  'Common Law',\n  'Divorced',\n  'Married',\n  'Other',\n  'Separated',\n  'Single',\n  'Widowed'\n]\n\nconst statusInCanadaOptions = [\n  'Application in Process - Family',\n  'Application in Process - Humanitarian and Compassionate',\n  'Application in Process - Independent',\n  'Application in Process - Refugee',\n  'Canadian Citizen',\n  'Immigrant',\n  'Other',\n  'Permanent Resident - Business Class',\n  'Permanent Resident - Canadian Experience Class',\n  'Permanent Resident - Family Class',\n  'Permanent Resident -  Humanitarian and Compassionate',\n  'Permanent Resident - Live-in Caregiver',\n  'Permanent Resident - Provincial Nominee',\n  'Permanent Resident - Refugees',\n  'Permanent Resident - Skilled Worker and Skilled Trades',\n  'Temporary Resident',\n  'Visitors Visa',\n  'Work Permit'\n]\n\nconst educationLevelOptions = [\n  'College',\n  'Elementary',\n  'Post Graduate',\n  'Secondary',\n  'University'\n]\n\nconst incomeSourceOptions = [\n 'Crowd Ward',\n 'Dependent of OW/ODSP',\n 'Employment',\n 'Employment Insurance',\n 'Family Members Income',\n 'None',\n 'Ontario Disability Support Program',\n 'Ontario Works',\n 'Other',\n 'Pension',\n 'Unknown',\n 'Workers Safety and Insurance'\n]\n\nconst matchStatusOptions = [\n  'Contacted',\n  'Matched',\n  'Referred',\n  'Selected'\n]\n\nconst familyRelationshipOptions = [\n  'Child',\n  'Parent',\n  'Sibling',\n  'Spouse'\n]\n\nconst needStatusOptions = [\n  'Fulfilled',\n  'In Progress',\n  'Matched',\n  'Pending',\n  'Unmatched'\n]\n\nconst serviceTypeOptions = [\n  'External',\n  'Internal',\n  'Professional/Community',\n  'Volunteer based'\n]\n\nconst serviceSharedWithOptions = [\n  \"Children's Aid Society of Toronto\",\n  \"Durham Children's Aid Society\",\n  \"Eva's Initiatives\",\n  'Abrigo Centre',\n  'Adventist community services',\n  'AIDS Committee of Durham Region',\n  'Albion Neighbourhood Services',\n  'Alexandra Park Community Centre',\n  'Applegrove Community Complex',\n  'Arab Community Centre of Toronto',\n  'Aurora Food Pantry',\n  'Barbra Schlifer Commemorative Clinic',\n  'Bluffs Food Bank',\n  'Boost Child & Youth Advocacy Centre',\n  'Brock Community Food Bank',\n  'Central Toronto Youth Services',\n  'Covenant House Toronto',\n  'Durham Rape Crisis Centre',\n  'Durham Youth Housing and Support Services',\n  'Horizons for Youth',\n  'Kababayan Multicultural Centre',\n  'Markham Food Bank',\n  'Parkdale Community Food Bank',\n  'Pediatric Oncology Group of Ontario',\n  'Private',\n  'Public'\n]\n\nconst provinceOptions = [\n  'Alberta',\n  'British Columbia',\n  'Manitoba',\n  'New Brunswick',\n  'Newfoundland and Labrador',\n  'Nova Scotia',\n  'Ontario',\n  'Prince Edward Island',\n  'Quebec',\n  'Saskatchewan'\n]\n\nmodule.exports = Object.freeze({\n  serverHost: serverHost,\n  torontoCoordinates: torontoCoordinates,\n  countryOptions: countryOptions,\n  languageOptions: languageOptions,\n  genderOptions: genderOptions,\n  maritalStatusOptions: maritalStatusOptions,\n  statusInCanadaOptions: statusInCanadaOptions,\n  educationLevelOptions: educationLevelOptions,\n  incomeSourceOptions: incomeSourceOptions,\n  matchStatusOptions: matchStatusOptions,\n  familyRelationshipOptions: familyRelationshipOptions,\n  needStatusOptions: needStatusOptions,\n  serviceTypeOptions: serviceTypeOptions,\n  serviceSharedWithOptions: serviceSharedWithOptions,\n  provinceOptions: provinceOptions,\n  ACTION_SUCCESS: ACTION_SUCCESS,\n  ACTION_ERROR: ACTION_ERROR\n});\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../defaults.js';\n\nexport const RECEIVE_CLIENT_NEEDS = 'RECEIVE_CLIENT_NEEDS';\nexport const RECEIVE_CLIENT_NEED = 'RECEIVE_CLIENT_NEED';\nexport const REMOVE_CLIENT_NEED = 'REMOVE_CLIENT_NEED';\nexport const REQUEST_NEED = 'REQUEST_NEED';\nexport const REQUEST_NEEDS = 'REQUEST_NEEDS';\nexport const RECEIVE_NEEDS = 'RECEIVE_NEEDS';\nexport const RECEIVE_CLIENT_NEED_GROUP = 'RECEIVE_CLIENT_NEED_GROUP';\nexport const RECEIVE_CLIENT_NEED_INFO = ' RECEIVE_CLIENT_NEED_INFO';\nexport const ERROR = 'ERROR';\n\nfunction requestNeeds(json) {\n  return {\n    type: REQUEST_NEEDS,\n    needs: json\n  }\n}\n\nfunction receiveNeeds(json) {\n  return {\n    type: RECEIVE_NEEDS,\n    needs: json\n  }\n}\n\nexport function receiveClientNeeds(clientId, json, needGroups) {\n  return {\n    type: RECEIVE_CLIENT_NEEDS,\n    clientId: clientId,\n    needs: json,\n    needGroups: needGroups\n  }\n}\n\nfunction receiveClientNeed(clientId, need, needGroup) {\n  return {\n    type: RECEIVE_CLIENT_NEED,\n    clientId: clientId,\n    need: need,\n    needGroup: needGroup\n  }\n}\n\nfunction receiveClientNeedInfo(clientId, needId, need) {\n  return {\n    type: RECEIVE_CLIENT_NEED_INFO,\n    clientId: clientId,\n    needId: needId,\n    need: need\n  }\n}\n\nfunction removeClientNeed(clientId, needId) {\n  return {\n    type: REMOVE_CLIENT_NEED,\n    clientId: clientId,\n    needId: needId\n  }\n}\n\nfunction receiveClientNeedGroup(clientId, needGroup) {\n  return {\n    type: RECEIVE_CLIENT_NEED_GROUP,\n    clientId: clientId,\n    needGroup: needGroup\n  }\n}\n\nfunction requestNeed(id) {\n  return {\n    type: REQUEST_NEED,\n    needId: id\n  }\n}\n\nexport function createClientNeed(clientId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/needs/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(needInfo =>\n      dispatch(receiveClientNeed(clientId, needInfo.need, needInfo.need_group))\n    );\n  }\n}\n\nexport function updateClientNeed(clientId, needId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/needs/' + needId + '/';\n\n    return fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n      .then(needInfo => dispatch(receiveClientNeed(clientId, needInfo.need, needInfo.need_group)));\n  }\n}\n\nexport function updateClientNeedGroup(clientId, needGroupId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/need_groups/' + needGroupId + '/';\n\n    return fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n      .then(needGroup => dispatch(receiveClientNeedGroup(clientId, needGroup)));\n  }\n}\n\nexport function matchClientNeed(needId, params) {\n  return dispatch => {\n    const url = serverHost + '/needs/' + needId + '/matches/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n      .then(need => {\n        dispatch(receiveClientNeedInfo(need.client_id, needId, need))\n      });\n  }\n}\n\nexport function deleteClientNeed(clientId, needId, params) {\n  return dispatch => {\n    const url = serverHost + '/clients/' + clientId + '/needs/' + needId + '/';\n    return fetch(url, {\n      method: \"DELETE\",\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => {\n      if (response.status === 204) {\n        dispatch(removeClientNeed(clientId, needId))\n      }\n    });\n  }\n}\n\nexport function fetchNeed(needId, callback) {\n  return dispatch => {\n    dispatch(requestNeed(needId))\n    const url = serverHost + '/needs/' + needId;\n\n    return fetch(url, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(need => {\n      dispatch(receiveClientNeedInfo(need.client_id, need.id, need))\n      callback(need)\n    });\n  }\n}\n\nexport function fetchNeeds() {\n  return dispatch => {\n    dispatch(requestNeeds())\n    const url = serverHost + '/needs/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveNeeds(json))\n      })\n  }\n}\n\nexport function updateMatchStatus(matchId, params) {\n  return dispatch => {\n    const url = serverHost + '/matches/' + matchId + '/';\n\n    return fetch(url, {\n      method: 'PATCH',\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(need => dispatch(receiveClientNeedInfo(need.client_id, need.id, need)));\n  }\n}\n\nexport function createMatchNote(params) {\n  return dispatch => {\n    const url = serverHost + '/notes/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(response => response.json())\n    .then(need => dispatch(receiveClientNeedInfo(need.client_id, need.id, need)));\n  }\n}\n","import { serverHost } from '../defaults.js';\nimport jwt_decode from 'jwt-decode';\n\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport const LOGGED_OUT = 'LOGGED_OUT';\nexport const UPDATE_ORGANIZATION = 'UPDATE_ORGANIZATION';\n\nfunction login_success(user, organization) {\n  console.log(\"File: authActions.js - Function: login_success - Parameters: user, organization. - Values: \", user, organization);\n  return {\n    type: LOGIN_SUCCESS,\n    user: user,\n    organization: organization\n  }\n}\n\nfunction login_failure(alert) {\n  console.log(\"File: authActions.js -  Function: login_failure - Parameters: alert - Values:  \", alert);\n  return {\n    type: LOGIN_FAILURE,\n    alert\n  }\n}\n\nfunction logged_out(sessionExpired) {\n  console.log(\"File: authActions.js -  Function: logged_out - Parameters: sessionExpired - Values: \", sessionExpired);\n  return {\n    type: LOGGED_OUT,\n    alert: sessionExpired && 'Your session has expired. Please login again.'\n  }\n}\n\nexport function updateAuthOrganization(provider) {\n  console.log(\"File: authActions.js -  Function: updateAuthOrganization - Parameters: provider - Values:\", provider);\n  return {\n    type: UPDATE_ORGANIZATION,\n    provider: provider\n  }\n}\n\nexport function login(params) {\n  console.log(\"File: authActions.js -  Function: login -  Parameters: params - Values:  \", params);\n  return dispatch => {\n    const url = serverHost + '/api-token-auth/';\n\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return response.json()\n      }\n      else {\n        const error = await response.json();\n        throw new Error(JSON.stringify(error['non_field_errors']))\n      }\n    })\n    .then(json => {\n      console.log(\"File: authActions.js -  Function: login - Step 2  json:  \", json);\n      const decoded_token = jwt_decode(json.token);\n      let user = (({ user_id, username, email }) => ({ user_id, username, email }))(decoded_token);\n      user['expired_at'] = decoded_token['exp'] * 1000;\n      user['is_admin'] = json.is_admin;\n      const organization = {\n        id: json.provider_id,\n        name: json.organization_name\n      };\n      localStorage.setItem('jwt_token', json.token);\n      dispatch(login_success(user, organization));\n      return {status: LOGIN_SUCCESS}\n    }).catch(err => {\n      let alert;\n      if (err.message === \"Failed to fetch\") {\n        alert = 'Server is unavailable due to a temporary outage.'\n      }\n      else {\n        alert = 'The username or password you entered is incorrect. Please try again.'\n      }\n      dispatch(login_failure(alert));\n      return {status: LOGIN_FAILURE, message: alert};\n    })\n  }\n}\n\nexport function logout(sessionExpired) {\n  return dispatch => {\n    dispatch(logged_out(sessionExpired))\n    localStorage.removeItem('jwt_token');\n  }\n}\n","import { LOGIN_SUCCESS, LOGGED_OUT, UPDATE_ORGANIZATION, LOGIN_FAILURE} from '../actions/authAction.js';\n\nconst DEFAULT_STATE = {\n  currentUser: null,\n  isLoggedin: false,\n  organization: { id: null, name: null },\n  alert: null\n}\n\nexport function auth(state = DEFAULT_STATE, action) {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      console.log(\"File: authReducer.js, Function: auth, case LOGIN_SUCCESS, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        currentUser: action.user,\n        isLoggedin: true,\n        organization: action.organization,\n        alert: null\n      })\n    case LOGIN_FAILURE:\n      console.log(\"File: authReducer.js, Function: auth, case LOGIN_FAILURE, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        alert: action.alert\n      })\n    case LOGGED_OUT:\n      console.log(\"File: authReducer.js, Function: auth, case LOGGED_OUT, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        currentUser: null,\n        isLoggedin: false,\n        organization: { id: null, name: null },\n        alert: action.alert\n      })\n    case UPDATE_ORGANIZATION:\n      console.log(\"File: authReducer.js, Function: auth, case UPDATE_ORGANIZATION, Parameters: state, action -> \", state, action)\n      return Object.assign({}, state, {\n        organization: {\n          id: action.provider.id,\n          name: action.provider.company\n        }\n      })\n    default:\n      return state\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../defaults.js';\n\nexport const RECEIVE_CATEGORIES = 'RECEIVE_CATEGORIES'\n\n\nexport function receiveCategories(type, categories) {\n  return {\n    type: RECEIVE_CATEGORIES,\n    category_type: type,\n    categories: categories\n  }\n}\n\nexport function fetchOntologyCategories(type) {\n  return dispatch => {\n    const url = serverHost + '/categories/' + type + '/';\n    return fetch(url, { method: \"GET\" })\n      .then(response => response.json())\n      .then(json => {\n        dispatch(receiveCategories(type, json['categories']));\n        return json.categories;\n      });\n  }\n}\n","import { RECEIVE_CATEGORIES } from '../actions/ontologyActions.js';\n\nconst DEFAULT_CATEGORY_STATE = { categories: [], loaded: false }\n\nexport function ontology(state = { needs: DEFAULT_CATEGORY_STATE,\n                                   services: DEFAULT_CATEGORY_STATE,\n                                   languages: DEFAULT_CATEGORY_STATE },\n                         action) {\n  switch (action.type) {\n    case RECEIVE_CATEGORIES:\n      return {...state, [action.category_type]: { categories: action.categories.sort(), loaded: true } }\n    default:\n      return state\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\n\nimport { receiveClientNeeds } from './needActions'\n\nexport const REQUEST_CLIENT = 'REQUEST_CLIENT';\nexport const RECEIVE_CLIENT = 'RECEIVE_CLIENT';\nexport const REQUEST_CLIENTS = 'REQUEST_CLIENTS';\nexport const REMOVE_CLIENT = 'REMOVE_CLIENT';\nexport const RECEIVE_CLIENTS = 'RECEIVE_CLIENTS';\nexport const SEARCH_CLIENTS = 'SEARCH_CLIENTS';\n\n\nfunction requestClient(id) {\n  return {\n    type: REQUEST_CLIENT,\n    id: id\n  }\n}\n\nfunction receiveClient(id, json) {\n  return {\n    type: RECEIVE_CLIENT,\n    id: id,\n    client: json\n  }\n}\n\nfunction requestClients(json) {\n  return {\n    type: REQUEST_CLIENTS,\n    clients: json\n  }\n}\n\nfunction receiveClients(json) {\n  return {\n    type: RECEIVE_CLIENTS,\n    clients: json\n  }\n}\n\nfunction removeClient(id) {\n  return {\n    type: REMOVE_CLIENT,\n    id: id\n  }\n}\n\nexport function searchClients(searchValue, searchType, sortType) {\n  return {\n    type: SEARCH_CLIENTS,\n    searchValue: searchValue,\n    searchType: searchType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchClient(id) {\n  return dispatch => {\n    dispatch(requestClient(id))\n    const url = serverHost + '/client/' + id + '/';\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveClient(id, json));\n        dispatch(receiveClientNeeds(id, json['needs'], json['need_groups']));\n        return json;\n      });\n  }\n}\n\nexport function fetchClients() {\n  return dispatch => {\n    dispatch(requestClients())\n    let url = serverHost + '/clients/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      })\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json()\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(json => {\n        dispatch(receiveClients(json));\n        return json;\n      })\n      .catch(err => {\n        return ACTION_ERROR;\n      })\n  }\n}\n\n\nexport function deleteClient(id, params) {\n  return dispatch => {\n    const url = serverHost + '/client/' + id + '/';\n    return fetch(url, {\n      method: 'DELETE',\n      body: JSON.stringify(params),\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`,\n        'Content-Type': 'application/json'\n      },\n    })\n    .then(response => {\n      if (response.status === 204) {\n        dispatch(removeClient(id));\n        return ACTION_SUCCESS;\n      }\n      else {\n        return ACTION_ERROR;\n      }\n    })\n  }\n}\n\nexport function createClient(params, callback) {\n  console.log(\"createClient params\", params);\n\n  return dispatch => {\n    const url = serverHost + '/clients/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      console.log(\"createClient response.status\", response.status);\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(client => {\n      dispatch(receiveClient(client.id, client))\n      callback(ACTION_SUCCESS, null, client.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n\nexport function createClients(file) {\n  const formData  = new FormData();\n  formData.append('file', file)\n\n  return dispatch => {\n    const url = serverHost + '/clients.csv';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(clients => {\n      dispatch(receiveClients(clients))\n      return ACTION_SUCCESS;\n    })\n    .catch(err => {\n      // dispatch(createFailure(err))\n      return ACTION_ERROR;\n    })\n  }\n}\n\nexport function updateClient(id, params, callback) {\n  console.log(\"updateClient id, params\", id, params);\n  return dispatch => {\n    const url = serverHost + '/client/' + id + '/';\n\n    return fetch(url, {\n      method: 'PUT',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return response.json();\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(client => {\n      dispatch(receiveClient(client.id, client))\n      callback(ACTION_SUCCESS, null, client.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\n\nexport const REQUEST_SERVICE = 'REQUEST_SERVICE';\nexport const RECEIVE_SERVICE = 'RECEIVE_SERVICE';\nexport const REQUEST_SERVICES = 'REQUEST_SERVICES';\nexport const REMOVE_SERVICE = 'REMOVE_SERVICE';\nexport const RECEIVE_SERVICES = 'RECEIVE_SERVICES';\nexport const SEARCH_SERVICES = 'SEARCH_SERVICES';\n\n\nfunction requestService(id) {\n  return {\n    type: REQUEST_SERVICE,\n    id: id\n  }\n}\n\nfunction receiveService(id, json) {\n  return {\n    type: RECEIVE_SERVICE,\n    id: id,\n    service: json\n  }\n}\n\nfunction requestServices(json) {\n  return {\n    type: REQUEST_SERVICES,\n    services: json\n  }\n}\n\nfunction receiveServices(json) {\n  return {\n    type: RECEIVE_SERVICES,\n    services: json\n  }\n}\n\nfunction removeService(id) {\n  return {\n    type: REMOVE_SERVICE,\n    id: id\n  }\n}\n\nexport function searchServices(searchValue, searchType, sortType) {\n  return {\n    type: SEARCH_SERVICES,\n    searchValue: searchValue,\n    searchType: searchType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchService(id) {\n  return dispatch => {\n    dispatch(requestService(id))\n    const url = serverHost + '/service/' + id + '/';\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveService(id, json))\n      })\n  }\n}\n\nexport function fetchServices() {\n  return dispatch => {\n    dispatch(requestServices())\n    const url = serverHost + '/services/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(async(response) => {\n        if (response.status === 200) {\n          return response.json()\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(json => {\n        dispatch(receiveServices(json))\n        return json;\n      })\n      .catch(err => {\n        return ACTION_ERROR;\n      })\n  }\n\n}\n\nexport function deleteService(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/service/' + id + '/';\n    return fetch(url, {\n      method: 'DELETE',\n      body: JSON.stringify(params),\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`,\n        'Content-Type': 'application/json'\n      },\n    }).then(response => {\n      if (response.status === 204) {\n        dispatch(removeService(id))\n        return ACTION_SUCCESS;\n      }\n      else {\n        return ACTION_ERROR;\n      }\n    })\n  }\n}\n\nexport function createService(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/services/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(service => {\n      dispatch(receiveService(service.id, service))\n      callback(ACTION_SUCCESS, null, service.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n\nexport function createServices(file) {\n  const formData  = new FormData();\n  formData.append('file', file)\n\n  return dispatch => {\n    const url = serverHost + '/services.csv';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(services => {\n      dispatch(receiveServices(services))\n      return ACTION_SUCCESS\n    })\n    .catch(err => {\n      return ACTION_ERROR\n    })\n  }\n}\n\nexport function updateService(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/service/' + id + '/';\n\n    return fetch(url, {\n      method: 'PUT',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json();\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(service => {\n        dispatch(receiveService(service.id, service))\n        callback(ACTION_SUCCESS, null, service.id);\n      }).catch(err => {\n        callback(ACTION_ERROR, err);\n      })\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\nimport { updateAuthOrganization } from './authAction.js'\n\nexport const REQUEST_PROVIDERS = 'REQUEST_PROVIDERS';\nexport const RECEIVE_PROVIDERS = 'RECEIVE_PROVIDERS';\nexport const REMOVE_PROVIDER = 'REMOVE_PROVIDER';\nexport const RECEIVE_PROVIDER = 'RECEIVE_PROVIDER';\nexport const REQUEST_PROVIDER = 'REQUEST_PROVIDER';\nexport const SEARCH_PROVIDERS = 'SEARCH_PROVIDERS';\n\n\nfunction requestProviders(json) {\n  return {\n    type: REQUEST_PROVIDERS,\n    providers: json\n  }\n}\n\nfunction requestProvider(id) {\n  console.log(\"requestProvider id\", id);\n  return {\n    type: REQUEST_PROVIDER,\n    id: id\n  }\n}\n\nfunction receiveProvider(id, json) {\n  console.log(\"receiveProvider json\", json);\n  return {\n    type: RECEIVE_PROVIDER,\n    provider: json,\n    id: id\n  }\n}\n\nfunction receiveProviders(json) {\n  console.log(\"receiveProviders json\", json);\n  return {\n    type: RECEIVE_PROVIDERS,\n    providers: json,\n    receivedAt: Date.now(),\n  }\n}\n\nfunction removeProvider(id) {\n  return {\n    type: REMOVE_PROVIDER,\n    id: id\n  }\n}\n\n\nexport function searchProviders(searchValue, searchType, searchProviderType, sortType) {\n  return {\n    type: SEARCH_PROVIDERS,\n    searchValue: searchValue,\n    searchType: searchType,\n    displayType: searchProviderType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchProvider(id) {\n  return dispatch => {\n    console.log(\"fetchProvider, id\", id);\n    dispatch(requestProvider(id))\n    const url = serverHost + '/provider/' + id + '/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveProvider(id, json))\n        return json;\n      })\n  }\n}\n\nexport function fetchProviders() {\n  return dispatch => {\n    dispatch(requestProviders())\n    const url = serverHost + '/providers/';\n\n    return fetch(url, {\n        method: 'get',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      })\n    //.then(response => response.json())\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json()\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(json => {\n        dispatch(receiveProviders(json));\n        return json;\n      })\n      .catch(err => {\n        return ACTION_ERROR;\n      })\n  }\n}\n\nexport function createProvider(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/providers/';\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(provider => {\n      dispatch(receiveProvider(provider.id, provider))\n      if (provider.status === 'Home Agency') {\n        dispatch(updateAuthOrganization(provider))\n      }\n      callback(ACTION_SUCCESS, null, provider.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n\nexport function createProviderWithCSV(file) {\n  const formData  = new FormData();\n  formData.append('file', file);\n\n  return dispatch => {\n    const url = serverHost + '/providers/new/upload';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(providers => {\n      dispatch(receiveProviders(providers))\n      return ACTION_SUCCESS;\n    })\n      .catch(err => {\n      return ACTION_ERROR;\n    })\n  }\n}\n\nexport function updateProvider(id, params, callback) {\n  console.log(\"updateProvider id, params\", id, params);\n  return dispatch => {\n    const url = serverHost + '/provider/' + id + '/';\n\n    return fetch(url, {\n      method: \"PUT\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 200) {\n        return await response.json();\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n      .then(provider => {\n        console.log(\"updateProvider provider.id, provider\", provider.id, provider);\n        dispatch(receiveProvider(provider.id, provider))\n /*       if (provider.status === 'Home Agency') {\n          dispatch(updateAuthOrganization(provider.id, provider))\n        } */\n        callback(ACTION_SUCCESS, null, provider.id);\n      }).catch(err => {\n        callback(ACTION_ERROR, err);\n    })\n  }\n}\n\n/*\n.then(client => {\n      dispatch(receiveClient(client.id, client))\n      callback(ACTION_SUCCESS, null, client.id);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n\n*/\n\nexport function deleteProvider(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/provider/' + id + '/';\n\n    return fetch(url, {\n      method: \"DELETE\",\n      body: JSON.stringify(params),\n      headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n    }).then(response => {\n      if (response.status === 204) {\n        dispatch(removeProvider(id));\n        return ACTION_SUCCESS;\n      }\n      else {\n        return ACTION_ERROR;\n      }\n    })\n  }\n}\n\nexport function rateProvider(id, params) {\n  return dispatch => {\n    const url = serverHost + '/provider/' + id + '/rate';\n    return fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(params),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(response => response.json())\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../defaults.js';\n\nexport const REQUEST_GOOD = 'REQUEST_GOOD';\nexport const RECEIVE_GOOD = 'RECEIVE_GOOD';\nexport const REQUEST_GOODS = 'REQUEST_GOODS';\nexport const RECEIVE_ALL_GOODS = 'RECEIVE_ALL_GOODS';\nexport const REMOVE_GOOD = 'REMOVE_GOOD';\nexport const RECEIVE_GOODS = 'RECEIVE_GOODS';\nexport const GOOD_ERROR = 'GOOD_ERROR';\nexport const GOOD_SUCCESS = 'GOOD_SUCCESS';\nexport const SEARCH_GOODS = 'SEARCH_GOODS';\n\n\nfunction requestGood(id) {\n  return {\n    type: REQUEST_GOOD,\n    id: id\n  }\n}\n\nfunction receiveGood(id, json) {\n  return {\n    type: RECEIVE_GOOD,\n    id: id,\n    good: json\n  }\n}\n\nfunction requestGoods(json) {\n  return {\n    type: REQUEST_GOODS,\n    goods: json\n  }\n}\n\nfunction receiveGoods(json) {\n  return {\n    type: RECEIVE_GOODS,\n    goods: json\n  }\n}\n\nfunction removeGood(id) {\n  return {\n    type: REMOVE_GOOD,\n    id: id\n  }\n}\n\nexport function searchGoods(searchValue, searchType, sortType) {\n  return {\n    type: SEARCH_GOODS,\n    searchValue: searchValue,\n    searchType: searchType,\n    sortType: sortType\n  };\n}\n\n\nexport function fetchGood(id) {\n  return dispatch => {\n    dispatch(requestGood(id))\n    const url = serverHost + '/good/' + id + '/';\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveGood(id, json))\n      })\n  }\n}\n\nexport function fetchGoods() {\n  return dispatch => {\n    dispatch(requestGoods())\n    const url = serverHost + '/goods/';\n\n    return fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        },\n      }).then(response => response.json())\n      .then(json => {\n        dispatch(receiveGoods(json));\n        return json;\n      })\n  }\n}\n\nexport function deleteGood(id, params) {\n  return dispatch => {\n    const url = serverHost + '/good/' + id + '/';\n\n    return fetch(url, {\n      method: 'DELETE',\n      body: JSON.stringify(params),\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`,\n        'Content-Type': 'application/json'\n      },\n    })\n    .then(response => {\n      if (response.status === 204) {\n        dispatch(removeGood(id))\n        return GOOD_SUCCESS\n      }\n      else {\n        return GOOD_ERROR\n      }\n    });\n  }\n}\n\nexport function createGood(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/goods/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    }).then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(good => {\n      dispatch(receiveGood(good.id, good))\n      callback(GOOD_SUCCESS, null, good.id);\n    }).catch(err => {\n      callback(GOOD_ERROR, err);\n    })\n  }\n}\n\nexport function createGoods(file) {\n  const formData  = new FormData();\n  formData.append('file', file)\n\n  return dispatch => {\n    const url = serverHost + '/goods.csv';\n    return fetch(url, {\n      method: 'POST',\n      body: formData,\n      headers: {\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(goods => {\n      dispatch(receiveGoods(goods))\n      return GOOD_SUCCESS\n    })\n    .catch(err => {\n      return GOOD_ERROR\n    })\n  }\n}\n\nexport function updateGood(id, params, callback) {\n  return dispatch => {\n    const url = serverHost + '/good/' + id + '/';\n\n    return fetch(url, {\n      method: 'PUT',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n      .then(async(response) => {\n        if (response.status === 200) {\n          return response.json();\n        }\n        else {\n          const error = await response.json()\n          throw new Error(JSON.stringify(error))\n        }\n      })\n      .then(good => {\n        dispatch(receiveGood(good.id, good))\n        callback(GOOD_SUCCESS, null, good.id);\n      }).catch(err => {\n        callback(GOOD_ERROR, err);\n      })\n  }\n}\n","import { combineReducers } from 'redux'\nimport { needs } from './reducers/needReducers.js';\nimport { auth } from './reducers/authReducer.js';\nimport { ontology } from './reducers/ontologyReducers.js';\nimport { clients } from './reducers/clientReducer.js';\nimport { services } from './reducers/serviceReducer.js';\nimport { providers } from './reducers/providerReducers.js';\nimport { goods } from './reducers/goodReducer.js';\n\n\nconst appReducer = combineReducers({\n  services,\n  clients,\n  goods,\n  needs,\n  providers,\n  auth,\n  ontology,\n});\n\nconst initialState = appReducer({}, {});\n\nexport const rootReducer = (state, action) => {\n  if (action.type === 'LOGGED_OUT') {\n    state = initialState\n  }\n\n  return appReducer(state, action);\n};\n","import { REQUEST_SERVICES, RECEIVE_SERVICES, SEARCH_SERVICES, REMOVE_SERVICE,\n         REQUEST_SERVICE, RECEIVE_SERVICE } from '../actions/serviceActions.js';\nimport _ from 'lodash';\n\n\nexport function services(state = {index: [], filteredServices: [], servicesLoaded: false, byId: {} }, action) {\n  let nextById, sortedServices, services, nextIndex;\n  switch (action.type) {\n    case REQUEST_SERVICES:\n    // should be for fetching all serves in componentWillMount\n      return {...state, servicesLoaded: false }\n    case RECEIVE_SERVICES:\n      console.log(\"reducer check: \", action);\n    // should be for fetching all serves in componentWillMount\n      const newServicesById = _.keyBy(action.services, service => service.id);\n      nextById = { ...state.byId, ...newServicesById }\n      return {...state, byId: nextById, servicesLoaded: true, index: action.services, filteredServices:action.services }\n    case REMOVE_SERVICE:\n    // should be for delete function\n      nextIndex = _.clone(state.index);\n      _.remove(nextIndex, (n) => { return n.id === action.id });\n      return { ...state, index: nextIndex, filteredServices: nextIndex }\n    case REQUEST_SERVICE:\n    // for single servce viewing\n      nextById = { ...state.byId, [action.id]: { servicesLoaded: false } }\n      return {...state, byId: nextById }\n    case RECEIVE_SERVICE:\n    // same as above\n      nextById = {...state.byId, [action.id]: { ...action.service, servicesLoaded: true }}\n      return {...state, byId: nextById }\n\n    case SEARCH_SERVICES:\n    // for search bar\n      if (action.sortType === '' || action.sortType === \"name\") {\n        console.log(\"service reducer :\", [...state.index]);\n        sortedServices = [...state.index].sort((a, b) => (a.name ? a.name.toLowerCase(): \"\").localeCompare(b.name ? b.name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"provider\") {\n        sortedServices = [...state.index].sort((a, b) => (a.provider.profile.first_name?a.provider.profile.first_name.toLowerCase():\"\").localeCompare(b.provider.profile.first_name?b.provider.profile.first_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"description\") {\n        sortedServices = [...state.index].sort((a, b) => (a.desc?a.desc:\"\").localeCompare(b.desc?b.desc:\"\"));\n      }\n      else if (action.sortType === \"category\") {\n        sortedServices = [...state.index].sort((a, b) => (a.category? a.category:\"\").localeCompare(b.category?b.category:\"\"));\n      }\n\n      if (action.searchValue === '') {\n        return {index: sortedServices, filteredServices: sortedServices, servicesLoaded: true}\n      }\n      else if (action.searchType === \"name\") {\n        services = sortedServices.filter((service) => ((service.name?service.name.toLowerCase():\"\").includes(action.searchValue) ));\n        console.log(\"service reducer return: \", {index: [...state.index], filteredServices: services, servicesLoaded: true});\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      else if (action.searchType === \"provider\") {\n        services = sortedServices.filter((service) => (service.provider.company ? (service.provider.company).includes(action.searchValue) : \"\")\n        || ((service.provider.profile.first_name ? service.provider.profile.first_name.toLowerCase() : \"\")\n         + \" \" +\n         (service.provider.profile.last_name ? service.provider.profile.last_name.toLowerCase().includes(action.searchValue): \"\")));\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      else if (action.searchType === \"description\") {\n        services = sortedServices.filter((service) => ((service.desc).includes(action.searchValue) ));\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      else if (action.searchType === \"category\") {\n        services = sortedServices.filter((service) => ((service.category).includes(action.searchValue) ));\n        return {index: [...state.index], filteredServices: services, servicesLoaded: true}\n      }\n      break;\n    default:\n      return state\n  }\n}\n","import { REQUEST_CLIENTS, RECEIVE_CLIENTS, REMOVE_CLIENT, REQUEST_CLIENT,\n         RECEIVE_CLIENT, SEARCH_CLIENTS } from '../actions/clientActions.js';\nimport _ from 'lodash';\n\n\nexport function clients(state = {index: [], filteredClients: [], clientsLoaded: false, byId: {} }, action) {\n  let nextById, clients, nextIndex, sortedClients;\n  switch (action.type) {\n    case REQUEST_CLIENTS:\n      console.log()\n      return {...state, clientsLoaded: false }\n    case RECEIVE_CLIENTS:\n      console.log(RECEIVE_CLIENTS);\n      const newClientsById = _.keyBy(action.clients, client => client.id);\n      nextById = { ...state.byId, ...newClientsById }\n      return {...state, byId: nextById, clientsLoaded: true, index: action.clients, filteredClients: action.clients }\n    case REMOVE_CLIENT:\n      nextIndex = _.clone(state.index);\n      _.remove(nextIndex, (n) => { return n.id === action.id });\n      return { ...state, index: nextIndex, filteredClients: nextIndex }\n    case REQUEST_CLIENT:\n      nextById = { ...state.byId, [action.id]: { clientsLoaded: false } }\n      return {...state, byId: nextById }\n    case RECEIVE_CLIENT:\n      console.log(RECEIVE_CLIENT);\n      nextById = {...state.byId, [action.id]: { ...action.client, clientsLoaded: true }}\n      return {...state, byId: nextById }\n\n    case SEARCH_CLIENTS:\n    // for search bar\n      if (action.sortType === '' || action.sortType === \"first_name\") {\n        console.log(\"client reducer :\", [...state.index]);\n        sortedClients = [...state.index].sort((a, b) => (a.profile.first_name ? a.profile.first_name.toLowerCase(): \"\").localeCompare(b.profile.first_name ? b.profile.first_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"-first_name\") {\n        sortedClients = [...state.index].sort((a, b) => (a.profile.first_name ? a.profile.first_name.toLowerCase(): \"\").localeCompare(b.profile.first_name ? b.profile.first_name.toLowerCase():\"\"));\n        sortedClients = sortedClients.reverse();\n      }\n      else if (action.sortType === \"last_name\") {\n        sortedClients = [...state.index].sort((a, b) => (a.profile.last_name ? a.profile.last_name.toLowerCase(): \"\").localeCompare(b.profile.last_name ? b.profile.last_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType === \"-last_name\") {\n        sortedClients = [...state.index].sort((a, b) => (a.profile.last_name ? a.profile.last_name.toLowerCase(): \"\").localeCompare(b.profile.last_name ? b.profile.last_name.toLowerCase():\"\"));\n        sortedClients = sortedClients.reverse();\n      }\n\n      if (action.searchValue === ''){\n        return {index: sortedClients, filteredClients: sortedClients, clientsLoaded: true}\n      }\n      else if (action.searchType === 'first_name') {\n        console.log(\"clients: \", sortedClients);\n        clients = sortedClients.filter((client) => ((client.profile.first_name?client.profile.first_name.toLowerCase():\"\").includes(action.searchValue)));\n        console.log(\"client reducer return: \", {index: [...state.index], filteredClients: clients, clientsLoaded: true});\n        return {index: [...state.index], filteredClients: clients, clientsLoaded: true}\n      }\n      else if (action.searchType === 'last_name') {\n        clients = sortedClients.filter((client) => ((client.profile.last_name?client.profile.last_name.toLowerCase():\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredClients: clients, clientsLoaded: true}\n      }\n      else if (action.searchType === 'address') {\n        clients = sortedClients.filter((client) => ((client.address?client.address.toLowerCase():\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredClients: clients, clientsLoaded: true}\n      }\n      break;\n\n    default:\n      return state\n\n  }\n}\n","import { REQUEST_GOODS, RECEIVE_GOODS, RECEIVE_ALL_GOODS, SEARCH_GOODS, REMOVE_GOOD,\n         REQUEST_GOOD, RECEIVE_GOOD } from '../actions/goodActions.js';\nimport _ from 'lodash';\n\n\nexport function goods(state = {index: [], filteredGoods: [], goodsLoaded: false, byId: {} }, action) {\n  let nextById, sortedGoods, goods;\n  switch (action.type) {\n    case REQUEST_GOODS:\n      return {...state, goodsLoaded: false }\n    case RECEIVE_GOODS:\n      const newGoodsById = _.keyBy(action.goods, good => good.id);\n      nextById = { ...state.byId, ...newGoodsById }\n      return {...state, byId: nextById, goodsLoaded: true, index: action.goods, filteredGoods:action.goods }\n    case RECEIVE_ALL_GOODS:\n      nextById = _.keyBy(action.goods, good => good.id);\n      return {...state, byId: nextById, goodsLoaded: true, index: action.goods, filteredGoods:action.goods }\n    case REMOVE_GOOD:\n      nextById = _.clone(state.byId);\n      delete nextById[action.id]\n      return { ...state, byId: nextById }\n    case REQUEST_GOOD:\n      nextById = { ...state.byId, [action.id]: { goodsLoaded: false } }\n      return {...state, byId: nextById }\n    case RECEIVE_GOOD:\n      nextById = {...state.byId, [action.id]: { ...action.good, goodsLoaded: true }}\n      return {...state, byId: nextById }\n    case SEARCH_GOODS:\n      if (action.sortType === '') {\n        sortedGoods = [...state.index];\n      }\n      else if (action.sortType === \"name\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.name).localeCompare(b.name));\n      }\n      else if (action.sortType === \"provider\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.provider.profile.first_name).localeCompare(b.provider.profile.first_name));\n      }\n      else if (action.sortType === \"description\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.desc).localeCompare(b.desc));\n      }\n      else if (action.sortType === \"category\") {\n        sortedGoods = [...state.index].sort((a, b) => (a.category).localeCompare(b.category));\n      }\n\n      if (action.searchValue === '') {\n        return {index: sortedGoods, filteredGoods: sortedGoods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"name\") {\n        goods = sortedGoods.filter((good) => ((good.name).includes(action.searchValue) ));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"provider\") {\n        goods = sortedGoods.filter((good) => ((good.provider.company).includes(action.searchValue)) || ((good.provider.profile.first_name + \" \" + good.provider.profile.last_name).includes(action.searchValue)));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"description\") {\n        goods = sortedGoods.filter((good) => ((good.desc).includes(action.searchValue) ));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      else if (action.searchType === \"category\") {\n        goods = sortedGoods.filter((good) => ((good.category).includes(action.searchValue) ));\n        return {index: [...state.index], filteredGoods: goods, goodsLoaded: true}\n      }\n      break;\n    default:\n      return state\n  }\n}\n","import { RECEIVE_CLIENT_NEEDS, RECEIVE_CLIENT_NEED, REQUEST_NEED, REQUEST_NEEDS, RECEIVE_NEEDS,\n         REMOVE_CLIENT_NEED, RECEIVE_CLIENT_NEED_GROUP, RECEIVE_CLIENT_NEED_INFO } from '../actions/needActions.js';\nimport _ from 'lodash';\n\nexport function needs(state = { byId: {}, needGroups: [], clientId: null, loaded: false, needs: [] }, action) {\n  let nextById, nextNeedGroup, needGroupIndex;\n  switch (action.type) {\n    case REQUEST_NEEDS:\n      return {...state, loaded: false }\n    case RECEIVE_NEEDS:\n      return {...state, needs: action.needs, loaded: true }\n    case RECEIVE_CLIENT_NEEDS:\n      if (action.needs){\n        nextById = _.keyBy(action.needs, need => need.id);\n        return {...state, byId: nextById, needGroups: action.needGroups, loaded: true, clientId: action.clientId}\n      } else {\n        return {...state, needGroups: action.needGroups, loaded: true, clientId: action.clientId}\n      }\n    case RECEIVE_CLIENT_NEED:\n      nextById = {...state.byId, [action.need.id]: { ...action.need, loaded: true }}\n      nextNeedGroup = _.clone(state.needGroups)\n      needGroupIndex = nextNeedGroup.map(needGroup => needGroup.id).indexOf(action.needGroup.id);\n      if (needGroupIndex >= 0) {\n        nextNeedGroup[needGroupIndex] = action.needGroup;\n      }\n      else {\n        nextNeedGroup = [...nextNeedGroup, action.needGroup]\n      }\n      return {...state, needGroups: nextNeedGroup, byId: nextById, clientId: action.clientId}\n    case RECEIVE_CLIENT_NEED_INFO:\n      nextById = {...state.byId, [action.needId]: { ...action.need, loaded: true }}\n      nextNeedGroup = _.clone(state.needGroups)\n      needGroupIndex = nextNeedGroup.map(needGroup => needGroup.id.toString()).indexOf(action.need.need_group_id);\n      if (needGroupIndex >= 0) {\n        const needIndex = nextNeedGroup[needGroupIndex].needs.map(need => need.id).indexOf(action.needId);\n        (nextNeedGroup[needGroupIndex].needs)[needIndex] = action.need;\n        return {...state, needGroups: nextNeedGroup, byId: nextById, clientId: action.clientId}\n      }\n      return {...state, byId: nextById, clientId: action.clientId}\n    case REMOVE_CLIENT_NEED:\n      const need = state.byId[action.needId];\n      nextById = _.clone(state.byId);\n      delete nextById[action.needId]\n\n      nextNeedGroup = _.clone(state.needGroups);\n      needGroupIndex = nextNeedGroup.map(needGroup => (needGroup.id).toString()).indexOf(need.need_group_id);\n      _.remove(nextNeedGroup[needGroupIndex].needs, (need) => {return need.id === action.needId });\n      if (nextNeedGroup[needGroupIndex].needs.length === 0) {\n        nextNeedGroup.splice(needGroupIndex, 1);\n      }\n      return { ...state, byId: nextById, needGroups: nextNeedGroup }\n    case REQUEST_NEED:\n      nextById = {...state.byId, [action.needId]: { ...action.need, loaded: false }}\n      return {...state, byId: nextById }\n    case RECEIVE_CLIENT_NEED_GROUP:\n      nextNeedGroup = _.clone(state.needGroups)\n      needGroupIndex = nextNeedGroup.map(needGroup => needGroup.id).indexOf(action.needGroup.id);\n      nextNeedGroup[needGroupIndex] = action.needGroup;\n      return {...state, needGroups: nextNeedGroup }\n    default:\n      return state\n  }\n}\n","import _ from 'lodash';\n\nimport { RECEIVE_PROVIDER, REQUEST_PROVIDER, REQUEST_PROVIDERS, RECEIVE_PROVIDERS,\n         SEARCH_PROVIDERS, REMOVE_PROVIDER } from '../actions/providerActions.js'\n\n\nexport function providers(state = {index: [], byId: {}, providerLoaded: false, value: '', filteredProviders: []}, action) {\n  let nextIndex, nextById, providers, sortedProviders, providersByType;\n\n  switch (action.type) {\n    case REQUEST_PROVIDERS:\n      return {...state, providerLoaded: false};\n    case RECEIVE_PROVIDERS:\n      const providersById = _.keyBy(action.providers, provider => provider.id);\n      nextById = {...state.byId, providersById}\n      return {...state, byId: nextById, index: action.providers, filteredProviders: action.providers, providerLoaded: true};\n    case REMOVE_PROVIDER:\n      nextIndex = _.clone(state.index);\n      _.remove(nextIndex, (n) => { return n.id === action.id });\n      return {...state, index: nextIndex, filteredProviders: nextIndex}\n    case RECEIVE_PROVIDER:\n      nextById = {...state.byId, [action.id]: { ...action.provider, providerLoaded: true }}\n      if (action.provider.provider) {\n        nextById.providersById = {...nextById.providersById, [action.id]: { ...action.provider.provider}}\n      }\n      console.log(\"ProviderReducer.js - RECEIVE_PROVIDER state\", state);\n      console.log(\"ProviderReducer.js - RECEIVE_PROVIDER nextById\", nextById);\n      return {...state, byId: nextById }\n    case REQUEST_PROVIDER:\n      nextById = { ...state.byId, [action.id]: { providerLoaded: false } }\n      return {...state, byId: nextById }\n    case SEARCH_PROVIDERS:\n      // for search bar\n      console.log(\"ProviderReducer.js  - index.providers: \", state.index.providers);\n      console.log(\"ProviderReducer.js  - action: \", action);\n\n\n      //action.sortType\n      if (action.sortType === '' || action.sortType === \"name\") {\n\n         console.log(\"ProviderReducer.js  - index.providers 2: \", state.index.providers);\n         console.log(\"ProviderReducer.js  - state: \", state);\n\n         sortedProviders = [...state.index].sort((a, b) => (a.profile.first_name ? a.profile.first_name.toLowerCase(): \"\").localeCompare(b.profile.first_name ? b.profile.first_name.toLowerCase():\"\"));\n      }\n      else if (action.sortType ==='type'){\n        sortedProviders = [...state.index].sort((a, b) => (a.type? a.type:\"\").localeCompare(b.type?b.type:\"\"));\n      }\n\n      console.log(\"ProviderReducer.js  - sortedProviders: \", sortedProviders);\n\n      //action.displayType\n      if (action.displayType === 'Individual' || action.displayType === 'Organization'){\n        providersByType = sortedProviders.filter((provider) => ((provider.type).includes(action.displayType)));\n      }\n      else {\n        providersByType = sortedProviders;\n      }\n\n      console.log(\"ProviderReducer.js  -  providersByType: \", providersByType);\n\n      //action.searchValue\n      if (action.searchValue === ''){\n        return {index: providersByType, filteredProviders: providersByType, providerLoaded: true}\n      }\n      else if (action.searchType === 'name') {\n\n        console.log(\"ProviderReducer.js  - state.index: \", state.index);\n        console.log(\"ProviderReducer.js  - providersByType: \", providersByType);\n\n        providers = providersByType.filter((provider) => (((provider.profile.first_name ? provider.profile.first_name.toLowerCase() : \"\")\n         + \" \" +\n         (provider.profile.last_name ? provider.profile.last_name.toLowerCase():\"\")).includes(action.searchValue)));\n        console.log(\"providersByType -  returned data : \", {index: [...state.index], filteredProviders: providers, providerLoaded: true});\n        return {index: [...state.index], filteredProviders: providers, providerLoaded: true}\n      }\n      else if (action.searchType === 'email') {\n        providers = providersByType.filter((providers) => ((providers.email?providers.email.toLowerCase():\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredProviders: providers, providerLoaded: true}\n      }\n      else if (action.searchType === 'phone'){\n        providers = providersByType.filter((providers) => ((providers.primary_phone_number?providers.primary_phone_number:\"\").includes(action.searchValue)));\n        return {index: [...state.index], filteredProviders: providers, providerLoaded: true}\n      }\n      break;\n    default:\n      return state\n  }\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport thunkMiddleware from 'redux-thunk'\nimport { rootReducer } from './store/reducers.js'\nimport storage from 'redux-persist/lib/storage' // defaults to localStorage for web\nimport { logout } from './store/actions/authAction.js';\n\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\nconst authMiddleware = store => next => action => {\n  const user = store.getState()['auth']['currentUser']\n  if (action.type !== 'LOGGED_OUT' && user && new Date() > user.expired_at) {\n    store.dispatch(logout(true))\n  }\n  return next(action);\n}\n\nexport default function configureStore(preloadedState) {\n  console.log(\"File: store.js - Function: configureStore  Parameters: preloadedState ->  \", preloadedState) \n  let store = createStore(\n    persistedReducer,\n    preloadedState,\n    applyMiddleware(thunkMiddleware, authMiddleware)\n  )\n  let persistor = persistStore(store)\n  return { store, persistor }\n}\n","/**\n * Use Google Maps in React without custom libraries.\n * Some of the ideas are from\n * https://cuneyt.aliustaoglu.biz/en/using-google-maps-in-react-without-custom-libraries/\n */\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Paper, Typography, Link } from \"@material-ui/core\";\nimport { render } from 'react-dom';\nimport { useHistory } from \"react-router-dom\";\n\nconst Google = window.google || {maps: {}};\nconst {Map, Marker, InfoWindow, Size} = Google.maps;\n\n// Mount a react component into uncontrolled component\nconst createInfoWindow = (map, markerElement, marker, history, idx) => {\n  const infoWindow = new InfoWindow({\n    content: `<div id=\"infoWindow-${idx}\" />`,\n    position: marker.position,\n    pixelOffset: new Size(0, -42),\n  });\n  infoWindow.addListener('domready', e => {\n    render(\n      <ReactInfoWindow history={history} marker={marker}/>,\n      document.getElementById(`infoWindow-${idx}`))\n  });\n  // 'clicked' and 'show' act as an instance variable.\n  let clicked = false, show = false;\n  document.querySelector(`infoWindow-${idx} button`);\n  markerElement.addListener('mouseover', e => {\n    infoWindow.open(map);\n    show = true;\n    markerElement.addListener('mouseout', e => {\n      show && !clicked && infoWindow.close();\n      if (show) show = false;\n    });\n    markerElement.addListener('click', e => {\n      clicked = true;\n      infoWindow.open(map);\n    });\n    window.google.maps.event.addListener(infoWindow, 'closeclick', e => {\n      clicked = false;\n    });\n  });\n  return infoWindow;\n};\n\nfunction ReactInfoWindow({marker, history}) {\n  const {title, link, content} = marker;\n  return (\n    <>\n      <Link style={{cursor: 'pointer'}} onClick={() => link ? history.push(link) : null}>\n        <Typography>\n          {title}\n        </Typography>\n      </Link>\n      <Typography color=\"textSecondary\">\n        {content}\n      </Typography>\n    </>\n  );\n}\n\nlet GoogleMap;\n\n// Export empty div if no network to load google maps.\nif (Map) {\n  // Google map in each pages, native Google API implementation\n  // (without any react wrapper, library)\n  GoogleMap = function (props) {\n    const history = useHistory();\n    const defaultCenter = useMemo(() => ({lat: 43.6870, lng: -79.4132}), []);\n    const {\n      zoom = 11,\n      center = defaultCenter, // Toronto\n      markers = [],\n    } = props;\n    const [map, setMap] = useState(null);\n\n    useEffect(() => {\n      setMap(new Map(document.getElementById('map'), {\n        center: center,\n        zoom: zoom\n      }));\n    }, [zoom, center]);\n\n    useEffect(() => {\n      for (let i = 0; i < markers.length; i++) {\n        const marker = markers[i];\n        const currMarker = new Marker({\n          position: marker.position,\n          map: map,\n          title: marker.title,\n        });\n        // Info window is opened when mouse over the marker.\n        // It also stays open after the marker is clicked.\n        createInfoWindow(map, currMarker, marker, history, i);\n      }\n    }, [markers, map, history]);\n\n    return useMemo(() =>\n        <Paper elevation={5} style={{width: '100%', height: '40vh', marginTop: 5}} id=\"map\"/>\n      , []);\n  }\n} else {\n  GoogleMap = function () {\n    console.info('Google maps javascript is not loaded. Are you offline?');\n    return <Paper elevation={5} style={{width: '100%', height: '40vh', marginTop: 5}}/>\n  }\n}\n\nexport default GoogleMap;\n","import React from 'react';\nimport { InputBase, Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core\";\n\nexport default function CSVUploadModal({show, onHide, submit}) {\n  return (\n    <Dialog\n      open={show}\n      onClose={onHide}\n    >\n      <DialogTitle id=\"form-dialog-title\">Upload CSV</DialogTitle>\n      <DialogContent>\n        <InputBase type=\"file\"/>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={submit}>Submit</Button>\n        <Button onClick={onHide}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport { TextField, Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core\";\n\nexport default function DeleteModal({show, onHide, title, objectId, ...props}) { // cannot use keyword \"delete\"\n  const [form, setForm] = useState({reason: ''});\n\n  return (\n    <Dialog\n      open={show}\n      onClose={onHide}\n      fullWidth\n    >\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <TextField variant=\"standard\" value={form.reason} label=\"Reason\"\n                   onChange={e => setForm({reason: e.target.value})} fullWidth/>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"secondary\" onClick={() => props.delete(objectId, form)}>Confirm</Button>\n        <Button onClick={onHide}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { IconButton, Menu, MenuItem, ListItemIcon, Typography } from \"@material-ui/core\";\nimport { MoreVert as MoreVertIcon, Edit, Delete, OpenInBrowser } from '@material-ui/icons';\n\nconst ITEM_HEIGHT = 48;\n\nexport default function DropdownMenu({urlPrefix, objectId, handleDelete, hideViewOption}) {\n  const history = useHistory();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLink = link => () => {\n    history.push(link);\n  };\n\n  return (\n    <div>\n      <IconButton\n        onClick={handleClick}\n        size=\"small\"\n      >\n        <MoreVertIcon/>\n      </IconButton>\n      <Menu\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n        PaperProps={{\n          style: {\n            maxHeight: ITEM_HEIGHT * 4.5,\n            width: 150,\n          },\n        }}\n      >\n        {!hideViewOption &&\n        <MenuItem onClick={handleLink(`/${urlPrefix}/${objectId}`)}>\n          <ListItemIcon>\n            <OpenInBrowser fontSize=\"small\" color=\"primary\"/>\n          </ListItemIcon>\n          <Typography variant=\"inherit\">View</Typography>\n\n        </MenuItem>\n        }\n\n        <MenuItem onClick={handleLink(`/${urlPrefix}/${objectId}/edit`)}>\n          <ListItemIcon>\n            <Edit fontSize=\"small\" color=\"primary\"/>\n          </ListItemIcon>\n          Edit\n        </MenuItem>\n\n        <MenuItem onClick={() => {\n          handleClose();\n          handleDelete(objectId);\n        }}>\n          <ListItemIcon>\n            <Delete fontSize=\"small\" color=\"secondary\"/>\n          </ListItemIcon>\n          Delete\n        </MenuItem>\n\n      </Menu>\n    </div>\n  );\n}\n","import { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { ACTION_ERROR } from \"../../store/defaults\";\nimport { CSVUploadModal, CustomToolbar, DeleteModal, DropdownMenu, GoogleMap, Loading, DataTable } from \"./index\";\nimport { Container, Fade } from \"@material-ui/core\";\n\n/**\n * Generate markers on google map.\n * @function GenerateMarkers\n * @param data: Array\n * @param pageNumber: Number\n * @param rowsPerPage: Number\n */\n\n/**\n * A generic page component for clients, services, goods, providers.\n * @param props {{fetchData, deleteItem, generateMarkers: GenerateMarkers, tableOptions?: {},\n * type: (\"clients\", \"services\", \"goods\", \"providers\"), nameFormatter, columnsWithoutOptions}}\n */\nexport default function GenericPage(props) {\n  const {\n    fetchData, deleteItem, generateMarkers, type,\n    nameFormatter, columnsWithoutOptions\n  } = props;\n  const title = type.charAt(0).toUpperCase() + type.slice(1);\n\n  // redux hooks\n  const dispatch = useDispatch();\n\n  // react hooks\n  const history = useHistory();\n  const [state, setState] = useState({\n    showUploadDialog: false,\n    showDeleteDialog: false,\n    deleteId: null,\n    deleteDialogTitle: '',\n    data: [], // providers\n    pageNumber: 1,\n    rowsPerPage: 10,\n    loading: true,\n  });\n\n  // useEffect with empty dependencies is something like componentWillMount\n  useEffect(() => {\n    dispatch(fetchData()).then(data => setState(state => ({...state, data, loading: false})))\n  }, [dispatch, fetchData]);\n\n  const hideDialog = () => {\n    setState(state => ({\n      ...state,\n      showUploadDialog: false,\n      showDeleteDialog: false,\n    }));\n  };\n\n  const handleDelete = useCallback(async (id, form) => {\n    const status = await dispatch(deleteItem(id, form));\n    if (status === ACTION_ERROR) {\n      // do something\n    } else {\n      hideDialog();\n      setState(state => ({\n        ...state,\n        data: state.data.filter(item => item.id !== state.deleteId)\n      }));\n    }\n  }, [dispatch, deleteItem]);\n\n  const showDeleteDialog = useCallback((idx) => {\n    const item = state.data[idx];\n    setState(state => ({\n      ...state,\n      showDeleteDialog: true,\n      deleteId: item.id,\n      deleteDialogTitle: `Delete ${title} ` + nameFormatter(item),\n    }));\n  }, [state.data, nameFormatter, title]);\n\n  // TODO: implement upload CSV\n  const handleUpload = file => {\n\n  };\n\n  const columns = useMemo(() => {\n    return [\n      ...columnsWithoutOptions,\n      {\n        label: ' ',\n        body: ({id}) => (\n          <DropdownMenu urlPrefix={type} objectId={id} handleDelete={showDeleteDialog}/>\n        )\n      },\n    ]\n  }, [showDeleteDialog, columnsWithoutOptions, type]);\n\n  const tableOptions = {\n    customToolbar:\n      <CustomToolbar\n        type={type}\n        handleAdd={() => history.push(`/${type}/new`)}\n        handleUpload={() => setState(state => ({...state, showUploadDialog: true}))}\n      />,\n    onDelete: async (ids) => {\n      // TODO: Lester 8/30/2021\n      showDeleteDialog(ids);\n      return false;\n    },\n\n    // These listeners are required for displaying pin on Google Map\n    onChangePage: pageNumber => setState(state => ({...state, pageNumber})),\n    onChangeRowsPerPage: rowsPerPage => setState(state => ({...state, rowsPerPage})),\n    ...props.tableOptions,\n  };\n\n  // This also filters out providers without lat / lng.\n  const markers = useMemo(() => generateMarkers(state.data, state.pageNumber, state.rowsPerPage),\n    [generateMarkers, state.data, state.pageNumber, state.rowsPerPage]);\n\n  if (state.loading)\n    return <Loading message={`Loading ${title}...`}/>;\n\n  return (\n    <Fade in>\n      <Container>\n        <DataTable\n          columns={columns}\n          data={state.data}\n          title={title}\n          {...tableOptions}\n        />\n\n        <CSVUploadModal\n          show={state.showUploadDialog}\n          onHide={hideDialog}\n          submit={handleUpload}\n        />\n        <DeleteModal\n          contentType=\"Provider\"\n          objectId={state.deleteId}\n          title={state.deleteDialogTitle}\n          show={state.showDeleteDialog}\n          onHide={hideDialog}\n          delete={handleDelete}\n        />\n        <GoogleMap markers={markers}/>\n      </Container>\n    </Fade>\n  )\n}\n","import React from 'react';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Stepper, Step, StepButton, Button, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  buttons: {\n    width: '80%',\n    margin: 'auto',\n    paddingTop: 20,\n    paddingBottom: 40,\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  backButton: {\n    marginRight: theme.spacing(1),\n  },\n  alert: {\n    width: '80%',\n    margin: 'auto',\n  },\n  title: {\n    color: '#4b4b4b',\n    width: '80%',\n    margin: 'auto',\n  }\n}));\n\nexport default function FormStepper({stepNames, handleFinish, getStepContent, error, title}) {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = React.useState(0);\n\n  const handleStep = step => () => {\n    setActiveStep(step);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  const handleNext = () => {\n    if (activeStep === stepNames.length - 1) {\n      handleFinish();\n      return;\n    }\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  return (\n    <div>\n      <Stepper alternativeLabel nonLinear activeStep={activeStep}>\n        {stepNames.map((label, index) => (\n          <Step key={label}>\n            <StepButton\n              onClick={handleStep(index)}\n            >\n              {label}\n            </StepButton>\n          </Step>\n        ))}\n      </Stepper>\n      <div>\n        {title && <Typography color=\"textSecondary\" variant=\"h6\" className={classes.title}>\n          {title}\n        </Typography>}\n        {error && error.map((err, index) =>\n          <Alert key={index} className={classes.alert} severity=\"error\">{err}</Alert>)}\n        {getStepContent(activeStep)}\n        <div className={classes.buttons}>\n          <Button\n            disabled={activeStep === 0}\n            onClick={handleBack}\n            className={classes.backButton}\n          >\n            Back\n          </Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleNext}>\n            {activeStep === stepNames.length - 1 ? 'Finish' : 'Next'}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Paper, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: 16,\n  },\n  paper: {\n    display: 'inline-block',\n    position: 'relative',\n    paddingLeft: 28,\n    paddingBottom: 20,\n    minWidth: 380,\n  }\n}));\n\nexport default function ({label, children}) {\n  const classes = useStyles();\n  return (\n    <div className={label && classes.root}>\n      {label && <Typography color=\"textSecondary\" variant=\"body1\" gutterBottom>\n        {label}\n      </Typography>}\n      <Paper variant=\"outlined\" className={classes.paper}>\n        {children}\n      </Paper>\n    </div>\n  )\n}\n","import React, { useCallback, useState } from 'react';\nimport AdapterDateFns from '@material-ui/lab/AdapterDateFns';\nimport { format, parse } from 'date-fns';\nimport { TextField } from '@material-ui/core'\nimport {\n  LocalizationProvider,\n  TimePicker,\n  DatePicker,\n} from '@material-ui/lab';\n\nexport const dateFormat = 'yyyy-MM-dd';\n\nexport default function GeneralField({type, onChange, value: defaultValue, ...props}) {\n  // duplicate the state, the drawback is much smaller than re-render all the form.\n  const [value, setValue] = useState(() => {\n    if (type === 'date') {\n      if (defaultValue)\n        return parse(defaultValue, dateFormat, new Date());\n      else\n        return null;\n    }\n    return defaultValue|| '';\n  });\n\n  const handleChange = useCallback(e => {\n    const val = e.target.value;\n    setValue(val);\n    onChange({target: {value: val}});\n  }, [onChange, type]);\n\n  const onChangeDate = date => {\n    setValue(date);\n  }\n\n  const onAcceptDate = date => {\n    setValue(date);\n    const formattedDate = format(date, dateFormat);\n    try {\n      onChange({target: {value: formattedDate}});\n    } catch (e) {\n    }\n  };\n\n  if (type === 'date')\n    return (\n      <div>\n        <LocalizationProvider dateAdapter={AdapterDateFns}>\n          <DatePicker\n            value={value}\n            onAccept={onAcceptDate}\n            onChange={onChangeDate}\n            renderInput={(params) =>\n              <TextField {...params}\n                         sx={{minWidth: 350}}\n                         margin=\"normal\"/>\n            }\n            {...props}\n          />\n        </LocalizationProvider>\n      </div>\n    );\n  else if (type === 'time')\n    return (\n      <div>\n        <LocalizationProvider dateAdapter={AdapterDateFns}>\n          <TimePicker\n            value={value}\n            onAccept={onAcceptDate}\n            onChange={onChangeDate}\n            renderInput={(params) =>\n              <TextField {...params}\n                         sx={{minWidth: 350}}\n                         margin=\"normal\"/>\n            }\n            {...props}\n          />\n        </LocalizationProvider>\n      </div>);\n  else\n    return (\n      <div>\n        <TextField\n          sx={{mt: '16px', minWidth: 350}}\n          type={type}\n          {...props}\n          onChange={handleChange}\n          value={value}\n        />\n      </div>\n    );\n}\n","import GeneralField from \"../components/shared/fields/GeneralField\";\n\nexport const UN_SET = 'UN_SET';\nexport const REQUIRED_HELPER_TEXT = 'This field is required';\n\nexport const defaultField = {\n  label: '',\n  type: 'text',\n  component: GeneralField,\n  validator: null,\n  required: false,\n};","import React, { useCallback, useEffect, useState } from 'react';\nimport { FormControl, InputLabel, Select, MenuItem, FormHelperText } from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nimport { UN_SET } from '../../../constants';\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: '16px 0 0',\n    minWidth: 350,\n  },\n}));\n\n/**\n *\n * @param label\n * @param InputLabelProps\n * @param className\n * @param options\n * @param noDefaultStyle\n * @param noEmpty\n * @param controlled {boolean=false} - Controlled by the parent component.\n *                                     Set it to true if you dynamically update options\n * @param defaultOptionTitle\n * @param onChange\n * @param formControlProps\n * @param helperText\n * @returns {*}\n * @constructor\n */\nexport default function SelectField({\n                                      label, InputLabelProps, className, options, noDefaultStyle, noEmpty, controlled,\n                                      defaultOptionTitle = 'Not Set', onChange, formControlProps, helperText, ...props\n                                    }) {\n  const classes = useStyles();\n  const [value, setValue] = useState(noEmpty ? '' : UN_SET);\n  const handleChange = useCallback(e => {\n    const val = e.target.value;\n    setValue(val);\n    onChange({target: {value: val === UN_SET ? undefined : val}});\n  }, [onChange]);\n\n  useEffect(() => {\n    setValue(props.value === undefined ? UN_SET : props.value);\n  }, [props.value]);\n\n  return (\n    <div>\n      <FormControl className={(noDefaultStyle || className) ? className : classes.formControl}\n                   error={props.error}\n                   required={props.required}\n                   {...formControlProps}>\n        {label && <InputLabel {...InputLabelProps}>{label}</InputLabel>}\n        <Select\n          margin=\"none\"\n          label={label}\n          {...props}\n          value={controlled ? props.value : value}\n          onChange={controlled ? onChange : handleChange}\n        >\n          {!noEmpty && <MenuItem key=\"key0\" value={UN_SET}>{defaultOptionTitle}</MenuItem>}\n          {Array.isArray(options)\n            ? options.map(option => <MenuItem key={option} value={option}>{option}</MenuItem>)\n            : Object.entries(options).map(([key, value]) => <MenuItem key={key} value={key}>{value}</MenuItem>)}\n        </Select>\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </div>\n  );\n}\n","import React from 'react';\nimport GeneralField from './fields/GeneralField';\nimport SelectField from './fields/SelectField';\nimport { provinceOptions } from '../../store/defaults';\n\nexport default function LocationFieldGroup({address, required, errMsg = {}}) {\n  const handleChange = name => e => address[name] = e.target.value;\n  return (\n    <div>\n      <GeneralField\n        label=\"Apt. #\"\n        type=\"text\"\n        value={address.apt_number}\n        onChange={handleChange('apt_number')}\n        error={!!errMsg['apt_number']}\n        helperText={errMsg['apt_number']}\n      />\n      <GeneralField\n        label=\"Street Address\"\n        type=\"text\"\n        value={address.street_address}\n        onChange={handleChange('street_address')}\n        required={required}\n        error={!!errMsg['street_address']}\n        helperText={errMsg['street_address']}\n      />\n      <GeneralField\n        label=\"City\"\n        type=\"text\"\n        value={address.city}\n        onChange={handleChange('city')}\n        required={required}\n        error={!!errMsg['city']}\n        helperText={errMsg['city']}\n      />\n      <SelectField\n        label=\"Province\"\n        value={address.province}\n        options={provinceOptions}\n        onChange={handleChange('province')}\n        required={required}\n        error={!!errMsg['province']}\n        helperText={errMsg['province']}\n      />\n      <GeneralField\n        label=\"Postal Code\"\n        type=\"text\"\n        value={address.postal_code}\n        onChange={handleChange('postal_code')}\n        required={required}\n        error={!!errMsg['postal_code']}\n        helperText={errMsg['postal_code']}\n      />\n    </div>\n  );\n}\n","import _ from 'lodash';\nimport React from 'react';\n\nexport const defaultTimeSlot = {'start_time': '', 'end_time': ''};\nexport const defaultOperationHour = {\n  'Monday': [{...defaultTimeSlot}],\n  'Tuesday': [{...defaultTimeSlot}],\n  'Wednesday': [{...defaultTimeSlot}],\n  'Thursday': [{...defaultTimeSlot}],\n  'Friday': [{...defaultTimeSlot}],\n  'Saturday': [{...defaultTimeSlot}],\n  'Sunday': [{...defaultTimeSlot}],\n};\n\nlet mapping = {};\nfor (let hour = 1; hour <= 12; hour++) {\n  const hourStringam = (hour / 10 < 1) ? '0' + hour : hour;\n  for (let minutes = 0; minutes <= 45; minutes += 30) {\n    const minuteString = (minutes === 0) ? '00' : minutes;\n    const timeSlot = hourStringam + ':' + minuteString\n    mapping[hour * 100 + minutes] = timeSlot + ' AM'\n  }\n}\n\nfor (let hour = 1; hour <= 12; hour++) {\n  for (let minutes = 0; minutes <= 45; minutes += 30) {\n    const hourStringpm = (hour / 10 < 1) ? '0' + hour : hour;\n    const minuteString = (minutes === 0) ? '00' : minutes;\n    const timeSlot = hourStringpm + ':' + minuteString;\n    mapping[(hour + 12) * 100 + minutes] = timeSlot + ' PM'\n  }\n}\n\nexport const operationHourMapping = mapping;\n\nexport function operationHourListToObject(operation_hour_list) {\n  let operation_hours = {}\n  _.each(operation_hour_list, operation_hour => {\n    const weekday = operation_hour['week_day']\n    if (!operation_hours[weekday]) {\n      operation_hours[weekday] = []\n    }\n    operation_hours[weekday].push({\n      start_time: operation_hour['start_time'],\n      end_time: operation_hour['end_time']\n    })\n  })\n  return operation_hours\n}\n\nexport function operationHourObjectToList(operation_hour_obj) {\n  let operation_hours = []\n  _.each(operation_hour_obj, (times, day) => {\n    _.each(times, time => {\n      operation_hours.push({\n        week_day: day,\n        start_time: time.start_time,\n        end_time: time.end_time\n      })\n    })\n  })\n  return operation_hours\n}\n\nexport function OperationHourTable({operationHourObj}) {\n  return (\n    <table className=\"operation-hour-table\">\n      <tbody>\n      {_.map(operationHourObj, (times, day) => {\n        return (\n          <tr key={day}>\n            <td>{day}</td>\n            <td>\n              {_.map(times, (time, _) => {\n                return (\n                  <div key={day + time.start_time}>\n                    {`${operationHourMapping[time.start_time]} -\n                        ${operationHourMapping[time.end_time]}`}\n                  </div>\n                )\n              })}\n            </td>\n          </tr>\n        )\n      })}\n      </tbody>\n    </table>\n  )\n}\n","export const titleCase = text => {\n  text = text.replace(/(^\\w|_\\w)/g, m => {\n    return m.toUpperCase().replace('_', ' ')\n  });\n  return text.replace('In', 'in').replace('Of', 'of');\n};\n\n/**\n * @param data {[{condition_clauses: [{field_name, clauses: [{left_operand, right_operand, operator}]}]}]}\n **/\nexport const transformToFrontendType = data => {\n  const val = [];\n\n  // return empty array when create a new service\n  if (!data) return val;\n\n  for (const {condition_clauses} of data) {\n    const condition = [];\n    val.push(condition);\n    for (const {field_name, clauses} of condition_clauses) {\n      for (const {left_operand, right_operand, operator} of clauses) {\n        condition.push([left_operand, operator, right_operand]);\n      }\n    }\n  }\n  return val;\n};\n\n/**\n * @param data {[[]]}\n */\nexport const transformToBackendType = data => {\n  const val = [];\n  for (const condition of data) {\n    const conditionClauses = [];\n    val.push({condition_clauses: conditionClauses});\n\n    for (const [left_operand, operator, right_operand] of condition) {\n      // search for existing field_name\n      const idx = conditionClauses.findIndex(conditionClause => conditionClause.field_name === left_operand);\n      if (idx !== -1) {\n        conditionClauses[idx].clauses.push({left_operand, right_operand, operator});\n      } else {\n        conditionClauses.push({\n          field_name: left_operand,\n          clauses: [{left_operand, right_operand, operator}]\n        })\n      }\n    }\n  }\n  return val;\n};\n\n/**\n *\n * @param string {string}\n * @returns {*}\n */\nexport function escapeString(string) {\n  return '\"' + string.replace(/[\\\\\"]/g, '\\\\$&') + '\"'; // $& means the whole matched string\n}\n\n/**\n *\n * @param string {string}\n * @returns {*}\n */\nexport function unescapeString(string) {\n  return string.slice(1, -1).replace(/\\\\([\\\\\"])/g, '$1');\n}\n\nexport function escapeList(list) {\n  return JSON.stringify(list);\n}\n\nexport function unescapeList(string) {\n  try {\n    const array = JSON.parse(string);\n    return Array.isArray(array) ? array : [];\n  } catch (e) {\n    return [];\n  }\n}\n","import {titleCase} from './formulaHelpers';\nexport {titleCase}\n/**\n * Flip object key value pairs\n * @param obj\n * @returns {{}}\n */\nexport const objectFlip = (obj) => {\n  const ret = {};\n  Object.keys(obj).forEach(key => {\n    ret[obj[key]] = key;\n  });\n  return ret;\n};\n\n/**\n * Recursively assign obj to target.\n * Similar to Object.assign(obj1, obj2), or {...obj1, ...obj2} but also assign nested objects.\n * @param target\n * @param obj\n * @returns {*}\n */\nexport const recursiveAssign = (target, obj) => {\n  Object.entries(obj).forEach(([key, value]) => {\n    if (typeof value === 'object' && value != null && target[key])\n      return recursiveAssign(target[key], value);\n    else if (value != null)\n      target[key] = value;\n  });\n  return target;\n};\n\n/**\n * return true if the field is empty\n * @param field\n * @returns {boolean}\n */\n\nexport function isFieldEmpty(field) {\n  if (field == null) {\n    return true;\n  } else {\n    return field.length === 0;\n  }\n}\n\n/**\n * return true if the field availability is empty\n * @param availability\n * @returns {boolean}\n */\n\nexport function isAvailabilityEmpty(availability) {\n  if (availability == null) {\n    return true;\n  } else {\n    for (const day of Object.keys(availability)) {\n      for (const time_slot of availability[day]) {\n        if (time_slot['start_time'].length > 0 && time_slot['end_time'].length > 0) {\n          //time slot is filled in\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n}\n\n/**\n * Verify the address fields and set the given result.\n * @param location {{apt_number, }}\n * @param result\n */\nexport function verifyAddressField(location, result) {\n  for (const [fieldName, value] of Object.entries(location)) {\n    // apartment number is not required\n    if (fieldName === 'apt_number')\n      continue;\n    if (isFieldEmpty(value))\n      result[fieldName] = 'This field is required'\n  }\n}\n\n/**\n * Verify the other address fields and set the corresponding errors if there are any.\n * @param location []\n * @param result\n */\nexport function verifyOtherAddressesFields(location, result) {\n  let i = 0;\n  for (const address of location) {\n    result[i] = {};\n    verifyAddressField(address, result[i]);\n    if (Object.entries(result[i]).length === 0) {\n      delete result[i];\n    }\n    i++;\n  }\n}\n\n/**\n * Validate postal code in parentField, put error message in errsContainer if there is one.\n * @param field\n * @param errsContainer\n * @param parentField\n */\nexport function validateAddressPostalCode(field, errsContainer, parentField) {\n  if (field) {\n    const postal_code_regex = /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/;\n    const is_postal_code_valid = postal_code_regex.test(field);\n    if (!is_postal_code_valid) {\n      errsContainer[parentField] = {\n        ...errsContainer[parentField],\n        'postal_code': \"Invalid postal code! They are in the format A1A 1A1, \" +\n          \"where A is a letter and 1 is a digit\"\n      };\n    }\n  }\n}\n\nexport function verifyEmail(field, fieldName, errsContainer){\n  const email_regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  if (!email_regex.test(field)) {\n    errsContainer[fieldName] = \"Invalid email! \".concat(\"They are in the format of jsmith@example.com\");\n  }\n}\n\nexport function verifyPhoneNumber(field, fieldName, errsContainer){\n  const phone_number_regex = /^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/;\n  if (field && !phone_number_regex.test(field)){\n    errsContainer[fieldName] = \"Invalid phone number! They are in the format of NPA-NXX-XXXX \".concat(\n      \"where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number\"\n    )\n  }\n}\nexport function validateContactFormat(profile, errsContainer) {\n  // Verify email\n  if (profile.email) {\n    verifyEmail(profile.email,'email', errsContainer)\n  }\n  // Verify Phone number\n  if (profile.primary_phone_number || profile.alt_phone_number) {\n    verifyPhoneNumber(profile.primary_phone_number, 'primary_phone_number', errsContainer);\n    verifyPhoneNumber(profile.alt_phone_number, 'alt_phone_number', errsContainer);\n  }\n}\n\n/**\n * Verify the family fields and set the corresponding errors if there are any.\n * @param families []\n * @param result\n */\nexport function verifyFamilyFields(families, result) {\n  let i = 0;\n  for (const family of families) {\n    result[i] = {};\n    if (isFieldEmpty(family['relationship'])) {\n      result[i]['relationship'] = \"This field is required\";\n    }\n    for (const [field, value] of Object.entries(family['person'])) {\n      if (isFieldEmpty(value)) {\n        result[i][field] = \"This field is required\";\n      }\n    }\n    if (Object.entries(result[i]).length === 0) {\n      delete result[i];\n    }\n    i++;\n  }\n}\n\nconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nconst phoneNumberRegex = /^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/;\nconst passwordRegex = /^.*(?=.{8,})((?=.*[!@#$%^&*()\\-_=+{};:,<.>]){1})(?=.*\\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/;\nconst postalCodeRegex = /^[A-Za-z]\\d[A-Za-z][ -]?\\d[A-Za-z]\\d$/;\n\nconst EMAIL_ERR_MSG = \"Invalid email! They are in the format of jsmith@example.com\";\nconst PHONE_ERR_MSH = \"Invalid phone number! They are in the format of NPA-NXX-XXXX \" +\n  \"where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number\";\nconst PASSWORD_ERR_MSG = \"Please enter a secure and strong password\";\nconst POSTAL_CODE_ERR_MSG = \"Invalid postal code! They are in the format A1A 1A1, \" +\n  \"where A is a letter and 1 is a digit\";\n\nexport const Validator = {\n  /**\n   * @param email\n   * @returns {string|void} Return string iff fails. Otherwise return undefined.\n   */\n  email: email => {\n    if (!emailRegex.test(email)) {\n      return EMAIL_ERR_MSG;\n    }\n  },\n\n  phone: phone => {\n    if (!phoneNumberRegex.test(phone))\n      return PHONE_ERR_MSH;\n  },\n\n  password: password => {\n    if (!passwordRegex.test(password))\n      return PASSWORD_ERR_MSG;\n  },\n\n  postalCode: postalCode => {\n    if (!postalCodeRegex.test(postalCode))\n    return POSTAL_CODE_ERR_MSG;\n  }\n};\n","import { genderOptions } from '../store/defaults.js';\nimport { objectFlip } from '../helpers';\n\n// const providerTypeOptions = ['Individual', 'Organization']\n// const IndividualProviderOptions = ['Volunteer', 'Goods Donor', 'Professional Service Provider']\nexport const providerFormTypes = {\n  'organization': 'Organization',\n  'volunteer': 'Volunteer',\n  'goods_donor': 'Goods Donor',\n  'professional_service_provider': 'Professional Service Provider',\n};\n\nexport const allForms = {\n  client: 'Client',\n  ...providerFormTypes\n};\n\nexport const providerCategoryValue2Key = objectFlip(providerFormTypes);\n// const phoneTypes = ['Home', 'Cell', 'Work']\nconst providerStatus = ['External', 'Internal', 'Home Agency']\nconst commitmentOptions = ['Short term', 'Six months', 'One year']\n\nexport const providerFields = {\n  alt_phone_number: {component: 'GeneralField', type: 'tel', label: 'Alternative phone number'},\n  availability: {label: 'Availability'},\n  commitment: {component: 'SelectField', label: 'Commitment length', options: commitmentOptions},\n  company: {component: 'GeneralField', type: 'text', label: 'Company/Organization Name'},\n  email: {component: 'GeneralField', type: 'email', label: 'Email'},\n  first_name: {component: 'GeneralField', type: 'text', label: 'First Name'},\n  gender: {component: 'SelectField', label: 'Gender', options: genderOptions},\n  languages: {component: 'MultiSelectField', label: 'Languages'},\n  last_name: {component: 'GeneralField', type: 'text', label: 'Last Name'},\n  main_address: {label: 'Address'},\n  notes: {component: 'GeneralField', type: 'text', label: 'Additional notes '},\n  other_addresses: {label: 'Other Addresses'},\n  own_car: {component: 'RadioField', label: 'Own a car?', options: {'Yes': true, 'No': false}},\n  primary_contact: {label: 'Primary Contact'},\n  primary_phone_number: {component: 'GeneralField', type: 'tel', label: 'Primary phone number'},\n  reference1_email: {component: 'GeneralField', type: 'text', label: 'Reference 1 Email'},\n  reference1_name: {component: 'GeneralField', type: 'text', label: 'Reference 1 Name'},\n  reference1_phone: {component: 'GeneralField', type: 'text', label: 'Reference 1 phone'},\n  reference2_email: {component: 'GeneralField', type: 'text', label: 'Reference 2 Email'},\n  reference2_name: {component: 'GeneralField', type: 'text', label: 'Reference 2 Name'},\n  reference2_phone: {component: 'GeneralField', type: 'text', label: 'Reference 2 phone'},\n  referrer: {component: 'GeneralField', type: 'text', label: 'Referrer'},\n  secondary_contact: {label: 'Secondary Contact'},\n  skills: {component: 'GeneralField', type: 'text', label: 'Skills'},\n  start_date: {component: 'GeneralField', type: 'date', label: 'Start date for availability'},\n  status: {component: 'SelectField', label: 'Status', options: providerStatus},\n  visibility: {\n    component: 'RadioField',\n    label: 'Allow other agencies to see this provider?',\n    options: {'Yes': true, 'No': false}\n  },\n  sponsor: {component: 'GeneralField', type: 'text', label: 'Sponsor'}\n}\n","import { defaultOperationHour, operationHourListToObject } from \"../helpers/operation_hour_helpers\";\nimport { recursiveAssign } from \"../helpers\";\nimport { providerFormTypes } from \"./provider_fields\";\n\nexport const defaultProfileFields = {\n  first_name: '',\n  middle_name: '',\n  last_name: '',\n  preferred_name: '',\n  gender: '',\n  birth_date: null,\n  email: '',\n  primary_phone_number: '',\n  alt_phone_number: '',\n};\n\nexport const defaultContactFields = {\n  first_name: '',\n  last_name: '',\n  email: '',\n  primary_phone_number: '',\n  alt_phone_number: '',\n};\n\nexport const defaultLocationFields = {\n  street_address: '',\n  apt_number: '',\n  city: '',\n  province: '',\n  postal_code: ''\n};\n\nexport const defaultUserFields = {\n  first_name: '',\n  last_name: '',\n  username: '',\n  email: '',\n  is_superuser: false,\n  primary_phone_number: '',\n  alt_phone_number: '',\n  password: ''\n};\n\n/**\n * @typedef SNMClient {{address: {street_address, province, city, apt_number, postal_code},\n * num_of_dependants: string, has_children: boolean, immigration_doc_number: string,\n * country_of_last_residence: string, profile: {primary_phone_number, gender,\n * alt_phone_number, birth_date, last_name, middle_name, first_name, preferred_name,\n * email}, other_languages: Array, income_source: string, country_of_origin: string,\n * completed_education_level: string, landing_date: string, marital_status: string,\n * eligibilities: Array, current_education_level: string, first_language: string,\n * file_id: string, num_of_children: string, pr_number: string, family: {members: Array},\n * arrival_date: string, status_in_canada: string}}\n *\n */\n\n/**\n *\n * @param client\n * @returns SNMClient\n */\nexport const generateClientField = (client) => {\n  const fields = {\n    profile: {...defaultProfileFields},\n    address: {...defaultLocationFields},\n    family: {members: []},\n    marital_status: '',\n    has_children: false,\n    num_of_children: '',\n    country_of_origin: '',\n    country_of_last_residence: '',\n    first_language: '',\n    other_languages: [],\n    pr_number: '',\n    immigration_doc_number: '',\n    landing_date: null, // make sure date and time has default null or new Date()\n    arrival_date: null,\n    status_in_canada: '',\n    income_source: '',\n    current_education_level: '',\n    completed_education_level: '',\n    num_of_dependants: '',\n    file_id: '',\n    ngo_conditions: [],\n  };\n\n  if (client) {\n    return recursiveAssign(fields, client);\n  }\n\n  return fields;\n};\n\nexport const generateProviderFields = (providerType, providerCategory, provider) => {\n  // operationHourListToObject(provider.operation_hours)\n  const fields = {\n    type: providerType,\n    category: providerFormTypes[providerCategory] || '',\n    languages: [],\n    company: '',\n    email: '',\n    primary_phone_number: '',\n    alt_phone_number: '',\n    primary_contact: {profile: {...defaultContactFields}},\n    secondary_contact: {profile: {...defaultContactFields}},\n    main_address: {...defaultLocationFields},\n    other_addresses: [],\n    operation_hours: {...defaultOperationHour},\n    operation_dates: [{start_date: null, end_date: null}],\n    profile: {...defaultProfileFields},\n    referrer: '',\n    own_car: false,\n    skills: '',\n    visibility: false,\n    status: '',\n    notes: '',\n    commitment: '',\n    start_date: '',\n    reference1_name: '',\n    reference1_phone: '',\n    reference1_email: '',\n    reference2_name: '',\n    reference2_phone: '',\n    reference2_email: '',\n    responses: []\n  };\n  if (provider) {\n    const data = {...recursiveAssign(fields, provider)};\n    data.operation_hours = {...defaultOperationHour, ...operationHourListToObject(provider.operation_hours)};\n    // const responses = {};\n    // data.responses.forEach(({}) => {});\n    // data.responses = data\n    console.log(data);\n    return data;\n  }\n  return fields;\n};\n","import React, { useState } from 'react';\nimport { Button, FormLabel } from '@material-ui/core';\nimport { FieldsWrapper } from \"./index\";\nimport LocationFieldGroup from \"./LocationFieldGroup\";\nimport { defaultLocationFields } from \"../../constants/default_fields\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Alert } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: '10px 0',\n  }\n}));\n\nfunction LocationFields({index, location, handleRemove, required, errMsg = {}}) {\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(true);\n  const forceUpdate = () => update(!state);\n\n  const handleChange = name => e => {\n    location[name] = e.target.value;\n  };\n\n  return (\n    <div style={{paddingBottom: 10}}>\n      <FormLabel component=\"legend\">\n        Other address #{index + 1 + '  '}\n        <Button\n          onClick={e => {\n            handleRemove(index);\n            forceUpdate();\n          }}\n          color=\"secondary\"\n        >\n          Remove\n        </Button>\n      </FormLabel>\n      <FieldsWrapper key=\"main_address\">\n        <LocationFieldGroup\n          address={location}\n          handleChange={handleChange}\n          required={required}\n          errMsg={errMsg}\n        />\n      </FieldsWrapper>\n    </div>\n  )\n}\n\nexport default function OtherLocationsFields({otherLocations, clientId, required, errMsg = {}}) {\n  const classes = useStyles();\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(otherLocations);\n  const forceUpdate = () => update(!state);\n\n  const handleAdd = () => {\n    otherLocations.push({...defaultLocationFields});\n    forceUpdate();\n  };\n\n  const handleRemove = (index) => {\n    console.log('remove', index, otherLocations[index])\n    otherLocations.splice(index, 1);\n    forceUpdate();\n  };\n\n  return (\n    <div>\n      {errMsg && typeof errMsg === 'string' &&\n        <Alert severity=\"error\">{errMsg}</Alert>}\n      {otherLocations.map((location, index) => {\n        return (\n          <LocationFields\n            key={index}\n            index={index}\n            location={location}\n            clientId={clientId}\n            handleRemove={handleRemove}\n            required={required}\n            size={otherLocations.length}\n            errMsg = {errMsg[index]}\n          />\n        )\n      })}\n      <Button className={classes.button} onClick={handleAdd} variant=\"outlined\">\n        Add other address\n      </Button>\n\n    </div>\n  );\n}\n","import { Checkbox, TableCell, TableHead, TableRow, TableSortLabel } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport function EnhancedTableHead(props) {\n  const {\n    classes, onSelectAllClick, order, orderBy, numSelected,\n    rowCount, onRequestSort, columns\n  } = props;\n  const createSortHandler = (getFieldValueFn) => (event) => {\n    onRequestSort(event, getFieldValueFn);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        <TableCell padding=\"checkbox\" key={0}>\n          <Checkbox\n            color=\"primary\"\n            indeterminate={numSelected > 0 && numSelected < rowCount}\n            checked={rowCount > 0 && numSelected === rowCount}\n            onChange={onSelectAllClick}\n            inputProps={{\n              'aria-label': 'select all desserts',\n            }}\n          />\n        </TableCell>\n        {columns.map((headCell, idx) => (\n          <TableCell\n            key={idx + 1}\n            style={headCell.style}\n            sortDirection={orderBy === (headCell.sortBy || headCell.body) ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === (headCell.sortBy || headCell.body)}\n              direction={orderBy === (headCell.sortBy || headCell.body) ? order : 'asc'}\n              onClick={createSortHandler(headCell.sortBy || headCell.body)}\n            >\n              {headCell.label}\n              {orderBy === headCell.label ? (\n                <span className={classes.sortSpan}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.func.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n","import { IconButton, lighten, Toolbar, Tooltip, Typography } from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport clsx from \"clsx\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n  },\n  highlight:\n    theme.palette.mode === 'light'\n      ? {\n        color: theme.palette.primary.main,\n        backgroundColor: lighten(theme.palette.primary.light, 0.85),\n      }\n      : {\n        color: theme.palette.text.primary,\n        backgroundColor: theme.palette.secondary.dark,\n      },\n  title: {\n    flex: '1 1 100%',\n  },\n}));\n\nexport const EnhancedTableToolbar = (props) => {\n  const classes = useToolbarStyles();\n  const {numSelected, title, onDelete, customToolbar} = props;\n\n  return (\n    <Toolbar\n      className={clsx(classes.root, {\n        [classes.highlight]: numSelected > 0,\n      })}\n    >\n      {numSelected > 0 ? (\n        <Typography\n          className={classes.title}\n          color=\"inherit\"\n          variant=\"subtitle1\"\n          component=\"div\"\n        >\n          {numSelected} selected\n        </Typography>\n      ) : (\n        <Typography\n          className={classes.title}\n          variant=\"h6\"\n          id=\"tableTitle\"\n          component=\"div\"\n        >\n          {title}\n        </Typography>\n      )}\n\n      {numSelected > 0 && (\n        <Tooltip title=\"Delete\">\n          <IconButton aria-label=\"delete\" onClick={onDelete} size=\"large\">\n            <DeleteIcon/>\n          </IconButton>\n        </Tooltip>\n      )}\n\n      <Tooltip title=\"Search\">\n        <IconButton aria-label=\"search list\" size=\"large\">\n          <SearchIcon/>\n        </IconButton>\n      </Tooltip>\n      {customToolbar}\n    </Toolbar>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  onDelete: PropTypes.func,\n};\n","import React from \"react\";\nimport {\n  Checkbox,\n  lighten,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n} from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { visuallyHidden } from \"@material-ui/utils\";\nimport { EnhancedTableHead } from \"./EnhancedTableHead\";\nimport { EnhancedTableToolbar } from \"./EnhancedTableToolbar\";\n\nfunction descendingComparator(a, b, getValue, extraData) {\n  b = getValue(b, extraData) || '';\n  a = getValue(a, extraData) || '';\n  if (b < a) {\n    return -1;\n  }\n  if (b > a) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction getComparator(order, orderBy, extraData) {\n  return order === 'desc'\n    ? (a, b) => descendingComparator(a, b, orderBy, extraData)\n    : (a, b) => -descendingComparator(a, b, orderBy, extraData);\n}\n\nfunction stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    width: '100%',\n  },\n  table: {\n    minWidth: 750,\n  },\n  // TODO fix #20379.\n  sortSpan: visuallyHidden,\n  tableRow: {\n    '&.Mui-selected': {\n      backgroundColor: lighten(theme.palette.primary.light, 0.85),\n    },\n    '&.Mui-selected:hover': {\n      backgroundColor: lighten(theme.palette.primary.light, 0.80),\n    }\n  }\n}));\n\nexport function EnhancedTable({data, title, columns, height, ...props}) {\n  const {\n    rowsPerPageOptions = [10, 25, 100],\n    idField = '_id',\n    defaultOrderBy = columns[0].sortBy || columns[0].body,\n    extraData = {},\n    rowStyle,\n    onDelete,\n    onChangePage, onChangeRowsPerPage,\n    customToolbar\n  } = props;\n  const classes = useStyles();\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(() => defaultOrderBy);\n  const [selected, setSelected] = React.useState([]);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(rowsPerPageOptions[0]);\n\n  const handleRequestSort = (event, getFieldValueFn) => {\n    const isAsc = orderBy === getFieldValueFn && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(() => getFieldValueFn);\n  };\n\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      setSelected(data.map(item => item[idField]));\n      return;\n    }\n    setSelected([]);\n  };\n\n  const handleClick = (event, id) => {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1),\n      );\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n\n    // Invoke listeners\n    onChangePage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    const rowsPerPage = parseInt(event.target.value, 10);\n    setRowsPerPage(rowsPerPage);\n    setPage(0);\n\n    // Invoke listeners\n    onChangePage(0);\n    onChangeRowsPerPage(rowsPerPage)\n  };\n\n  const isSelected = (id) => selected.indexOf(id) !== -1;\n\n  const handleDelete = async () => {\n    // TODO: Show delete progressively.\n    if (onDelete) {\n      await onDelete(selected);\n      for (const id of selected) {\n        data.splice(data.findIndex(item => item._id === id), 1);\n      }\n      setSelected([]);\n    }\n  }\n\n  // Avoid a layout jump when reaching the last page with empty rows.\n  const emptyRows =\n    page > 0 ? Math.max(0, (1 + page) * rowsPerPage - data.length) : 0;\n\n  return (\n    <Paper elevation={5} className={classes.paper}>\n      <EnhancedTableToolbar title={title} numSelected={selected.length} onDelete={handleDelete}\n                            customToolbar={customToolbar}/>\n      <TableContainer style={{maxHeight: height || 'calc(100vh - 228px)'}}>\n        <Table\n          stickyHeader\n          className={classes.table}\n          size=\"medium\"\n        >\n          <EnhancedTableHead\n            classes={classes}\n            numSelected={selected.length}\n            order={order}\n            orderBy={orderBy}\n            onSelectAllClick={handleSelectAllClick}\n            onRequestSort={handleRequestSort}\n            rowCount={data.length}\n            columns={columns}\n          />\n          <TableBody>\n            {stableSort(data, getComparator(order, orderBy, extraData))\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map((row) => {\n                const id = row[idField];\n                const isItemSelected = isSelected(id);\n                return (\n                  <TableRow\n                    className={classes.tableRow}\n                    hover\n                    role=\"checkbox\"\n                    aria-checked={isItemSelected}\n                    tabIndex={-1}\n                    key={id}\n                    selected={isItemSelected}\n                    style={rowStyle && rowStyle(row)}\n                  >\n                    <TableCell padding=\"checkbox\" key={0}>\n                      <Checkbox\n                        color=\"primary\"\n                        onClick={(event) => handleClick(event, id)}\n                        checked={isItemSelected}\n                      />\n                    </TableCell>\n                    {columns.map((cell, idx) => <TableCell style={cell.style}\n                                                           key={idx + 1}>{cell.body(row, extraData)}</TableCell>)}\n                  </TableRow>\n                );\n              })}\n            {emptyRows > 0 && (\n              <TableRow\n                style={{\n                  height: 53 * emptyRows,\n                }}\n              >\n                <TableCell colSpan={6}/>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={rowsPerPageOptions}\n        component=\"div\"\n        count={data.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Paper>\n  );\n}\n","import React, { useState } from 'react';\nimport { Menu, MenuItem, CircularProgress, Typography, Chip } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Link as DomLink, useHistory } from 'react-router-dom';\nimport { Add as AddIcon, CloudUpload as UploadIcon } from '@material-ui/icons';\nimport GoogleMap from './GoogleMap';\nimport CSVUploadModal from './CSVUploadModal';\nimport DeleteModal from './DeleteModal';\nimport DropdownMenu from './DropdownMenu';\nimport GenericPage from './GenericPage';\nimport FormStepper from './FormStepper';\nimport FieldsWrapper from \"./FieldsWrapper\";\nimport OtherLocationsFields from \"./OtherLocationsFields\";\n\nimport { providerFormTypes } from '../../constants/provider_fields.js'\n\nconst useStyles = makeStyles((theme) => ({\n  link: {\n    color: 'inherit',\n    textDecorationLine: 'none',\n  },\n  linkWithHover: {\n    fontWeight: 500,\n    color: 'inherit',\n    // textDecorationLine: 'none',\n    '&:hover': {\n      textDecorationLine: 'underline',\n      color: '#2f5ac7'\n    }\n  },\n  progress: {\n    margin: theme.spacing(2),\n    marginTop: 50,\n  },\n  chipButton: {\n    paddingLeft: 6,\n    marginLeft: 6,\n  }\n}));\n\nexport function Link({className = '', color, ...props}) {\n  const classes = useStyles();\n  return <DomLink {...props} className={color ? classes.linkWithHover : classes.link + ' ' + className}/>\n}\n\n/**\n * Used by DataTable. Add \"add button\" and \"upload by CSV button\"\n * @param onClick\n * @returns {*}\n * @constructor\n */\nexport function CustomToolbar({handleAdd, handleUpload, type}) {\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleLink = link => () => {\n    history.push(link);\n  };\n\n  return (\n    <>\n      <Chip onClick={handleUpload}\n            color=\"default\"\n            icon={<UploadIcon/>}\n            label=\"Upload\"\n            variant=\"outlined\"\n            className={classes.chipButton}\n      />\n      <Chip onClick={type === 'providers' ? handleClick : handleAdd}\n            color=\"primary\"\n            icon={<AddIcon/>}\n            label=\"Add\"\n            variant=\"outlined\"\n            className={classes.chipButton}\n      />\n\n      {/*For Providers */}\n      {type === 'providers' &&\n      <Menu\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n      >\n        {Object.entries(providerFormTypes).map(([value, formType]) =>\n          <MenuItem key={formType} onClick={handleLink(`/providers/${value}/new`)}>\n            {formType}\n          </MenuItem>)\n        }\n      </Menu>\n      }\n    </>\n  );\n}\n\nexport function Loading({message = 'Loading Components...'}) {\n  const classes = useStyles();\n  return (\n    <div style={{textAlign: 'center'}}>\n      <CircularProgress className={classes.progress}/>\n      <Typography variant=\"subtitle2\" color={\"textSecondary\"}>\n        {message}\n      </Typography>\n    </div>\n  );\n}\n\n\nexport {\n  GoogleMap, CSVUploadModal, DeleteModal, DropdownMenu, GenericPage, FormStepper, FieldsWrapper,\n  OtherLocationsFields\n}\nexport {EnhancedTable as DataTable} from './Table';\n","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { AppBar, Toolbar, Typography, Button, Tabs, Tab, Box } from '@material-ui/core';\nimport { Link } from \"../shared\";\n\n// redux\nimport { useDispatch, useSelector } from 'react-redux';\nimport { logout } from '../../store/actions/authAction.js';\nimport { styled } from \"@material-ui/styles\";\n\nconst StyledTabs = styled(Tabs)({\n  '& .MuiTabs-indicator': {\n    display: 'flex',\n    justifyContent: 'center',\n    backgroundColor: '#ccc',\n    transition: 'none',\n  },\n});\n\nconst StyledTab = styled(Tab)(({theme}) => ({\n  textTransform: 'none',\n  fontWeight: theme.typography.fontWeightRegular,\n  fontSize: theme.typography.pxToRem(15),\n  marginRight: theme.spacing(1),\n  minWidth: 60,\n  color: 'rgba(255, 255, 255, 0.8)',\n  '&.Mui-selected': {\n    color: '#fff',\n    fontWeight: 500,\n  },\n}));\n\nfunction TopNavBar() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {isLoggedin} = useSelector(state => state.auth);\n  const tabNames = ['/clients', '/services', '/goods', '/providers', '/reporting'];\n  const [value, setValue] = useState(\n    tabNames.indexOf(history.location.pathname) !== -1 ? history.location.pathname : false,\n  );\n\n  useEffect(() => {\n    setValue(tabNames.indexOf(history.location.pathname) !== -1 ? history.location.pathname : false);\n  }, [history.location.pathname, tabNames]);\n\n  const tabOnChange = (e, newValue) => {\n    setValue(newValue);\n    history.push(newValue);\n  };\n\n  return (\n    <AppBar position=\"fixed\" sx={{backgroundColor: 'rgb(39, 44, 52)'}}>\n      <Toolbar variant=\"dense\">\n        <Box sx={{\n          paddingRight: '20px',\n          whiteSpace: 'pre',\n          textDecorationLine: 'none',\n        }}>\n          <Link to={isLoggedin ? \"/dashboard\" : \"/\"}>\n            <Typography variant=\"h6\">\n              Dashboard\n            </Typography>\n          </Link>\n        </Box>\n\n\n        {isLoggedin ? (\n          <StyledTabs value={value} onChange={tabOnChange} variant=\"scrollable\" indicatorColor='secondary'>\n            <StyledTab label=\"Clients\" value=\"/clients\"/>\n            <StyledTab label=\"Services\" value=\"/services\"/>\n            <StyledTab label=\"Goods\" value=\"/goods\"/>\n            <StyledTab label=\"Providers\" value=\"/providers\"/>\n            <StyledTab label=\"Reporting\" value=\"/reporting\"/>\n          </StyledTabs>\n        ) : null}\n\n        <Button color=\"inherit\" onClick={() => isLoggedin ? dispatch(logout()) : history.push('/login')}\n                sx={{\n                  marginLeft: 'auto',\n                  textDecorationLine: 'none',\n                  whiteSpace: 'pre'\n                }}>\n          {isLoggedin ? 'Log out' : 'Login'}\n        </Button>\n\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default TopNavBar;\n","import React from 'react';\nimport { Typography, Link } from \"@material-ui/core\";\n\nexport default function () {\n  return (\n    <div className=\"footer\">\n      <Typography variant=\"caption\">\n        <Link href=\"http://csse.utoronto.ca/\" target=\"_blank\" style={{color: \"#ababab\"}}>\n          Centre for Social Services Engineering\n        </Link>, University of Toronto\n      </Typography>\n    </div>\n  );\n};\n","import React, { Component } from 'react'\n\nclass Landing extends Component {\n  render() {\n    return(\n      <div className=\"landing\">\n        <div className=\"container\">\n          <div className=\"intro-placeholder\">\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Landing;\n","import React from 'react'\nimport { Typography, Button, Container, Grid } from \"@material-ui/core\";\nimport { Link } from './shared';\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingTop: 80,\n    maxWidth: '500px',\n  },\n  button: {\n    width: 300,\n  },\n}));\n\nfunction Login() {\n  const classes = useStyles();\n  return (\n    <Container className={classes.container}>\n      <Grid container direction=\"column\" spacing={3} alignItems=\"center\">\n        <Grid item>\n          <Typography variant=\"h5\">\n            Log in to your Dashboard\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Link to={`/login-pane`}>\n            <Button variant=\"outlined\" className={classes.button}>\n              Sign in with SNM account\n            </Button>\n          </Link>\n        </Grid>\n        <Grid item>\n          <Link to={`/login-pane`}>\n            <Button color=\"primary\" variant=\"outlined\" className={classes.button}>\n              Facebook\n            </Button>\n          </Link>\n        </Grid>\n        <Grid item>\n          <Link to={`/login-pane`}>\n            <Button color=\"secondary\" variant=\"outlined\" className={classes.button}>\n              Google\n            </Button>\n          </Link>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default Login;\n","import React, { useState } from 'react'\nimport { useHistory } from \"react-router\";\n\nimport { TextField, Container, Paper, Typography, Button, Divider } from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Link } from './shared';\n\nimport { login, LOGIN_SUCCESS } from '../store/actions/authAction';\nimport { useDispatch } from \"react-redux\";\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingTop: 80,\n    maxWidth: '500px'\n  },\n  paper: {\n    padding: 30,\n  },\n  item: {\n    marginTop: 20,\n  },\n  button: {\n    marginTop: 30,\n    marginBottom: 20,\n  },\n  link: {\n    marginTop: 10,\n    color: '#007dff',\n  }\n}));\n\nfunction LoginPane() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [form, setForm] = useState({username: '', password: '', alert: ''});\n\n  const onChange = name => e => {\n    const value = e.target.value;\n    setForm(prev => ({...prev, [name]: value}));\n  };\n\n  const submit = async () => {\n    const {status, message} = await dispatch(login(form));\n    if (status === LOGIN_SUCCESS) {\n      history.push('/dashboard');\n    } else {\n      setForm(prev => ({...prev, alert: message}));\n    }\n  };\n\n  const onKeyPress = event => {\n    if (event.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  return (\n    <Container className={classes.container} onKeyPress={onKeyPress}>\n      <Paper elevation={5} className={classes.paper}>\n        <Typography variant=\"h6\">\n          Sign in\n        </Typography>\n        <TextField\n          fullWidth\n          variant=\"outlined\"\n          label=\"Username\"\n          type=\"text\"\n          value={form.username}\n          onChange={onChange('username')}\n          className={classes.item}\n        />\n        <br/>\n        <TextField\n          fullWidth\n          variant=\"outlined\"\n          label=\"Password\"\n          type=\"password\"\n          value={form.password}\n          onChange={onChange('password')}\n          className={classes.item}\n        />\n        <br/>\n        <Typography variant=\"caption\">\n          <span style={{color: 'red'}}>{form.alert}</span>\n        </Typography>\n        <br/>\n        <Button variant=\"outlined\" color=\"primary\" className={classes.button} onClick={submit}> Log in</Button>\n        <Divider/>\n        <Link to={'/login-pane'}>\n          <Typography variant=\"body2\" className={classes.link}>\n            Don't have an account?\n          </Typography>\n        </Link>\n\n        <Link to={'/login-pane'}>\n          <Typography variant=\"body2\" className={classes.link}>\n            Forget password?\n          </Typography>\n        </Link>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default LoginPane;\n","import React from 'react';\nimport { Link } from './shared'\n\n// redux\nimport { useSelector } from 'react-redux';\n\nimport { Container, Button } from \"@material-ui/core\";\nimport { Edit, Create, People, ViewHeadline as Log, CheckCircleOutline as Criteria} from \"@material-ui/icons\";\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    paddingTop: 80,\n    textAlign: 'center',\n    maxWidth: 600,\n  },\n  button: {\n    width: 400,\n    height: 50,\n    textTransform: 'none',\n    margin: 5,\n  }\n}));\n\nfunction NavButton({to, text, icon}) {\n  const classes = useStyles();\n  return (\n    <Link to={to}>\n      <Button\n        variant=\"outlined\"\n        className={classes.button}\n        startIcon={icon}\n        size=\"large\">\n        {text}\n      </Button>\n    </Link>\n  );\n}\n\nfunction Dashboard() {\n  const classes = useStyles();\n  const {isLoggedin, currentUser, organization} = useSelector(state => state.auth);\n  if (!isLoggedin || !currentUser.is_admin)\n    return <span>\"You don't have the permission to view this page.\"</span>;\n\n  return (\n    <Container className={classes.container}>\n\n      {!organization.id &&\n      <NavButton to={{pathname: '/providers/organization/new', state: {status: 'Home Agency'}}}\n                 text=\"Create organization profile for home agency\" icon={<Create/>}/>}\n\n      {organization.id &&\n      <NavButton to={`/provider/${organization.id}/edit/organization`} icon={<Edit/>}\n                 text=\"Edit organization profile for home agency\"/>}\n\n      <NavButton to={`/users`} icon={<People/>}\n                 text=\"Manage Users\"/>\n\n      <NavButton to={`/admin-logs`} icon={<Log/>}\n                 text=\"Admin Logs\"/>\n\n      <NavButton to={`/eligibility-criteria`} icon={<Criteria/>}\n                 text=\"Manage Eligibility criteria\"/>\n\n      <NavButton to={'/settings/manage-fields'} icon={<Edit/>}\n                 text=\"Manage Client/Provider Fields\"/>\n\n      <NavButton to={'/questions'} icon={<Edit/>}\n                 text=\"Manage Questions\"/>\n\n    </Container>\n  )\n}\n\nexport default Dashboard;\n","export function formatLocation(location) {\n  if (Object.keys(location).length === 1) {\n    return \"Not Provided\"\n  }\n\n  let format_location = ''\n  if (location.apt_number !== undefined){\n    format_location += `${location.apt_number}-`\n  }\n  if (location.street_address !== undefined){\n    format_location += `${location.street_address}, `\n  }\n  if (location.city !== undefined)\n    format_location += `${location.city}, `\n  if (location.province !== undefined)\n    format_location += `${location.province}, `\n  if (location.postal_code !== undefined)\n    format_location += `${location.postal_code}`\n  return format_location\n}\n","export function formatPhoneNumber(number) {\n  try {\n    const codes = number.match(/^(\\d{3})(\\d{3})(\\d{4})$/);\n    return \"(\" + codes[1] + \") \" + codes[2] + \"-\" + codes[3];\n  } catch (e) {\n    return number;\n  }\n}\n","import React from 'react';\n\n// TODO: createClients  (CSV Upload)\nimport { fetchClients, deleteClient } from '../store/actions/clientActions.js'\n\nimport { formatLocation } from '../helpers/location_helpers'\nimport { formatPhoneNumber } from '../helpers/phone_number_helpers'\n\nimport { GenericPage, Link } from \"./shared\";\n\nconst TYPE = 'clients';\n\n// mui-table column configurations\n// TODO: Add custom print function for address\nconst columnsWithoutOptions = [\n  {\n    label: 'First Name',\n    body: ({id, profile}) => {\n      return <Link color to={`/${TYPE}/${id}`}>{profile.first_name}</Link>\n    }\n  },\n  {\n    label: 'Last Name',\n    body: ({profile}) => {\n      return profile.last_name;\n    }\n  },\n  {\n    name: 'profile.primary_phone_number',\n    label: 'Phone Number',\n    body: ({profile}) => {\n      if (profile.primary_phone_number)\n        return formatPhoneNumber(profile.primary_phone_number);\n      return 'Not Provided';\n    },\n  },\n  {\n    label: 'Email',\n    body: ({profile}) => {\n      return profile.email;\n    }\n  },\n  {\n    label: 'Address',\n    body: ({profile}) => {\n      if (profile.address)\n        return formatLocation(profile.address);\n      return 'Not Provided';\n    }\n  },\n];\n\nexport default function Clients() {\n\n  const nameFormatter = (client) => {\n    return client.profile.first_name + ' ' + client.profile.last_name;\n  };\n\n  const generateMarkers = (clients, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    const currPageClients = clients.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage);\n    return currPageClients.map(client => ({\n      position: {lat: Number(client.address.lat), lng: Number(client.address.lng)},\n      title: nameFormatter(client),\n      link: `/${TYPE}/${client.id}`,\n      content: client.address && formatLocation(client.address),\n    })).filter(client => client.position.lat && client.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchClients}\n      deleteItem={deleteClient}\n      generateMarkers={generateMarkers}\n      nameFormatter={nameFormatter}\n      tableOptions={{\n        idField: 'id'\n      }}\n    />\n  )\n}\n","import React, { useState} from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport Button from '@material-ui/core/Button'\nimport Box from '@material-ui/core/Box';\nimport { Link } from '../shared'\nimport { updateClientNeedGroup } from \"../../store/actions/needActions\";\n\n//icons\nimport { Edit, PriorityHigh, Delete, Alarm, ExpandMoreOutlined} from '@material-ui/icons';\n\n//Expansion Panel\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { Grid } from \"@material-ui/core\";\n\n\n\n\n\nexport default function NeedGroupPanel(props) {\n  const {needGroupCategory, needs, needGroupId, status,\n    clientId, handleShow} = props;\n  const dispatch = useDispatch();\n\n\n  const [state, setState] = useState({\n    status: status,\n    hasUrgentNeed: anyUrgentNeed(needs)\n  })\n  const changeNeedGroupCategoryStatus = () => {\n    const need_group = {\n      category: needGroupCategory,\n      status: (state.status === \"Unmet\") ? \"Met\" : \"Unmet\",\n      client_id: clientId,\n      id: needGroupId\n    }\n    setState(state => ({...state, status: need_group.status}))\n    dispatch(updateClientNeedGroup(clientId, need_group.id, need_group));\n\n  }\n\n  const classes = useStyles();\n\n  const needsUnderCat = needs.map(need =>\n      <Paper key={need.id}\n        variant={\"outlined\"}\n        >\n          <Grid container spacing={3} className={classes.innerBox}>\n            <Grid item xs>\n              <Typography color={'primary'}>{need.type}</Typography>\n            </Grid>\n            <Grid item xs>\n            </Grid>\n            {need.is_urgent && (\n              <Grid item xs>\n                <Box display=\"flex\" flexDirection={\"row\"}>\n                  <Alarm className={classes.highPriority}></Alarm>\n                  <Typography className={classes.highPriority}>Urgent</Typography>\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n\n          <Box className={classes.innerBox}>\n            <Link color to={`/needs/${need.id}`}>\n              Find Services/Goods\n            </Link>\n            <p>{need.description}</p>\n          </Box>\n\n          <Box display = 'flex' className={classes.innerBox}>\n            <Box>\n              <Link to={`/needs/${need.id}/edit`}>\n                <Button\n                  startIcon={<Edit/>}>\n                  Edit\n                </Button>\n              </Link>\n            </Box>\n\n            <Box>\n              <Button\n                startIcon={<Delete/>}\n                onClick={() => handleShow(need.id)}\n              >\n                Delete\n              </Button>\n            </Box>\n\n            <Box>\n              <Button\n                color={\"secondary\"}\n                onClick={() => changeNeedGroupCategoryStatus()}>\n                {state.status}\n              </Button>\n            </Box>\n          </Box>\n\n      </Paper>\n  )\n\n  return (\n    <div>\n      <Accordion className={classes.panel}>\n        <AccordionSummary\n          expandIcon={<ExpandMoreOutlined />}\n          aria-controls={needGroupCategory+\"-content\"}\n          id={needGroupCategory+\"-header\"}\n        >\n          <Box display=\"flex\" flexDirection={\"row\"} className={classes.column}>\n            <Typography className={classes.heading}>{needGroupCategory}</Typography>\n            {state.hasUrgentNeed && <PriorityHigh className={classes.highPriority}></PriorityHigh>}\n          </Box>\n          <div className={classes.column}>\n            <Typography className={classes.secondaryHeading}>{needs.length} need(s) inside </Typography>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails className={classes.panelDetail}>\n          <Box className={classes.outerBox}>\n            {needsUnderCat}\n          </Box>\n        </AccordionDetails>\n      </Accordion>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles(theme => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(12),\n    color: theme.palette.text.secondary,\n  },\n  column: {\n    flexBasis: '50%',\n  },\n  panel: {\n    width: '35%',\n  },\n  panelDetail:{\n    padding: 0\n  },\n  outerBox:{\n    width:'100%'\n  },\n  innerBox: {\n    padding: \"10px\"\n  },\n  highPriority: {\n    color: \"#f44336\"\n  },\n\n\n}));\n\nfunction anyUrgentNeed(needs){\n  for (let need of needs){\n    if (need.is_urgent){\n      return true;\n    }\n  }\n  return false;\n}","import React, { useState} from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { deleteClientNeed, ERROR } from \"../store/actions/needActions\";\nimport DeleteModal from \"./shared/DeleteModal\";\nimport NeedGroupPanel from \"./client_needs/NeedGroupPanel\";\n\nexport default function ClientNeeds(props) {\n  const {clientId, needGroups} = props;\n  const dispatch = useDispatch();\n\n  const [state, setState] = useState({\n    show: false,\n    selectedId: null,\n    needGroupData: needGroups,\n  });\n\n  const handleHide = () => {\n    setState( state => ({\n        ...state,\n        showDeletedDiaglog: false\n      }));\n  }\n\n  const handleShow = (id) => {\n    setState(state => ({\n        ...state,\n        showDeletedDiaglog:true,\n        selectedId:id\n      })\n    )\n  }\n\n  const needsByNeedGroup = state.needGroupData.map(need_group =>\n    <NeedGroupPanel\n      key={need_group.id}\n      needGroupCategory={need_group.category}\n      needs={need_group.needs}\n      needGroupId={need_group.id}\n      status={need_group.status}\n      clientId={clientId}\n      handleShow={handleShow}\n    />\n  );\n\n\n  const handleDelete = (id, form) => {\n    dispatch(deleteClientNeed(clientId, id, form)).then((status) => {\n      if (status === ERROR) {\n        // this.setState({ displayError: true });\n      } else {\n        setState( state => ({\n          ...state,\n          showDeletedDiaglog: false,\n          needGroupData: deleteNeedInData(state.selectedId)\n        }));\n      }\n    });\n  }\n\n  const deleteNeedInData = (id) => {\n    let copy = [...state.needGroupData]\n    for (const need_cat of copy){\n      for (const need of need_cat.needs){\n        if(need.id === state.selectedId){\n          //Delete need corresponding to selectedId\n          const idx = need_cat.needs.indexOf(need);\n          if (idx > -1){\n            need_cat.needs.splice(idx,1);\n          }\n        }\n      }\n      if (need_cat.needs.length === 0){\n        //If there are no needs under this category, delete the category as well.\n        const idx = copy.indexOf(need_cat);\n        if (idx > -1){\n          copy.splice(idx,1);\n        }\n      }\n    }\n    return copy;\n  }\n\n  if (state) {\n    return (\n      <div>\n          {needsByNeedGroup}\n        <DeleteModal\n          contentType='Need'\n          objectId={state.selectedId}\n          show={state.showDeletedDiaglog}\n          onHide={handleHide}\n          delete={handleDelete}\n          title = {\"Delete this need?\"}\n        />\n      </div>\n      )\n\n  } else {\n    return '';\n  }\n}\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\n\nexport default function TR({ title, value }) {\n  if (value) {\n    return (\n      <TableRow key={title}>\n        <TableCell component=\"th\" scope=\"row\">\n          {title}\n        </TableCell>\n        <TableCell align=\"left\">{value}</TableCell>\n      </TableRow>\n    );\n  } else {\n    return null;\n  }\n}\n","import makeStyles from '@material-ui/styles/makeStyles';\n\nconst useProfileTableStyles = makeStyles({\n  table: {\n    marginTop: 20,\n    marginBottom: 40,\n    width: '80%'\n  },\n  title: {\n    backgroundColor: '#ececec',\n    width: '30%'\n  },\n\n  title2: {\n    backgroundColor: '#ececec',\n    width: '70%'\n  },\n\n});\n\nexport default useProfileTableStyles;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport TR from '../../shared/TR';\n\nimport { formatLocation } from '../../../helpers/location_helpers';\nimport { formatPhoneNumber } from '../../../helpers/phone_number_helpers';\n\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport useProfileTableStyles from '../../../stylesheets/profile-table'\n\nexport default function ClientInfoTable({ step, client, infoFields, clientFields }) {\n\n  let rowTitle, rowValue;\n  const infoRows = _.map(infoFields, infoField => {\n\n\n    rowTitle = clientFields[infoField].label;\n    // console.log(\"%%%%%%%%% clientFields[infoField].label\", clientFields[infoField].label);\n\n    switch(infoField) {\n        case 'first_name':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client.profile[infoField];\n        // console.log(\"$$$$$$ infoField, rowValue, client.profile  $$ \",infoField, rowValue,  client.profile);\n        }\n        break;\n      case 'middle_name':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile  $$  \", infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'last_name':\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'preferred_name':\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'gender':\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'birth_date':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'email':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        rowValue = client.profile[infoField];\n        }\n        break;\n      case 'primary_phone_number':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client.profile[infoField];\n        // console.log(\"$$$$$$ infoField, client.profile   $$  \",infoField,  client.profile);\n        }\n        break;\n      case 'alt_phone_number':\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client.profile[infoField] ? formatPhoneNumber(client.profile[infoField]) : 'None provided';\n        }\n        break;\n      case \"address\":\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client[infoField] ? formatLocation(client[infoField]) : \"None provided\";\n        }\n        break;\n\n      case \"has_children\":\n        if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = client[infoField] ? 'Yes' : 'No';\n        }\n        break;\n      case \"other_languages\":\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        // console.log(\"$$$$$$ infoField, client.profile\",infoField,  client.profile);\n        }\n        rowValue = client.profile[infoField];\n        break;\n      case \"eligibilities\":\n      if (client.profile === undefined){\n        // console.log(\"@@@@@@@@@@@@@@@@@@@@@@@@@@\");\n        }\n        else{\n        rowValue = (client[infoField] || []).join(', ')\n        }\n        break;\n      default:\n        rowValue = client[infoField];\n    }\n    return (\n      <TR\n        key={infoField}\n        title={rowTitle}\n        value={rowValue}\n      />\n    );\n  })\n\n  const classes = useProfileTableStyles()\n  return (\n    <TableContainer className={classes.table} component={Paper}>\n      <Table aria-label=\"Profile table\">\n        <TableHead>\n          <TableRow >\n            <TableCell className={classes.title}>{step}</TableCell>\n            <TableCell className={classes.title2}></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {infoRows}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import React, { Component } from 'react';\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\n\n\nexport default class AppointmentRow extends Component {\n  render() {\n    const appointment = this.props.appointment;\n\n    return(\n      <TableRow>\n        {/*<td>*/}\n        {/*  <Label>{appointment.type}</Label>{' '}*/}\n        {/*  {appointment.category}*/}\n        {/*</td>*/}\n        <TableCell component=\"th\" scope=\"row\">\n          {appointment.category}\n        </TableCell>\n        <TableCell align=\"left\">{appointment.date}</TableCell>\n        <TableCell align=\"left\">{`${appointment.start_time} - ${appointment.end_time}`}</TableCell>\n        <TableCell align=\"left\">{appointment.description}</TableCell>\n      </TableRow>\n    )\n  }\n}\n","import fetch from 'isomorphic-fetch';\nimport { serverHost } from '../store/defaults.js';\nimport { resolve } from \"chart.js/helpers\";\n\nexport const ACTION_SUCCESS = 'ACTION_SUCCESS';\nexport const ACTION_ERROR = 'ACTION_ERROR';\n\nexport const headers = {\n  Authorization: `JWT ${localStorage.getItem('jwt_token')}`\n};\n\nconst normalizeError = (err) => {\n  for (const [key, value] of Object.entries(err)) {\n    if (value != null && typeof value === 'object' && !Array.isArray(value)) {\n      err[key] = normalizeError(value);\n    } else {\n      err[key] = value[0];\n    }\n  }\n  return err;\n};\n\nexport async function getJson(url) {\n  url = serverHost + url;\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n    },\n  });\n  if (response.status >= 400 && response.status < 600) {\n    const e = new Error(\"Bad response from server: \" + response.status);\n    e.json = normalizeError(await response.json());\n    throw e;\n  }\n  return response.json();\n}\n\nasync function sendJson(url, body, method, rawResponse = false) {\n  url = serverHost + url;\n  const response = await fetch(url, {\n    method,\n    body: JSON.stringify(body),\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n    },\n  });\n  if (response.status >= 400 && response.status < 600) {\n    const e = new Error(\"Bad response from server: \" + response.status);\n    e.json = normalizeError(await response.json());\n    throw e;\n  }\n  if (rawResponse)\n    return response;\n  return response.json();\n}\n\nexport async function postJson(url, body) {\n  return sendJson(url, body, 'POST');\n}\n\nexport async function putJson(url, body) {\n  return sendJson(url, body, 'PUT');\n}\n\n// return raw response\nexport async function deleteJson(url, body) {\n  return sendJson(url, body, 'DELETE', true);\n}\n\nexport function sleep(milliseconds) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, milliseconds)\n  })\n}","import { getJson, postJson } from \"./index\";\n\n\nexport function fetchClientFields() {\n  return getJson('/settings/get_client_fields/');\n}\n\nexport function updateClientFields(params) {\n  return postJson('/settings/update_client_fields/', params);\n}\n\nexport async function fetchProviderFields(reformat = true) {\n  const data = await getJson('/settings/get_provider_fields/');\n  if (reformat) {\n    // transform to the same object as client fields\n    Object.keys(data).forEach(providerType => {\n      const formStructure = data[providerType].form_structure;\n      Object.keys(formStructure).forEach(stepName => {\n        const fields = formStructure[stepName];\n        formStructure && Object.keys(fields).forEach(fieldName => {\n          // skip questions\n          if (fields[fieldName].type !== 'field') return;\n          fields[fieldName] = fields[fieldName].required;\n        })\n      })\n    });\n  }\n  return data;\n}\n\nexport function updateProviderFields(params) {\n  return postJson('/settings/update_provider_fields/', params);\n}","import { maritalStatusOptions, statusInCanadaOptions, educationLevelOptions, genderOptions,\n         incomeSourceOptions } from '../store/defaults.js';\n\nexport const clientFields = {\n  address: { label: 'Address' },\n  alt_phone_number: { component: 'GeneralField', type: 'tel', label: 'Alternative Phone Number' },\n  arrival_date: { component: 'GeneralField', type: 'date', label: 'Arrival Date (if different from landing_date)' },\n  birth_date: { component: 'GeneralField', type: 'date', label: 'Date of Birth' },\n  completed_education_level: { component: 'SelectField', label: 'Completed Education Level', options: educationLevelOptions },\n  country_of_last_residence: { component: 'GeneralField', type: 'text', label: 'Country of Last Residence' },\n  country_of_origin: { component: 'GeneralField', type: 'text', label: 'Country of Origin' },\n  current_education_level: { component: 'SelectField', label: 'Current Education Level', options: educationLevelOptions },\n  ngo_conditions: { component: 'CheckboxField', label: 'NGO Conditions' },\n  email: { component: 'GeneralField', type: 'email', label: 'Email' },\n  family: { label: 'Family' },\n  file_id: { component: 'GeneralField', type: 'text', label: 'File ID' },\n  first_language: { component: 'SelectField', label: 'First Language' },\n  first_name: { component: 'GeneralField', type: 'text', label: 'First Name' },\n  gender: { component: 'SelectField', label: 'Gender', options: genderOptions },\n  has_children: { component: 'RadioField', label: 'Do you have children?', options: { 'Yes': true, 'No': false } },\n  immigration_doc_number: { component: 'GeneralField', type: 'text', label: 'Immigration Document Number (if different from PR card)' },\n  income_source: { component: 'SelectField', label: 'Income Source', options: incomeSourceOptions },\n  landing_date: { component: 'GeneralField', type: 'date', label: 'Landing Date' },\n  last_name: { component: 'GeneralField', type: 'text', label: 'Last Name' },\n  marital_status: { component: 'SelectField', label: 'Marital Status', options: maritalStatusOptions },\n  middle_name: { component: 'GeneralField', type: 'text', label: 'Middle Name' },\n  num_of_children: { component: 'GeneralField', type: 'number', label: 'Number of Children' },\n  num_of_dependants: { component: 'GeneralField', type: 'number', label: 'Number of Dependants' },\n  other_languages: { component: 'MultiSelectField', label: 'Other languages' },\n  preferred_name: { component: 'GeneralField', type: 'text', label: 'Preferred Name' },\n  primary_phone_number: { component: 'GeneralField', type: 'tel', label: 'Telephone' },\n  pr_number: { component: 'GeneralField', type: 'text', label: 'Permanent Residence Card Number (PR card)' },\n  status_in_canada: { component: 'SelectField', label: 'Status in Canada', options: statusInCanadaOptions }\n}\n","import { postJson, putJson, getJson, deleteJson } from \"./index\";\n\nexport function createEligibility(params) {\n  return postJson('/eligibility_criteria/', params);\n}\n\nexport function updateEligibility(id, params) {\n  return putJson('/eligibility_criteria/' + id + '/', params);\n}\n\nexport function fetchEligibility(id) {\n  return getJson('/eligibility_criteria/' + id + '/');\n}\n\nexport function fetchEligibilities() {\n  return getJson('/eligibility_criteria/');\n}\n\nexport async function deleteEligibility(id, params) {\n  const response = await deleteJson('/eligibility_criteria/' + id + '/', params);\n  if (response.status !== 204)\n    throw Error('Server does not return correct code.');\n}\n","import React, { useState } from 'react';\nimport GeneralField from '../../shared/fields/GeneralField'\nimport SelectField from '../../shared/fields/SelectField'\nimport { genderOptions, familyRelationshipOptions } from '../../../store/defaults.js';\nimport { Paper, Button, FormLabel } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Alert } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  paper: {\n    position: 'relative',\n    paddingLeft: 28,\n    paddingBottom: 20,\n    marginBottom: 20,\n    width: 380,\n  }\n}));\n\nfunction FamilyMemberFields({index, clientId, member, handleRemoveFamily, errMsg = {}}) {\n  const classes = useStyles();\n\n  const handleChangeMember = name => e => {\n    member.person[name] = e.target.value;\n  };\n\n  // What does this mean?\n  const disabled = clientId && member.person.id === clientId;\n  return (\n    <div className={classes.root}>\n      <FormLabel component=\"legend\">\n        Family Member #{index + 1 + '  '}\n        <Button\n          disabled={disabled}\n          onClick={e => handleRemoveFamily(index)}\n          color=\"secondary\"\n        >\n          Remove\n        </Button>\n      </FormLabel>\n      <Paper variant=\"outlined\" className={classes.paper}>\n        <GeneralField\n          type=\"text\"\n          onChange={handleChangeMember('first_name')}\n          value={member.person.first_name}\n          label=\"First name\"\n          disabled={disabled}\n          error={!!errMsg['first_name']}\n          helperText={errMsg['first_name']}\n        />\n        <GeneralField\n          type=\"text\"\n          value={member.person.last_name}\n          onChange={handleChangeMember('last_name')}\n          label=\"Last name\"\n          disabled={disabled}\n          error={!!errMsg['last_name']}\n          helperText={errMsg['last_name']}\n        />\n        <GeneralField\n          type=\"date\"\n          value={member.person.birth_date}\n          onChange={handleChangeMember('birth_date')}\n          label=\"Birth date\"\n          disabled={disabled}\n          error={!!errMsg['birth_date']}\n          helperText={errMsg['birth_date']}\n        />\n        <SelectField\n          options={genderOptions}\n          value={member.person.gender}\n          onChange={handleChangeMember('gender')}\n          label=\"Gender\"\n          disabled={disabled}\n          error={!!errMsg['gender']}\n          helperText={errMsg['gender']}\n        />\n        <SelectField\n          options={familyRelationshipOptions}\n          value={member.relationship}\n          onChange={e => member.relationship = e.target.value}\n          label={(clientId && member.person.id === clientId) ? 'Self' : 'Relationship'}\n          disabled={disabled}\n          error={!!errMsg['relationship']}\n          helperText={errMsg['relationship']}\n        />\n      </Paper>\n    </div>\n  )\n}\n\nexport default function FamilyFields({family, clientId, errMsg = {}}) {\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(true);\n  const forceUpdate = () => update(!state);\n\n  const handleAddFamily = () => {\n    family.members.push({\n      person: {\n        first_name: '',\n        last_name: '',\n        birth_date: null,\n        gender: ''\n      },\n      relationship: ''\n    });\n    forceUpdate();\n  };\n\n  const handleRemoveFamily = (index) => {\n    family.members.splice(index, 1);\n    forceUpdate();\n  };\n\n  return (\n    <div>\n      {errMsg && typeof errMsg === 'string' &&\n        <Alert severity=\"error\">{errMsg}</Alert>}\n      {family.members.map((member, index) => {\n        return (\n          <FamilyMemberFields\n            key={index}\n            index={index}\n            member={member}\n            clientId={clientId}\n            handleRemoveFamily={handleRemoveFamily}\n            errMsg = {errMsg[index]}\n          />\n        )\n      })}\n      <Button onClick={handleAddFamily} variant=\"outlined\">\n        Add Family Member\n      </Button>\n    </div>\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport { RadioGroup, Radio, FormControlLabel, FormControl, FormLabel, FormHelperText } from '@material-ui/core'\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { UN_SET } from '../../../constants';\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    position: 'relative',\n    top: 16,\n  },\n  formControlRow: {\n    position: 'relative',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  labelRow: {\n    width: 200,\n    marginRight: 20,\n  }\n}));\n\nconst tryCastBool = val => val === 'true' ? true : (val === 'false' ? false : val);\n\nexport default function RadioField({row, noStar, label, required, options, onChange, value: parentValue = UN_SET, helperText, ...props}) {\n  const classes = useStyles();\n  const [value, setValue] = useState(parentValue);\n\n  const handleChange = useCallback(e => {\n    const val = tryCastBool(e.target.value);\n    setValue(val);\n    onChange({target: {value: val === UN_SET ? null : val}});\n  }, [onChange]);\n\n  return (\n    <FormControl className={row ? classes.formControlRow : classes.formControl}  error={props.error}>\n      <FormLabel className={row && classes.labelRow} required={required && !noStar} component=\"legend\">{label}</FormLabel>\n      <RadioGroup value={value} onChange={handleChange} row>\n        {/*{!required && <FormControlLabel*/}\n        {/*  key={UN_SET}*/}\n        {/*  value={UN_SET}*/}\n        {/*  control={<Radio color=\"primary\"/>}*/}\n        {/*  label={'N/A'}*/}\n        {/*  labelPlacement=\"end\"*/}\n        {/*/>}*/}\n        {Object.entries(options).map((([label, value]) =>\n            <FormControlLabel\n              key={value}\n              value={value}\n              control={<Radio color=\"primary\"/>}\n              label={label}\n              labelPlacement=\"end\"\n            />\n        ))}\n      </RadioGroup>\n      {helperText && <FormHelperText>{helperText}</FormHelperText>}\n    </FormControl>\n  );\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { FormLabel, FormControl, FormGroup, FormControlLabel, Checkbox, FormHelperText } from '@material-ui/core';\nimport makeStyles from '@material-ui/styles/makeStyles';\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    // position: 'relative',\n    marginTop: 16,\n    // marginBottom: 8,\n  },\n}));\n\nexport default function CheckboxField({label, required, options, onChange, helperText, ...props}) {\n  const optionsArray = useMemo(() =>\n    Array.isArray(options) ? options : Object.values(options), [options]);\n\n  const [value, setValue] = useState(() => {\n    const data = {};\n    optionsArray.forEach(option => {\n      data[option] = props.value.includes(option);\n    });\n    return data;\n  });\n\n  const handleChange = useCallback(name => e => {\n    const checked = e.target.checked;\n    const newValue = {\n      ...value,\n      [name]: checked\n    };\n    setValue(newValue);\n    const parentValue = [];\n    Object.entries(newValue).forEach(([name, checked]) => {\n      if (checked) parentValue.push(name);\n    });\n    onChange({target: {value: parentValue}});\n  }, [onChange, value]);\n\n  const classes = useStyles();\n  return (\n    <FormControl component=\"fieldset\" className={classes.formControl} error={props.error}>\n      <FormLabel required={required} component=\"legend\">{label}</FormLabel>\n      <FormGroup row>\n        {optionsArray.map(name =>\n          <FormControlLabel\n            key={name}\n            label={name}\n            control={<Checkbox color=\"primary\" checked={value[name]} onChange={handleChange(name)}/>}\n          />\n        )}\n      </FormGroup>\n      {helperText && <FormHelperText>{helperText}</FormHelperText>}\n    </FormControl>\n  );\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport {\n  InputLabel,\n  Select,\n  Input,\n  Chip,\n  MenuItem,\n  InputBase,\n  FormControl,\n  FormHelperText\n} from \"@material-ui/core\";\nimport { useTheme } from '@material-ui/core/styles';\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: 18,\n    paddingBottom: 8,\n    width: '100%',\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n    zIndex: 100000,\n  },\n  select: {\n    whiteSpace: 'initial',\n    minWidth: 326,\n    // minHeight: 36,\n  },\n  search: {\n    padding: 4,\n    paddingBottom: 6,\n    width: '80%',\n    verticalAlign: 'middle',\n  },\n  searchIcon: {\n    marginLeft: 16,\n    marginRight: 4,\n    fill: '#787878',\n    verticalAlign: 'middle',\n  },\n  options: {\n    overflow: 'auto',\n    maxHeight: '70vh',\n  }\n}));\n\nconst MenuProps = {\n  getContentAnchorEl: null,\n  anchorOrigin: {\n    vertical: \"bottom\",\n    horizontal: \"left\",\n  },\n  PaperProps: {\n    style: {\n      maxHeight: null,\n      minWidth: null,\n    },\n  },\n  MenuListProps: {\n    autoFocus: false\n  }\n};\n\nfunction getStyles(name, selected, theme) {\n  const isSelected = selected.indexOf(name) !== -1;\n  return {\n    fontWeight:\n      isSelected ? theme.typography.fontWeightMedium : theme.typography.fontWeightRegular,\n    background: isSelected ? '#ccc' : '',\n  };\n}\n\nexport default function Dropdown(props) {\n  // options is [value1, value2, ...]\n  const {options, label, value, onChange, helperText} = props;\n\n  const [values, setValues] = useState({\n    selected: value ? value : [],\n    filteredOptions: options ? [...options] : [],\n    searchValue: '',\n  });\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  const theme = useTheme();\n\n  useEffect(() => {\n    setValues(values => ({\n      ...values,\n      searchValue: '',\n      selected: [],\n      filteredOptions: options ? [...options] : []}))\n  }, [options]);\n\n  const handleChange = useCallback((name, value) => {\n    setValues(values => ({...values, [name]: value}));\n    if (name === 'selected' && onChange)\n      onChange({target: {value}});\n  }, [onChange]);\n\n  const handleItemClick = (value) => () => {\n    const index = values.selected.indexOf(value);\n    if (index === -1)\n      handleChange('selected', [...values.selected, value]);\n    else\n      handleDelete(value)();\n  };\n\n  const handleDelete = useCallback(removeValue => () => {\n    handleChange('selected', values.selected.filter(value => value !== removeValue));\n  }, [handleChange, values.selected]);\n\n  const handleSearch = useCallback(event => {\n    handleChange('searchValue', event.target.value);\n    let value = event.target.value || '';\n    value = value.toLowerCase();\n    const result = [];\n    for (let i = 0, l = options.length; i < l; i++) {\n      const option = options[i];\n      // search engine here\n      if (option.toLowerCase().includes(value))\n        result.push(option);\n    }\n    handleChange('filteredOptions', result);\n  }, [handleChange, options]);\n\n  const renderValue = useCallback((selected) => {\n    const values = [];\n    options.forEach(value => {\n      if (selected.indexOf(value) !== -1)\n        values.push(\n          <Chip key={value} label={value} className={classes.chip} onDelete={handleDelete(value)}/>)\n    });\n    return values;\n  }, [classes.chip, handleDelete, options]);\n\n  const renderMenu = () => {\n    return (\n      <div>\n        <SearchIcon className={classes.searchIcon}/>\n        <InputBase\n          autoFocus\n          className={classes.search}\n          placeholder=\"Search\"\n          value={values.searchValue}\n          onChange={handleSearch}\n          onKeyDown={e => {\n            e.stopPropagation()\n          }} // fix bugs\n        />\n        <div className={classes.options}>\n          {values.filteredOptions.map((value, index) => (\n              <MenuItem key={index} value={value} onClick={handleItemClick(value)}\n                        style={getStyles(value, values.selected, theme)}>\n                {value}\n              </MenuItem>\n            )\n          )}\n        </div>\n      </div>\n    )\n  };\n\n  return (\n    <div className={classes.root}>\n      <FormControl error={props.error}>\n        <InputLabel>{label}</InputLabel>\n        <Select\n          multiple\n          value={values.selected}\n          input={<Input/>}\n          renderValue={renderValue}\n          MenuProps={MenuProps}\n          classes={{select: classes.select}}\n          open={open}\n          onOpen={e => {\n            // do not open the select when click on the delete icon\n            const {tagName} = e.target;\n            if (tagName !== 'svg' && tagName !== 'path') {\n              setOpen(true);\n            }\n          }}\n          onClose={() => setOpen(false)}\n        >\n          {renderMenu()}\n        </Select>\n        {helperText && <FormHelperText>{helperText}</FormHelperText>}\n      </FormControl>\n    </div>\n  )\n}\n","import React from 'react';\n\nimport GeneralField from './fields/GeneralField';\nimport SelectField from './fields/SelectField';\nimport RadioField from './fields/RadioField';\nimport CheckboxField from './fields/CheckboxField';\nimport MultiSelectField from './fields/MultiSelectField';\n\nexport default function FieldGroup({ component, options, value, ...props }) {\n  if (component === 'GeneralField') {\n    return (\n      <GeneralField\n        {...props}\n        value={value}\n      />\n    );\n  }\n  else if (component === 'SelectField') {\n    return (\n      <SelectField\n        options={options}\n        {...props}\n        value={value}\n      />\n    );\n  }\n  else if (component === 'MultiSelectField') {\n    return (\n      <MultiSelectField\n        options={options}\n        value={value}\n        {...props}\n      />\n    );\n  }\n  else if (component === 'RadioField') {\n    return (\n      <RadioField\n        options={options}\n        value={value}\n        {...props}\n      />\n    );\n  }\n  // return null;\n  else if (component === 'CheckboxField') {\n    return (\n      <CheckboxField\n        options={options}\n        value={value}\n        {...props}\n      />\n    );\n  }\n  return <div>Unknown field {component}</div>;\n}\n","import {\n  recursiveAssign,\n  isFieldEmpty,\n  verifyAddressField,\n  validateAddressPostalCode,\n  validateContactFormat,\n  verifyFamilyFields,\n} from \"./index\";\n\n// Verify the params filled in client form\nexport function client_verify_form(form, steps) {\n  const format_messages = verifyFormFormat(form);\n  const required_field_msg = verifyRequiredField(form, steps);\n  return recursiveAssign(required_field_msg, format_messages);\n}\n\n/**\n * verify if every required field is filled in\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyRequiredField(form, steps) {\n  let result = {};\n  for (const step_page_fields of steps) {\n    // traverse each step page in steps\n    for (const [field, required] of Object.entries(step_page_fields)) {\n      if (required) {\n        if (field in form && isFieldEmpty(form[field])) {\n          //  key in form\n          result[field] = 'This field is required';\n        } else if (field in form.profile && isFieldEmpty(form.profile[field])) {\n          result[field] = 'This field is required';\n        } else if (field === 'family' && field in form) {\n          if (form[field].length === 0){\n            result['family'] = \"Please add at least one family member!\";\n          } else{\n            // Some fields in family are not filled in\n            result[field] = {}\n            verifyFamilyFields(form[field]['members'], result[field])\n            if (Object.entries(result[field]).length === 0) {\n              delete result[field];\n            }\n          }\n\n        } else if (field === 'address') {\n          result[field] = {};\n          verifyAddressField(form[field], result[field]);\n          if(Object.entries(result[field]).length === 0){\n            delete result[field];\n          }\n        }\n      }\n    }\n  }\n  return result\n}\n\n/**\n * verify format for various field\n * @param form\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyFormFormat(form) {\n  let result = {}\n  // Verify postal code\n  validateAddressPostalCode(form.address.postal_code, result, 'address')\n\n  // verify profile\n  if(form.profile){\n    validateContactFormat(form.profile, result)\n  }\n  return result;\n}\n","import React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport { useParams, useHistory } from 'react-router';\nimport { ACTION_SUCCESS } from '../../store/defaults.js';\nimport { clientFields } from '../../constants/client_fields.js'\nimport { defaultProfileFields, generateClientField } from '../../constants/default_fields.js'\n\n// redux\nimport { useDispatch } from 'react-redux';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { createClient, updateClient, fetchClient } from '../../store/actions/clientActions.js';\nimport { fetchEligibilities } from '../../api/eligibilityApi';\nimport { fetchClientFields } from '../../api/settingApi';\n\n// components\nimport LocationFieldGroup from '../shared/LocationFieldGroup';\nimport FamilyFields from './client_form/FamilyFields';\nimport FieldGroup from '../shared/FieldGroup';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Container } from '@material-ui/core';\nimport { Loading, FormStepper } from \"../shared\";\nimport { client_verify_form } from '../../helpers/client_verify_form.js';\n\nconst useStyles = makeStyles(theme => ({\n  content: {\n    width: '80%',\n    margin: 'auto',\n    paddingBottom: 10,\n  }\n}));\n\nexport default function ClientForm() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {id} = useParams();\n  const mode = id ? 'edit' : 'new';\n  const [state, setState] = useState({\n    loading: true,\n    languageOptions: [],\n    all_ngo_conditions: [],\n    stepNames: [],\n    steps: [],\n    client: null,\n    dispatchErrorMsg: [],\n    fieldErrorMsg: {},\n  });\n\n  // DO NOT store form as state, it degrades the performance as all form got rendered every time user type anything.\n  // Instead, for large form like this page, store the form as a variable and pass it to child components (input)\n  const form = useMemo(() => generateClientField(state.client), [state.client]);\n\n  // const [form, setForm] = useState(generateClientField());\n\n  useEffect(() => {\n    const promises = [];\n    promises.push(dispatch(fetchOntologyCategories('languages'))\n      .then(data => setState(state => ({...state, languageOptions: data}))));\n    promises.push(fetchEligibilities()\n      .then(data => {\n        setState(state => ({...state, all_ngo_conditions: data.map(data => data.title)}))\n      }));\n    promises.push(fetchClientFields()\n      .then(data => {\n        if (data == null || data.steps_order.length === 0\n          || Object.values(data.form_structure).length === 0) {\n          setState(state => ({...state, loading: true, dispatchErrorMsg: ['No fields are available.']}));\n        } else {\n          setState(state => ({\n            ...state,\n            stepNames: data.steps_order,\n            steps: Object.values(data.form_structure)\n          }));\n        }\n      }));\n    id && promises.push(dispatch(fetchClient(id))\n      .then(data => setState(state => ({...state, client: data}))));\n    Promise.all(promises).then(() => setState(state => ({...state, loading: false})));\n  }, [dispatch, id]);\n\n  const handleFinish = () => {\n    // TODO: pretty error message\n    const fieldErrorMsg = client_verify_form(form, state.steps);\n    if (Object.keys(fieldErrorMsg).length !== 0) {\n      setState(state => ({...state, fieldErrorMsg}));\n      return;\n    }\n    if (mode === 'edit') {\n      dispatch(\n        updateClient(id, form, (status, err, clientId) => {\n          if (status === ACTION_SUCCESS) {\n            history.push(`/clients/${clientId}`)\n          } else {\n            setState(state => ({...state, dispatchErrorMsg: [err.toString()]}));\n          }\n        })\n      );\n    } else {\n      dispatch(\n        createClient(form, (status, err, clientId) => {\n          if (status === ACTION_SUCCESS) {\n            history.push('/clients/' + clientId)\n          } else {\n            setState(state => ({...state, dispatchErrorMsg: [err.toString()]}));\n          }\n        }));\n\n    }\n  };\n\n  /**\n   * Handle changes in form\n   * @param name {string}\n   * @returns {Function}\n   */\n  const handleChange = useCallback(name => e => {\n    const {value} = e.target;\n    const splits = name.split('.');\n    if (splits.length === 1) {\n      form[name] = value;\n    } else {\n      let parent = form;\n      for (let i = 0; i < splits.length - 1; i++) {\n        parent = parent[splits[i]];\n      }\n      parent[splits[splits.length - 1]] = value || '';\n    }\n  }, [form]);\n\n  const getStepContent = idx => {\n    const step = state.steps[idx];\n    return <div className={classes.content}>\n      {Object.entries(step).map(([field, required]) => {\n        let options;\n        // console.log(field)\n        let errMsg = state.fieldErrorMsg[field];\n        if (field === 'first_language') {\n          options = state.languageOptions;\n        } else if (field === 'other_languages') {\n          options = state.languageOptions.filter(\n            category => category !== form.first_language)\n        } else if (field === 'ngo_conditions') {\n          options = state.all_ngo_conditions;\n        }\n\n        if (field === 'address') {\n          return (\n            <LocationFieldGroup\n              key=\"address\"\n              address={form.address}\n              required={required}\n              errMsg={errMsg}\n            />\n          );\n        } else if (field === 'family') {\n          return (\n            <FamilyFields\n              key=\"family\"\n              family={form.family}\n              clientId={id}\n              required={required}\n              errMsg={errMsg}\n            />\n          );\n        } else {\n          const isProfile = Object.keys(defaultProfileFields).includes(field);\n          return (\n            <FieldGroup\n              key={field}\n              label={clientFields[field].label}\n              type={clientFields[field].type}\n              component={clientFields[field].component}\n              value={isProfile ? form.profile[field] : form[field]}\n              onChange={handleChange(isProfile ? 'profile.' + field : field)}\n              required={required}\n              options={clientFields[field].options || options}\n              error={errMsg != null}\n              helperText={errMsg}\n            />\n          );\n        }\n      })}\n    </div>\n  };\n\n  if (state.loading)\n    return <Loading message={`Loading...`}/>;\n\n  return (\n    <Container>\n      <FormStepper\n        getStepContent={getStepContent}\n        handleFinish={handleFinish}\n        stepNames={state.stepNames}\n        error={state.dispatchErrorMsg}\n      />\n    </Container>\n  );\n}\n","import { deleteJson, getJson, postJson, putJson } from \"./index\";\n\nexport function createUser(params) {\n  return postJson('/users/', params);\n}\n\nexport function createUsers(params) {\n  // TODO: implement backend?\n  return postJson('/users/', {csv: params});\n}\n\nexport function updateUser(id, params) {\n  return putJson('/user/' + id + '/', params);\n}\n\nexport function fetchUser(id) {\n  return getJson('/user/' + id + '/');\n}\n\nexport function fetchUsers() {\n  return getJson('/users/');\n}\n\nexport function deleteUser(id, params, callback) {\n  const response = deleteJson('/user/' + id + '/');\n  if (response.status !== 204)\n    throw Error('Server does not return correct code.');\n}\n","import RadioField from \"../components/shared/fields/RadioField\";\nimport { Validator } from \"../helpers\";\nimport { defaultField } from \"./index\";\n\nexport const userFormFields = {\n  is_superuser: {\n    ...defaultField,\n    label: 'Admin?',\n    component: RadioField,\n    options: {Yes: true, No: false},\n    required: true,\n  },\n  username: {\n    ...defaultField,\n    label: 'Username',\n    required: true,\n  },\n  password: {\n    ...defaultField,\n    label: 'Password',\n    type: 'password',\n    required: true,\n    validator: Validator.password\n  },\n  first_name: {\n    ...defaultField,\n    label: 'First name',\n  },\n  last_name: {\n    ...defaultField,\n    label: 'Last name',\n  },\n  email: {\n    ...defaultField,\n    label: 'Email',\n    type: 'email',\n    validator: Validator.email,\n  },\n  primary_phone_number: {\n    ...defaultField,\n    label: 'Telephone',\n    validator: Validator.phone\n  },\n  alt_phone_number: {\n    ...defaultField,\n    label: 'Alternate phone number',\n    validator: Validator.phone\n  }\n};","import React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from \"react-router\";\n\nimport { defaultUserFields } from \"../../constants/default_fields\";\nimport { Button, Container, Typography } from \"@material-ui/core\";\nimport { userFormFields } from \"../../constants/userFields\";\nimport { fetchUser, updateUser, createUser } from \"../../api/userApi\";\nimport { Loading } from \"../shared\"\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { isFieldEmpty } from \"../../helpers\";\nimport { REQUIRED_HELPER_TEXT } from \"../../constants\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '80%'\n  },\n  button: {\n    marginTop: 12,\n    marginBottom: 12,\n  }\n}));\n\nexport default function UserForm() {\n  const classes = useStyles();\n  const history = useHistory();\n  const {id} = useParams();\n  const mode = id == null ? 'new' : 'edit';\n  const [state, setState] = useState({\n    form: {\n      ...defaultUserFields\n    },\n    errors: {},\n    loading: true,\n  });\n\n  useEffect(() => {\n    if (mode === 'edit') {\n      fetchUser(id).then(user => {\n        setState(state => ({\n          ...state,\n          form: {\n            ...state.form,\n            ...user\n          },\n          loading: false,\n        }))\n      })\n    } else\n      setState(state => ({...state, loading: false}));\n  }, [mode, id]);\n\n  /**\n   * @returns {boolean} true if valid.\n   */\n  const validate = () => {\n    const errors = {};\n    for (const [field, option] of Object.entries(userFormFields)) {\n      const isEmpty = isFieldEmpty(state.form[field]);\n      if (option.required && isEmpty) {\n        errors[field] = REQUIRED_HELPER_TEXT;\n      }\n      let msg;\n      if (!isEmpty && option.validator && (msg = option.validator(state.form[field]))) {\n        errors[field] = msg;\n      }\n    }\n    if (Object.keys(errors).length !== 0) {\n      setState(state => ({...state, errors}));\n      return false\n    }\n    return true;\n  };\n\n  const handleSubmit = async () => {\n    if (validate()) {\n      try {\n        if (mode === 'new') {\n          await createUser(state.form);\n          history.push('/users/');\n        } else {\n          await updateUser(id, state.form);\n          history.push('/users/' + id);\n        }\n      } catch (e) {\n        if (e.json) {\n          setState(state => ({...state, errors: e.json}));\n        }\n      }\n    }\n  };\n\n  if (state.loading)\n    return <Loading message={`Loading user form...`}/>;\n\n  return (\n    <Container className={classes.root}>\n      <Typography variant=\"h5\">\n        {mode === 'new' ? 'Create new user' : 'Edit user'}\n      </Typography>\n      {Object.entries(userFormFields).map(([field, option]) => {\n        return (\n          <option.component\n            key={field}\n            label={option.label}\n            type={option.type}\n            options={option.options}\n            value={state.form[field]}\n            required={option.required}\n            onChange={e => state.form[field] = e.target.value}\n            error={!!state.errors[field]}\n            helperText={state.errors[field]}\n          />\n        )\n      })}\n      <Button variant=\"contained\" color=\"primary\" className={classes.button} onClick={handleSubmit}>\n        Submit\n      </Button>\n    </Container>\n  )\n}","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport GeneralField from '../shared/fields/GeneralField'\nimport SelectField from '../shared/fields/SelectField'\nimport MultiSelectField from '../shared/fields/MultiSelectField';\nimport { newMultiSelectFieldValue } from '../../helpers/select_field_helpers';\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { createClientNeed, updateClientNeed } from '../../store/actions/needActions.js'\n\nimport { Button, Form, FormGroup, FormLabel, Col, Row } from 'react-bootstrap';\n\nclass NeedForm extends Component {\n  constructor(props) {\n    super(props);\n    let need = {};\n\n    if (this.props.match.params.need_id) {\n      need = this.props.needsById[this.props.match.params.need_id]\n    }\n\n    this.state = {\n      needId: need.id,\n      mode: (need.id) ? 'edit' : 'new',\n      form: {\n        type: need.type || undefined,\n        category: need.category || '',\n        description: need.description || '',\n        needed_by: need.needed_by || '',\n        condition: need.condition || '',\n        status: need.status || '',\n        is_urgent: need.is_urgent || false,\n        languages: need.languages || []\n      }\n    }\n\n    this.formValChange = this.formValChange.bind(this);\n    this.submit = this.submit.bind(this);\n    this.handleMultiSelectChange = this.handleMultiSelectChange.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.dispatch(fetchOntologyCategories('needs'));\n  }\n\n  formValChange(e, id=e.target.id, value=e.target.value) {\n    let nextForm = {...this.state.form, [id]: value};\n    this.setState({ form: nextForm });\n  }\n\n  handleMultiSelectChange(id, selectedOption, actionMeta) {\n    const preValue = this.state.form[id]\n    const newValue = newMultiSelectFieldValue(preValue, selectedOption, actionMeta)\n\n    this.setState({\n      form: {\n        ...this.state.form,\n        [id]: newValue\n      }\n    });\n  }\n\n  submit() {\n    if (this.state.mode === 'edit') {\n      this.props.dispatch(updateClientNeed(this.props.clientId, this.state.needId, this.state.form));\n    } else {\n      this.props.dispatch(createClientNeed(this.props.clientId, this.state.form));\n    }\n    this.props.history.push(`/clients/${this.props.clientId}`)\n  }\n\n  render() {\n    const p = this.props;\n    const formTitle = (this.state.mode === 'edit') ? 'Edit Need' : 'Create Need'\n\n    if (this.state.form.type === undefined) {\n      return (\n        <div className=\"outer\">\n          <div className=\"middle\">\n            <div className=\"need-type-buttons\">\n              <Button onClick={e => this.formValChange(e, 'type', 'Good')}>\n                Goods\n              </Button>\n              <Button onClick={e => this.formValChange(e, 'type', 'Service')}>\n                Service\n              </Button>\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <Row className=\"content\">\n          <Col sm={12}>\n            <h3>{formTitle}</h3>\n            <hr />\n          </Col>\n          <Col sm={12}>\n            <Form horizontal>\n              <FormGroup controlId=\"type\">\n                <Col componentClass={FormLabel} sm={3}>\n                  Type\n                </Col>\n                <Col sm={9}>\n                  <div className=\"need-type\">\n                    {this.state.form.type}\n                  </div>\n                </Col>\n              </FormGroup>\n              <FormGroup controlId=\"is_urgent\">\n                <Col componentClass={FormLabel} sm={3}>\n                  Urgent?\n                </Col>\n                <Col sm={9}>\n                  <Form.Check\n                    name=\"radioGroup\"\n                    value=\"1\"\n                    onChange={e => this.formValChange(e, 'is_urgent')}\n                    defaultChecked={this.state.form.is_urgent === true}\n                    type=\"radio\"\n                    inline\n                  >\n                    Yes\n                  </Form.Check>{' '}\n                  <Form.Check\n                    name=\"radioGroup\"\n                    value=\"0\"\n                    onChange={e => this.formValChange(e, 'is_urgent')}\n                    defaultChecked={this.state.form.is_urgent === false}\n                    type=\"radio\"\n                    inline\n                  >\n                    No{this.state.form.is_urgent === false}\n                  </Form.Check>{' '}\n                </Col>\n              </FormGroup>\n              <SelectField\n                label=\"Category\"\n                options={p.needsCategories}\n                value={this.state.form.category}\n                onChange={e => this.formValChange(e, 'category')}\n                required = {true}\n              />\n              <GeneralField\n                label=\"Needed By\"\n                type=\"date\"\n                value={this.state.form.needed_by}\n                onChange={e => this.formValChange(e, 'needed_by')}\n              />\n              <MultiSelectField\n                label=\"Languages\"\n                options={p.languagesCategories}\n                value={this.state.form.languages}\n                onChange={e => this.handleMultiSelectChange(e, null, null)}\n              />\n              <GeneralField\n                label=\"Description\"\n                value={this.state.form.description}\n                onChange={e => this.formValChange(e, 'description')}\n                required={true}\n                multiline = {true}\n                fullWidth = {true}\n              />\n              {this.state.form.type === 'Good' &&\n                <GeneralField\n                  label=\"Condition\"\n                  type=\"textarea\"\n                  value={this.state.form.condition}\n                  onChange={e => this.formValChange(e, 'condition')}\n                />\n              }\n              <FormGroup>\n                <Col smOffset={3} sm={9}>\n                  <Button onClick={this.submit}>\n                    Submit\n                  </Button>\n                </Col>\n              </FormGroup>\n            </Form>\n          </Col>\n        </Row>\n      );\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    needsById: state.needs.byId,\n    clientId: state.needs.clientId,\n    needsCategories: state.ontology.needs.categories,\n    languagesCategories: state.ontology.languages.categories,\n    categoriesLoaded: state.ontology.needs.loaded\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(withRouter(NeedForm));\n","import _ from 'lodash';\n\nexport function newMultiSelectFieldValue(preValue,\n                                         selectedOption,\n                                         actionMeta) {\n  let newValue;\n  switch (actionMeta.action) {\n    case 'pop-value':\n    case 'remove-value':\n       _.remove(preValue, (value) => {\n        return value === actionMeta.removedValue.value\n      });\n      newValue = preValue\n      break;\n    case 'clear':\n      newValue = []\n      break;\n    default:\n      preValue.push(actionMeta.option.value)\n      newValue = preValue\n  }\n  return newValue;\n}\n","import React, { Component } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport GeneralField from '../shared/fields/GeneralField';\nimport SelectField from '../shared/fields/SelectField';\n\n// redux\nimport { connect } from 'react-redux'\nimport { createAppointment } from '../../store/actions/appointmentActions.js'\n\nclass AppointmentModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      form: {\n        'type': '',\n        'category': '',\n        'status': '',\n        'description': '',\n        'date': '',\n        'start_time': '',\n        'end_time': '',\n        'reminder_type': '',\n        'reminder_frequency': '',\n      }\n    };\n\n    this.formValChange = this.formValChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit() {\n    let form = Object.assign({}, this.state.form);\n    form['service_id'] = this.props.serviceId;\n    form['client_id'] = this.props.clientId;\n\n    this.props.dispatch(\n      createAppointment(form, (status, err, appointment) => {\n        this.props.onHide()\n      })\n    );\n  }\n\n  formValChange(e, id=e.target.id) {\n    let nextForm = { ...this.state.form, [id]: e.target.value };\n    this.setState({ form: nextForm });\n  }\n\n  render() {\n    return (\n      <Modal\n        show={this.props.show}\n        onHide={this.props.onHide}\n        bsSize=\"large\"\n        aria-labelledby=\"contained-modal-title-sm\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-sm\">\n            Appointment\n            {this.state.form.service_id}\n            {this.state.form.provider_id}\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form horizontal>\n            <SelectField\n              id=\"type\"\n              label=\"Type\"\n              options={['External', 'Internal']}\n              componentClass=\"select\"\n              value={this.state.form.type}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"category\"\n              label=\"Category\"\n              type=\"text\"\n              value={this.state.form.category}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"status\"\n              label=\"Status\"\n              type=\"text\"\n              value={this.state.form.status}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"description\"\n              label=\"Description\"\n              type=\"text\"\n              value={this.state.form.description}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"date\"\n              label=\"Date\"\n              type=\"date\"\n              value={this.state.form.date}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"start_time\"\n              label=\"Start Time\"\n              type=\"time\"\n              value={this.state.form.start_time}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"end_time\"\n              label=\"End Time\"\n              type=\"time\"\n              value={this.state.form.end_time}\n              onChange={this.formValChange}\n              required\n            />\n            <SelectField\n              id=\"reminder_type\"\n              label=\"Reminder Type\"\n              options={['Email', 'Text', 'Phone']}\n              componentClass=\"select\"\n              value={this.state.form.reminder_type}\n              onChange={this.formValChange}\n            />\n            <GeneralField\n              id=\"reminder_frequency\"\n              label=\"Reminder Frequecy\"\n              type=\"text\"\n              value={this.state.form.reminder_frequency}\n              onChange={this.formValChange}\n            />\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.handleSubmit}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default connect()(AppointmentModal);\n","import fetch from 'isomorphic-fetch';\nimport { serverHost, ACTION_SUCCESS, ACTION_ERROR } from '../defaults.js';\n\n\nexport function createAppointment(params, callback) {\n  return dispatch => {\n    const url = serverHost + '/appointments/';\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n      }\n    })\n    .then(async(response) => {\n      if (response.status === 201) {\n        return response.json()\n      }\n      else {\n        const error = await response.json()\n        throw new Error(JSON.stringify(error))\n      }\n    })\n    .then(appointment => {\n      callback(ACTION_SUCCESS, null, appointment);\n    }).catch(err => {\n      callback(ACTION_ERROR, err);\n    })\n  }\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport AppointmentModal from '../appointments/AppointmentModal';\nimport { matchStatusOptions } from '../../store/defaults.js';\nimport { updateMatchStatus, createMatchNote } from '../../store/actions/needActions.js'\n\nimport { Col, Accordion, Card, Form, FormGroup, FormLabel,\n  FormControl, Button } from 'react-bootstrap';\n\nclass MatchedServices extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeKey: null,\n      matchStatusForm: {},\n      noteForm: {},\n      modalShow: false,\n      appointmentServiceId: null\n    }\n\n    this.handleSelect = this.handleSelect.bind(this);\n\n    this.matchStatusChange = this.matchStatusChange.bind(this);\n    this.textAreaChange = this.textAreaChange.bind(this);\n    this.submitMatchStatus = this.submitMatchStatus.bind(this);\n    this.submitNote = this.submitNote.bind(this);\n\n    this.handleModalHide = this.handleModalHide.bind(this);\n    this.handleModalShow = this.handleModalShow.bind(this);\n  }\n\n  submitMatchStatus(matchId) {\n    this.props.dispatch(updateMatchStatus(matchId, this.state.matchStatusForm[matchId]));\n  }\n\n  submitNote(matchId) {\n    let form = {...this.state.noteForm[matchId], object_id: matchId, model: 'match' }\n    this.props.dispatch(createMatchNote(form));\n  }\n\n  matchStatusChange(e, matchId) {\n    const nextForm = { ...this.state.matchStatusForm, [matchId]: { status: e.target.value }}\n    this.setState({\n      matchStatusForm: nextForm\n    });\n  }\n\n  textAreaChange(e, matchId) {\n    const nextForm = { ...this.state.noteForm, [matchId]: { text: e.target.value }}\n    this.setState({\n      noteForm: nextForm\n    });\n  }\n\n  handleModalHide() {\n    this.setState({ modalshow: false });\n  }\n\n  handleModalShow(serviceId) {\n    this.setState({\n      modalshow: true,\n      appointmentServiceId: serviceId\n    })\n  }\n\n  handleSelect(activeKey) {\n    this.setState({\n      activeKey: activeKey,\n    });\n  }\n\n  render() {\n    const matches = this.props.matches;\n    return (\n      <div>\n        <Col sm={12}>\n          <h3>Matched Services</h3>\n        </Col>\n        <Col sm={12}>\n          <Accordion\n            id=\"accordion\"\n            activeKey={this.state.activeKey}\n          >\n            {\n              _.map(matches, (match, index) => {\n                return (\n                  <Card key={match.id} eventKey={match.id} bsStyle=\"info\">\n                    <Card.Header onClick={() => this.handleSelect(index)}>\n                      <Col sm={11}>\n                        <Card.Title toggle>\n                          {index+1}. {match.service.name}\n                          {' '}\n                        </Card.Title>\n                      </Col>\n                      <Form.Label bsStyle=\"primary\">\n                        {match.status}\n                      </Form.Label>\n                    </Card.Header>\n                    <Accordion.Collapse eventKey={index}>\n                      <Card.Body collapsible>\n                        <Col sm={8}>\n                          <FormGroup controlId=\"match_status\">\n                            <Col componentClass={FormLabel} sm={3}>\n                              Status\n                            </Col>\n                            <Col sm={6}>\n                              <FormControl\n                                componentClass=\"select\"\n                                placeholder=\"select\"\n                                defaultValue={match.status}\n                                onChange={e => this.matchStatusChange(e, match.id)}\n                              >\n                                <option value=\"select\">--- Not Set ---</option>\n                                {matchStatusOptions.map(status =>\n                                  <option key={status} value={status}>{status}</option>\n                                )}\n                              </FormControl>\n                            </Col>\n                            <Col sm={3}>\n                              <Button\n                                disabled={this.state.activeKey !== match.id || !this.state.matchStatusForm[match.id]}\n                                onClick={e => this.submitMatchStatus(match.id)}\n                              >\n                                Update Status\n                              </Button>\n                            </Col>\n                          </FormGroup>\n                          <Form.Label className='note-form'>\n                            <FormGroup controlId=\"notes\">\n                              <Col componentClass={FormLabel} sm={3}>\n                                Notes\n                              </Col>\n                              <Col sm={9}>\n                                {\n                                  _.map(match.notes, (note, index) => {\n                                    return (\n                                      <div key={index}>\n                                        {note}\n                                      </div>\n                                    )\n                                  })\n                                }\n                                <FormControl\n                                  componentClass=\"textarea\"\n                                  onChange={e => this.textAreaChange(e, match.id)}\n                                />\n                              </Col>\n                            </FormGroup>\n                            <FormGroup>\n                              <Col smOffset={3} sm={9}>\n                                <Button\n                                  disabled={this.state.activeKey !== match.id || !this.state.noteForm[match.id]}\n                                  onClick={e => this.submitNote(match.id)}\n                                >\n                                  Add Note\n                                </Button>\n                              </Col>\n                            </FormGroup>\n                          </Form.Label>\n                          <Button bsStyle=\"default\"  onClick={e => this.handleModalShow(match.service.id)}>\n                            Add appointment\n                          </Button>\n                        </Col>\n                        <Col sm={4}>\n                          <Link to={`/service/${match.service.id}`} target=\"_blank\">\n                            <h5>View Service Detail</h5>\n                          </Link>\n                          <Link to={`/provider/${match.service.provider.id}`} target=\"_blank\">\n                            <h5>View Provider Detail</h5>\n                          </Link>\n                        </Col>\n                      </Card.Body>\n                    </Accordion.Collapse>\n                  </Card>\n                )\n              })\n            }\n          </Accordion>\n        </Col>\n        <AppointmentModal\n          clientId={this.props.clientId}\n          serviceId={this.state.appointmentServiceId}\n          show={this.state.modalshow}\n          onHide={this.handleModalHide}\n        />\n      </div>\n    )\n  }\n}\n\nexport default connect()(withRouter(MatchedServices));\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { formatLocation } from '../../helpers/location_helpers'\n\nimport { connect } from 'react-redux'\nimport { ListGroupItem, Row, Col, Button } from 'react-bootstrap';\nimport { matchClientNeed } from '../../store/actions/needActions.js'\nimport { Typography } from \"@material-ui/core\";\n\nclass ServiceListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  submit(needId, serviceId) {\n    const form = {\n      service_id: serviceId\n    }\n    this.props.dispatch(\n      matchClientNeed(needId, form)\n    );\n  }\n\n  render() {\n    const service = this.props.service,\n          needId = this.props.needId,\n          label = this.props.label;\n\n    return (\n      <ListGroupItem className=\"recommended-service\">\n        <Row>\n          <Col sm={8}>\n            <h5>{label}.</h5>\n            <Link to={`/service/${service.id}`}>\n              <h5>{service.name}</h5>\n            </Link>\n            <Typography>{service.category}</Typography>\n            {' '}\n            <Typography>{Math.round(service.distance * 100) / 100} km</Typography>\n            <p>{service.desc}</p>\n            <p>{formatLocation(service.location)}</p>\n          </Col>\n          <Col sm={4}>\n            <h5>Provider</h5>\n            <Typography color=\"primary\">{service.provider.type}</Typography>\n            <Link to={`/provider/${service.provider.id}`}>\n              { (service.provider.type === \"Individual\") ? (\n                  <p>{`${service.provider.profile.first_name} ${service.provider.profile.last_name}`}</p>\n                ) : (\n                  <p>{service.provider.company}</p>\n                )\n              }\n            </Link>\n          </Col>\n          <Col sm={12}>\n            <Button bsStyle=\"default\" onClick={e => this.submit(needId, service.id)}>\n              Select\n            </Button>\n          </Col>\n        </Row>\n      </ListGroupItem>\n    )\n  }\n}\n\nexport default connect()(withRouter(ServiceListItem));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { withGoogleMap, GoogleMap, Marker } from 'react-google-maps';\nimport ServiceListItem from './ServiceListItem';\n\nimport { Row, Col } from 'react-bootstrap';\n\n\nconst GMap = withGoogleMap(props => (\n  <GoogleMap\n    zoom={10}\n    center={props.latlng}>\n    {_.map(props.services, (service, index) => {\n      return (\n        <Marker\n          key={service.id}\n          label={(index+1).toString()}\n          position={{ lat: parseFloat(service.location.lat), lng: parseFloat(service.location.lng)}}\n        />\n      )\n    })}\n  </GoogleMap>\n));\n\nexport default function ServiceList({ need, services, latlng }) {\n  return (\n    <Row>\n      <Col sm={8}>\n        {_.map(services, (service, index) => {\n          return (\n            <ServiceListItem\n              key={service.id}\n              needId={need.id}\n              label={index+1}\n              service={service}\n            />\n          )\n        })}\n      </Col>\n      <Col sm={4}>\n        <div style={{ width: '100%', height: '400px' }}>\n          <GMap\n            containerElement={\n              <div style={{ height: `100%` }} />\n            }\n            mapElement={\n              <div style={{ height: `100%` }} />\n            }\n            latlng={latlng}\n            services={services}\n          />\n        </div>\n      </Col>\n    </Row>\n  )\n}\n","import React, { Component } from 'react';\n\nimport { Col, Form, FormGroup, InputGroup, Button, FormControl } from 'react-bootstrap';\n\n\nexport default class ServiceSearchBar  extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      queryTerm: '',\n      location: props.location.street_address\n    }\n\n    this.handleFormValChange = this.handleFormValChange.bind(this);\n  }\n\n  handleFormValChange(e, id=e.target.id) {\n    this.setState({ [id] : e.target.value });\n  }\n\n  render() {\n    return (\n      <Form horizontal>\n        <FormGroup>\n          <Col sm={12}>\n            <InputGroup>\n              {this.props.enableQueryTerm &&\n                <InputGroup.Addon>Find</InputGroup.Addon>\n              }\n              {this.props.enableQueryTerm &&\n                <FormControl\n                  type=\"text\"\n                  value={this.state.queryTerm}\n                  onChange={e => this.handleFormValChange(e, 'queryTerm')}\n                  placeholder=\"Dental service, language class...\"\n                />\n              }\n              <InputGroup.Addon>Near</InputGroup.Addon>\n              <FormControl\n                type=\"text\"\n                value={this.state.location}\n                onChange={e => this.handleFormValChange(e, 'location')}\n              />\n              <InputGroup.Button>\n                {this.props.enableQueryTerm ? (\n                  <Button\n                    onClick={e => this.props.search(this.state.queryTerm, this.state.location)}\n                  >\n                    Search\n                  </Button>\n                ) : (\n                  <Button\n                    onClick={e => this.props.search(this.state.location, this.props.needId)}\n                  >\n                    Search\n                  </Button>\n                )}\n              </InputGroup.Button>\n            </InputGroup>\n          </Col>\n        </FormGroup>\n      </Form>\n    );\n  }\n};\n","import React, { Component } from 'react';\nimport TR from '../shared/TR';\n\nimport { torontoCoordinates, serverHost } from '../../store/defaults.js';\n\nimport MatchedServices from './MatchedServices';\nimport ServiceList from './ServiceList';\nimport ServiceSearchBar from './ServiceSearchBar';\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchNeed } from '../../store/actions/needActions.js'\n\nimport { Container, Row, Col, Table, Tabs, Tab } from 'react-bootstrap';\n// import { Grid, Table, Tabs, Tab } from \"@material-ui/core\";\n// import { Col, Label, Row} from 'react-bootstrap';\n// import SearchTabs from './NeedSearchTabs'\n\n// import PropTypes from 'prop-types';\n// import { makeStyles } from '@material-ui/core/styles';\n// import AppBar from '@material-ui/core/AppBar';\n// import { Typography } from '@material-ui/core';\n// import Box from '@material-ui/core/Box';\n\n\nclass Need extends Component {\n  constructor(props) {\n    super(props);\n\n    const need = props.needsById[props.match.params.need_id];\n    this.state = {\n      searchResult: [],\n      location: props.client.address ? { lat: parseFloat(props.client.address.lat), lng: parseFloat(props.client.address.lng) }: torontoCoordinates,\n      recommendedServices: (need && need.recommended_services) || []\n    }\n\n    this.handleSearchService = this.handleSearchService.bind(this);\n    this.handleSearchRecommendedServices = this.handleSearchRecommendedServices.bind(this);\n  }\n\n  componentWillMount() {\n    const id = this.props.match.params.need_id\n    this.props.dispatch(fetchNeed(id, need => {\n      this.setState({ recommendedServices: need.recommended_services })\n    }));\n  }\n\n  handleSearchService(queryTerm, location) {\n    const url = serverHost + '/services/search?query_term=' + queryTerm + '&location=' + location;\n    fetch(url, {\n        method: 'get',\n        headers: new Headers({\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        }),\n      })\n      .then(response => response.json())\n      .then(json => {\n        this.setState({ searchResult: json.data, location: json.location })\n      }\n    );\n  }\n\n  handleSearchRecommendedServices(location, needId) {\n    const url = serverHost + '/needs/' + needId + '/recommended_services?location=' + location;\n    fetch(url, {\n        method: 'get',\n        headers: new Headers({\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        }),\n      })\n      .then(response => response.json())\n      .then(json => {\n        this.setState({ recommendedServices: json.data, location: json.location })\n      }\n    );\n  }\n\n  render() {\n    const p = this.props,\n          id = p.match.params.need_id,\n          need = p.needsById[id],\n          client = p.client\n\n    function DeletedLabel({ is_deleted }) {\n      if (is_deleted) {\n        return (\n          <h4>\n            <div style={{color: 'rgb(213,87,79)'}}>Deleted</div>\n          </h4>\n        );\n      } else {\n        return null;\n      }\n    }\n\n    function UrgentLabel({ is_urgent }) {\n      if (is_urgent) {\n        return (\n          <h4>\n            <div style={{color: 'rgb(213,87,79)'}}>Urgent</div>\n          </h4>\n        );\n      } else {\n        return null;\n      }\n    }\n\n    // function TabPanel(props) {\n    //   const { children, value, index, ...other } = props;\n    \n    //   return (\n    //     <div\n    //       role=\"tabpanel\"\n    //       hidden={value !== index}\n    //       id={`simple-tabpanel-${index}`}\n    //       aria-labelledby={`simple-tab-${index}`}\n    //       {...other}\n    //     >\n    //       {value === index && (\n    //         <Box p={3}>\n    //           <Typography>{children}</Typography>\n    //         </Box>\n    //       )}\n    //     </div>\n    //   );\n    // }\n    \n    // TabPanel.propTypes = {\n    //   children: PropTypes.node,\n    //   index: PropTypes.any.isRequired,\n    //   value: PropTypes.any.isRequired,\n    // };\n    \n    // function a11yProps(index) {\n    //   return {\n    //     id: `simple-tab-${index}`,\n    //     'aria-controls': `simple-tabpanel-${index}`,\n    //   };\n    // }\n    \n    // const useStyles = makeStyles((theme) => ({\n    //   root: {\n    //     flexGrow: 1,\n    //     backgroundColor: theme.palette.background.paper,\n    //   },\n    // }));\n    \n    // function SearchTabs() {\n    //   const classes = useStyles();\n    //   const [value, setValue] = React.useState(0);\n    \n    //   const handleChange = (event, newValue) => {\n    //     setValue(newValue);\n    //   };\n    \n    //   return (\n    //     <div className={classes.root}>\n    //       <AppBar position=\"static\">\n    //         <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\n    //           <Tab label=\"Recommended Services\" {...a11yProps(0)} />\n    //           <Tab label=\"Search for Services\" {...a11yProps(1)} />\n    //         </Tabs>\n    //       </AppBar>\n    //       <TabPanel value={value} index={0}>\n    //         recommended_services\n    //       </TabPanel>\n    //       <TabPanel value={value} index={1}>\n    //         Search for Services content\n    //       </TabPanel>\n    //     </div>\n    //   );\n    // }\n\n    // return (\n      \n    //   <Grid className=\"content\">\n    //     { need && need.loaded &&\n    //     <React.Fragment>\n    //       <Grid container>\n    //         <DeletedLabel is_deleted={need.is_deleted} />\n    //         <UrgentLabel is_urgent={need.is_urgent} />\n    //         <Table striped bordered condensed hover>\n    //           <tbody>\n    //             <TR\n    //               title=\"Type\"\n    //               value={need.type + need.matches.length}\n    //             />\n    //             <TR\n    //               title=\"Category\"\n    //               value={need.category}\n    //             />\n    //             <TR\n    //               title=\"Needed By\"\n    //               value={need.needed_by}\n    //             />\n    //             <TR\n    //               title=\"Description\"\n    //               value={need.description}\n    //             />\n    //             <TR\n    //               title=\"Condition\"\n    //               value={need.condition}\n    //             />\n    //             <TR\n    //               title=\"Status\"\n    //               value={need.status}\n    //             />\n    //             <TR\n    //               title=\"Languages\"\n    //               value={(need.languages || []).join(', ')}\n    //             />\n    //           </tbody>\n    //         </Table>\n    //       </Grid>\n    //       <div>\n    //       {(need.matches.length > 0) &&\n    //         <MatchedServices\n    //           clientId={client.id}\n    //           matches={need.matches}\n    //         />\n    //       }\n    //       </div>\n    //       <Grid container>\n    //         <SearchTabs />\n    //       </Grid>\n    //     </React.Fragment>\n    //     }\n    //   </Grid>\n    // )\n\n    return (\n      <Container className=\"content\">\n        { need && need.loaded &&\n          <Row>\n            <Col sm={12}>\n              <h3>Need</h3>\n            </Col>\n            <Col sm={12}>\n              <DeletedLabel is_deleted={need.is_deleted} />\n              <UrgentLabel is_urgent={need.is_urgent} />\n              <Table striped bordered condensed hover>\n                <tbody>\n                  <TR\n                    title=\"Type\"\n                    value={need.type}\n                  />\n                  <TR\n                    title=\"Category\"\n                    value={need.category}\n                  />\n                  <TR\n                    title=\"Needed By\"\n                    value={need.needed_by}\n                  />\n                  <TR\n                    title=\"Description\"\n                    value={need.description}\n                  />\n                  <TR\n                    title=\"Condition\"\n                    value={need.condition}\n                  />\n                  <TR\n                    title=\"Status\"\n                    value={need.status}\n                  />\n                  <TR\n                    title=\"Languages\"\n                    value={(need.languages || []).join(', ')}\n                  />\n                </tbody>\n              </Table>\n            </Col>\n            {(need.matches.length > 0) &&\n              <MatchedServices\n                clientId={client.id}\n                matches={need.matches}\n              />\n            }\n            <Col sm={12}>\n              <Tabs defaultActiveKey={1} id=\"serviceList\">\n                <Tab eventKey={1} title=\"RecommendedServices\">\n                  <ServiceSearchBar\n                    search={this.handleSearchRecommendedServices}\n                    location={client.address}\n                    needId={need.id}\n                  />\n                  {need.recommended_services && need.recommended_services.length > 0 &&\n                    <ServiceList\n                      need={need}\n                      services={this.state.recommendedServices}\n                      latlng={this.state.location}\n                    />\n                  }\n                </Tab>\n                <Tab eventKey={2} title=\"Search for Services\">\n                  <ServiceSearchBar\n                    search={this.handleSearchService}\n                    location={client.address}\n                    enableQueryTerm\n                  />\n                  {this.state.searchResult && this.state.searchResult.length > 0 &&\n                    <ServiceList\n                      need={need}\n                      services={this.state.searchResult}\n                      latlng={this.state.location}\n                    />\n                  }\n                </Tab>\n              </Tabs>\n            </Col>\n          </Row>\n        }\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    needsById: state.needs.byId,\n    client: state.clients.byId[state.needs.clientId]\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Need);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst PrivateRoute = ({ component: Component, isLoggedin, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      isLoggedin === true ? (\n        <Component {...props} />\n      ) : (\n        <Redirect to=\"/login-pane\" />\n      )\n    }\n  />\n);\n\nconst mapStateToProps = (state) => {\n  return {\n    isLoggedin: state.auth.isLoggedin\n  }\n}\n\nexport default connect(mapStateToProps)(PrivateRoute);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst AdminRoute = ({ component: Component, isLoggedin, isAdmin, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      (isLoggedin === true && isAdmin === true) ? (\n        <Component {...props} />\n      ) : (\n        <Redirect to=\"/login-pane\" />\n      )\n    }\n  />\n);\n\nconst mapStateToProps = (state) => {\n  return {\n    isAdmin: state.auth.currentUser && state.auth.currentUser.is_admin,\n    isLoggedin: state.auth.isLoggedin\n  }\n}\n\nexport default connect(mapStateToProps) (AdminRoute);\n","import React from 'react';\n// TODO: createProviderWithCSV  (CSV Upload)\nimport { fetchProviders, deleteProvider } from '../store/actions/providerActions.js'\n\nimport { formatLocation } from '../helpers/location_helpers'\nimport { formatPhoneNumber } from '../helpers/phone_number_helpers'\n\nimport { GenericPage, Link } from \"./shared\";\n\nconst TYPE = 'providers';\n\nconst formatProviderName = provider => {\n  const {profile} = provider;\n  if (provider.type === 'Individual')\n    return profile && profile.first_name + \" \" + profile.last_name;\n  else\n    return provider.company;\n};\n\n// mui-table column configurations\n// TODO: Add custom print function for address\nconst columnsWithoutOptions = [\n  {\n    name: 'id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'company',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'profile',\n    label: 'Name',\n    options: {\n      sort: true,\n      customBodyRender: (profile, {rowData}) => {\n        return (\n          <Link color to={`/${TYPE}/${rowData[0]}`}>\n            {formatProviderName({\n              company: rowData[1],\n              type: rowData[3],\n              profile,\n            })}\n          </Link>\n        );\n      }\n    }\n  },\n  {\n    name: 'type',\n    label: 'Type',\n    options: {\n      sort: true,\n    }\n  },\n  {\n    name: 'profile.email',\n    label: 'Email',\n  },\n  {\n    name: 'profile.primary_phone_number',\n    label: 'Phone Number',\n    options: {\n      customBodyRender: data => {\n        if (data)\n          return formatPhoneNumber(data);\n        return 'Not Provided';\n      },\n    },\n  },\n\n  {\n    name: 'main_address',\n    label: 'Address',\n    options: {\n      sort: false,\n      customBodyRender: data => {\n        if (data)\n          return formatLocation(data);\n        return 'Not Provided';\n      },\n    },\n  },\n];\n\nexport default function Providers() {\n\n  const generateMarkers = (data, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    const currPageProviders = data.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage);\n    return currPageProviders.map(provider => ({\n      position: {lat: Number(provider.main_address.lat), lng: Number(provider.main_address.lng)},\n      title: formatProviderName(provider),\n      link: `/${TYPE}/${provider.id}`,\n      content: provider.main_address && formatLocation(provider.main_address),\n    })).filter(provider => provider.position.lat && provider.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchProviders}\n      deleteItem={deleteProvider}\n      generateMarkers={generateMarkers}\n      nameFormatter={formatProviderName}\n    />\n  )\n}\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Button } from 'react-bootstrap';\n\nexport default class AddServicePrompt extends Component {\n  render() {\n    return(\n      <Row className=\"content\">\n        <Col sm={12}>\n          <h2>Would you like to add a service for this provider?</h2>\n          <hr />\n          <Link to=\"/service/new\">\n            <Button bsStyle=\"default\">\n              Yes\n            </Button>\n          </Link>{' '}\n          <Link to=\"/providers\">\n            <Button bsStyle=\"default\">\n              No\n            </Button>\n          </Link>\n        </Col>\n      </Row>\n    )\n  }\n}\n","import { recursiveAssign, isFieldEmpty, isAvailabilityEmpty, verifyAddressField,\n  verifyOtherAddressesFields, validateAddressPostalCode, validateContactFormat,\n  verifyEmail, verifyPhoneNumber} from \"./index\";\n\n\n// Verify the params filled in client form\nexport function provider_verify_form(form, steps) {\n  const format_messages = verifyFormFormat(form);\n  // const format_messages = {}\n  const required_field_msg = verifyRequiredField(form, steps);\n  return recursiveAssign(required_field_msg, format_messages);\n}\n\n/**\n * verify if every required field is filled in\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyRequiredField(form, steps) {\n  let result = {};\n  for (const step_page_fields of steps) {\n    // traverse each step page in steps\n    for (const [field, required] of Object.entries(step_page_fields)) {\n      if (required) {\n        if (field === 'availability' && isAvailabilityEmpty(form['operation_hours'])) {\n          result['availability'] = \"Please fill in at least one availability time slot!\";\n        } else if (field === 'main_address') {\n          result[field] = {};\n          verifyAddressField(form[field], result[field]);\n          if (Object.entries(result[field]).length === 0) {\n            delete result[field];\n          }\n        } else if (field === 'other_addresses') {\n          if (form[field].length === 0) {\n            // The user did not create an other address\n            result[field] = \"Please create at least one other address form!\"\n          } else {\n            // Some fields in other address are not filled in\n            result[field] = {};\n            verifyOtherAddressesFields(form[field], result[field])\n            if (Object.entries(result[field]).length === 0) {\n              delete result[field];\n            }\n          }\n        } else if (field === \"primary_contact\"){\n          verifyContactEmptiness(field, form, result, 'primary_contact')\n        } else if (field === 'secondary_contact'){\n          verifyContactEmptiness(field, form, result, 'secondary_contact')\n        } else {\n          verifyRequiredFieldByFormType(field, form, result)\n        }\n      }\n    }\n  }\n  return result\n}\n\n/**\n * verify format for various field\n * @param form\n * @returns a result obj {} with error messages added in corresponding key\n */\nfunction verifyFormFormat(form) {\n  let result = {}\n  // Verify postal code\n  validateAddressPostalCode(form.main_address.postal_code, result, 'main_address')\n  if (form.other_addresses.length > 0){\n    result['other_addresses'] = {};\n    let i = 0;\n    for (const address of form.other_addresses){\n      validateAddressPostalCode(address.postal_code, result['other_addresses'], i);\n      i++;\n    }\n    if (Object.entries(result['other_addresses']).length === 0) {\n      delete result['other_addresses'];\n    }\n  }\n\n  if(form.primary_contact.profile){\n    if (!!!result['primary_contact']){\n      // if field secondary_contact doesn't exist, create one first\n      result['primary_contact'] = {};\n    }\n    validateContactFormat(form.primary_contact.profile, result['primary_contact'])\n    if (Object.entries(result['primary_contact']).length === 0) {\n      delete result['primary_contact'];\n    }\n  }\n\n  if(form.secondary_contact.profile){\n    if (!!!result['secondary_contact']){\n      // if field secondary_contact doesn't exist, create one first\n      result['secondary_contact'] = {};\n    }\n    validateContactFormat(form.secondary_contact.profile, result['secondary_contact'])\n    if (Object.entries(result['secondary_contact']).length === 0) {\n      delete result['secondary_contact'];\n    }\n  }\n\n  if(form.reference1_email.length !== 0){\n    verifyEmail(form.reference1_email, 'reference1_email', result);\n  }\n  if(form.reference2_email.length !== 0){\n    verifyEmail(form.reference2_email, 'reference2_email', result);\n  }\n  if(form.reference1_phone.length !== 0){\n    verifyPhoneNumber(form.reference1_phone, 'reference1_phone', result);\n  }\n  if(form.reference2_phone.length !== 0){\n    verifyPhoneNumber(form.reference2_phone, 'reference2_phone', result);\n  }\n\n  if(form.type === \"Individual\"){\n    //check fields in form.profile\n    if(form.profile.email.length !== 0){\n      verifyEmail(form.profile.email, 'email', result);\n    }\n    if(form.profile.primary_phone_number.length !== 0){\n      verifyPhoneNumber(form.profile.primary_phone_number, 'primary_phone_number', result);\n    }\n    if(form.profile.alt_phone_number.length !== 0){\n      verifyPhoneNumber(form.profile.alt_phone_number, 'alt_phone_number', result);\n    }\n  }\n  return result;\n}\n\n/**\n * Check the field in contact emptiness and generate error message for the corresponding field\n * @param field\n * @param form\n * @param result\n * @param contactType Can be either \"primary_contact\" or \"secondary_contact\"\n */\nfunction verifyContactEmptiness(field, form, result, contactType){\n  for (const field of Object.keys(form[contactType]['profile'])){\n    if(isFieldEmpty(form[contactType]['profile'][field])){\n      if (!!!result[contactType]){\n        // if field contactType doesn't exist, create one first\n        result[contactType] = {};\n      }\n      result[contactType][field] = \"This field is required\"\n    }\n  }\n}\n\n/**\n * Verify required fields that are depends on form type, form type can either be \"Individual\" or \"Organization\".\n * @param field\n * @param form\n * @param result\n */\nfunction verifyRequiredFieldByFormType(field, form, result){\n  const org_ignore_fields = [\"email\", \"primary_phone_number\", \"alt_phone_number\", \"profile\"]\n  const individual_ignore_fields = [\"email\", \"primary_phone_number\", \"alt_phone_number\"]\n  if (form.type === \"Individual\"){\n    if (field in form['profile'] && isFieldEmpty(form['profile'][field])){\n      result[field] = 'This field is required';\n    } else if (field in form && !individual_ignore_fields.includes(field) && isFieldEmpty(form[field])) {\n      result[field] = 'This field is required';\n    }\n  } else if (form.type === 'Organization'){\n    if (field in form && !org_ignore_fields.includes(field) && isFieldEmpty(form[field])) {\n      result[field] = 'This field is required';\n    }\n  }\n}","import React, { useState } from 'react';\nimport { operationHourMapping, defaultTimeSlot } from '../../helpers/operation_hour_helpers'\n\nimport { IconButton, Typography, Grid } from '@material-ui/core';\nimport { Delete, Add, ArrowRightAltOutlined as Arrow } from '@material-ui/icons';\nimport { FieldsWrapper } from \"./index\";\nimport SelectField from \"./fields/SelectField\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Alert } from '@material-ui/core';\n\nimport { format } from 'date-fns';\nimport GeneralField, {dateFormat} from './fields/GeneralField.js'\n\nconst useStyles = makeStyles(theme => ({\n  weekday: {\n    minWidth: 110,\n    alignSelf: 'start',\n    top: 28,\n    position: 'relative',\n  },\n  day: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  times: {\n    display: 'flex',\n    minWidth: 350,\n    alignItems: 'start',\n    flexDirection: 'column'\n  },\n  date: {\n    display: 'flex',\n    width: 170,\n  },\n  time: {\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'row'\n  },\n  select: {\n    minWidth: 120,\n    margin: 10,\n  },\n  button: {\n    position: 'relative',\n    top: 8,\n  },\n  arrow: {\n    paddingTop: 24,\n    marginLeft: 12,\n    marginRight: 12\n  }\n}));\n\nexport default function OperationHoursFieldGroup({operationHours, operationDates, errMsg}) {\n  const classes = useStyles();\n  // console.log(operationHours)\n  // A way to achieve forceUpdate()\n  const [state, update] = useState(true);\n  const forceUpdate = () => update(!state);\n\n  const handleOperationHourOnClick = (e, weekDay, action) => {\n    if (action === 'add') {\n      operationHours[weekDay].push({...defaultTimeSlot})\n    } else {\n      operationHours[weekDay].pop()\n    }\n    forceUpdate();\n  };\n\n  const handleChange = (e, weekDay, slotIndex, id) => {\n    const value = e.target.value;\n    operationHours[weekDay][slotIndex][id] = value == null ? '' : value;\n    forceUpdate();\n  };\n\n  return (\n    <FieldsWrapper label=\"Availability\">\n\n      {operationDates.map(({start_date: startDate, end_date: endDate}, idx) => {\n        // default is today\n        if (startDate == null) startDate = operationDates[idx].start_date = format(new Date(), dateFormat);\n\n        return (\n          <Grid container direction=\"row\" alignItems=\"center\" key={idx}>\n            <GeneralField\n              label=\"Start Date\"\n              className={classes.date}\n              type=\"date\"\n              value={startDate}\n              onChange={e => operationDates[idx].start_date = e.target.value}\n            />\n            <Arrow className={classes.arrow}/>\n            <GeneralField\n              label=\"End Date\"\n              className={classes.date}\n              type=\"date\"\n              value={endDate}\n              onChange={e => operationDates[idx].end_date = e.target.value}\n              helperText={\"leave empty if not sure\"}\n            />\n            {idx === (operationDates.length - 1) &&\n            <IconButton\n              className={classes.button}\n              onClick={e => {\n                operationDates.push({start_date: null, end_date: null});\n                forceUpdate();\n              }}\n              size=\"large\">\n              <Add/>\n            </IconButton>\n            }\n            {idx !== 0 && idx === (operationDates.length - 1) &&\n            <IconButton\n              className={classes.button}\n              onClick={e => {\n                operationDates.splice(idx, 1);\n                forceUpdate();\n              }}\n              size=\"large\">\n              <Delete/>\n            </IconButton>\n            }\n          </Grid>\n        );\n      })}\n\n\n      {Object.entries(operationHours).map(([weekDay, timeSlots]) => {\n        return (\n          <div key={weekDay} className={classes.day}>\n            <Typography color=\"textSecondary\" variant=\"subtitle1\" className={classes.weekday}>\n              {weekDay}\n            </Typography>\n            <div className={classes.times}>\n              {timeSlots.map((time, idx) => {\n                return (\n                  <div key={idx} className={classes.time}>\n                    <SelectField\n                      className={classes.select}\n                      value={time.start_time}\n                      label=\"Start\"\n                      options={operationHourMapping}\n                      onChange={e => handleChange(e, weekDay, idx, 'start_time', 'change')}\n                      // InputLabelProps={{ shrink: true }}\n                      // variant=\"outlined\"\n                    />\n                    <SelectField\n                      className={classes.select}\n                      value={time.end_time}\n                      label=\"End\"\n                      options={operationHourMapping}\n                      onChange={e => handleChange(e, weekDay, idx, 'end_time')}\n                      // InputLabelProps={{ shrink: true }}\n                    />\n                    {idx === (timeSlots.length - 1) &&\n                    <IconButton\n                      className={classes.button}\n                      onClick={e => handleOperationHourOnClick(e, weekDay, 'add')}\n                      size=\"large\">\n                      <Add/>\n                    </IconButton>\n                    }\n                    {idx !== 0 && idx === (timeSlots.length - 1) &&\n                    <IconButton\n                      className={classes.button}\n                      onClick={e => handleOperationHourOnClick(e, weekDay, 'remove')}\n                      size=\"large\">\n                      <Delete/>\n                    </IconButton>\n                    }\n                  </div>\n                );\n              })}\n            </div>\n\n          </div>\n        );\n      })}\n      {errMsg &&\n      <Alert severity=\"error\">{errMsg}</Alert>}\n    </FieldsWrapper>\n  );\n}\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { providerFields, providerFormTypes, providerCategoryValue2Key } from '../../constants/provider_fields.js'\nimport { defaultProfileFields, defaultContactFields } from '../../constants/default_fields.js'\nimport {\n  operationHourObjectToList\n} from '../../helpers/operation_hour_helpers';\nimport { provider_verify_form } from \"../../helpers/provider_verify_form\";\n\n// redux\nimport { useHistory, useParams } from 'react-router';\nimport { useDispatch } from 'react-redux'\nimport { ACTION_SUCCESS } from '../../store/defaults.js';\nimport { createProvider, updateProvider } from '../../store/actions/providerActions.js'\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { fetchProviderFields } from '../../api/settingApi';\n\n// components\nimport FieldGroup from '../shared/FieldGroup';\nimport OperationHoursFieldGroup from '../shared/OperationHoursFieldGroup';\nimport LocationFieldGroup from '../shared/LocationFieldGroup';\n\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { generateProviderFields } from \"../../constants/default_fields\";\nimport { FormStepper, Loading, FieldsWrapper, OtherLocationsFields } from \"../shared\";\nimport { Container } from \"@material-ui/core\";\nimport { fetchProvider } from \"../../store/actions/providerActions\";\nimport GeneralField from \"../shared/fields/GeneralField\";\n\nconst useStyles = makeStyles(theme => ({\n  content: {\n    width: '80%',\n    margin: 'auto',\n    paddingBottom: 10,\n  },\n  addressPaper: {\n    position: 'relative',\n    paddingLeft: 28,\n    paddingBottom: 20,\n    width: 380,\n  }\n}));\n\nexport default function ProviderForm() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {id, formType: category} = useParams();\n  const mode = id ? 'edit' : 'new';\n  const [state, setState] = useState({\n    loading: true,\n    category: category,\n    languageOptions: [],\n    eligibilities: [],\n    stepNames: [],\n    steps: [],\n    provider: null,\n    dispatchErrorMsg: [],\n    fieldErrorMsg: {},\n  });\n\n  /**\n   * Provider Type\n   * @type {('Organization', 'Individual')}\n   */\n  const providerType = useMemo(() => {\n    if (mode === 'new')\n      return category === 'organization' ? 'Organization' : 'Individual';\n    else {\n      if (state.provider) return state.provider.category === 'organization' ? 'Organization' : 'Individual';\n    }\n  }, [state.provider, category, mode]);\n\n  // DO NOT store form as state, it degrades the performance as all form got rendered every time user type anything.\n  // Instead, for large form like this page, store the form as a variable and pass it to child components (input)\n  const form = useMemo(() =>\n      generateProviderFields(providerType, state.category, state.provider),\n    [providerType, state.category, state.provider]);\n\n  const load = useCallback((category) => {\n    console.log(category);\n    const promises = [];\n    promises.push(dispatch(fetchOntologyCategories('languages'))\n      .then(data => setState(state => ({...state, languageOptions: data}))));\n    promises.push(fetchProviderFields()\n      .then(data => {\n        // no fields is available\n        if (data[category] == null || data[category].steps_order.length === 0\n          || Object.values(data[category].form_structure).length === 0) {\n          setState(state => ({...state, loading: true, errorMessage: ['No fields are available.']}));\n        } else {\n          setState(state => ({\n            ...state,\n            stepNames: data[category].steps_order,\n            steps: Object.values(data[category].form_structure)\n          }));\n        }\n      }));\n    Promise.all(promises).then(() => setState(state => ({...state, loading: false})));\n  }, [dispatch]);\n\n  useEffect(() => {\n    // load provider first if editing\n    if (id) {\n      dispatch(fetchProvider(id))\n        .then(({provider}) => {\n          const cat = provider.type === 'Organization' ? 'organization' : providerCategoryValue2Key[provider.category];\n          setState(state => ({...state, provider: provider, category: cat}));\n          load(cat);\n        });\n    } else {\n      load(category);\n    }\n  }, [dispatch, id, category, load]);\n\n  const handleFinish = () => {\n    const newForm = {...form};\n    newForm['operation_hours'] = operationHourObjectToList(newForm['operation_hours']);\n    if (newForm.status === '') newForm.status = undefined;\n    console.log(newForm);\n    // TODO: pretty error message\n    const fieldErrorMsg = provider_verify_form(form, state.steps);\n    if (Object.keys(fieldErrorMsg).length !== 0) {\n      setState(state => ({...state, fieldErrorMsg}));\n      return;\n    }\n    if (mode === 'edit') {\n      dispatch(\n        updateProvider(id, newForm, (status, err, id) => {\n          if (status === ACTION_SUCCESS) {\n            history.push(`/providers/${id}`)\n          } else {\n            setState(state => ({...state, errorMessage: [err.toString()]}));\n          }\n        })\n      );\n    } else {\n      dispatch(\n        createProvider(newForm, (status, err, id) => {\n          if (status === ACTION_SUCCESS) {\n            history.push('/providers/' + id)\n          } else {\n            setState(state => ({...state, errorMessage: [err.toString()]}));\n          }\n        }));\n\n    }\n  };\n\n  /**\n   * Handle changes in form\n   * @param name {string}\n   * @returns {Function}\n   */\n  const handleChange = useCallback(name => e => {\n    const {value} = e.target;\n    const splits = name.split('.');\n    if (splits.length === 1) {\n      form[name] = value;\n    } else {\n      let parent = form;\n      for (let i = 0; i < splits.length - 1; i++) {\n        parent = parent[splits[i]];\n      }\n      parent[splits[splits.length - 1]] = value || '';\n    }\n  }, [form]);\n\n  const getStepContent = idx => {\n    const step = state.steps[idx];\n    if (!step) return null;\n    return <div className={classes.content}>\n      {Object.entries(step).map(([field, required]) => {\n        // The field is not a normal field, i.e. questions\n        // const isQuestion = typeof required === 'object';\n\n        let options;\n        const errMsg = state.fieldErrorMsg[field];\n        if (field === 'languages') {\n          options = state.languageOptions;\n        }\n\n        if (field === 'main_address') {\n          return (\n            <FieldsWrapper label=\"Main address\" key={field}>\n              <LocationFieldGroup\n                address={form.main_address}\n                required={required}\n                errMsg={errMsg}\n              />\n            </FieldsWrapper>\n          );\n        } else if (field === 'other_addresses') {\n          return (\n            <OtherLocationsFields\n              key={field}\n              otherLocations={form.other_addresses}\n              required={required}\n              errMsg={errMsg}\n            />\n          );\n        } else if (field === 'primary_contact' || field === 'secondary_contact') {\n          return (\n            <FieldsWrapper key={field} label={providerFields[field].label}>\n              {Object.keys(defaultContactFields).map(contactField => {\n                return (\n                  <FieldGroup\n                    key={contactField}\n                    label={providerFields[contactField]['label']}\n                    type={providerFields[contactField]['type']}\n                    component={providerFields[contactField]['component']}\n                    value={form[field]['profile'][contactField]}\n                    onChange={handleChange(field + '.' + contactField)}\n                    error={errMsg == null? false : errMsg[contactField] != null}\n                    helperText={!!errMsg? errMsg[contactField] : null}\n                  />\n                )\n              })}\n            </FieldsWrapper>\n          )\n        } else if (field === 'availability') {\n          return (\n            <OperationHoursFieldGroup\n              key={field}\n              operationHours={form.operation_hours}\n              operationDates={form.operation_dates}\n              errMsg={errMsg}\n            />\n          )\n        } else if (field === 'notes') {\n          return (\n            <GeneralField\n              key={field}\n              label={providerFields[field].label}\n              value={form[field]}\n              onChange={handleChange(field)}\n              required={required}\n              multiline\n              variant=\"outlined\"\n              fullWidth\n              error={errMsg != null}\n              helperText={errMsg}\n            />\n          )\n        } else {\n          const isProfile = Object.keys(defaultProfileFields).includes(field);\n          // only individual has field \"profile\"\n          if (isProfile && providerType !== \"Individual\") return null;\n          let fieldProps = providerFields[field];\n          if (fieldProps == null) fieldProps = {};\n          return (\n            <FieldGroup\n              key={field}\n              label={providerFields[field].label}\n              type={providerFields[field].type}\n              component={providerFields[field].component}\n              value={isProfile ? form.profile[field] : form[field]}\n              onChange={handleChange(isProfile ? 'profile.' + field : field)}\n              required={required}\n              options={providerFields[field].options || options}\n              error={errMsg != null}\n              helperText={errMsg}\n            />\n          );\n        }\n      })}\n    </div>\n  };\n\n  if (state.loading)\n    return <Loading message={`Loading...`}/>;\n\n  console.log(state.category);\n  return (\n    <Container>\n      <FormStepper\n        getStepContent={getStepContent}\n        handleFinish={handleFinish}\n        stepNames={state.stepNames}\n        error={state.dispatchErrorMsg}\n        title={(mode === 'new' ? 'Create ' : 'Edit ') + providerFormTypes[state.category]}\n      />\n    </Container>\n  );\n}\n","import React from 'react';\nimport _ from 'lodash';\n\nimport TR from '../../shared/TR';\nimport { defaultContactFields } from '../../../constants/default_fields.js'\nimport { formatLocation } from '../../../helpers/location_helpers';\nimport { formatPhoneNumber } from '../../../helpers/phone_number_helpers';\nimport { operationHourListToObject, OperationHourTable }\n  from '../../../helpers/operation_hour_helpers';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport useProfileTableStyles from '../../../stylesheets/profile-table'\n\nexport default function ProviderInfoTable({ step, provider, infoFields, providerFields }) {\n  let rowTitle, rowValue;\n  const infoRows = _.map(infoFields, (data, fieldId) => {\n    if (data.type === 'field') {\n      rowTitle = providerFields[fieldId].label;\n      switch(fieldId) {\n        case 'first_name':\n        case 'middle_name':\n        case 'last_name':\n        case 'preferred_name':\n        case 'gender':\n        case 'birth_date':\n        case 'email':\n          if (provider.type === 'Individual') {\n            rowValue = provider.profile[fieldId];\n          } else {\n            rowValue = provider[fieldId];\n          }\n          break;\n        case 'primary_phone_number':\n        case 'alt_phone_number':\n          if (provider.type === 'Individual') {\n            rowValue = provider.profile[fieldId] ? formatPhoneNumber(provider.profile[fieldId]) : 'None provided';\n          } else {\n            rowValue = provider[fieldId] ? formatPhoneNumber(provider[fieldId]) : 'None provided';\n          }\n          break;\n        case \"main_address\":\n          rowValue = provider[fieldId] ? formatLocation(provider[fieldId]) : \"None provided\";\n          break;\n        case \"other_addresses\":\n          if (provider[fieldId]) {\n            rowValue = _.map(provider[fieldId], (address, index) =>\n              <p key={index}>{formatLocation(address)}</p>)\n          }\n          else {\n            rowValue = null;\n          }\n          break;\n        case \"languages\":\n          rowValue = (provider[fieldId] || []).join(', ')\n          break;\n        case \"availability\":\n          const operation_hours = operationHourListToObject(provider.operation_hours)\n          rowValue = <OperationHourTable operationHourObj={operation_hours} />\n          break;\n        case 'primary_contact':\n        case 'secondary_contact':\n          if (provider[fieldId]) {\n            rowValue = _.map(_.keys(defaultContactFields), contactField => {\n              if (provider[fieldId]['profile'][contactField]) {\n                return (\n                  <li key={contactField}>\n                    {`${providerFields[contactField]['label']}: ${provider[fieldId]['profile'][contactField]}`}\n                  </li>\n                )\n              }\n            })\n          }\n          else {\n            rowValue = null;\n          }\n          break;\n\n        default:\n          rowValue = provider[fieldId];\n      }\n    }\n    else if (data.type === 'question') {\n      rowTitle = fieldId;\n      const response = _.find(provider.responses, response => {\n        return response.question_id === data.id.toString()\n      })\n      if (response) {\n        rowValue = response.text\n      }\n      else {\n        rowValue = null;\n      }\n    }\n    return (\n      <TR\n        key={fieldId}\n        title={rowTitle}\n        value={rowValue}\n      />\n    );\n  })\n\n  const classes = useProfileTableStyles()\n  return (\n    <TableContainer className={classes.table} component={Paper}>\n      <Table aria-label=\"Profile table\">\n        <TableHead>\n          <TableRow >\n            <TableCell className={classes.title}>{step}</TableCell>\n            <TableCell className={classes.title2}></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {infoRows}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import React, { Component } from 'react';\n\nimport { Button, FormGroup, FormControl, FormLabel, Col } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { rateProvider } from '../../store/actions/providerActions.js';\nimport StarRatingComponent from 'react-star-rating-component';\n\nclass ProviderRatingForm extends Component {\n  constructor(props) {\n\t\tsuper(props);\n    this.handleStarSelection=this.handleStarSelection.bind(this);\n\t\tthis.handleCommentChange=this.handleCommentChange.bind(this);\n    this.handleSubmit=this.handleSubmit.bind(this);\n    this.handleTextRating=this.handleTextRating.bind(this);\n    const id = this.props.match.params.id\n    this.state = {\n      id: id,\n\t\t\trating: 0,\n      comment: ''\n    }\n  }\n\n  handleStarSelection(nextValue, name) {\n    this.setState({rating: nextValue});\n  }\n\n  handleTextRating(e) {\n    this.setState({rating: e.target.value});\n  }\n  handleCommentChange(e) {\n    this.setState({comment: e.target.value});\n  }\n  handleSubmit(e) {\n    const id = this.props.match.params.id\n    this.props.dispatch(rateProvider(id, this.state));\n    this.props.history.push('/provider/' + id);\n  }\n\n  render() {\n    return (\n      <div className=\"content\">\n        <Col sm={9}>\n          <h3> Rate Provider </h3>\n          <hr/>\n        </Col>\n\n        <FormGroup controlId=\"rating\">\n          <Col componentClass={FormLabel} sm={5}>\n            Rate this provider (0-5)\n          </Col>\n          <Col sm={9}>\n            <FormControl\n              type=\"text\"\n              placeholder=\"A number between 0 and 5\"\n              value={this.state.rating}\n              onChange={this.handleTextRating}\n            />\n          </Col>\n        </FormGroup>\n        <Col sm={9}>\n          <StarRatingComponent\n            name=\"rating\"\n            starCount={5}\n            value={this.state.rating}\n            onStarClick={this.handleStarSelection}\n          />\n        </Col>\n        <Col sm={9}>\n          <hr/>\n          <FormGroup controlId=\"comments\">\n            <FormLabel>Comments</FormLabel>\n            <FormControl\n              componentClass=\"textarea\"\n              placeholder=\"Comments about this provider...\"\n              onChange={this.handleCommentChange}\n            />\n          </FormGroup>\n        </Col>\n        <Col sm={9}>\n          <Button type=\"submit\" onClick={this.handleSubmit}> Submit </Button>\n        </Col>\n      </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    providersById: state.providers.byId || {},\n    providerLoaded: state.providers.indexLoaded\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ProviderRatingForm);\n","import React from 'react'\nimport { Link } from './shared';\nimport { fetchServices, deleteService } from '../store/actions/serviceActions.js'\nimport { GenericPage } from \"./shared\";\n\nconst TYPE = 'services';\n\nconst formatProvider = ({provider}) => {\n  return provider.type === 'Organization' ? provider.company\n    : (provider.profile ? `${provider.profile.first_name} ${provider.profile.last_name}` : 'Not provided')\n};\n\nconst columnsWithoutOptions = [\n  {\n    name: 'id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'name',\n    label: 'Name',\n    options: {\n      sort: true,\n      customBodyRender: (data, {rowData}) => {\n        return <Link color to={`/${TYPE}/` + rowData[0]}>{data}</Link>\n      }\n    }\n  },\n  {\n    name: 'provider',\n    label: 'Provider',\n    options: {\n      sort: true,\n      customBodyRender: provider => {\n        return (\n          <Link color to={`/${TYPE}/${provider.id}`}>\n            {formatProvider({provider})}\n          </Link>\n        );\n      }\n    }\n  },\n  {\n    name: 'desc',\n    label: 'Description',\n  },\n  {\n    name: 'category',\n    label: 'Category'\n  }\n];\n\nexport default function Services() {\n\n  const nameFormatter = service => service.name;\n\n  const generateMarkers = (data, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    const currPageServices = data.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage);\n    return currPageServices.map(service => ({\n      position: {lat: Number(service.location.lat), lng: Number(service.location.lng)},\n      title: service.name,\n      link: `/${TYPE}/${service.id}`,\n      content: service.desc,\n    })).filter(service => service.position.lat && service.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchServices}\n      deleteItem={deleteService}\n      generateMarkers={generateMarkers}\n      nameFormatter={nameFormatter}\n    />\n  )\n}\n","export function formatEligibilityConditions(condType, condValue) {\n  if (condValue instanceof Array) {\n    return `${condType}: ${condValue.join(', ')}`\n  }\n  else {\n    return `${condType}: ${condValue}`\n  }\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport TR from '../shared/TR'\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchService } from '../../store/actions/serviceActions.js'\n\nimport { formatLocation } from '../../helpers/location_helpers'\nimport { formatEligibilityConditions } from '../../helpers/eligibility_condition_helpers'\n\nimport { Table, Button } from 'react-bootstrap';\nimport { Print } from \"@material-ui/icons\";\n\nclass Service extends Component {\n  componentWillMount() {\n    const id = this.props.match.params.id\n    this.props.dispatch(fetchService(id));\n  }\n\n  render() {\n    const p = this.props,\n          id = p.match.params.id,\n          service = p.servicesById[id];\n\n    return (\n      <div className=\"content client\">\n        <h3>Service Profile</h3>\n        <Link to={`/services/${service.id}/edit`}>\n          <Button bsStyle=\"primary\">\n            Edit\n          </Button>\n        </Link>{' '}\n        <Button bsStyle=\"primary\" onClick={() => window.print()} className=\"print-button\">\n          <Print fontSize=\"small\"/>\n        </Button>\n\n        { service && service.servicesLoaded &&\n          <Table striped bordered condensed hover>\n            <tbody>\n              <TR\n                title=\"Name\"\n                value={service.name}\n              />\n\n              <TR\n                title=\"Type\"\n                value={service.type}\n              />\n              <TR\n                title=\"Description\"\n                value={service.desc}\n              />\n              <TR\n                title=\"Category\"\n                value={service.category}\n              />\n              <TR\n                title=\"Eligibility\"\n                value={service.eligibility}\n              />\n              <TR\n                title=\"Available from\"\n                value={service.available_from}\n              />\n              <TR\n                title=\"Available until\"\n                value={service.available_to}\n              />\n              <TR\n                title=\"Languages\"\n                value={(service.languages || []).join(', ')}\n              />\n              <TR\n                title=\"Max Capacity\"\n                value={service.max_capacity}\n              />\n              <TR\n                title=\"Current capacity\"\n                value={service.current_capacity}\n              />\n              <TR\n                title=\"Frequency\"\n                value={service.frequency}\n              />\n              <TR\n                title=\"Billable\"\n                value={service.billable}\n              />\n              <TR\n                title=\"Price\"\n                value={service.price}\n              />\n              <TR\n                title=\"Method of delivery\"\n                value={service.method_of_delivery}\n              />\n              <TR\n                title=\"Method of registration\"\n                value={service.method_of_registration}\n              />\n              <TR\n                title=\"Registration\"\n                value={service.registration}\n              />\n              <TR\n                title=\"Contact Person Email\"\n                value={service.email}\n              />\n              <TR\n                title=\"Contact Person Phone\"\n                value={service.primary_phone_number}\n              />\n              <TR\n                title=\"Secondary Phone\"\n                value={service.alt_phone_number}\n              />\n              <tr>\n                <td><b>Location</b></td>\n                <td>{formatLocation(service.location)}</td>\n              </tr>\n\n              {_.keys(_.omit(service.eligibility_conditions, ['lower_age_limit', 'upper_age_limit'])) > 0 &&\n                <tr>\n                  <td><b>Eligibility Conditions</b></td>\n                  <td>\n                    {_.map(\n                        _.omit(service.eligibility_conditions, ['lower_age_limit', 'upper_age_limit']\n                      ), (value, type) => {\n                      return (\n                        <li key={type}>\n                          {formatEligibilityConditions(type, value)}\n                        </li>\n                      );\n                    })}\n                    {service.eligibility_conditions.lower_age_limit &&\n                      <li>\n                        {formatEligibilityConditions('Age greater than' , service.eligibility_conditions.lower_age_limit)}\n                      </li>\n                    }\n                    {service.eligibility_conditions.upper_age_limit &&\n                      <li>\n                        {formatEligibilityConditions('Age less than' , service.eligibility_conditions.upper_age_limit)}\n                      </li>\n                    }\n                  </td>\n                </tr>\n              }\n              <TR\n                title=\"Public?\"\n                value={service.is_public ? 'Yes': 'No'}\n              />\n              <TR\n                title=\"Share with\"\n                value={(service.share_with || []).join(', ')}\n              />\n              <TR\n                title=\"Notes\"\n                value={service.notes}\n              />\n              <tr>\n                <td><b>Provider</b></td>\n                <td>\n                  <Link to={`/provider/${service.provider.id}`}>\n                    {(service.provider.type === 'Organization') ?\n                      service.provider.company\n                    :\n                      `${service.provider.profile.first_name} ${service.provider.profile.last_name}`\n                    }\n                  </Link>\n                </td>\n              </tr>\n            </tbody>\n          </Table>\n        }\n\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    servicesById: state.services.byId,\n    serviceLoaded: state.services.indexLoaded\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(Service);\n","import { statusInCanadaOptions, genderOptions, educationLevelOptions, countryOptions, languageOptions, provinceOptions, incomeSourceOptions, maritalStatusOptions} from '../../store/defaults';\nimport React, { useEffect, useState, useMemo, useCallback, Comopnent } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport { fetchEligibilities } from '../../api/eligibilityApi';\nimport { serverHost } from '../../store/defaults';\n\n\n// export default function  something() {\n//   // const dispatch = useDispatch();\n//   const [state, setState] = useState({\n//     loading: true,\n//     languageOptions: [],\n//     all_ngo_conditions: [],\n//     stepNames: [],\n//     steps: [],\n//     client: null,\n//     dispatchErrorMsg: [],\n//     fieldErrorMsg: {},\n//   });\n  \n//   // useEffect(() => {\n//     const promises = [];\n//     promises.push(fetchOntologyCategories('languages')\n//       .then(data => setState(state => ({...state, languageOptions: data}))));\n//     promises.push(fetchEligibilities()\n//       .then(data => {\n//         setState(state => ({...state, all_ngo_conditions: data.map(data => data.title)}))\n//       }));\n//     Promise.all(promises).then(() => setState(state => ({...state, loading: false})));\n  \n//     // }, [dispatch]);\n\n//   return promises\n// }\n// const appRes = something()\n// console.log(\"conditionConfig:\", appRes)\n\n\n\n\n// const ontologyCategories = fetchOntologyCategories('languages')\n// console.log(\"conditionConfig: \", ontologyCategories)\n\n\n// const ngoEligibilities = fetchEligibilities('languages')\n// console.log(\"conditionConfig: \", all_ngo_conditions)\n// const all_ngo_conditions= ngoEligibilities.map(data => data.title)\n\n// const ontologyRes = retrieveOnotologyStoreConditionConfig()\n// console.log(\"conditionConfig\", ontologyRes)\n\n\n// const data = await fetchEligibilities().then(data => {return data=> data.title})\n// For reference\nconst conditions = [\"age\", \"alt_phone_number\", \"apt_number\", \"arrival_date\", \"birth_date\", \"city\", \"completed_education_level\",\n  \"country_of_last_residence\", \"country_of_origin\", \"current_education_level\", \"email\", \"first_language\", \"first_name\", \"gender\",\n  \"has_children\", \"immigration_doc_number\", \"income_source\", \"landing_date\", \"last_name\", \"lat\", \"lng\", \"marital_status\", \"middle_name\",\n  \"ngo_conditions\", \"num_of_children\", \"num_of_dependants\", \"other_languages\", \"phone_numbers\", \"postal_code\", \"pr_number\", \"preferred_name\",\n  \"primary_phone_number\", \"province\", \"service_set\", \"status_in_canada\", \"street_address\"]\n\nconst compareOps = ['<', '>', '<=', '>=', '=='];\nconst IN = ['in'];\nconst IS = ['=='];\n\nexport const TYPE = {\n  NUMBER: 1,\n  DATE: 2,  // use case? not implemented.\n  STRING: 3,\n  BOOLEAN: 4,  // use case? not implemented.\n  LIST: 5\n};\n\nexport const defaultConfig = {\n  operators: [...compareOps, ...IN],\n  type: TYPE.STRING\n};\n\nexport const eligibilityConditionHideItems = [\"alt_phone_number\", \"apt_number\", \"city\", \"landing_date\", \"last_name\", \"middle_name\",\n  \"phone_numbers\", \"postal_code\", \"pr_number\", \"preferred_name\", \"primary_phone_number\", \"service_set\", \"street_address\"\n]\n\nexport const eligibilityConditionConfigs = {\n  // NOTE: In alphabetic order\n  age: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  arrival_date: {\n    operators: compareOps,\n    type: TYPE.DATE\n  },\n  birth_date: {\n    operators: compareOps,\n    type: TYPE.DATE\n  },\n  completed_education_level: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: educationLevelOptions,\n    multipleSelect: true\n  },\n  // Where to retrieve coutry options?\n  country_of_last_residence: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: countryOptions,\n    multipleSelect: true\n  }, \n  country_of_origin: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: countryOptions,\n    multipleSelect: true\n  },\n  current_education_level: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: educationLevelOptions,\n    multipleSelect: true\n  },\n  // Where to retrieve language options, Ontology or default.js?\n  first_language: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: [],\n    multipleSelect: true\n  },\n  gender: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: genderOptions,\n    multipleSelect: true,\n  },\n  has_children: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: ['True', 'False'],\n    multipleSelect: true\n  },\n  income_source: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: incomeSourceOptions,\n    multipleSelect: true\n  },\n  landing_date: {\n    operators: compareOps,\n    type: TYPE.DATE\n  },\n  lat: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  lng: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  marital_status: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: maritalStatusOptions,\n    multipleSelect: true\n  },\n  // Get NGO condition\n  ngo_conditions: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: ['example'],\n    multipleSelect: true\n  },\n  num_of_children: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  num_of_dependants: {\n    operators: compareOps,  // operators\n    type: TYPE.NUMBER  // right operand data type\n  },\n  other_languages: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: languageOptions,\n    multipleSelect: true\n  },\n  province: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: provinceOptions,\n    multipleSelect: true\n  },\n  status_in_canada: {\n    operators: IN,\n    type: TYPE.LIST,\n    options: statusInCanadaOptions,  // only for list data type\n    multipleSelect: true  // is multiple select?\n  }\n};\n\n\nexport const nameFunc = () => {\n  const languagesUrl = serverHost + '/categories/languages/';\n  const promises = [];\n  promises.push(fetch(languagesUrl)\n    .then(response => response.json())\n    .then(data => {eligibilityConditionConfigs.first_language.options = data.categories;\n      eligibilityConditionConfigs.other_languages.options = data.categories}));\n  promises.push(fetchEligibilities()\n    .then(data => eligibilityConditionConfigs.ngo_conditions.options= data.map(data => data.title)));\n  Promise.all(promises)\n}\n// nameFunc()\n\n","import React, { useEffect, useState } from 'react';\nimport { Paper, TextField, Grid, Button, IconButton } from \"@material-ui/core\";\nimport SelectField from \"../shared/fields/SelectField\";\nimport { Add as AddIcon, Delete as DeleteIcon } from '@material-ui/icons'\n\nimport { fetchFormulaFields } from \"../../api/formulaApi\";\nimport { escapeList, escapeString, titleCase, unescapeList, unescapeString } from \"../../helpers/formulaHelpers\";\nimport { eligibilityConditionConfigs, TYPE, defaultConfig, eligibilityConditionHideItems } from \"./conditionConfig\";\nimport { educationLevelOptions } from \"../../store/defaults\";\nimport MultiSelectField from \"../shared/fields/MultiSelectField\";\n\n\nexport function CustomEligibilityField({value, handleChange, fields, onDelete}) {\n\n  const [state, setState] = useState({\n    operator: value[1] || '', // duplicate state\n    ...(eligibilityConditionConfigs[value[0]] || defaultConfig)\n  });\n\n  const handleLeftOperandChange = e => {\n    const leftOperand = e.target.value;\n    const changes = {leftOperand, rightOperand: ''};\n\n    const config = eligibilityConditionConfigs[leftOperand] || defaultConfig;\n\n    const ops = config.operators;\n    if (!ops.includes(value[1])) {\n      changes.operator = ops[0];\n      setState(state => ({...state, operator: ops[0], ...config}));\n    } else {\n      setState(state => ({...state, ...config}));\n    }\n    handleChange(changes);\n    value[2] = '';\n  };\n  let rightOperand;\n  if (state.type === TYPE.STRING) {\n    rightOperand =\n      <TextField\n        style={{marginLeft: 20}}\n        label=\"Right Operand\"\n        defaultValue={unescapeString(value[2])}\n        onChange={e => handleChange({rightOperand: escapeString(e.target.value)})}/>;\n  } else if (state.type === TYPE.NUMBER) {\n    rightOperand =\n      <TextField\n        style={{marginLeft: 20}}\n        label=\"Right Operand\"\n        defaultValue={typeof + value[2] === \"number\" ? value[2] : 0}\n        onChange={e => handleChange({rightOperand: e.target.value})}/>;\n  } else if (state.type === TYPE.LIST && state.multipleSelect) {\n    rightOperand =\n      <MultiSelectField\n        label=\"Right Operand\"\n        options={state.options}\n        value={unescapeList(value[2]) || []} // warning: this is a list\n        onChange={e => handleChange({rightOperand: escapeList(e.target.value)})}\n        noDefaultStyle\n      />\n  } else if (state.type === TYPE.LIST && !state.multipleSelect) {\n    rightOperand =\n      <SelectField\n        style={{marginRight: 20}}\n        noEmpty\n        noDefaultStyle\n        options={state.options}\n        value={value[2]} // warning: this is a string\n        label=\"Right Operand\"\n        onChange={e => handleChange({rightOperand: e.target.value})}/>\n  } else {\n    rightOperand = 'Not implemented';\n  }\n\n  return (\n    <div style={{padding: 20}}>\n      <Grid container direction=\"row\" spacing={1}>\n        <SelectField\n          style={{marginRight: 20}}\n          noEmpty\n          noDefaultStyle\n          options={fields}\n          value={value[0]}\n          label=\"Field\"\n          onChange={handleLeftOperandChange}/>\n        <SelectField\n          style={{width: 60}}\n          noEmpty\n          noDefaultStyle\n          options={state.operators}\n          label=\"Operator\"\n          value={state.operator}\n          controlled\n          onChange={e => {\n            const operator = e.target.value;\n            setState(state => ({...state, operator}));\n            handleChange({operator});\n          }}/>\n        {rightOperand}\n        <IconButton onClick={onDelete} size=\"large\">\n          <DeleteIcon/>\n        </IconButton>\n      </Grid>\n    </div>\n  );\n}\n\nexport default function EligibilityCondition({value: originalValue, formValChange}) {\n  /**\n   * @type {[{condition_clauses: [field_name, clauses: [{left_operand, right_operand, operator}]]}]}\n   **/\n  const [value, setValue] = useState(originalValue);\n\n  const [fields, setFields] = useState({});\n\n  useEffect(() => {\n    fetchFormulaFields().then(({fields, dynamic_fields, functions}) => {\n      const fieldsObj = {};\n      console.log(fields)\n      fields.forEach(field => {\n        if (!eligibilityConditionHideItems.includes(field))\n          fieldsObj[field] = titleCase(field)\n      });\n      setFields(fieldsObj);\n    })\n  }, []);\n\n  const handleFieldChange = clause => ({leftOperand, operator, rightOperand}) => {\n    clause[0] = leftOperand || clause[0];\n    clause[1] = operator === undefined ? clause[1] : operator;\n    clause[2] = rightOperand || clause[2];\n  };\n\n  const handleAddField = idx => () => {\n    setValue(value => {\n      value[idx].push(['age', '==', '']);\n      formValChange({target: {value}});\n      return [...value];\n    })\n  };\n\n  const handleAddCondition = () => {\n    setValue(value => {\n      value.push([]);\n      formValChange({target: {value}});\n      return [...value];\n    })\n  };\n\n  const handleRemoveField = (conditionIdx, fieldIdx) => () => {\n    setValue(value => {\n      value[conditionIdx].splice(fieldIdx, 1);\n      formValChange({target: {value}});\n      return [...value]\n    })\n  };\n\n  const handleRemoveCondition = (conditionIdx) => () => {\n    setValue(value => {\n      value.splice(conditionIdx, 1);\n      formValChange({target: {value}});\n      return [...value]\n    })\n  };\n\n  const conditionComponents = [];\n  for (let conditionIdx = 0; conditionIdx < value.length; conditionIdx++) {\n    const condition = value[conditionIdx];\n    const field_components = [];\n    conditionComponents.push(field_components);\n\n    for (let fieldIdx = 0; fieldIdx < condition.length; fieldIdx++) {\n      const [leftOperand, operator, rightOperand] = condition[fieldIdx];\n      field_components.push(\n        <Grid item xs={12} key={fieldIdx}>\n          <CustomEligibilityField\n            value={condition[fieldIdx]}\n            handleChange={handleFieldChange(condition[fieldIdx])}\n            fields={fields}\n            onDelete={handleRemoveField(conditionIdx, fieldIdx)}\n          />\n        </Grid>\n      )\n\n    }\n  }\n\n  return (\n    <div>\n      {conditionComponents.map((field_components, idx) =>\n        <Paper variant=\"outlined\" key={idx}>\n          <Grid container>\n            {field_components}\n            <Grid item xs={12}>\n              <Button\n                onClick={handleRemoveCondition(idx)}\n                style={{margin: 12, float: 'right'}}\n                variant=\"contained\"\n                startIcon={<DeleteIcon/>}>\n                Remove\n              </Button>\n              <Button\n                style={{margin: 12, float: 'right'}}\n                variant=\"contained\"\n                startIcon={<AddIcon/>}\n                onClick={handleAddField(idx)}>\n                And\n              </Button>\n            </Grid>\n          </Grid>\n        </Paper>)}\n      <Button\n        style={{margin: 12}}\n        variant=\"contained\"\n        onClick={handleAddCondition}\n        startIcon={<AddIcon/>}>\n        OR\n      </Button>\n    </div>\n  );\n}\n","import { getJson } from \"./index\";\n\nexport function fetchFormulaFields() {\n  return getJson('/formula/fields/');\n}\n\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { Link } from '../shared';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport {\n  statusInCanadaOptions, educationLevelOptions,\n  serviceSharedWithOptions, serviceTypeOptions\n} from '../../store/defaults'\nimport GeneralField from '../shared/fields/GeneralField'\nimport SelectField from '../shared/fields/SelectField'\nimport RadioField from '../shared/fields/RadioField'\nimport MultiSelectField from '../shared/fields/MultiSelectField';\nimport { formatLocation } from '../../helpers/location_helpers.js';\nimport { Validator } from \"../../helpers/index.js\";\n\n// redux\nimport { connect } from 'react-redux'\nimport { createService, updateService } from '../../store/actions/serviceActions.js'\nimport { fetchProviders } from '../../store/actions/providerActions.js';\nimport { ACTION_SUCCESS } from '../../store/defaults.js';\n\nimport { Alert } from '@material-ui/core';\nimport { Container, Divider, Typography, Button } from \"@material-ui/core\";\nimport withStyles from '@material-ui/styles/withStyles';\nimport LocationFieldGroup from \"../shared/LocationFieldGroup\";\nimport EligibilityCondition from './EligibilityCondition'\nimport { transformToBackendType, transformToFrontendType } from '../../helpers/formulaHelpers';\n\nconst styles = {\n  root: {\n    width: '80%'\n  },\n  divider: {\n    margin: '20px 0',\n  },\n  errorText: {\n    color: '#e41919'\n  },\n  title: {\n    fontWeight: 600,\n  }\n};\n\nclass ServiceForm extends Component {\n  constructor(props) {\n    super(props);\n    let service = {};\n    if (this.props.match.params.id) {\n      service = this.props.servicesById[this.props.match.params.id];\n    }\n\n    this.state = {\n      errors: {},\n      serviceId: service.id,\n      mode: (service.id) ? 'edit' : 'new',\n      form: {\n        name: service.name || '',\n        type: service.type || '',\n        desc: service.desc || '',\n        category: service.category || '',\n        available_from: service.available_from || '',\n        available_to: service.available_to || '',\n        languages: service.languages || [],\n        max_capacity: service.max_capacity || '',\n        current_capacity: service.current_capacity || 0,\n        frequency: service.frequency || '',\n        billable: service.billable || 'No',\n        price: service.price || '',\n        method_of_delivery: service.method_of_delivery || '',\n        method_of_registration: service.method_of_registration || '',\n        registration: service.registration || '',\n        email: service.email || '',\n        primary_phone_number: service.primary_phone_number || '',\n        alt_phone_number: service.alt_phone_number || '',\n        location: Object.assign({\n          id: '',\n          street_address: '',\n          apt_number: '',\n          city: '',\n          province: '',\n          postal_code: ''\n        }, service.location),\n        location_same_as_provider: service.location_same_as_provider || false,\n        share_with: service.share_with || [],\n        notes: service.notes || '',\n        eligibility_conditions: Object.assign({\n          'upper_age_limit': '',\n          'lower_age_limit': '',\n          'immigration_status': [],\n          'current_education_level': [],\n          'completed_education_level': []\n        }, service.eligibility_conditions),\n        provider_id: (service.provider && service.provider.id) || '',\n        is_public: service.is_public || false,\n        /**\n         * @type {[{condition_clauses: [field_name, clauses: [{left_operand, right_operand, operator}]]}]}\n         **/\n        eligibility_criteria: transformToFrontendType(service.eligibility_criteria) || []\n      }\n    };\n\n    this.props.dispatch(fetchOntologyCategories('services'));\n    this.props.dispatch(fetchOntologyCategories('languages'));\n    this.props.dispatch(fetchProviders());\n  }\n\n  formValChange = (name, render) => e => {\n    const {value} = e.target;\n    const splits = name.split('.');\n    const {form} = this.state;\n    if (splits.length === 1) {\n      form[name] = value;\n    } else {\n      let parent = this.state.form;\n      for (let i = 0; i < splits.length - 1; i++) {\n        parent = parent[splits[i]];\n      }\n      parent[splits[splits.length - 1]] = value || '';\n    }\n    if (render) this.setState(state => ({form: {...state.form}}));\n  };\n\n  submit = () => {\n    console.log(this.state.form);\n    let form = Object.assign({}, this.state.form);\n    form['eligibility_conditions']['age'] = [\n      form['eligibility_conditions']['lower_age_limit'] || null,\n      form['eligibility_conditions']['upper_age_limit'] || null\n    ];\n    delete form['eligibility_conditions']['lower_age_limit'];\n    delete form['eligibility_conditions']['upper_age_limit'];\n\n    form.eligibility_criteria = transformToBackendType(form.eligibility_criteria);\n\n    if (this.validateForm()) {\n      if (this.state.mode === 'edit') {\n        this.props.dispatch(\n          updateService(this.state.serviceId, form, (status, err, serviceId) => {\n            if (status === ACTION_SUCCESS) {\n              this.props.history.push('/services');\n              this.forceUpdate()\n            }\n          }));\n      } else {\n        this.props.dispatch(\n          createService(this.state.form, (status, err, serviceId) => {\n            this.props.history.push('/services');\n            this.forceUpdate()\n          }));\n      }\n    }\n  };\n\n  validateForm = () => {\n\n    let errors = {};\n    let formIsValid = true;\n    if (!this.state.form.provider_id) {\n      formIsValid = false;\n      errors[\"provider_id\"] = \"*Please enter a provider.\";\n    }\n\n    if (!this.state.form.type) {\n      formIsValid = false;\n      errors[\"type\"] = \"*Please enter the type.\";\n    }\n\n    if (!this.state.form.name) {\n      formIsValid = false;\n      errors[\"name\"] = \"*Please enter the name.\";\n    }\n\n    if (!this.state.form.category) {\n      formIsValid = false;\n      errors[\"category\"] = \"*Please enter the category.\";\n    }\n\n    if (this.state.form.primary_phone_number) {\n      const errMsg = Validator.phone(this.state.form.primary_phone_number);\n      if (errMsg) {\n        errors['primary_phone_number'] = \"*\" + errMsg;\n      }\n    }\n\n    if (this.state.form.alt_phone_number) {\n      const errMsg = Validator.phone(this.state.form.alt_phone_number);\n      if (errMsg) {\n        errors['alt_phone_number'] = \"*\" + errMsg;\n      }\n    }\n\n    if (this.state.form.email) {\n      const errMsg = Validator.email(this.state.form.email);\n      if (errMsg) {\n        errors['email'] = \"*\" + errMsg;\n      }\n    }\n\n    if (this.state.form.location.postal_code) {\n      const errMsg = Validator.postalCode(this.state.form.location.postal_code);\n      if (errMsg) {\n        errors['postal_code'] = \"*\" + errMsg;\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n\n    return formIsValid;\n\n  };\n\n  render() {\n    const {classes} = this.props;\n    const p = this.props;\n    const formTitle = (this.state.mode === 'edit') ?\n      'Edit Service Profile' : 'New Service';\n\n    let provider, provider_locations;\n    if (isInt(this.state.form.provider_id)) {\n      // assumption: this.state.form.provider_id should be an integer\n      // Delete this condition check if the assumption is no longer needed\n      provider = this.props.providersById && this.props.providersById.providersById[this.state.form.provider_id];\n      provider_locations = provider.other_addresses ? provider.other_addresses.concat([provider.main_address]) : []\n    }\n\n    const locations = {}, location2Obj = {};\n    if (provider_locations) provider_locations.forEach((address, index) => {\n      const loc = formatLocation(address);\n      locations[loc] = loc;\n      location2Obj[loc] = address;\n    });\n\n    return (\n      <Container className={classes.root}>\n        <Typography variant=\"h5\" className={classes.title}>\n          {formTitle}\n        </Typography>\n\n        {this.state.showAlert && this.state.error_messages.map((message, index) =>\n          <Alert key={index} severity=\"error\">{message}</Alert>)}\n\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Service Information\n        </Typography>\n        <SelectField\n          label=\"Provider\"\n          options={_.reduce(p.providers, (map, provider) => {\n            if (provider.type === 'Individual') {\n              map[provider.id] = provider.profile && provider.profile.first_name + \" \" + provider.profile.last_name;\n            } else {\n              map[provider.id] = provider.company\n            }\n            return map;\n          }, {})}\n          value={this.state.form.provider_id}\n          onChange={this.formValChange('provider_id')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.provider_id}</div>\n        <Link to={'/providers'} color>\n          <Typography>\n            Add new provider\n          </Typography>\n        </Link>\n        <SelectField\n          label=\"Type\"\n          options={serviceTypeOptions}\n          value={this.state.form.type}\n          onChange={this.formValChange('type')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.type}</div>\n        <GeneralField\n          label=\"Name\"\n          type=\"text\"\n          value={this.state.form.name}\n          onChange={this.formValChange('name')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.name}</div>\n        <GeneralField\n          label=\"Description\"\n          type=\"text\"\n          value={this.state.form.desc}\n          onChange={this.formValChange('desc')}\n        />\n        <SelectField\n          label=\"Category\"\n          options={p.servicesCategories}\n          value={this.state.form.category}\n          onChange={this.formValChange('category')}\n          required\n        />\n        <div className={classes.errorText}>{this.state.errors.category}</div>\n        <GeneralField\n          label=\"Available from\"\n          type=\"date\"\n          value={this.state.form.available_from}\n          onChange={this.formValChange('available_from')}\n        />\n        <GeneralField\n          label=\"Available until\"\n          type=\"date\"\n          value={this.state.form.available_to}\n          onChange={this.formValChange('available_to')}\n        />\n        <MultiSelectField\n          label=\"Languages\"\n          options={p.languagesCategories}\n          value={this.state.form.languages}\n          onChange={this.formValChange('languages')}\n        />\n        <GeneralField\n          label=\"Max Capacity\"\n          type=\"number\"\n          value={this.state.form.max_capacity}\n          min=\"0\"\n          onChange={this.formValChange('max_capacity')}\n        />\n        {parseInt(this.state.form.max_capacity, 10) > 0 &&\n        <GeneralField\n          label=\"Current Capacity\"\n          type=\"number\"\n          value={this.state.form.current_capacity}\n          min=\"0\"\n          onChange={this.formValChange('current_capacity')}\n        />\n        }\n        <SelectField\n          label=\"Frequency\"\n          value={this.state.form.frequency}\n          onChange={this.formValChange('frequency')}\n          options={['Weekly', 'Biweekly', 'Monthly', 'Non-repeated']}\n        />\n        <RadioField\n          label=\"Billable\"\n          value={this.state.form.billable}\n          onChange={this.formValChange('billable', true)}\n          options={{Yes: 'Yes', No: 'No'}}\n        >\n        </RadioField>\n\n        {this.state.form.billable === \"Yes\" &&\n        <GeneralField\n          label=\"Price\"\n          type=\"text\"\n          value={this.state.form.price}\n          onChange={this.formValChange('price')}\n        />}\n\n        <SelectField\n          label=\"Method of delivery\"\n          value={this.state.form.method_of_delivery}\n          onChange={this.formValChange('method_of_delivery')}\n          options={{\n            Online: 'Online',\n            'One on one (In person)': 'One on one (In person)',\n            Group: 'Group (In person)'\n          }} // In person\n        />\n\n        <SelectField\n          label=\"Method of registration\"\n          value={this.state.form.method_of_registration}\n          onChange={this.formValChange('method_of_registration')}\n          options={['Self registration', 'Registration by social worker', 'No registration']}\n        />\n\n        <SelectField\n          label=\"Registration\"\n          placeholder=\"select\"\n          value={this.state.form.registration}\n          onChange={this.formValChange('registration')}\n          options={['Online', 'In person', 'By phone']}\n        />\n\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Eligibility\n        </Typography>\n        <EligibilityCondition\n          value={this.state.form.eligibility_criteria}\n          formValChange={this.formValChange('eligibility_criteria')}\n        />\n        <MultiSelectField\n          label=\"Immigration Status\"\n          options={statusInCanadaOptions}\n          value={this.state.form.eligibility_conditions.immigration_status}\n          onChange={this.formValChange('eligibility_conditions.immigration_status')}\n        />\n        <GeneralField\n          label=\"Age greater than\"\n          type=\"text\"\n          value={this.state.form.eligibility_conditions.lower_age_limit}\n          onChange={this.formValChange('eligibility_conditions.lower_age_limit')}\n        />\n        <GeneralField\n          id=\"upper_age_limit\"\n          label=\"Age less than\"\n          type=\"text\"\n          value={this.state.form.eligibility_conditions.upper_age_limit}\n          onChange={this.formValChange('eligibility_conditions.upper_age_limit')}\n        />\n        <MultiSelectField\n          label=\"Current Education\"\n          options={educationLevelOptions}\n          value={this.state.form.eligibility_conditions.current_education_level}\n          onChange={this.formValChange('eligibility_conditions.current_education_level')}\n        />\n        <MultiSelectField\n          label=\"Completed Education Level\"\n          options={educationLevelOptions}\n          value={this.state.form.eligibility_conditions.completed_education_level}\n          onChange={this.formValChange('eligibility_conditions.completed_education_level')}\n        />\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Contact Information\n        </Typography>\n        <GeneralField\n          label=\"Contact Person Email\"\n          type=\"email\"\n          value={this.state.form.email}\n          onChange={this.formValChange('email')}\n        />\n        <div className={classes.errorText}>{this.state.errors.email}</div>\n        <GeneralField\n          label=\"Telephone\"\n          type=\"tel\"\n          value={this.state.form.primary_phone_number}\n          onChange={this.formValChange('primary_phone_number')}\n        />\n        <div className={classes.errorText}>{this.state.errors.primary_phone_number}</div>\n        <GeneralField\n          label=\"Alternative Phone Number\"\n          type=\"tel\"\n          value={this.state.form.alt_phone_number}\n          onChange={this.formValChange('alt_phone_number')}\n        />\n        <div className={classes.errorText}>{this.state.errors.alt_phone_number}</div>\n        <RadioField\n          label=\"Location\"\n          options={{'Same as provider': true, 'Other': false}}\n          onChange={this.formValChange('location_same_as_provider', true)}\n          value={this.state.form.location_same_as_provider}\n        />\n\n        {this.state.form.location_same_as_provider && this.state.form.provider_id &&\n        <div>\n          <RadioField\n            label=\"Select the location this service is provided at\"\n            value={this.state.form.location}\n            options={locations}\n            onChange={(e) => {\n              const {form} = this.state;\n              form.location = {...locations[e.target.value]};\n              this.formValChange('location');\n            }}\n          />\n          {!_.includes(_.map(provider_locations, 'id'), this.state.form.location.id) &&\n          <Typography style={{marginTop: 10}}>\n            {`The current location of service is at\n                          ${formatLocation(this.state.form.location)}, which has\n                          been removed from provider locations. Please select a\n                          new location.`}\n          </Typography>\n          }\n        </div>\n        }\n        {!this.state.form.location_same_as_provider &&\n        <LocationFieldGroup\n          key=\"address\"\n          address={this.state.form.location}\n          errMsg={this.state.errors}\n        />\n        }\n        <RadioField\n          label=\"Public?\"\n          options={{'Yes': true, 'No': false}}\n          onChange={this.formValChange('is_public')}\n          value={this.state.form.is_public}\n        />\n        <Divider className={classes.divider}/>\n        <Typography variant=\"h5\">\n          Other Information\n        </Typography>\n        <MultiSelectField\n          label=\"Share with\"\n          options={serviceSharedWithOptions}\n          value={this.state.form.share_with}\n          onChange={this.formValChange('share_with')}\n        />\n        <GeneralField\n          label=\"Notes\"\n          type=\"text\"\n          value={this.state.form.notes}\n          onChange={this.formValChange('notes')}\n          multiline\n          variant=\"outlined\"\n          fullWidth\n        />\n        <Button onClick={this.submit} variant=\"outlined\" color=\"primary\" style={{margin: '12px 0'}}>\n          Submit\n        </Button>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    servicesById: state.services.byId,\n    servicesCategories: state.ontology.services.categories,\n    categoriesLoaded: state.ontology.services.loaded,\n    languagesCategories: state.ontology.languages.categories,\n    languagesLoaded: state.ontology.languages.loaded,\n    providers: state.providers.filteredProviders || [],\n    providersById: state.providers.byId,\n    providersLoaded: state.providers.loaded,\n    providerIndex: state.providers.index\n  }\n};\n\nfunction isInt(value) {\n  return !isNaN(value) && \n         parseInt(Number(value)) === value && \n         !isNaN(parseInt(value, 10));\n}\n\nexport default connect(mapStateToProps)(withRouter(withStyles(styles)(ServiceForm)));\n","import React from 'react'\nimport { fetchGoods, deleteGood } from '../store/actions/goodActions.js'\nimport { GenericPage, Link } from \"./shared\";\n\nconst TYPE = 'goods';\n\nconst formatProvider = ({provider}) => {\n  return provider.type === 'Organization' ? provider.company\n    : (provider.profile ? `${provider.profile.first_name} ${provider.profile.last_name}` : 'Not provided')\n};\n\n// mui-table column configurations\n// TODO: Add custom print function for address\nconst columnsWithoutOptions = [\n  {\n    name: 'id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'name',\n    label: 'Name',\n    options: {\n      sort: true,\n      customBodyRender: (data, {rowData}) => {\n        return <Link color to={`/${TYPE}/${rowData[0]}`}>{data}</Link>\n      }\n    }\n  },\n  {\n    name: 'provider',\n    label: 'Provider',\n    options: {\n      sort: true,\n      customBodyRender: provider => {\n        return (\n          <Link color to={`/${TYPE}/${provider.id}`}>\n            {formatProvider({provider})}\n          </Link>\n        );\n      }\n    }\n  },\n  {\n    name: 'desc',\n    label: 'Description',\n  },\n  {\n    name: 'category',\n    label: 'Category'\n  }\n];\n\nexport default function Goods() {\n\n  const nameFormatter = good => good.name;\n\n  const generateMarkers = (goods, pageNumber, rowsPerPage) => {\n    // TODO: verify this works as expected\n    goods.slice((pageNumber - 1) * rowsPerPage, pageNumber * rowsPerPage)\n      .map(good => ({\n        position: {lat: Number(good.location.lat), lng: Number(good.location.lng)},\n        title: nameFormatter(good),\n        link: `/${TYPE}/${good.id}`,\n        content: good.desc,\n      })).filter(client => client.position.lat && client.position.lng);\n  };\n\n  return (\n    <GenericPage\n      type={TYPE}\n      columnsWithoutOptions={columnsWithoutOptions}\n      fetchData={fetchGoods}\n      deleteItem={deleteGood}\n      generateMarkers={generateMarkers}\n      nameFormatter={nameFormatter}\n    />\n  )\n}\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\n// redux\nimport { connect } from 'react-redux'\nimport { fetchGood } from '../../store/actions/goodActions.js'\n\nimport { formatLocation } from '../../helpers/location_helpers'\n\nimport { Table, Button } from 'react-bootstrap';\nimport { Print } from \"@material-ui/icons\";\n\nclass Good extends Component {\n  componentWillMount() {\n    const id = this.props.match.params.id\n    this.props.dispatch(fetchGood(id));\n  }\n\n  render() {\n    const p = this.props,\n          id = p.match.params.id,\n          good = p.goodsById[id];\n\n    return (\n      <div className=\"content client\">\n        <h3>Good Profile</h3>\n        <Link to={`/goods/${good.id}/edit`}>\n          <Button bsStyle=\"primary\">\n            Edit\n          </Button>\n        </Link>{' '}\n        <Button bsStyle=\"primary\" onClick={() => window.print()} className=\"print-button\">\n          <Print fontSize=\"small\"/>\n        </Button>\n\n        { good && good.goodsLoaded &&\n          <Table striped bordered condensed hover>\n            <tbody>\n              <tr>\n                <td><b>Name</b></td>\n                <td>{good.name}</td>\n              </tr>\n              <tr>\n                <td><b>Description</b></td>\n                <td>{good.desc}</td>\n              </tr>\n              <tr>\n                <td><b>Category</b></td>\n                <td>{good.category}</td>\n              </tr>\n              <tr>\n                <td><b>Available from</b></td>\n                <td>{good.available_from}</td>\n              </tr>\n              <tr>\n                <td><b>Available until</b></td>\n                <td>{good.available_to}</td>\n              </tr>\n              <tr>\n                <td><b>Transportation</b></td>\n                <td>{good.transportation}</td>\n              </tr>\n              <tr>\n                <td><b>Condition</b></td>\n                <td>{good.condition}</td>\n              </tr>\n              <tr>\n                <td><b>Material</b></td>\n                <td>{good.material}</td>\n              </tr>\n              <tr>\n                <td><b>Quantity</b></td>\n                <td>{good.quantity}</td>\n              </tr>\n              <tr>\n                <td><b>Length</b></td>\n                <td>{good.length}</td>\n              </tr>\n              <tr>\n                <td><b>Width</b></td>\n                <td>{good.width}</td>\n              </tr>\n              <tr>\n                <td><b>Height</b></td>\n                <td>{good.height}</td>\n              </tr>\n              <tr>\n                <td><b>Diameter</b></td>\n                <td>{good.diameter}</td>\n              </tr>\n              <tr>\n                <td><b>Contact Person Email</b></td>\n                <td>{good.email}</td>\n              </tr>\n              <tr>\n                <td><b>Contact Person Phone</b></td>\n                <td>{good.primary_phone_number}</td>\n              </tr>\n              <tr>\n                <td><b>Secondary Phone</b></td>\n                <td>{good.alt_phone_number}</td>\n              </tr>\n              <tr>\n                <td><b>Location</b></td>\n                <td>{formatLocation(good.location)}</td>\n              </tr>\n              <tr>\n                <td><b>Share with</b></td>\n                <td>{(good.share_with || []).join(', ')}</td>\n              </tr>\n              <tr>\n                <td><b>Notes</b></td>\n                <td>{good.notes}</td>\n              </tr>\n              <tr>\n                <td><b>Provider</b></td>\n                <td>\n                  <Link to={`/provider/${good.provider.id}`}>\n                    {`${good.provider.profile.first_name} ${good.provider.profile.last_name}`}\n                  </Link>\n                </td>\n              </tr>\n            </tbody>\n          </Table>\n        }\n\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return { \n    goodsById: state.goods.byId,\n    goodLoaded: state.goods.indexLoaded \n  }  \n}\n\nexport default connect(\n  mapStateToProps\n)(Good);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { fetchOntologyCategories } from '../../store/actions/ontologyActions.js';\nimport _ from 'lodash';\nimport { provinceOptions } from '../../store/defaults';\n\n// redux\nimport { connect } from 'react-redux'\nimport SelectField from '../shared/fields/SelectField'\nimport GeneralField from '../shared/fields/GeneralField'\nimport { createGood, updateGood, GOOD_SUCCESS } from '../../store/actions/goodActions.js'\nimport { fetchProviders } from '../../store/actions/providerActions.js'\nimport RadioField from '../shared/fields/RadioField'\nimport { formatLocation } from '../../helpers/location_helpers.js';\n\n\nimport { Button, Form, FormGroup, FormControl, FormLabel, Col, Row } from 'react-bootstrap';\n\nclass GoodForm extends Component {\n  constructor(props) {\n    super(props);\n    let good = {};\n    if (this.props.match.params.id) {\n      good = this.props.goodsById[this.props.match.params.id];\n    }\n\n    this.state = {\n      goodId: good.id,\n      mode: (good.id) ? 'edit' : 'new',\n      is_provider_location: false,\n      form: {\n        name: good.name || '',\n        desc: good.desc || '',\n        category: good.category || '',\n        available_from: good.available_from || '',\n        available_to: good.available_to || '',\n        transportation: good.transportation || '',\n        condition: good.condition || '',\n        material: good.material || '',\n        quantity: good.quantity || '',\n        length: good.length || '',\n        width: good.width || '',\n        height: good.height || '',\n        diameter: good.diameter || '',\n        email: good.email || '',\n        primary_phone_number: good.primary_phone_number || '',\n        alt_phone_number: good.alt_phone_number || '',\n        location: Object.assign({\n          street_address: '',\n          apt_number: '',\n          city: '',\n          province: '',\n          postal_code: ''\n        }, good.location),\n        share_with: good.share_with || '',\n        notes: good.notes || '',\n        provider_id: (good.provider && good.provider.id) || ''\n      }\n    }\n\n    this.formValChange = this.formValChange.bind(this);\n    this.locationChange = this.locationChange.bind(this);\n    this.submit = this.submit.bind(this);\n    this.indicatorChange = this.indicatorChange.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.dispatch(fetchOntologyCategories('goods'));\n    this.props.dispatch(fetchProviders());\n  }\n\n  formValChange(e, id=e.target.id) {\n    let nextForm;\n    if (id === 'location') {\n      nextForm = {...this.state.form, [id]: JSON.parse(e.target.value)};\n    }\n    else {\n      nextForm = {...this.state.form, [id]: e.target.value};\n    }\n    this.setState({ form: nextForm });\n  }\n\n  locationChange(e) {\n    let nextForm = _.clone(this.state.form);\n    nextForm['location'][e.target.id] = e.target.value\n    this.setState({ form: nextForm });\n  }\n\n  indicatorChange(e, id) {\n    this.setState({ [id] : JSON.parse(e.target.value) });\n  }\n\n  submit() {\n    let form = Object.assign({}, this.state.form);\n    if (this.state.mode === 'edit') {\n      this.props.dispatch(\n        updateGood(this.state.goodId, form, (status, err, goodId) => {\n        if (status === GOOD_SUCCESS) {\n          this.props.history.push('/goods/')\n        } else {\n          const error_messages =\n            _.reduce(JSON.parse(err.message), (result, error_messages, field) => {\n              const titleizedField = (field.charAt(0).toUpperCase() + field.slice(1))\n                .split('_').join(' ')\n              _.each(error_messages, message => {\n                result.push(message.replace('This field', titleizedField))\n              })\n              return result;\n            }, [])\n          this.setState({ showAlert: true, error_messages: error_messages });\n        }\n      }));\n    } else {\n      this.props.dispatch(\n        createGood(this.state.form, (status, err, goodId) => {\n        if (status === GOOD_SUCCESS) {\n          this.props.history.push('/goods/')\n        } else {\n          const error_messages =\n            _.reduce(JSON.parse(err.message), (result, error_messages, field) => {\n              const titleizedField = (field.charAt(0).toUpperCase() + field.slice(1))\n                .split('_').join(' ')\n              _.each(error_messages, message => {\n                result.push(message.replace('This field', titleizedField))\n              })\n              return result;\n            }, [])\n          this.setState({ showAlert: true, error_messages: error_messages });\n        }\n      }));\n    }\n  }\n\n  render() {\n    const p = this.props;\n\n    const formTitle = (this.state.mode === 'edit') ?\n      'Edit Good Profile' : 'New Good'\n\n    let provider;\n    if (this.state.form.provider_id) {\n      provider = this.props.providersById && this.props.providersById[this.state.form.provider_id];\n    }\n\n    return (\n      <Row className=\"content\">\n        <Col sm={12}>\n          <h3>{formTitle}</h3>\n          <hr />\n        </Col>\n        <Col sm={12}>\n            <Form horizontal>\n            {this.state.showAlert &&\n              <Col sm={12} className=\"flash-error\">\n                {_.map(this.state.error_messages, (message, index) => {\n                  return (\n                    <li key={index}>\n                      {message}\n                    </li>\n                  );\n                })}\n              </Col>\n            }\n            <SelectField\n              id=\"provider_id\"\n              label=\"Provider\"\n              options={_.reduce(p.providers, (map, provider) => {\n                if (provider.type === 'Individual') {\n                  map[provider.id] = provider.profile.first_name + \" \" + provider.profile.last_name;\n                } else {\n                  map[provider.id] = provider.company\n                }\n                return map;\n              }, {})}\n              componentClass=\"select\"\n              value={this.state.form.provider_id}\n              onChange={this.formValChange}\n              required\n            />\n\n            <FormGroup>\n              <Col smOffset={3} sm={9}>\n                <Link to=\"/providers/new\">\n                  <Button>\n                    Add new provider\n                  </Button>\n                </Link>\n              </Col>\n            </FormGroup>\n\n            <GeneralField\n              id=\"name\"\n              label=\"Name\"\n              type=\"text\"\n              value={this.state.form.name}\n              onChange={this.formValChange}\n              required\n            />\n\n            <FormGroup controlId=\"desc\">\n              <Col componentClass={FormLabel} sm={3}>\n                Description\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.desc} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"category\">\n              <Col componentClass={FormLabel} sm={3}>\n                Category *\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  componentClass=\"select\"\n                  placeholder=\"select\"\n                  value={this.state.form.category}\n                  onChange={this.formValChange}\n                  required\n                >\n                  <option value=\"select\">-- Not Set --</option>\n                  <option value=\"Furniture\">Furniture</option>\n                  <option value=\"Food\">Food</option>\n                  <option value=\"Clothing\">Clothing</option>\n                  <option value=\"Utensils\">Utensils</option>\n                  <option value=\"Books\">Books</option>\n                </FormControl>\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"transportation\">\n              <Col componentClass={FormLabel} sm={3}>\n                Transportation\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.transportation} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"available_from\">\n              <Col componentClass={FormLabel} sm={3}>\n                Available from\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"date\"\n                  value={this.state.form.available_from}\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"available_to\">\n              <Col componentClass={FormLabel} sm={3}>\n                Available until\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"date\"\n                  value={this.state.form.available_to}\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"condition\">\n              <Col componentClass={FormLabel} sm={3}>\n                Condition\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.condition} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"material\">\n              <Col componentClass={FormLabel} sm={3}>\n                Material\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.material} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"quantity\">\n              <Col componentClass={FormLabel} sm={3}>\n                Quantity\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.quantity}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"length\">\n              <Col componentClass={FormLabel} sm={3}>\n                Length\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.length}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"width\">\n              <Col componentClass={FormLabel} sm={3}>\n                Width\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.width}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"height\">\n              <Col componentClass={FormLabel} sm={3}>\n                Height\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.height}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"diameter\">\n              <Col componentClass={FormLabel} sm={3}>\n                Diameter\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  type=\"text\"\n                  value={this.state.form.diameter}\n                  placeholder=\"\"\n                  onChange={this.formValChange}\n                />\n              </Col>\n            </FormGroup>\n\n            <GeneralField\n              id=\"email\"\n              label=\"Contact Person Email\"\n              type=\"email\"\n              value={this.state.form.email}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"primary_phone_number\"\n              label=\"Telephone\"\n              type=\"tel\"\n              value={this.state.form.primary_phone_number}\n              onChange={this.formValChange}\n              required\n            />\n            <GeneralField\n              id=\"alt_phone_number\"\n              label=\"Alternative Phone Number\"\n              type=\"tel\"\n              value={this.state.form.alt_phone_number}\n              onChange={this.formValChange}\n              required\n            />\n            <RadioField\n              id=\"is_provider_location\"\n              label=\"Location\"\n              options={{ 'Same as provider': true, 'Other': false }}\n              onChange={this.indicatorChange}\n              defaultChecked={this.state.is_provider_location}\n              required\n            />\n            {this.state.is_provider_location && this.state.form.provider_id &&\n              <div>\n                <FormGroup controlId=\"location\">\n                  <Col className=\"required\" componentClass={FormLabel} sm={3}>\n                    Select the location this good is provided at\n                  </Col>\n                  <Col sm={9}>\n                    <Form.Check\n                      name=\"provider_address\"\n                      value={JSON.stringify(provider.main_address)}\n                      onChange={(e) => this.formValChange(e, 'location')}\n                      type=\"radio\"\n                    >\n                      {formatLocation(provider.main_address)}\n                    </Form.Check>{' '}\n                    { provider.other_addresses.map((address, index) =>\n                    <Form.Check\n                      name=\"provider_address\"\n                      value={JSON.stringify(address)}\n                      onChange={(e) => this.formValChange(e, 'location')}\n                      key={index}\n                      type=\"radio\"\n                      >\n                      {formatLocation(address)}\n                    </Form.Check>\n                    )}\n                  </Col>\n                </FormGroup>\n              </div>\n            }\n            {!this.state.is_provider_location &&\n            <div>\n              <GeneralField\n                id=\"street_address\"\n                label=\"Street Address\"\n                type=\"text\"\n                value={this.state.form.location.street_address}\n                onChange={this.locationChange}\n              />\n              <GeneralField\n                id=\"apt_number\"\n                label=\"Apt. #\"\n                type=\"text\"\n                value={this.state.form.location.apt_number}\n                onChange={this.locationChange}\n              />\n              <GeneralField\n                id=\"city\"\n                label=\"City\"\n                type=\"text\"\n                value={this.state.form.location.city}\n                onChange={this.locationChange}\n              />\n              <SelectField\n                id=\"province\"\n                label=\"Province\"\n                options={provinceOptions}\n                componentClass=\"select\"\n                value={this.state.form.location.province}\n                onChange={this.locationChange}\n              />\n              <GeneralField\n                id=\"postal_code\"\n                label=\"Postal Code\"\n                type=\"text\"\n                value={this.state.form.location.postal_code}\n                onChange={this.locationChange}\n              />\n            </div>\n            }\n\n            <FormGroup controlId=\"share_with\">\n              <Col componentClass={FormLabel} sm={3}>\n                Share with\n              </Col>\n              <Col sm={9}>\n                <FormControl\n                  componentClass=\"select\"\n                  placeholder=\"select\"\n                  value={this.state.form.share_with}\n                  onChange={this.formValChange}\n                >\n                  <option value=\"select\">-- Not Set --</option>\n                  <option value=\"Private\">Private</option>\n                  <option value=\"Public\">Public</option>\n                  <option value=\"Boost Child & Youth Advocacy Centre\">Boost Child & Youth Advocacy Centre</option>\n                  <option value=\"Children's Aid Society of Toronto\">Children's Aid Society of Toronto</option>\n                  <option value=\"Abrigo Centre\">Abrigo Centre</option>\n                  <option value=\"Barbra Schlifer Commemorative Clinic\">Barbra Schlifer Commemorative Clinic</option>\n                  <option value=\"Durham Rape Crisis Centre\">Durham Rape Crisis Centre</option>\n                  <option value=\"Durham Children's Aid Society\">Durham Children's Aid Society</option>\n                  <option value=\"Alexandra Park Community Centre\">Alexandra Park Community Centre</option>\n                  <option value=\"Applegrove Community Complex\">Applegrove Community Complex</option>\n                  <option value=\"Albion Neighbourhood Goods\">Albion Neighbourhood Goods</option>\n                  <option value=\"Applegrove Community Complex\">Applegrove Community Complex</option>\n                  <option value=\"Kababayan Multicultural Centre\">Kababayan Multicultural Centre</option>\n                  <option value=\"Central Toronto Youth Goods\">Central Toronto Youth Goods</option>\n                  <option value=\"Covenant House Toronto\">Covenant House Toronto</option>\n                  <option value=\"Durham Youth Housing and Support Goods\">Durham Youth Housing and Support Goods</option>\n                  <option value=\"Eva's Initiatives\">Eva's Initiatives</option>\n                  <option value=\"Horizons for Youth\">Horizons for Youth</option>\n                  <option value=\"AIDS Committee of Durham Region\">AIDS Committee of Durham Region</option>\n                  <option value=\"Arab Community Centre of Toronto\">Arab Community Centre of Toronto</option>\n                  <option value=\"Pediatric Oncology Group of Ontario\">Pediatric Oncology Group of Ontario</option>\n                  <option value=\"Adventist community goods\">Adventist community goods</option>\n                  <option value=\"Aurora Food Pantry\">Aurora Food Pantry</option>\n                  <option value=\"Bluffs Food Bank\">Bluffs Food Bank</option>\n                  <option value=\"Brock Community Food Bank\">Brock Community Food Bank</option>\n                  <option value=\"Markham Food Bank\">Markham Food Bank</option>\n                  <option value=\"Parkdale Community Food Bank\">Parkdale Community Food Bank</option>\n                </FormControl>\n              </Col>\n            </FormGroup>\n\n            <FormGroup controlId=\"notes\">\n              <Col componentClass={FormLabel} sm={3}>\n                Notes\n              </Col>\n              <Col sm={9}>\n                <FormControl type=\"text\" value={this.state.form.notes} onChange={this.formValChange} />\n              </Col>\n            </FormGroup>\n\n            <FormGroup>\n              <Col smOffset={3} sm={9}>\n                <Button onClick={this.submit}>\n                  Submit\n                </Button>\n              </Col>\n            </FormGroup>\n          </Form>\n        </Col>\n      </Row>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    goodsById: state.goods.byId,\n    servicesCategories: state.ontology.services.categories,\n    categoriesLoaded: state.ontology.services.loaded,\n    providers: state.providers.filteredProviders || [],\n    providersById: state.providers.byId,\n    providersLoaded: state.providers.loaded,\n    providerIndex: state.providers.index\n  }\n}\n\nexport default connect(mapStateToProps)(withRouter(GoodForm));\n","import { getJson } from \"./index\";\n\nexport async function fetchAdminLogs() {\n  return getJson('/admin_logs/');\n}\n","import React, { useEffect, useState } from 'react';\n// redux\nimport { fetchAdminLogs } from '../api/adminLogApi';\nimport { Container } from \"@material-ui/core\";\nimport { Link, Loading, DataTable } from \"./shared\";\n\nfunction object_url(contentType, objectId) {\n  if (contentType === 'Person') {\n    return `/clients/${objectId}`\n  } else if (contentType === 'EligibilityCriteria') {\n    return `/eligibility-criteria/${objectId}`\n  }\n  return `/${contentType.toLowerCase()}s/${objectId}`\n}\n\nconst columns = [\n  {\n    name: 'action_time',\n    label: 'Time',\n    options: {\n      customBodyRender: time => {\n        return new Date(time).toLocaleString();\n      }\n    }\n  },\n  {\n    name: 'user',\n    label: 'Username',\n    options: {\n      customBodyRender: user => {\n        return (\n          <Link color to={`/users/${user.id}`}>\n            {user.username}\n          </Link>\n        )\n      }\n    }\n  },\n  {\n    name: 'object_id',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'object_repr',\n    options: {\n      sort: false,\n      viewColumns: false,\n      display: 'excluded',\n      searchable: false,\n      filter: false,\n    }\n  },\n  {\n    name: 'action',\n    label: 'Action',\n    options: {\n      customBodyRender: (action, {rowData}) => {\n        const objectId = rowData[2];\n        const objectRepr = rowData[3];\n        return (\n          <span>\n            {action + ' '}\n            <Link color to={object_url(objectRepr, objectId)}>\n              {objectId}\n            </Link>\n          </span>\n        )\n      }\n    }\n  },\n  {\n    name: 'change_message',\n    label: 'Message',\n    options: {\n      customBodyRender: msg => {\n        if (msg) {\n          try {\n            msg = JSON.parse(msg);\n            if (msg.reason != null)\n              return 'Reason: ' + msg.reason;\n          } catch (e) {\n          }\n        }\n        return 'N/A';\n      }\n    }\n  }\n];\n\nexport default function AdminLogs() {\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    fetchAdminLogs().then(data => {\n      setData(data);\n      setLoading(false);\n    });\n  }, []);\n\n  if (loading)\n    return <Loading message={`Loading admin logs...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Admin Logs\"}\n        data={data}\n        columns={columns}\n        options={{\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n        }}\n      />\n    </Container>\n  );\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { Bar as BarChart, Pie as PieChart } from 'react-chartjs';\nimport { Table, Button } from 'react-bootstrap';\nimport { Print } from \"@material-ui/icons\";\nimport { serverHost } from '../store/defaults.js';\nimport SelectField from './shared/fields/SelectField';\n// styles\nimport '../stylesheets/Reporting.scss';\n\nconst START_YEARS = [1931, 1941, 1951, 1961, 1971, 1981, 1991, 2001, 2011]\n\nexport default class Report extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      total_clients: 0,\n      number_of_clients_by_gender: {},\n      number_of_clients_by_birth_year: {},\n      number_of_clients_by_marital_status: {},\n      number_of_clients_by_language: {},\n      number_of_providers_by_status: {},\n      number_of_providers_by_type: {},\n      number_of_individual_providers_by_category: {},\n      selectedCategory: '',\n      selectedAttribute: '',\n    }\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n  }\n\n  componentWillMount() {\n    const url = serverHost + '/reporting?years=' + START_YEARS;\n    fetch(url, {\n        method: 'get',\n        headers: new Headers({\n          'Authorization': `JWT ${localStorage.getItem('jwt_token')}`\n        }),\n      }).then(response => response.json())\n      .then(data => {\n        this.setState({\n          total_clients: data.total_clients,\n          number_of_clients_by_gender: data.number_of_clients_by_gender,\n          number_of_clients_by_birth_year: data.number_of_clients_by_birth_year,\n          number_of_clients_by_marital_status: data.number_of_clients_by_marital_status,\n          number_of_clients_by_language: data.number_of_clients_by_language,\n          number_of_providers_by_status: data.number_of_providers_by_status,\n          number_of_providers_by_type: data.number_of_providers_by_type,\n          number_of_individual_providers_by_category: data.number_of_individual_providers_by_category\n        })\n      }\n    );\n  }\n\n  handleSelectChange(e) {\n    this.setState({ [e.target.id]: e.target.value })\n  }\n\n  render() {\n    const reportingCategoryOptions = ['Clients', 'Providers', 'Services', 'Matches']\n\n    const attributeOptions = {\n      'Clients': ['Birth Year', 'Gender', 'Language', 'Marital Status'],\n      'Providers': ['Individuals by Category', 'Status', 'Type'],\n      'Services': ['Category', 'Type'],\n      'Matches': ['Time between selected and matched', 'Time between selected and fulfilled']\n\n    }\n\n    const year_labels = _.map(START_YEARS, (start_year) => {\n      return `${start_year}-${start_year + 9}`\n    });\n\n    const barChartDataBirthYear = {\n      labels: year_labels,\n      datasets: [{\n        data: Object.values(this.state.number_of_clients_by_birth_year),\n      }]\n    }\n\n    const barChartOptions = {\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero:true\n          }\n        }]\n      }\n    }\n\n    const barChartDataLanguage = {\n      labels: Object.keys(this.state.number_of_clients_by_language),\n      datasets: [{\n        data: Object.values(this.state.number_of_clients_by_language),\n      }]\n    }\n\n    const pieChartDataGender = [\n      {\n        value: this.state.number_of_clients_by_gender[\"Female\"],\n        color:\"#F7464A\",\n        highlight: \"#FF5A5E\",\n        label: \"Female\"\n      },\n      {\n        value: this.state.number_of_clients_by_gender[\"Male\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Male\"\n      },\n      {\n        value: this.state.number_of_clients_by_gender[\"Other\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"Other\"\n      }\n    ]\n\n    const pieChartDataProviderStatus = [\n      {\n        value: this.state.number_of_providers_by_status[\"Internal\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Internal\"\n      },\n      {\n        value: this.state.number_of_providers_by_status[\"External\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"External\"\n      }\n    ]\n\n        const pieChartDataIndividualProviderCategory = [\n      {\n        value: this.state.number_of_individual_providers_by_category[\"Volunteer/Goods Donor\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Volunteer/Goods Donor\"\n      },\n      {\n        value: this.state.number_of_individual_providers_by_category[\"Professional Service Provider\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"Professional Service Provider\"\n      }\n    ]\n\n    const pieChartDataProviderType = [\n      {\n        value: this.state.number_of_providers_by_type[\"Individual\"],\n        color: \"#46BFBD\",\n        highlight: \"#5AD3D1\",\n        label: \"Individual\"\n      },\n      {\n        value: this.state.number_of_providers_by_type[\"Organization\"],\n        color: \"#FDB45C\",\n        highlight: \"#FFC870\",\n        label: \"Organization\"\n      }\n    ]\n\n    const barChartDataMaritalStatus = {\n      labels: Object.keys(this.state.number_of_clients_by_marital_status),\n      datasets: [{\n        data: Object.values(this.state.number_of_clients_by_marital_status),\n      }]\n    }\n\n    const pieChartOptions = {\n      maintainAspectRatio: false,\n      responsive: false,\n      legend: {\n        display: true,\n        position: 'right',\n        labels: {\n          boxWidth: 10\n        }\n      }\n    }\n\n    return (\n      <div className=\"content client\">\n        <Button bsStyle=\"primary\" onClick={() => window.print()} className=\"print-button\">\n          <Print fontSize=\"small\"/>\n        </Button>\n        <SelectField\n          id='selectedCategory'\n          componentClass=\"select\"\n          label='Get a report on'\n          value={this.state.selectedCategory}\n          options={reportingCategoryOptions}\n          onChange={this.handleSelectChange}\n        />\n        <br></br>\n        <br></br>\n        <SelectField\n          id='selectedAttribute'\n          componentClass=\"select\"\n          label='Select attribute'\n          value={this.state.selectedAttribute}\n          options={(this.state.selectedCategory !== '')\n            ? attributeOptions[this.state.selectedCategory]\n            : []}\n          onChange={this.handleSelectChange}\n        />\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute === 'Gender') &&\n          <GenderStats\n            data={pieChartDataGender}\n            options={pieChartOptions}\n            totalClientsCount={this.state.total_clients}\n            ClientsCountByGender={this.state.number_of_clients_by_gender}\n          />\n        }\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute ==='Language') &&\n          <LanguageStats\n            data={barChartDataLanguage}\n            options={barChartOptions}\n            totalClientsCount={this.state.total_clients}\n            ClientsCountByLanguage={this.state.number_of_clients_by_language}\n          />\n        }\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute === 'Marital Status') &&\n          <MaritalStatusStats\n            data={barChartDataMaritalStatus}\n            options={barChartOptions}\n            totalClientsCount={this.state.total_clients}\n            ClientsCountByMaritalStatus={this.state.number_of_clients_by_marital_status}\n          />\n        }\n        {(this.state.selectedCategory === 'Clients' && this.state.selectedAttribute === 'Birth Year') &&\n          <BirthYearStats\n            data={barChartDataBirthYear}\n            options={barChartOptions}\n            ClientsCountByBirthYear={this.state.number_of_clients_by_birth_year}\n          />\n        }\n        {(this.state.selectedCategory === 'Providers' && this.state.selectedAttribute === 'Status') &&\n          <ProviderStatusStats\n            data={pieChartDataProviderStatus}\n            options={pieChartOptions}\n            ProvidersCountByStatus={this.state.number_of_providers_by_status}\n          />\n        }\n        {(this.state.selectedCategory === 'Providers' && this.state.selectedAttribute === 'Type') &&\n          <ProviderTypeStats\n            data={pieChartDataProviderType}\n            options={pieChartOptions}\n            ProvidersCountByType={this.state.number_of_providers_by_type}\n          />\n        }\n        {(this.state.selectedCategory === 'Providers' && this.state.selectedAttribute === 'Individuals by Category') &&\n          <IndividualProviderCategoryStats\n            data={pieChartDataIndividualProviderCategory}\n            options={pieChartOptions}\n            IndividualProvidersCountByCategory={this.state.number_of_individual_providers_by_category}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nfunction GenderStats({ data, options, totalClientsCount, ClientsCountByGender}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of clients by Gender</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            <div>\n              <b>Total = {totalClientsCount}</b>\n            </div>\n            {\n              _.map(ClientsCountByGender, (count, gender) => {\n                return (\n                  <div key={gender}>\n                    <b>{gender} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction ProviderStatusStats({ data, options, ProvidersCountByStatus}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of providers by Status</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            {\n              _.map(ProvidersCountByStatus, (count, status) => {\n                return (\n                  <div key={status}>\n                    <b>{status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction IndividualProviderCategoryStats({ data, options, IndividualProvidersCountByCategory}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of individual providers by Category</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            {\n              _.map(IndividualProvidersCountByCategory, (count, status) => {\n                return (\n                  <div key={status}>\n                    <b>{status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction ProviderTypeStats({ data, options, ProvidersCountByType}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of providers by type</b></td>\n          <td>\n            <PieChart data={data} options={options} />\n            {\n              _.map(ProvidersCountByType, (count, status) => {\n                return (\n                  <div key={status}>\n                    <b>{status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction LanguageStats({ data, options, ClientsCountByLanguage}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of clients by Language</b></td>\n          <td>\n            <BarChart data={data} options={options} />\n            {\n              _.map(ClientsCountByLanguage, (count, first_language) => {\n                return (\n                  <div key={first_language}>\n                    <b>{first_language} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\nfunction MaritalStatusStats({ data, options, ClientsCountByMaritalStatus}) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Breakdown of clients by Marital Status</b></td>\n          <td>\n            <BarChart data={data} options={options} />\n            {\n              _.map(ClientsCountByMaritalStatus, (count, marital_status) => {\n                return (\n                  <div key={marital_status}>\n                    <b>{marital_status} = {count}</b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction BirthYearStats({ data, options, ClientsCountByBirthYear }) {\n  return (\n    <Table bordered condensed className=\"profile-table\">\n      <tbody>\n        <tr>\n          <td><b>Distribution of clients by Birth Year</b></td>\n          <td>\n            <BarChart data={data} options={options} />\n            {\n              _.map(ClientsCountByBirthYear, (count, startYear) => {\n                return (\n                  <div key={startYear}>\n                    <b>\n                      Clients born between {startYear} and {parseInt(startYear, 10) + 9} = {count}\n                    </b>\n                  </div>\n                );\n              })\n            }\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { fetchEligibilities, deleteEligibility, createEligibility, updateEligibility } from '../../api/eligibilityApi';\nimport {\n  Chip, Container, IconButton, Dialog, DialogActions, DialogTitle, DialogContent,\n  Button\n} from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Add as AddIcon, Delete as DeleteIcon, Edit as EditIcon } from \"@material-ui/icons\";\nimport { DeleteModal, Loading, DataTable } from \"../shared\";\nimport GeneralField from \"../shared/fields/GeneralField\";\n\nconst useStyles = makeStyles(() => ({\n  button: {\n    padding: 4\n  }\n}));\n\nconst ADD_TITLE = 'Add Eligibility Criteria';\nconst EDIT_TITLE = 'Edit Eligibility Criteria';\n\nfunction AddEditDialog({open, title, value, handleConfirm, handleClose}) {\n  const [err, setErr] = useState({\n    title: '',\n  });\n\n  /**\n   * @returns {boolean} true if passed.\n   */\n  const check = () => {\n    const newErr = {};\n    if (value.title === '')\n      newErr.title = 'This field is required';\n    setErr(newErr);\n    return value.title !== '';\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <GeneralField\n          autoFocus\n          label=\"Eligible criteria\"\n          value={value.title}\n          onChange={e => value.title = e.target.value}\n          error={!!err.title}\n          helperText={err.title}\n          fullWidth\n          InputLabelProps={{}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            if (check()) {\n              handleConfirm();\n            }\n          }}\n          color=\"primary\">\n          Confirm\n        </Button>\n        <Button onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default function Eligibilities() {\n  const [state, setState] = useState({\n    loading: true,\n    data: [],\n    value: {},\n    selectedId: null,\n    deleteDialogTitle: '',\n    showDeleteDialog: false,\n    dialogTitle: '',\n    showAddEditDialog: false,\n  });\n  const classes = useStyles();\n\n  useEffect(() => {\n    fetchEligibilities().then(data => {\n      setState(state => ({...state, loading: false, data}));\n    });\n  }, []);\n\n  const showDeleteDialog = (id, title) => () => {\n    setState(state => ({\n      ...state, selectedId: id, showDeleteDialog: true,\n      deleteDialogTitle: 'Delete ' + title + ' ?'\n    }));\n  };\n\n  const shoeEditDialog = (title, id) => () => setState(state => ({\n    ...state,\n    selectedId: id,\n    value: {title, id},\n    showAddEditDialog: true,\n    dialogTitle: EDIT_TITLE,\n  }));\n\n  const showAddDialog = () => setState(state => ({\n    ...state,\n    value: {title: ''},\n    showAddEditDialog: true,\n    dialogTitle: ADD_TITLE,\n  }));\n\n  const handleAdd = async () => {\n    try {\n      const newItem = await createEligibility(state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: [...state.data, newItem]\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleDelete = async (id, form) => {\n    try {\n      await deleteEligibility(id, form);\n      setState(state => ({\n        ...state, showDeleteDialog: false,\n        data: state.data.filter(item => item.id !== state.selectedId)\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleEdit = async () => {\n    try {\n      const newItem = await updateEligibility(state.value.id, state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: state.data.map(item => item.id === state.selectedId ? newItem : item),\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const columns = [\n    {\n      name: 'title',\n      label: 'Title',\n      options: {\n        setCellHeaderProps: () => ({style: {width: '80%'}})\n      }\n    },\n    {\n      name: 'id',\n      label: ' ',\n      options: {\n        sort: false,\n        filter: false,\n        viewColumns: false,\n        searchable: false,\n        download: false,\n        customBodyRender: (id, {rowData}) => {\n          return (\n            <span>\n              <IconButton\n                onClick={shoeEditDialog(...rowData)}\n                className={classes.button}\n                size=\"large\">\n                <EditIcon fontSize=\"small\" color=\"primary\"/>\n              </IconButton>\n              <IconButton\n                onClick={showDeleteDialog(id, rowData[0])}\n                className={classes.button}\n                size=\"large\">\n                <DeleteIcon fontSize=\"small\" color=\"secondary\"/>\n              </IconButton>\n            </span>\n          );\n        }\n      }\n    }\n  ];\n\n  if (state.loading)\n    return <Loading message={`Loading eligibilities...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Eligibility Criteria\"}\n        data={state.data}\n        columns={columns}\n        options={{\n          filter: false,\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n          customToolbar: () =>\n            <Chip\n              onClick={showAddDialog}\n              color=\"primary\"\n              icon={<AddIcon/>}\n              label=\"Add\"\n              variant=\"outlined\"/>\n        }}\n      />\n      <DeleteModal\n        objectId={state.selectedId}\n        title={state.deleteDialogTitle}\n        show={state.showDeleteDialog}\n        onHide={() => setState(state => ({...state, showDeleteDialog: false}))}\n        delete={handleDelete}\n      />\n      <AddEditDialog\n        open={state.showAddEditDialog}\n        value={state.value}\n        title={state.dialogTitle}\n        handleClose={() => setState(state => ({...state, showAddEditDialog: false}))}\n        handleConfirm={state.dialogTitle === ADD_TITLE ? handleAdd : handleEdit}\n      />\n    </Container>\n  );\n}\n","import { deleteJson, getJson, postJson, putJson } from \"./index\";\n\nexport function createQuestion(params) {\n  return postJson('/questions/', params);\n}\n\nexport function updateQuestion(id, params) {\n  return putJson('/questions/' + id + '/', params);\n}\n\nexport function fetchQuestion(id) {\n  return getJson('/questions/' + id + '/');\n}\n\nexport function fetchQuestions() {\n  return getJson('/questions/');\n}\n\nexport async function deleteQuestion(id, params) {\n  const response = await deleteJson('/questions/' + id + '/', params);\n  if (response.status !== 204)\n    throw Error('Server does not return correct code.');\n}\n","/**\n * For how the drag and drop works, please check the library repository:\n * https://github.com/atlassian/react-beautiful-dnd\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useHistory } from \"react-router\";\nimport { useDispatch } from 'react-redux';\nimport { providerFields, allForms, providerFormTypes } from '../../constants/provider_fields.js'\nimport { clientFields } from \"../../constants/client_fields\";\nimport { fetchQuestions } from '../../api/questionApi';\nimport RadioField from '../shared/fields/RadioField';\nimport { Button, Container, Grid, TextField, Typography, Divider, IconButton } from \"@material-ui/core\";\nimport SelectField from \"../shared/fields/SelectField\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { Close as Delete } from \"@material-ui/icons\";\nimport { fetchClientFields, updateClientFields, fetchProviderFields, updateProviderFields } from \"../../api/settingApi\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: 8,\n  },\n  droppable: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  submitButton: {\n    margin: '10px 0'\n  }\n}));\n\nconst radioButtonOptions = {'Mandatory': true, 'Not mandatory': false};\n\nfunction StepFields({stepFields, fields, stepName, handleRadioChange, handleDeleteField}) {\n  return stepFields.map(({field, required, type}, index) => {\n    return (\n      <Draggable key={field} draggableId={field} index={index}>\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            style={{\n              backgroundColor: snapshot.isDragging ? '#bbb' : null,\n              ...provided.draggableProps.style\n            }}>\n            <RadioField\n              required noStar row\n              key={field}\n              label={(fields[field] && fields[field]['label']) || field}\n              onChange={handleRadioChange(field, stepName)}\n              options={radioButtonOptions}\n              value={required}\n            />\n            <IconButton\n              onClick={() => !snapshot.isDragging && handleDeleteField(index, stepName)}\n              size=\"large\">\n              <Delete/>\n            </IconButton>\n          </div>\n        )}\n      </Draggable>\n    );\n  });\n}\n\nexport default function ManageFields() {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [state, setState] = useState({\n    category: '',\n    stepToAdd: '',\n    selectedStep: '',\n    selectedField: '',\n    questions: {},\n    /**\n     * @type {{organization: {form_structure: {}, steps_order: []}, }}\n     */\n    fields: {}\n  });\n\n  useEffect(() => {\n    fetchQuestions().then(questions => setState(state => ({...state, questions})));\n    // fetch provider fields\n    fetchProviderFields(false).then(fields => {\n      for (const category of Object.keys(fields)) {\n        const formStructure = fields[category].form_structure;\n        const stepsOrder = fields[category].steps_order;\n        for (const stepName of stepsOrder) {\n          const stepsList = [];\n          const steps = formStructure[stepName];\n          for (const [field, value] of Object.entries(steps)) {\n            stepsList.push({field, ...value});\n          }\n          fields[category].form_structure[stepName] = stepsList;\n        }\n      }\n      // server may not respond full list of provider options, add it manually\n      for (const providerCategory of Object.keys(providerFormTypes)) {\n        if (!fields[providerCategory])\n          fields[providerCategory] = {form_structure: [], steps_order: []};\n      }\n\n      setState(state => ({...state, fields: {...state.fields, ...fields}}));\n    });\n\n    // fetch clients fields\n    fetchClientFields().then(clientFields => {\n      const formStructure = clientFields.form_structure;\n      for (const stepName of Object.keys(formStructure)) {\n        const stepsList = [];\n        for (const [field, required] of Object.entries(formStructure[stepName])) {\n          stepsList.push({field, type: 'field', required});\n        }\n        formStructure[stepName] = stepsList;\n      }\n      setState(state => ({...state, fields: {...state.fields, client: clientFields}}));\n    })\n\n  }, [dispatch]);\n\n  const submit = async () => {\n    let form = {};\n    let submitFunction;\n    if (state.category === 'client') {\n      submitFunction = updateClientFields;\n      form = {\n        steps_order: state.fields.client.steps_order,\n        form_structure: {},\n      };\n      const formStructure = state.fields.client.form_structure;\n      for (const stepName of Object.keys(formStructure)) {\n        const newFormStructure = form.form_structure[stepName] = {};\n        for (const {field, required} of formStructure[stepName]) {\n          newFormStructure[field] = required\n        }\n      }\n    }\n    // providers\n    else {\n      submitFunction = updateProviderFields;\n      for (const category of Object.keys(state.fields)) {\n        form[category] = {\n          steps_order: state.fields[category].steps_order,\n          form_structure: {},\n        };\n        const formStructure = state.fields[category].form_structure;\n        for (const stepName of Object.keys(formStructure)) {\n          const newFormStructure = form[category].form_structure[stepName] = {};\n          for (const {field, required} of formStructure[stepName]) {\n            newFormStructure[field] = {type: 'field', required};\n          }\n        }\n      }\n      delete form.client;\n    }\n    console.log(form);\n    try {\n      await submitFunction(form);\n      history.push('/dashboard');\n    } catch (e) {\n      // TODO: show error message\n      console.error(e)\n    }\n  };\n\n  const initialOptions = useMemo(() => {\n    let fieldOptions = {};\n    const fields = state.category === 'client' ? clientFields : providerFields;\n    for (const [field, {label}] of Object.entries(fields)) {\n      fieldOptions[field] = label;\n    }\n    return fieldOptions;\n  }, [state.category]);\n\n  // this may not be efficient, but it is easier to implement...\n  const availableOptions = useMemo(() => {\n    if (!state.category) return {};\n    const options = {...initialOptions};\n    for (const steps of Object.values(state.fields[state.category].form_structure)) {\n      for (const {field} of steps) {\n        if (Object.keys(options).includes(field))\n          delete options[field];\n      }\n    }\n    return options;\n  }, [state.fields, state.category, initialOptions]);\n\n  const handleChange = useCallback(name => e => {\n    const value = e.target.value;\n    if (name === 'category') {\n      if (state.fields[value]) {\n        setState(state => ({\n          ...state, [name]: value, selectedField: '', selectedStep: '', stepToAdd: ''\n        }));\n      }\n    } else\n      setState(state => ({...state, [name]: value}));\n  }, [state.fields]);\n\n  const handleRadioChange = useCallback((field, stepName) => e => {\n    const fields = state.fields[state.category].form_structure[stepName];\n    for (const curr_field of fields) {\n      if (curr_field.field === field)\n        curr_field.required = e.target.value;\n    }\n  }, [state.fields, state.category]);\n\n  const handleDeleteField = useCallback((index, stepName) => {\n    const fields = [...state.fields[state.category].form_structure[stepName]];\n    fields.splice(index, 1);\n    state.fields[state.category].form_structure[stepName] = fields;\n    setState(state => ({...state, fields: {...state.fields}}));\n  }, [state.fields, state.category]);\n\n  const handleAddField = useCallback(() => {\n    const formStructure = state.fields[state.category].form_structure;\n    for (const steps of Object.values(formStructure)) {\n      for (const {field} of steps) {\n        if (field === state.selectedField)\n          return;\n      }\n    }\n    state.fields[state.category].form_structure[state.selectedStep].push({\n      field: state.selectedField,\n      type: 'field', // TODO: implement questions\n      required: false,\n    });\n    setState(state => ({...state, selectedField: '', fields: {...state.fields}}))\n  }, [state.fields, state.category, state.selectedStep, state.selectedField]);\n\n  const handleRemoveStep = useCallback((index, stepName) => () => {\n    state.fields[state.category].steps_order.splice(index, 1);\n    delete state.fields[state.category].form_structure[stepName];\n    setState(state => ({...state, fields: {...state.fields}}))\n  }, [state.fields, state.category]);\n\n  // a little function to help us with reordering the result\n  const reorder = (list, startIndex, endIndex) => {\n    const [removed] = list.splice(startIndex, 1);\n    list.splice(endIndex, 0, removed);\n  };\n\n  // invoked when something is dropped\n  const onDragEnd = ({source, destination}) => {\n\n    // dropped outside the list\n    if (!destination) {\n      return;\n    }\n    const targetStepName = destination.droppableId;\n    const sourceStepName = source.droppableId;\n\n    // moved to other steps\n    if (source.droppableId !== destination.droppableId) {\n      const sourceSteps = state.fields[state.category].form_structure[sourceStepName];\n      const targetSteps = state.fields[state.category].form_structure[targetStepName];\n      const [removed] = sourceSteps.splice(source.index, 1);\n      targetSteps.splice(destination.index, 0, removed);\n    }\n    // moved within a step\n    else {\n      reorder(\n        state.fields[state.category].form_structure[targetStepName],\n        source.index,\n        destination.index\n      );\n    }\n  };\n\n  const newStepComponent = useMemo(() => {\n    if (!state.category) return null;\n    return (\n      <Grid container alignItems=\"flex-end\" spacing={2} className={classes.root}>\n        <Grid item>\n          <TextField\n            label=\"New step name\"\n            value={state.stepToAdd}\n            onChange={handleChange('stepToAdd')}\n          />\n        </Grid>\n        <Grid item>\n          <Button variant=\"outlined\" color=\"primary\" disabled={!state.stepToAdd} onClick={() => {\n            setState(state => {\n              state.fields[state.category].form_structure[state.stepToAdd] = [];\n              state.fields[state.category].steps_order.push(state.stepToAdd);\n              return ({...state, fields: {...state.fields}});\n            });\n          }}>\n            Add Step\n          </Button>\n        </Grid>\n      </Grid>\n    )\n  }, [state.stepToAdd, state.category, classes.root, handleChange]);\n\n  const newFieldComponent = useMemo(() => {\n    if (!state.category) return null;\n    return (\n      <Grid container alignItems=\"flex-end\" spacing={2}>\n        <Grid item sm={3} xs={4}>\n          <SelectField\n            label=\"Choose step\"\n            value={state.selectedStep}\n            onChange={handleChange('selectedStep')}\n            options={state.fields[state.category].steps_order}\n            noDefaultStyle\n            formControlProps={{fullWidth: true}}\n            noEmpty\n            controlled\n          />\n        </Grid>\n        <Grid item sm={7} xs={8}>\n          <SelectField\n            label=\"Choose field\"\n            value={state.selectedField}\n            onChange={handleChange('selectedField')}\n            options={availableOptions}\n            noDefaultStyle\n            formControlProps={{fullWidth: true}}\n            noEmpty\n            controlled\n          />\n        </Grid>\n        <Grid item sm={2}>\n          <Button variant=\"outlined\" color=\"primary\" onClick={handleAddField}\n                  disabled={!state.selectedField || !state.selectedStep}>\n            Add Field\n          </Button>\n        </Grid>\n      </Grid>\n    )\n  }, [state.fields, state.category, handleChange, handleAddField, state.selectedField,\n    state.selectedStep, availableOptions]);\n\n  const fieldsComponents = useMemo(() => {\n    if (!state.fields[state.category]) return null;\n    const formStructure = state.fields[state.category].form_structure;\n    return Object.keys(formStructure).map((stepName, index) => {\n      return (\n        <div key={index} className={classes.root}>\n          <Typography variant=\"h6\" color=\"textSecondary\">\n            {stepName}\n            <IconButton onClick={handleRemoveStep(index, stepName)} size=\"large\">\n              <Delete/>\n            </IconButton>\n          </Typography>\n          <Droppable droppableId={stepName} className={classes.droppable}>\n            {(provided, snapshot) => (\n              <div {...provided.droppableProps} ref={provided.innerRef}>\n                <StepFields\n                  stepName={stepName}\n                  stepFields={formStructure[stepName]}\n                  handleRadioChange={handleRadioChange}\n                  handleDeleteField={handleDeleteField}\n                  fields={state.category === 'client' ? clientFields : providerFields}\n                />\n                {provided.placeholder}\n              </div>\n            )}\n          </Droppable>\n          <Divider/>\n        </div>\n      );\n    });\n  }, [state.fields, state.category, classes.root, classes.droppable,\n    handleRadioChange, handleDeleteField, handleRemoveStep]);\n\n  return (\n    <Container>\n      <Typography variant=\"h5\">\n        Manage Fields\n      </Typography>\n      <SelectField\n        label=\"Please select\"\n        value={state.category}\n        onChange={handleChange('category')}\n        options={allForms}\n        noEmpty\n      />\n      {newStepComponent}\n      {newFieldComponent}\n      <DragDropContext onDragEnd={onDragEnd}>\n        {fieldsComponents}\n      </DragDropContext>\n      {state.category &&\n      <Button variant=\"outlined\" color=\"primary\" onClick={submit} className={classes.submitButton}>\n        Submit\n      </Button>}\n    </Container>\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport { fetchQuestions, updateQuestion, deleteQuestion, createQuestion } from '../../api/questionApi';\nimport {\n  Chip, Container, IconButton, Dialog, DialogActions, DialogTitle, DialogContent,\n  Button\n} from \"@material-ui/core\";\nimport makeStyles from '@material-ui/styles/makeStyles';\nimport { Add as AddIcon, Delete as DeleteIcon, Edit as EditIcon } from \"@material-ui/icons\";\nimport { DeleteModal, Loading, DataTable } from \"../shared\";\nimport SelectField from \"../shared/fields/SelectField\";\nimport GeneralField from \"../shared/fields/GeneralField\";\n\nconst useStyles = makeStyles(() => ({\n  button: {\n    padding: 4\n  },\n  formControl: {\n    margin: null,\n  },\n}));\n\nconst ADD_TITLE = 'Add Question';\nconst EDIT_TITLE = 'Edit Question';\nconst contentTypeOptions = {\n  provider: 'Provider',\n};\n\nfunction AddEditDialog({open, title, value, objectId, handleConfirm, handleClose}) {\n  const [err, setErr] = useState({\n    type: '',\n    value: '',\n  });\n\n  /**\n   * @returns {boolean} true if passed.\n   */\n  const check = () => {\n    const newErr = {};\n    if (value.content_type === '')\n      newErr.content_type = 'This field is required';\n    if (value.text === '')\n      newErr.text = 'This field is required';\n    setErr(newErr);\n    return value.content_type !== '' && value.text !== '';\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <SelectField\n          label={'Content type'}\n          value={value.content_type}\n          options={contentTypeOptions}\n          onChange={(e) => value.content_type = e.target.value}\n          disabled={title === EDIT_TITLE}\n          formControlProps={{fullWidth: true}}\n          error={!!err.content_type}\n          helperText={err.content_type}\n          required noDefaultStyle noEmpty\n        />\n        <GeneralField\n          label=\"Question\"\n          value={value.text}\n          onChange={e => value.text = e.target.value}\n          error={!!err.text}\n          helperText={err.text}\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            if (check()) {\n              handleConfirm();\n            }\n          }}\n          color=\"primary\">\n          Confirm\n        </Button>\n        <Button onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default function Questions() {\n  const [state, setState] = useState({\n    loading: true,\n    data: [],\n    value: {},\n    selectedId: null,\n    deleteDialogTitle: '',\n    showDeleteDialog: false,\n    dialogTitle: '',\n    showAddEditDialog: false,\n  });\n  const classes = useStyles();\n\n  useEffect(() => {\n    fetchQuestions().then(data => {\n      setState(state => ({...state, loading: false, data}));\n    });\n  }, []);\n\n  const showDeleteDialog = (id, title) => () => {\n    setState(state => ({\n      ...state, selectedId: id, showDeleteDialog: true,\n      deleteDialogTitle: 'Delete ' + title + ' ?'\n    }));\n  };\n\n  const showEditDialog = (text, type, id) => () => setState(state => ({\n    ...state,\n    value: {id, text, content_type: type},\n    selectedId: id,\n    showAddEditDialog: true,\n    dialogTitle: EDIT_TITLE,\n  }));\n\n  const showAddDialog = () => setState(state => ({\n    ...state,\n    value: {text: '', content_type: ''},\n    showAddEditDialog: true,\n    dialogTitle: ADD_TITLE,\n  }));\n\n  const handleAdd = async () => {\n    try {\n      const newItem = await createQuestion(state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: [...state.data, newItem]\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleDelete = async (id, form) => {\n    try {\n      await deleteQuestion(id, form);\n      setState(state => ({\n        ...state, showDeleteDialog: false,\n        data: state.data.filter(item => item.id !== state.selectedId)\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const handleEdit = async () => {\n    try {\n      const newItem = await updateQuestion(state.value.id, state.value);\n      setState(state => ({\n        ...state, showAddEditDialog: false,\n        data: state.data.map(item => item.id === state.selectedId ? newItem : item),\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const columns = [\n    {\n      name: 'text',\n      label: 'Text',\n      options: {\n        setCellHeaderProps: () => ({style: {width: '60%'}})\n      }\n    },\n    {\n      name: 'content_type',\n      label: 'Content type'\n    },\n    {\n      name: 'id',\n      label: ' ',\n      options: {\n        sort: false,\n        filter: false,\n        viewColumns: false,\n        searchable: false,\n        download: false,\n        customBodyRender: (id, {rowData}) => {\n          return (\n            <span>\n              <IconButton\n                onClick={showEditDialog(...rowData)}\n                className={classes.button}\n                size=\"large\">\n                <EditIcon fontSize=\"small\" color=\"primary\"/>\n              </IconButton>\n              <IconButton\n                onClick={showDeleteDialog(id, rowData[0])}\n                className={classes.button}\n                size=\"large\">\n                <DeleteIcon fontSize=\"small\" color=\"secondary\"/>\n              </IconButton>\n            </span>\n          );\n        }\n      }\n    }\n  ];\n\n  if (state.loading)\n    return <Loading message={`Loading questions...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Questions\"}\n        data={state.data}\n        columns={columns}\n        options={{\n          filter: false,\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n          customToolbar: () =>\n            <Chip\n              onClick={showAddDialog}\n              color=\"primary\"\n              icon={<AddIcon/>}\n              label=\"Add\"\n              variant=\"outlined\"/>\n        }}\n      />\n      <DeleteModal\n        objectId={state.selectedId}\n        title={state.deleteDialogTitle}\n        show={state.showDeleteDialog}\n        onHide={() => setState(state => ({...state, showDeleteDialog: false}))}\n        delete={handleDelete}\n      />\n      <AddEditDialog\n        open={state.showAddEditDialog}\n        value={state.value}\n        objectId={state.selectedId}\n        title={state.dialogTitle}\n        handleClose={() => setState(state => ({...state, showAddEditDialog: false}))}\n        handleConfirm={state.dialogTitle === ADD_TITLE ? handleAdd : handleEdit}\n      />\n    </Container>\n  );\n}\n","import React from 'react';\nimport { Switch } from 'react-router';\nimport { Route } from 'react-router-dom';\n\n// components\nimport Landing from './components/Landing';\nimport Login from './components/Login';\nimport LoginPane from './components/LoginPane';\nimport Dashboard from './components/Dashboard';\nimport Clients from './components/Clients';\nimport Client from './components/clients/Client';\nimport ClientForm from './components/clients/ClientForm'\nimport Users from './components/Users';\nimport User from './components/users/User';\nimport UserForm from './components/users/UserForm'\nimport NeedForm from './components/client_needs/NeedForm'\nimport Need from './components/client_needs/Need'\nimport PrivateRoute from './components/routes/PrivateRoute'\nimport AdminRoute from './components/routes/AdminRoute'\nimport Providers from './components/Providers';\nimport AddServicePrompt from './components/providers/AddServicePrompt'\nimport ProviderForm from './components/providers/ProviderForm'\nimport ProviderProfile from './components/providers/ProviderProfile'\nimport ProviderRatingForm from './components/providers/ProviderRatingForm.js';\nimport Services from './components/Services';\nimport Service from './components/services/Service';\nimport ServiceForm from './components/services/ServiceForm'\nimport Goods from './components/Goods';\nimport Good from './components/goods/Good';\nimport GoodForm from './components/goods/GoodForm'\nimport AdminLogs from './components/AdminLogs';\nimport Reporting from './components/Reporting';\nimport Eligibilities from './components/additionalFIelds/Eligibilities';\nimport ManageFields from './components/settings/ManageFields';\nimport Questions from './components/additionalFIelds/Questions';\n\nconst routes = (\n  <Switch>\n    <Route exact path='/' component={Landing} />\n    <Route path='/login' component={Login} />\n    <Route path='/login-pane' component={LoginPane} />\n    <PrivateRoute path='/dashboard' component={Dashboard} />\n\n    <PrivateRoute path='/clients/:id/edit' component={ClientForm} />\n    <PrivateRoute path='/clients/:id/needs/new' component={NeedForm} />\n    <PrivateRoute path='/clients/new' component={ClientForm} />\n    <PrivateRoute path='/clients/:id' component={Client} />\n    <PrivateRoute path='/clients' component={Clients} />\n\n    <AdminRoute path='/users/:id/edit' component={UserForm} />\n    <AdminRoute path='/users/new' component={UserForm} />\n    <AdminRoute path='/users/:id' component={User} />\n    <AdminRoute path='/users' component={Users} />\n    <AdminRoute path='/admin-logs' component={AdminLogs} />\n\n    <PrivateRoute path='/needs/:need_id/edit' component={NeedForm} />\n    <PrivateRoute path='/needs/:need_id' component={Need} />\n\n    <PrivateRoute path='/providers/:id/rate' component={ProviderRatingForm} />\n    <PrivateRoute path='/providers/new/add-service' component={AddServicePrompt} />\n    <PrivateRoute path='/providers/:formType/new' component={ProviderForm} />\n    <PrivateRoute path='/providers/:id/edit/' component={ProviderForm} />\n    <PrivateRoute path='/providers/:id' component={ProviderProfile} />\n    <PrivateRoute path='/providers' component={Providers} />\n\n    <PrivateRoute path='/services/:id/edit' component={ServiceForm} />\n    <PrivateRoute path='/services/new' component={ServiceForm} />\n    <PrivateRoute path='/services/:id' component={Service} />\n    <PrivateRoute path='/services' component={Services} />\n\n    <PrivateRoute path='/goods/:id/edit' component={GoodForm} />\n    <PrivateRoute path='/goods/new' component={GoodForm} />\n    <PrivateRoute path='/goods/:id' component={Good} />\n    <PrivateRoute path='/goods' component={Goods} />\n\n    <PrivateRoute path='/reporting' component={Reporting} />\n\n    <PrivateRoute path='/eligibility-criteria' component={Eligibilities} />\n\n    <PrivateRoute path='/questions' component={Questions} />\n\n    <AdminRoute path='/settings/manage-fields' component={ManageFields} />\n  </Switch>\n);\n\nexport default routes;\n","import React, { useState, useEffect } from \"react\";\nimport _ from 'lodash';\nimport { useParams } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\nimport { Container } from \"@material-ui/core\";\nimport Button from '@material-ui/core/Button'\nimport { Edit, Print } from '@material-ui/icons';\nimport { Link } from '../shared'\nimport Alert from '@material-ui/core/Alert';\n\nimport ClientNeeds from '../ClientNeeds';\nimport ClientInfoTable from './client_table/ClientInfoTable';\nimport AppointmentRow from '../appointments/AppointmentRow';\n\nimport { fetchClient } from '../../store/actions/clientActions.js'\nimport { fetchClientFields } from \"../../api/settingApi\";\nimport { clientFields } from '../../constants/client_fields.js'\n\n//Table\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nexport default function Client() {\n  //redux hooks\n  const dispatch = useDispatch();\n  const {id} = useParams();\n\n  const [state, setState] = useState({\n    data: null,\n    CF: null,\n    CN: null\n  });\n\n\n  useEffect(() => {\n      dispatch(fetchClient(id)).then(data => {\n        setState(state => ({\n          ...state,\n          data\n        }))\n      })\n  }, [dispatch, id]);\n\n  useEffect(() => {\n      if (state.CF == null) {\n        fetchClientFields().then(json => {\n          setState(state => ({\n            ...state,\n            CF: json\n          }))\n        })\n      }\n    }, [dispatch, state.CF]\n  );\n\n\n  if (state.data && state.CF) {\n    const client = state.data;\n    const CF = state.CF;\n    const formStructure = CF['form_structure'];\n\n    if (client.family) {\n      let members = _.clone(client.family.members);\n      _.remove(members, {\n        person: { id: id }\n      });\n    }\n\n    return (\n      <Container>\n        <h3>Client Profile</h3>\n        <div>\n          <Link to={`/clients/${id}/edit/`}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Edit/>}>\n              Edit\n            </Button>\n          </Link>\n          &nbsp;\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => window.print()}\n            startIcon={<Print/>}>\n            Print\n          </Button>\n\n          <div>\n            {client.is_deleted &&\n            <Alert variant=\"filled\" severity=\"error\">\n              The client has been deleted\n            </Alert>\n            }\n            {/*Client info tables*/}\n            {_.map(formStructure, (infoFields, step) => {\n              return (\n                <ClientInfoTable\n                  key={step}\n                  step={step}\n                  client={client}\n                  infoFields={_.keys(_.omit(infoFields, 'family'))}\n                  clientFields={clientFields}\n                />\n              )\n            })}\n\n            {/*Family*/}\n            {/*TODO: have family tested*/}\n            {(client.family && client.family.members.length > 0) &&\n              <TableContainer>\n                <Table>\n                  <TableHead>\n                    <TableRow >\n                      <TableCell>First name</TableCell>\n                      <TableCell>Last name</TableCell>\n                      <TableCell>Date of Birth</TableCell>\n                      <TableCell>Gender</TableCell>\n                      <TableCell>Relationship</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  {_.map(_.filter(client.family.members, member => {\n                    return member.person.id !== client.id\n                  }), (member, index) => {\n                    return (\n                      <clientFamilyTableRow\n                        member = {member}\n                        index = {index}\n                      />\n                      )\n                  })}\n                </Table>\n              </TableContainer>\n            }\n          </div>\n\n          {/*TODO： client needs*/}\n          <h3>Needs</h3>\n          <Link to={`/clients/${client.id}/needs/new`}>\n            <Button variant=\"contained\">\n              Add need\n            </Button>\n          </Link>\n          { client && client.need_groups.length > 0 &&\n          <ClientNeeds\n            clientId={client.id}\n            needGroups={client.need_groups}\n          />\n          }\n\n          <h3>Appointments</h3>\n          { client && client.appointments.length > 0 &&\n          <TableContainer>\n            <Table>\n              <TableHead>\n                <TableRow >\n                  <TableCell>Category</TableCell>\n                  <TableCell>Date</TableCell>\n                  <TableCell>Time</TableCell>\n                  <TableCell>Description</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {client.appointments.map(appointment => {\n                  return (\n                    <AppointmentRow\n                      key={appointment.id}\n                      appointment={appointment}\n                    />\n                  )\n                })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          }\n          <hr />\n\n        </div>\n      </Container>\n    )\n  } else {\n    return null;\n  }\n}\n\nfunction clientFamilyTableRow({member, index}) {\n  return (\n    <TableRow key={member.person.id}>\n      <TableCell component=\"th\" scope=\"row\">\n        Family member #{index + 1}\n      </TableCell>\n      <TableCell align=\"left\">{member.person.first_name}</TableCell>\n      <TableCell align=\"left\">{member.person.last_name}</TableCell>\n      <TableCell align=\"left\">{member.person.birth_date}</TableCell>\n      <TableCell align=\"left\">{member.person.gender}</TableCell>\n      <TableCell align=\"left\">{member.relationship}</TableCell>\n    </TableRow>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport TR from '../shared/TR'\nimport { fetchUser } from '../../api/userApi'\nimport { useParams } from \"react-router\";\nimport { Link, Loading } from \"../shared\";\nimport { Container, Paper, Table, Typography, TableBody, Button } from \"@material-ui/core\";\n\nexport default function User() {\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState({});\n\n  const {id} = useParams();\n  useEffect(() => {\n    fetchUser(id).then(user => {\n      setUser(user);\n      setLoading(false);\n    });\n  }, [id]);\n\n  if (loading)\n    return <Loading message={`Loading user...`}/>;\n\n  return (\n    <Container>\n      <Typography variant=\"h5\" gutterBottom>\n        User profile\n      </Typography>\n      <Link to={`/users/${id}/edit`}>\n        <Button color=\"primary\" variant=\"contained\" style={{marginBottom: 12}}>\n          Edit\n        </Button>\n      </Link>\n\n      <Paper elevation={4}>\n        <Table>\n          <TableBody>\n            <TR\n              title=\"First Name\"\n              value={user.first_name}\n            />\n            <TR\n              title=\"Last Name\"\n              value={user.last_name}\n            />\n            <TR\n              title=\"Username\"\n              value={user.username}\n            />\n            <TR\n              title=\"Email\"\n              value={user.email}\n            />\n            <TR\n              title=\"Role\"\n              value={user.is_superuser ? 'Admin' : 'User'}\n            />\n            <TR\n              title=\"Phone Number\"\n              value={user.primary_phone_number}\n            />\n            <TR\n              title=\"Alternative Phone Number\"\n              value={user.alt_phone_number}\n            />\n          </TableBody>\n        </Table>\n      </Paper>\n    </Container>\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport { Chip, Container } from \"@material-ui/core\";\nimport { Add as AddIcon, Check as YesIcon} from \"@material-ui/icons\";\nimport { DeleteModal, DropdownMenu, Link, Loading, DataTable } from \"./shared\";\nimport { deleteUser, fetchUsers } from \"../api/userApi\";\nimport { useHistory } from \"react-router\";\n\nexport default function Users() {\n  const history = useHistory();\n  const [state, setState] = useState({\n    loading: true,\n    data: [],\n    selectedId: null,\n    deleteDialogTitle: '',\n    showDeleteDialog: false,\n  });\n\n  useEffect(() => {\n    fetchUsers().then(data => {\n      setState(state => ({...state, loading: false, data}));\n    });\n  }, []);\n\n  const showDeleteDialog = (id, title) => () => {\n    setState(state => ({\n      ...state, selectedId: id, showDeleteDialog: true,\n      deleteDialogTitle: 'Delete ' + title + ' ?'\n    }));\n  };\n\n  const handleDelete = async (id, form) => {\n    try {\n      await deleteUser(id, form);\n      setState(state => ({\n        ...state, showDeleteDialog: false,\n        data: state.data.filter(item => item.id !== state.selectedId)\n      }));\n    } catch (e) {\n      // TODO: show error\n      console.error(e);\n    }\n  };\n\n  const columns = [\n    {\n      name: 'username',\n      label: 'Username',\n      options: {\n        customBodyRender: (username, {rowData}) => (\n          <Link color to={`/users/${rowData[rowData.length - 1]}`}>\n            {username}\n          </Link>\n        )\n      }\n    },\n    {\n      name: 'email',\n      label: 'Email'\n    },\n    {\n      name: 'first_name',\n      label: 'First name'\n    },\n    {\n      name: 'last_name',\n      label: 'Last name'\n    },\n    {\n      name: 'primary_phone_number',\n      label: 'Primary phone',\n      options: {\n        display: false,\n      }\n    },\n    {\n      name: 'secondary_phone_number',\n      label: 'Secondary phone',\n      options: {\n        display: false,\n      }\n    },\n    {\n      name: 'is_superuser',\n      label: 'Admin',\n      options: {\n        customBodyRender: (is_admin) => {\n          if (is_admin)\n            return <YesIcon color=\"primary\"/>\n        }\n      }\n    },\n    {\n      name: 'id',\n      label: ' ',\n      options: {\n        sort: false,\n        filter: false,\n        viewColumns: false,\n        searchable: false,\n        download: false,\n        customBodyRender: (id, {rowData, rowIndex}) =>\n          <DropdownMenu urlPrefix={'users'} objectId={id}\n                        handleDelete={() => showDeleteDialog(id, rowData[0])}/>\n      }\n    }\n  ];\n\n  if (state.loading)\n    return <Loading message={`Loading users...`}/>;\n\n  return (\n    <Container>\n      <DataTable\n        title={\"Users\"}\n        data={state.data}\n        columns={columns}\n        options={{\n          filter: false,\n          selectableRows: 'none',\n          responsive: 'scrollMaxHeight',\n          customToolbar: () =>\n            <Chip\n              onClick={() => history.push('/users/new')}\n              color=\"primary\"\n              icon={<AddIcon/>}\n              label=\"Add\"\n              variant=\"outlined\"/>\n        }}\n      />\n      <DeleteModal\n        objectId={state.selectedId}\n        title={state.deleteDialogTitle}\n        show={state.showDeleteDialog}\n        onHide={() => setState(state => ({...state, showDeleteDialog: false}))}\n        delete={handleDelete}\n      />\n    </Container>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport _ from 'lodash';\nimport { useParams } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\nimport { Container } from \"@material-ui/core\";\nimport Button from '@material-ui/core/Button'\nimport { Edit, RateReview, Print } from '@material-ui/icons';\nimport { Link } from '../shared'\nimport Rating from '@material-ui/core/Rating';\nimport Box from '@material-ui/core/Box';\n\nimport { providerFields } from '../../constants/provider_fields.js'\n\n// components\nimport ProviderInfoTable from './provider_table/ProviderInfoTable';\n\n\nimport { fetchProvider } from '../../store/actions/providerActions.js'\nimport { fetchProviderFields } from '../../api/settingApi';\n\nexport default function ProviderProfile() {\n  //redux hooks\n  const dispatch = useDispatch();\n  const {id} = useParams();\n\n  const [state, setState] = useState({\n    data: null,\n    formSetting: null\n  });\n\n\n  useEffect(() => {\n      dispatch(fetchProvider(id)).then(data => {\n        setState(state => ({\n          ...state,\n          data\n        }))\n      })\n    }, [dispatch, id]\n  );\n\n  useEffect(() => {\n      if (state.formSetting == null) {\n        fetchProviderFields(false).then(json => {\n          setState(state => ({\n            ...state,\n            formSetting: json\n          }))\n        })\n      }\n    }, [dispatch, state.formSetting]\n  );\n  if (state.data && state.formSetting) {\n    const {provider} = state.data;\n    const {formSetting} = state;\n\n    let formType;\n    if (provider.type === 'Organization') {\n      formType = 'organization'\n    } else if (provider.type === 'Individual') {\n      formType = provider.category.split(' ').join('_').toLowerCase()\n    }\n    const reviewValue = ((provider.reviews.map(review => review.rating))\n      .reduce((first, second) => first + second, 0)) / provider.reviews.length;\n    return (\n      <Container>\n        <h3>Provider Profile</h3>\n        <div>\n          <Link to={`/providers/${id}/edit/`}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Edit/>}>\n              Edit\n            </Button>\n          </Link>\n          &nbsp;\n          <Link to={`/providers/${id}/rate`}>\n            <Button\n              variant=\"contained\"\n              startIcon={<RateReview/>}>\n              Rate Provider\n            </Button>\n          </Link>\n          {' '}\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => window.print()}\n            startIcon={<Print/>}>\n            Print\n          </Button>\n\n          {formSetting[formType] &&\n          _.map(formSetting[formType].form_structure, (infoFields, step) => {\n            return (\n              <ProviderInfoTable\n                key={step}\n                step={step}\n                provider={provider}\n                providerFields={providerFields}\n                infoFields={infoFields}\n              />\n            )\n          })\n          }\n\n          <h3> Reviews </h3>\n          <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\n            <Rating size=\"large\" name = \"provider-rating\" value={reviewValue}/>\n          </Box>\n\n          <h3>Services</h3>\n          <Link to=\"/services/new\">\n            <Button variant=\"contained\">\n              Add Service\n            </Button>\n          </Link>\n\n        </div>\n      </Container>\n    )\n  } else {\n    return '';\n  }\n}\n","import React from 'react';\n\n// components\nimport TopNavbar from './components/layouts/TopNavbar'\nimport Footer from './components/layouts/Footer'\n// import Breadcurum from './components/layouts/Breadcrumb';\nimport { createTheme, adaptV4Theme } from '@material-ui/core/styles';\nimport { blue, pink } from '@material-ui/core/colors'\nimport { ThemeProvider, StyledEngineProvider } from '@material-ui/core';\n\nimport routes from \"./routes\";\n\n// style\nimport './stylesheets/App.scss';\n\nconst theme = createTheme(adaptV4Theme({\n  palette: {\n    primary: {main: blue[700]},\n    secondary: pink,\n  },\n}));\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <StyledEngineProvider injectFirst>\n        <ThemeProvider theme={theme}>\n          <TopNavbar/>\n          <div style={{paddingTop: 50, paddingBottom: 22}}>\n            {/*<Breadcurum/>*/}\n            {routes}\n          </div>\n          <Footer/>\n        </ThemeProvider>\n      </StyledEngineProvider>\n    </div>\n  );\n}\n","// import 'bootstrap/dist/css/bootstrap.css';\n// import 'bootstrap/dist/css/bootstrap-theme.css';\n\nimport configureStore from './store.js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom'\nimport { PersistGate } from 'redux-persist/integration/react'\n\nimport App from './App';\n\nconst { store, persistor } = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}