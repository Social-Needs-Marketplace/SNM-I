(this.webpackJsonpsnm_client=this.webpackJsonpsnm_client||[]).push([[0],{16:function(e,t){var n;n="jias.snmi.ca"===(window&&window.location&&window.location.hostname)?"https://jias-server.snmi.ca":"http://127.0.0.1:8000";e.exports=Object.freeze({serverHost:n,torontoCoordinates:{lat:43.6497,lng:-79.3763},countryOptions:["Afghanistan","\xc5land Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua & Barbuda","Argentina","Armenia","Aruba","Ascension Island","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Brazil","British Indian Ocean Territory","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Canary Islands","Cape Verde","Caribbean Netherlands","Cayman Islands","Central African Republic","Ceuta & Melilla","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo - Brazzaville","Congo - Kinshasa","Cook Islands","Costa Rica","C\xf4te d\u2019Ivoire","Croatia","Cuba","Cura\xe7ao","Cyprus","Czechia","Denmark","Diego Garcia","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong SAR China","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR China","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar (Burma)","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","North Macedonia","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territories","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn Islands","Poland","Portugal","Pseudo-Accents","Pseudo-Bidi","Puerto Rico","Qatar","R\xe9union","Romania","Russia","Rwanda","Samoa","San Marino","S\xe3o Tom\xe9 & Pr\xedncipe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia & South Sandwich Islands","South Korea","South Sudan","Spain","Sri Lanka","St. Barth\xe9lemy","St. Helena","St. Kitts & Nevis","St. Lucia","St. Martin","St. Pierre & Miquelon","St. Vincent & Grenadines","Sudan","Suriname","Svalbard & Jan Mayen","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad & Tobago","Tristan da Cunha","Tunisia","Turkey","Turkmenistan","Turks & Caicos Islands","Tuvalu","U.S. Outlying Islands","U.S. Virgin Islands","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Wallis & Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],languageOptions:["Abkhazian (ab)","Achinese (ace)","Acoli (ach)","Adangme (ada)","Adyghe (ady)","Afar (aa)","Afrihili (afh)","Afrikaans (af)","Aghem (agq)","Ainu (ain)","Akan (ak)","Akkadian (akk)","Akoose (bss)","Alabama (akz)","Albanian (sq)","Aleut (ale)","Algerian Arabic (arq)","American English (en_US)","American Sign Language (ase)","Amharic (am)","Ancient Egyptian (egy)","Ancient Greek (grc)","Angika (anp)","Ao Naga (njo)","Arabic (ar)","Aragonese (an)","Aramaic (arc)","Araona (aro)","Arapaho (arp)","Arawak (arw)","Armenian (hy)","Aromanian (rup)","Arpitan (frp)","Assamese (as)","Asturian (ast)","Asu (asa)","Atsam (cch)","Australian English (en_AU)","Austrian German (de_AT)","Avaric (av)","Avestan (ae)","Awadhi (awa)","Aymara (ay)","Azerbaijani (az)","Badaga (bfq)","Bafia (ksf)","Bafut (bfd)","Bakhtiari (bqi)","Balinese (ban)","Baluchi (bal)","Bambara (bm)","Bamun (bax)","Banjar (bjn)","Basaa (bas)","Bashkir (ba)","Basque (eu)","Batak Toba (bbc)","Bavarian (bar)","Beja (bej)","Belarusian (be)","Bemba (bem)","Bena (bez)","Bengali (bn)","Betawi (bew)","Bhojpuri (bho)","Bikol (bik)","Bini (bin)","Bishnupriya (bpy)","Bislama (bi)","Blin (byn)","Blissymbols (zbl)","Bodo (brx)","Bosnian (bs)","Brahui (brh)","Braj (bra)","Brazilian Portuguese (pt_BR)","Breton (br)","British English (en_GB)","Buginese (bug)","Bulgarian (bg)","Bulu (bum)","Buriat (bua)","Burmese (my)","Caddo (cad)","Cajun French (frc)","Canadian English (en_CA)","Canadian French (fr_CA)","Cantonese (yue)","Capiznon (cps)","Carib (car)","Catalan (ca)","Cayuga (cay)","Cebuano (ceb)","Central Atlas Tamazight (tzm)","Central Dusun (dtp)","Central Kurdish (ckb)","Central Yupik (esu)","Chadian Arabic (shu)","Chagatai (chg)","Chamorro (ch)","Chechen (ce)","Cherokee (chr)","Cheyenne (chy)","Chibcha (chb)","Chiga (cgg)","Chimborazo Highland Quichua (qug)","Chinese (zh)","Chinook Jargon (chn)","Chipewyan (chp)","Choctaw (cho)","Church Slavic (cu)","Chuukese (chk)","Chuvash (cv)","Classical Newari (nwc)","Classical Syriac (syc)","Colognian (ksh)","Comorian (swb)","Congo Swahili (swc)","Coptic (cop)","Cornish (kw)","Corsican (co)","Cree (cr)","Creek (mus)","Crimean Turkish (crh)","Croatian (hr)","Czech (cs)","Dakota (dak)","Danish (da)","Dargwa (dar)","Dazaga (dzg)","Delaware (del)","Dinka (din)","Divehi (dv)","Dogri (doi)","Dogrib (dgr)","Duala (dua)","Dutch (nl)","Dyula (dyu)","Dzongkha (dz)","Eastern Frisian (frs)","Efik (efi)","Egyptian Arabic (arz)","Ekajuk (eka)","Elamite (elx)","Embu (ebu)","Emilian (egl)","English (en)","Erzya (myv)","Esperanto (eo)","Estonian (et)","European Portuguese (pt_PT)","European Spanish (es_ES)","Ewe (ee)","Ewondo (ewo)","Extremaduran (ext)","Fang (fan)","Fanti (fat)","Faroese (fo)","Fiji Hindi (hif)","Fijian (fj)","Filipino (fil)","Finnish (fi)","Flemish (nl_BE)","Fon (fon)","Frafra (gur)","French (fr)","Friulian (fur)","Fulah (ff)","Ga (gaa)","Gagauz (gag)","Galician (gl)","Gan Chinese (gan)","Ganda (lg)","Gayo (gay)","Gbaya (gba)","Geez (gez)","Georgian (ka)","German (de)","Gheg Albanian (aln)","Ghomala (bbj)","Gilaki (glk)","Gilbertese (gil)","Goan Konkani (gom)","Gondi (gon)","Gorontalo (gor)","Gothic (got)","Grebo (grb)","Greek (el)","Guarani (gn)","Gujarati (gu)","Gusii (guz)","Gwich\u02bcin (gwi)","Haida (hai)","Haitian (ht)","Hakka Chinese (hak)","Hausa (ha)","Hawaiian (haw)","Hebrew (he)","Herero (hz)","Hiligaynon (hil)","Hindi (hi)","Hiri Motu (ho)","Hittite (hit)","Hmong (hmn)","Hungarian (hu)","Hupa (hup)","Iban (iba)","Ibibio (ibb)","Icelandic (is)","Ido (io)","Igbo (ig)","Iloko (ilo)","Inari Sami (smn)","Indonesian (id)","Ingrian (izh)","Ingush (inh)","Interlingua (ia)","Interlingue (ie)","Inuktitut (iu)","Inupiaq (ik)","Irish (ga)","Italian (it)","Jamaican Creole English (jam)","Japanese (ja)","Javanese (jv)","Jju (kaj)","Jola-Fonyi (dyo)","Judeo-Arabic (jrb)","Judeo-Persian (jpr)","Jutish (jut)","Kabardian (kbd)","Kabuverdianu (kea)","Kabyle (kab)","Kachin (kac)","Kaingang (kgp)","Kako (kkj)","Kalaallisut (kl)","Kalenjin (kln)","Kalmyk (xal)","Kamba (kam)","Kanembu (kbl)","Kannada (kn)","Kanuri (kr)","Kara-Kalpak (kaa)","Karachay-Balkar (krc)","Karelian (krl)","Kashmiri (ks)","Kashubian (csb)","Kawi (kaw)","Kazakh (kk)","Kenyang (ken)","Khasi (kha)","Khmer (km)","Khotanese (kho)","Khowar (khw)","Kikuyu (ki)","Kimbundu (kmb)","Kinaray-a (krj)","Kinyarwanda (rw)","Kirmanjki (kiu)","Klingon (tlh)","Kom (bkm)","Komi (kv)","Komi-Permyak (koi)","Kongo (kg)","Konkani (kok)","Korean (ko)","Koro (kfo)","Kosraean (kos)","Kotava (avk)","Koyra Chiini (khq)","Koyraboro Senni (ses)","Kpelle (kpe)","Krio (kri)","Kuanyama (kj)","Kumyk (kum)","Kurdish (ku)","Kurukh (kru)","Kutenai (kut)","Kwasio (nmg)","Kyrgyz (ky)","K\u02bciche\u02bc (quc)","Ladino (lad)","Lahnda (lah)","Lakota (lkt)","Lamba (lam)","Langi (lag)","Lao (lo)","Latgalian (ltg)","Latin (la)","Latin American Spanish (es_419)","Latvian (lv)","Laz (lzz)","Lezghian (lez)","Ligurian (lij)","Limburgish (li)","Lingala (ln)","Lingua Franca Nova (lfn)","Literary Chinese (lzh)","Lithuanian (lt)","Livonian (liv)","Lojban (jbo)","Lombard (lmo)","Low German (nds)","Lower Silesian (sli)","Lower Sorbian (dsb)","Lozi (loz)","Luba-Katanga (lu)","Luba-Lulua (lua)","Luiseno (lui)","Lule Sami (smj)","Lunda (lun)","Luo (luo)","Luxembourgish (lb)","Luyia (luy)","Maba (mde)","Macedonian (mk)","Machame (jmc)","Madurese (mad)","Mafa (maf)","Magahi (mag)","Main-Franconian (vmf)","Maithili (mai)","Makasar (mak)","Makhuwa-Meetto (mgh)","Makonde (kde)","Malagasy (mg)","Malay (ms)","Malayalam (ml)","Maltese (mt)","Manchu (mnc)","Mandar (mdr)","Mandingo (man)","Manipuri (mni)","Manx (gv)","Maori (mi)","Mapuche (arn)","Marathi (mr)","Mari (chm)","Marshallese (mh)","Marwari (mwr)","Masai (mas)","Mazanderani (mzn)","Medumba (byv)","Mende (men)","Mentawai (mwv)","Meru (mer)","Meta\u02bc (mgo)","Mexican Spanish (es_MX)","Micmac (mic)","Middle Dutch (dum)","Middle English (enm)","Middle French (frm)","Middle High German (gmh)","Middle Irish (mga)","Min Nan Chinese (nan)","Minangkabau (min)","Mingrelian (xmf)","Mirandese (mwl)","Mizo (lus)","Modern Standard Arabic (ar_001)","Mohawk (moh)","Moksha (mdf)","Moldavian (ro_MD)","Mongo (lol)","Mongolian (mn)","Morisyen (mfe)","Moroccan Arabic (ary)","Mossi (mos)","Multiple Languages (mul)","Mundang (mua)","Muslim Tat (ttt)","Myene (mye)","Nama (naq)","Nauru (na)","Navajo (nv)","Ndonga (ng)","Neapolitan (nap)","Nepali (ne)","Newari (new)","Ngambay (sba)","Ngiemboon (nnh)","Ngomba (jgo)","Nheengatu (yrl)","Nias (nia)","Niuean (niu)","No linguistic content (zxx)","Nogai (nog)","North Ndebele (nd)","Northern Frisian (frr)","Northern Sami (se)","Northern Sotho (nso)","Norwegian (no)","Norwegian Bokm\xe5l (nb)","Norwegian Nynorsk (nn)","Novial (nov)","Nuer (nus)","Nyamwezi (nym)","Nyanja (ny)","Nyankole (nyn)","Nyasa Tonga (tog)","Nyoro (nyo)","Nzima (nzi)","N\u02bcKo (nqo)","Occitan (oc)","Ojibwa (oj)","Old English (ang)","Old French (fro)","Old High German (goh)","Old Irish (sga)","Old Norse (non)","Old Persian (peo)","Old Proven\xe7al (pro)","Oriya (or)","Oromo (om)","Osage (osa)","Ossetic (os)","Ottoman Turkish (ota)","Pahlavi (pal)","Palatine German (pfl)","Palauan (pau)","Pali (pi)","Pampanga (pam)","Pangasinan (pag)","Papiamento (pap)","Pashto (ps)","Pennsylvania German (pdc)","Persian (fa)","Phoenician (phn)","Picard (pcd)","Piedmontese (pms)","Plautdietsch (pdt)","Pohnpeian (pon)","Polish (pl)","Pontic (pnt)","Portuguese (pt)","Prussian (prg)","Punjabi (pa)","Quechua (qu)","Rajasthani (raj)","Rapanui (rap)","Rarotongan (rar)","Riffian (rif)","Romagnol (rgn)","Romanian (ro)","Romansh (rm)","Romany (rom)","Rombo (rof)","Root (root)","Rotuman (rtm)","Roviana (rug)","Rundi (rn)","Russian (ru)","Rusyn (rue)","Rwa (rwk)","Saho (ssy)","Sakha (sah)","Samaritan Aramaic (sam)","Samburu (saq)","Samoan (sm)","Samogitian (sgs)","Sandawe (sad)","Sango (sg)","Sangu (sbp)","Sanskrit (sa)","Santali (sat)","Sardinian (sc)","Sasak (sas)","Sassarese Sardinian (sdc)","Saterland Frisian (stq)","Saurashtra (saz)","Scots (sco)","Scottish Gaelic (gd)","Selayar (sly)","Selkup (sel)","Sena (seh)","Seneca (see)","Serbian (sr)","Serbo-Croatian (sh)","Serer (srr)","Seri (sei)","Shambala (ksb)","Shan (shn)","Shona (sn)","Sichuan Yi (ii)","Sicilian (scn)","Sidamo (sid)","Siksika (bla)","Silesian (szl)","Simplified Chinese (zh_Hans)","Sindhi (sd)","Sinhala (si)","Skolt Sami (sms)","Slave (den)","Slovak (sk)","Slovenian (sl)","Soga (xog)","Sogdien (sog)","Somali (so)","Soninke (snk)","South Azerbaijani (azb)","South Ndebele (nr)","Southern Altai (alt)","Southern Sami (sma)","Southern Sotho (st)","Spanish (es)","Sranan Tongo (srn)","Standard Moroccan Tamazight (zgh)","Sukuma (suk)","Sumerian (sux)","Sundanese (su)","Susu (sus)","Swahili (sw)","Swati (ss)","Swedish (sv)","Swiss French (fr_CH)","Swiss German (gsw)","Swiss High German (de_CH)","Syriac (syr)","Tachelhit (shi)","Tagalog (tl)","Tahitian (ty)","Taita (dav)","Tajik (tg)","Talysh (tly)","Tamashek (tmh)","Tamil (ta)","Taroko (trv)","Tasawaq (twq)","Tatar (tt)","Telugu (te)","Tereno (ter)","Teso (teo)","Tetum (tet)","Thai (th)","Tibetan (bo)","Tigre (tig)","Tigrinya (ti)","Timne (tem)","Tiv (tiv)","Tlingit (tli)","Tok Pisin (tpi)","Tokelau (tkl)","Tongan (to)","Tornedalen Finnish (fit)","Traditional Chinese (zh_Hant)","Tsakhur (tkr)","Tsakonian (tsd)","Tsimshian (tsi)","Tsonga (ts)","Tswana (tn)","Tulu (tcy)","Tumbuka (tum)","Tunisian Arabic (aeb)","Turkish (tr)","Turkmen (tk)","Turoyo (tru)","Tuvalu (tvl)","Tuvinian (tyv)","Twi (tw)","Tyap (kcg)","Udmurt (udm)","Ugaritic (uga)","Ukrainian (uk)","Umbundu (umb)","Unknown Language (und)","Upper Sorbian (hsb)","Urdu (ur)","Uyghur (ug)","Uzbek (uz)","Vai (vai)","Venda (ve)","Venetian (vec)","Veps (vep)","Vietnamese (vi)","Volap\xfck (vo)","V\xf5ro (vro)","Votic (vot)","Vunjo (vun)","Walloon (wa)","Walser (wae)","Waray (war)","Warlpiri (wbp)","Washo (was)","Wayuu (guc)","Welsh (cy)","West Flemish (vls)","Western Frisian (fy)","Western Mari (mrj)","Wolaytta (wal)","Wolof (wo)","Wu Chinese (wuu)","Xhosa (xh)","Xiang Chinese (hsn)","Yangben (yav)","Yao (yao)","Yapese (yap)","Yemba (ybb)","Yiddish (yi)","Yoruba (yo)","Zapotec (zap)","Zarma (dje)","Zaza (zza)","Zeelandic (zea)","Zenaga (zen)","Zhuang (za)","Zoroastrian Dari (gbz)","Zulu (zu)","Zuni (zun)"],genderOptions:["Female","Male","Other"],maritalStatusOptions:["Common Law","Divorced","Married","Other","Separated","Single","Widowed"],statusInCanadaOptions:["Application in Process - Family","Application in Process - Humanitarian and Compassionate","Application in Process - Independent","Application in Process - Refugee","Canadian Citizen","Immigrant","Other","Permanent Resident - Business Class","Permanent Resident - Canadian Experience Class","Permanent Resident - Family Class","Permanent Resident -  Humanitarian and Compassionate","Permanent Resident - Live-in Caregiver","Permanent Resident - Provincial Nominee","Permanent Resident - Refugees","Permanent Resident - Skilled Worker and Skilled Trades","Temporary Resident","Visitors Visa","Work Permit"],educationLevelOptions:["College","Elementary","Post Graduate","Secondary","University"],incomeSourceOptions:["Crowd Ward","Dependent of OW/ODSP","Employment","Employment Insurance","Family Members Income","None","Ontario Disability Support Program","Ontario Works","Other","Pension","Unknown","Workers Safety and Insurance"],matchStatusOptions:["Contacted","Matched","Referred","Selected"],familyRelationshipOptions:["Child","Parent","Sibling","Spouse"],needStatusOptions:["Fulfilled","In Progress","Matched","Pending","Unmatched"],serviceTypeOptions:["External","Internal","Professional/Community","Volunteer based"],serviceSharedWithOptions:["Children's Aid Society of Toronto","Durham Children's Aid Society","Eva's Initiatives","Abrigo Centre","Adventist community services","AIDS Committee of Durham Region","Albion Neighbourhood Services","Alexandra Park Community Centre","Applegrove Community Complex","Arab Community Centre of Toronto","Aurora Food Pantry","Barbra Schlifer Commemorative Clinic","Bluffs Food Bank","Boost Child & Youth Advocacy Centre","Brock Community Food Bank","Central Toronto Youth Services","Covenant House Toronto","Durham Rape Crisis Centre","Durham Youth Housing and Support Services","Horizons for Youth","Kababayan Multicultural Centre","Markham Food Bank","Parkdale Community Food Bank","Pediatric Oncology Group of Ontario","Private","Public"],provinceOptions:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan"],ACTION_SUCCESS:"ACTION_SUCCESS",ACTION_ERROR:"ACTION_ERROR"})},628:function(e,t,n){},629:function(e,t,n){},631:function(e,t,n){"use strict";n.r(t);var a=n(67),r=n(291),i=n(356),o=n(18),c=n(5),s=n(4),l=n(37),d=n.n(l),u=n(16),b="RECEIVE_CLIENT_NEEDS",j="RECEIVE_CLIENT_NEED",h="REMOVE_CLIENT_NEED",p="REQUEST_NEED",m="REQUEST_NEEDS",f="RECEIVE_NEEDS",O="RECEIVE_CLIENT_NEED_GROUP",g=" RECEIVE_CLIENT_NEED_INFO";function v(e,t,n){return{type:j,clientId:e,need:t,needGroup:n}}function x(e,t,n){return{type:g,clientId:e,needId:t,need:n}}function y(e,t,n){return function(a){var r=u.serverHost+"/clients/"+e+"/need_groups/"+t+"/";return d()(r,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return a(function(e,t){return{type:O,clientId:e,needGroup:t}}(e,t))}))}}function _(e,t,n){return function(a){var r=u.serverHost+"/clients/"+e+"/needs/"+t+"/";return d()(r,{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(n){204===n.status&&a(function(e,t){return{type:h,clientId:e,needId:t}}(e,t))}))}}function C(e,t){return function(n){n({type:p,needId:e});var a=u.serverHost+"/needs/"+e;return d()(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(e){n(x(e.client_id,e.id,e)),t(e)}))}}var S=n(22),k=n.n(S);var w=n(19),I=n(11),N=n.n(I),T=n(354),E="LOGIN_SUCCESS",A="LOGIN_FAILURE",P="LOGGED_OUT",D="UPDATE_ORGANIZATION";function F(e){return console.log("File: authActions.js -  Function: login -  Parameters: params - Values:  ",e),function(t){var n=u.serverHost+"/api-token-auth/";return fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n.non_field_errors));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){console.log("File: authActions.js -  Function: login - Step 2  json:  ",e);var n,a=Object(T.a)(e.token),r={user_id:(n=a).user_id,username:n.username,email:n.email};r.expired_at=1e3*a.exp,r.is_admin=e.is_admin;var i={id:e.provider_id,name:e.organization_name};return localStorage.setItem("jwt_token",e.token),t(function(e,t){return console.log("File: authActions.js - Function: login_success - Parameters: user, organization. - Values: ",e,t),{type:E,user:e,organization:t}}(r,i)),{status:E}})).catch((function(e){var n;return n="Failed to fetch"===e.message?"Server is unavailable due to a temporary outage.":"The username or password you entered is incorrect. Please try again.",t(function(e){return console.log("File: authActions.js -  Function: login_failure - Parameters: alert - Values:  ",e),{type:A,alert:e}}(n)),{status:A,message:n}}))}}function L(e){return function(t){t(function(e){return console.log("File: authActions.js -  Function: logged_out - Parameters: sessionExpired - Values: ",e),{type:P,alert:e&&"Your session has expired. Please login again."}}(e)),localStorage.removeItem("jwt_token")}}var M={currentUser:null,isLoggedin:!1,organization:{id:null,name:null},alert:null};var B="RECEIVE_CATEGORIES";function R(e){return function(t){var n=u.serverHost+"/categories/"+e+"/";return d()(n,{method:"GET"}).then((function(e){return e.json()})).then((function(n){return t(function(e,t){return{type:B,category_type:e,categories:t}}(e,n.categories)),n.categories}))}}var G={categories:[],loaded:!1};var z="REQUEST_CLIENT",V="RECEIVE_CLIENT",q="REQUEST_CLIENTS",H="REMOVE_CLIENT",W="RECEIVE_CLIENTS",U="SEARCH_CLIENTS";var J="REQUEST_SERVICE",K="RECEIVE_SERVICE",Y="REQUEST_SERVICES",X="REMOVE_SERVICE",Q="RECEIVE_SERVICES",Z="SEARCH_SERVICES";var $="REQUEST_PROVIDERS",ee="RECEIVE_PROVIDERS",te="REMOVE_PROVIDER",ne="RECEIVE_PROVIDER",ae="REQUEST_PROVIDER",re="SEARCH_PROVIDERS";function ie(e){return console.log("receiveProviders json",e),{type:ee,providers:e,receivedAt:Date.now()}}function oe(){return function(e){var t;e({type:$,providers:t});var n=u.serverHost+"/providers/";return d()(n,{method:"get",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){return e(ie(t)),t})).catch((function(e){return u.ACTION_ERROR}))}}var ce="REQUEST_GOOD",se="RECEIVE_GOOD",le="REQUEST_GOODS",de="RECEIVE_ALL_GOODS",ue="REMOVE_GOOD",be="RECEIVE_GOODS",je="GOOD_ERROR",he="GOOD_SUCCESS",pe="SEARCH_GOODS";function me(e,t){return{type:se,id:e,good:t}}function fe(e){return{type:be,goods:e}}function Oe(e){return function(t){t(function(e){return{type:ce,id:e}}(e));var n=u.serverHost+"/good/"+e+"/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(n){t(me(e,n))}))}}function ge(){return function(e){var t;e({type:le,goods:t});var n=u.serverHost+"/goods/";return d()(n,{method:"GET",headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return e(fe(t)),t}))}}function ve(e,t){return function(n){var a=u.serverHost+"/good/"+e+"/";return d()(a,{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"JWT ".concat(localStorage.getItem("jwt_token")),"Content-Type":"application/json"}}).then((function(t){return 204===t.status?(n(function(e){return{type:ue,id:e}}(e)),he):je}))}}var xe=Object(a.c)({services:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredServices:[],servicesLoaded:!1,byId:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case Y:return Object(s.a)(Object(s.a)({},r),{},{servicesLoaded:!1});case Q:console.log("reducer check: ",i);var l=k.a.keyBy(i.services,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},r.byId),l),Object(s.a)(Object(s.a)({},r),{},{byId:e,servicesLoaded:!0,index:i.services,filteredServices:i.services});case X:return a=k.a.clone(r.index),k.a.remove(a,(function(e){return e.id===i.id})),Object(s.a)(Object(s.a)({},r),{},{index:a,filteredServices:a});case J:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,{servicesLoaded:!1})),Object(s.a)(Object(s.a)({},r),{},{byId:e});case K:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,Object(s.a)(Object(s.a)({},i.service),{},{servicesLoaded:!0}))),Object(s.a)(Object(s.a)({},r),{},{byId:e});case Z:if(""===i.sortType||"name"===i.sortType?(console.log("service reducer :",Object(o.a)(r.index)),t=Object(o.a)(r.index).sort((function(e,t){return(e.name?e.name.toLowerCase():"").localeCompare(t.name?t.name.toLowerCase():"")}))):"provider"===i.sortType?t=Object(o.a)(r.index).sort((function(e,t){return(e.provider.profile.first_name?e.provider.profile.first_name.toLowerCase():"").localeCompare(t.provider.profile.first_name?t.provider.profile.first_name.toLowerCase():"")})):"description"===i.sortType?t=Object(o.a)(r.index).sort((function(e,t){return(e.desc?e.desc:"").localeCompare(t.desc?t.desc:"")})):"category"===i.sortType&&(t=Object(o.a)(r.index).sort((function(e,t){return(e.category?e.category:"").localeCompare(t.category?t.category:"")}))),""===i.searchValue)return{index:t,filteredServices:t,servicesLoaded:!0};if("name"===i.searchType)return n=t.filter((function(e){return(e.name?e.name.toLowerCase():"").includes(i.searchValue)})),console.log("service reducer return: ",{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0}),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("provider"===i.searchType)return n=t.filter((function(e){return(e.provider.company?e.provider.company.includes(i.searchValue):"")||(e.provider.profile.first_name?e.provider.profile.first_name.toLowerCase():"")+" "+(e.provider.profile.last_name?e.provider.profile.last_name.toLowerCase().includes(i.searchValue):"")})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("description"===i.searchType)return n=t.filter((function(e){return e.desc.includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};if("category"===i.searchType)return n=t.filter((function(e){return e.category.includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredServices:n,servicesLoaded:!0};break;default:return r}},clients:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredClients:[],clientsLoaded:!1,byId:{}},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case q:return console.log(),Object(s.a)(Object(s.a)({},r),{},{clientsLoaded:!1});case W:console.log(W);var l=k.a.keyBy(i.clients,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},r.byId),l),Object(s.a)(Object(s.a)({},r),{},{byId:e,clientsLoaded:!0,index:i.clients,filteredClients:i.clients});case H:return n=k.a.clone(r.index),k.a.remove(n,(function(e){return e.id===i.id})),Object(s.a)(Object(s.a)({},r),{},{index:n,filteredClients:n});case z:return e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,{clientsLoaded:!1})),Object(s.a)(Object(s.a)({},r),{},{byId:e});case V:return console.log(V),e=Object(s.a)(Object(s.a)({},r.byId),{},Object(c.a)({},i.id,Object(s.a)(Object(s.a)({},i.client),{},{clientsLoaded:!0}))),Object(s.a)(Object(s.a)({},r),{},{byId:e});case U:if(""===i.sortType||"first_name"===i.sortType?(console.log("client reducer :",Object(o.a)(r.index)),a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))):"-first_name"===i.sortType?a=(a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))).reverse():"last_name"===i.sortType?a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").localeCompare(t.profile.last_name?t.profile.last_name.toLowerCase():"")})):"-last_name"===i.sortType&&(a=(a=Object(o.a)(r.index).sort((function(e,t){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").localeCompare(t.profile.last_name?t.profile.last_name.toLowerCase():"")}))).reverse()),""===i.searchValue)return{index:a,filteredClients:a,clientsLoaded:!0};if("first_name"===i.searchType)return console.log("clients: ",a),t=a.filter((function(e){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").includes(i.searchValue)})),console.log("client reducer return: ",{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0}),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};if("last_name"===i.searchType)return t=a.filter((function(e){return(e.profile.last_name?e.profile.last_name.toLowerCase():"").includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};if("address"===i.searchType)return t=a.filter((function(e){return(e.address?e.address.toLowerCase():"").includes(i.searchValue)})),{index:Object(o.a)(r.index),filteredClients:t,clientsLoaded:!0};break;default:return r}},goods:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],filteredGoods:[],goodsLoaded:!1,byId:{}},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case le:return Object(s.a)(Object(s.a)({},a),{},{goodsLoaded:!1});case be:var i=k.a.keyBy(r.goods,(function(e){return e.id}));return e=Object(s.a)(Object(s.a)({},a.byId),i),Object(s.a)(Object(s.a)({},a),{},{byId:e,goodsLoaded:!0,index:r.goods,filteredGoods:r.goods});case de:return e=k.a.keyBy(r.goods,(function(e){return e.id})),Object(s.a)(Object(s.a)({},a),{},{byId:e,goodsLoaded:!0,index:r.goods,filteredGoods:r.goods});case ue:return delete(e=k.a.clone(a.byId))[r.id],Object(s.a)(Object(s.a)({},a),{},{byId:e});case ce:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.id,{goodsLoaded:!1})),Object(s.a)(Object(s.a)({},a),{},{byId:e});case se:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.id,Object(s.a)(Object(s.a)({},r.good),{},{goodsLoaded:!0}))),Object(s.a)(Object(s.a)({},a),{},{byId:e});case pe:if(""===r.sortType?t=Object(o.a)(a.index):"name"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.name.localeCompare(t.name)})):"provider"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.provider.profile.first_name.localeCompare(t.provider.profile.first_name)})):"description"===r.sortType?t=Object(o.a)(a.index).sort((function(e,t){return e.desc.localeCompare(t.desc)})):"category"===r.sortType&&(t=Object(o.a)(a.index).sort((function(e,t){return e.category.localeCompare(t.category)}))),""===r.searchValue)return{index:t,filteredGoods:t,goodsLoaded:!0};if("name"===r.searchType)return n=t.filter((function(e){return e.name.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("provider"===r.searchType)return n=t.filter((function(e){return e.provider.company.includes(r.searchValue)||(e.provider.profile.first_name+" "+e.provider.profile.last_name).includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("description"===r.searchType)return n=t.filter((function(e){return e.desc.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};if("category"===r.searchType)return n=t.filter((function(e){return e.category.includes(r.searchValue)})),{index:Object(o.a)(a.index),filteredGoods:n,goodsLoaded:!0};break;default:return a}},needs:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},needGroups:[],clientId:null,loaded:!1,needs:[]},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case m:return Object(s.a)(Object(s.a)({},a),{},{loaded:!1});case f:return Object(s.a)(Object(s.a)({},a),{},{needs:r.needs,loaded:!0});case b:return r.needs?(e=k.a.keyBy(r.needs,(function(e){return e.id})),Object(s.a)(Object(s.a)({},a),{},{byId:e,needGroups:r.needGroups,loaded:!0,clientId:r.clientId})):Object(s.a)(Object(s.a)({},a),{},{needGroups:r.needGroups,loaded:!0,clientId:r.clientId});case j:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.need.id,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!0}))),(n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id})).indexOf(r.needGroup.id))>=0?t[n]=r.needGroup:t=[].concat(Object(o.a)(t),[r.needGroup]),Object(s.a)(Object(s.a)({},a),{},{needGroups:t,byId:e,clientId:r.clientId});case g:if(e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.needId,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!0}))),(n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id.toString()})).indexOf(r.need.need_group_id))>=0){var i=t[n].needs.map((function(e){return e.id})).indexOf(r.needId);return t[n].needs[i]=r.need,Object(s.a)(Object(s.a)({},a),{},{needGroups:t,byId:e,clientId:r.clientId})}return Object(s.a)(Object(s.a)({},a),{},{byId:e,clientId:r.clientId});case h:var l=a.byId[r.needId];return delete(e=k.a.clone(a.byId))[r.needId],n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id.toString()})).indexOf(l.need_group_id),k.a.remove(t[n].needs,(function(e){return e.id===r.needId})),0===t[n].needs.length&&t.splice(n,1),Object(s.a)(Object(s.a)({},a),{},{byId:e,needGroups:t});case p:return e=Object(s.a)(Object(s.a)({},a.byId),{},Object(c.a)({},r.needId,Object(s.a)(Object(s.a)({},r.need),{},{loaded:!1}))),Object(s.a)(Object(s.a)({},a),{},{byId:e});case O:return n=(t=k.a.clone(a.needGroups)).map((function(e){return e.id})).indexOf(r.needGroup.id),t[n]=r.needGroup,Object(s.a)(Object(s.a)({},a),{},{needGroups:t});default:return a}},providers:function(){var e,t,n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{index:[],byId:{},providerLoaded:!1,value:"",filteredProviders:[]},l=arguments.length>1?arguments[1]:void 0;switch(l.type){case $:return Object(s.a)(Object(s.a)({},i),{},{providerLoaded:!1});case ee:var d=k.a.keyBy(l.providers,(function(e){return e.id}));return t=Object(s.a)(Object(s.a)({},i.byId),{},{providersById:d}),Object(s.a)(Object(s.a)({},i),{},{byId:t,index:l.providers,filteredProviders:l.providers,providerLoaded:!0});case te:return e=k.a.clone(i.index),k.a.remove(e,(function(e){return e.id===l.id})),Object(s.a)(Object(s.a)({},i),{},{index:e,filteredProviders:e});case ne:return t=Object(s.a)(Object(s.a)({},i.byId),{},Object(c.a)({},l.id,Object(s.a)(Object(s.a)({},l.provider),{},{providerLoaded:!0}))),l.provider.provider&&(t.providersById=Object(s.a)(Object(s.a)({},t.providersById),{},Object(c.a)({},l.id,Object(s.a)({},l.provider.provider)))),console.log("ProviderReducer.js - RECEIVE_PROVIDER state",i),console.log("ProviderReducer.js - RECEIVE_PROVIDER nextById",t),Object(s.a)(Object(s.a)({},i),{},{byId:t});case ae:return t=Object(s.a)(Object(s.a)({},i.byId),{},Object(c.a)({},l.id,{providerLoaded:!1})),Object(s.a)(Object(s.a)({},i),{},{byId:t});case re:if(console.log("ProviderReducer.js  - index.providers: ",i.index.providers),console.log("ProviderReducer.js  - action: ",l),""===l.sortType||"name"===l.sortType?(console.log("ProviderReducer.js  - index.providers 2: ",i.index.providers),console.log("ProviderReducer.js  - state: ",i),a=Object(o.a)(i.index).sort((function(e,t){return(e.profile.first_name?e.profile.first_name.toLowerCase():"").localeCompare(t.profile.first_name?t.profile.first_name.toLowerCase():"")}))):"type"===l.sortType&&(a=Object(o.a)(i.index).sort((function(e,t){return(e.type?e.type:"").localeCompare(t.type?t.type:"")}))),console.log("ProviderReducer.js  - sortedProviders: ",a),r="Individual"===l.displayType||"Organization"===l.displayType?a.filter((function(e){return e.type.includes(l.displayType)})):a,console.log("ProviderReducer.js  -  providersByType: ",r),""===l.searchValue)return{index:r,filteredProviders:r,providerLoaded:!0};if("name"===l.searchType)return console.log("ProviderReducer.js  - state.index: ",i.index),console.log("ProviderReducer.js  - providersByType: ",r),n=r.filter((function(e){return((e.profile.first_name?e.profile.first_name.toLowerCase():"")+" "+(e.profile.last_name?e.profile.last_name.toLowerCase():"")).includes(l.searchValue)})),console.log("providersByType -  returned data : ",{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0}),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};if("email"===l.searchType)return n=r.filter((function(e){return(e.email?e.email.toLowerCase():"").includes(l.searchValue)})),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};if("phone"===l.searchType)return n=r.filter((function(e){return(e.primary_phone_number?e.primary_phone_number:"").includes(l.searchValue)})),{index:Object(o.a)(i.index),filteredProviders:n,providerLoaded:!0};break;default:return i}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return console.log("File: authReducer.js, Function: auth, case LOGIN_SUCCESS, Parameters: state, action -> ",e,t),Object.assign({},e,{currentUser:t.user,isLoggedin:!0,organization:t.organization,alert:null});case A:return console.log("File: authReducer.js, Function: auth, case LOGIN_FAILURE, Parameters: state, action -> ",e,t),Object.assign({},e,{alert:t.alert});case P:return console.log("File: authReducer.js, Function: auth, case LOGGED_OUT, Parameters: state, action -> ",e,t),Object.assign({},e,{currentUser:null,isLoggedin:!1,organization:{id:null,name:null},alert:t.alert});case D:return console.log("File: authReducer.js, Function: auth, case UPDATE_ORGANIZATION, Parameters: state, action -> ",e,t),Object.assign({},e,{organization:{id:t.provider.id,name:t.provider.company}});default:return e}},ontology:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{needs:G,services:G,languages:G},t=arguments.length>1?arguments[1]:void 0;return t.type===B?Object(s.a)(Object(s.a)({},e),{},Object(c.a)({},t.category_type,{categories:t.categories.sort(),loaded:!0})):e}}),ye=xe({},{}),_e=n(355),Ce={key:"root",storage:n.n(_e).a},Se=Object(r.a)(Ce,(function(e,t){return"LOGGED_OUT"===t.type&&(e=ye),xe(e,t)})),ke=function(e){return function(t){return function(n){var a=e.getState().auth.currentUser;return"LOGGED_OUT"!==n.type&&a&&new Date>a.expired_at&&e.dispatch(L(!0)),t(n)}}};var we=n(1),Ie=n.n(we),Ne=n(50),Te=n.n(Ne),Ee=n(34),Ae=n(43),Pe=n(357),De=n(9),Fe=n(33),Le=n(761),Me=n(797),Be=n(798),Re=n(793),Ge=n(799),ze=n(380),Ve=n(774),qe=n(48),He=n(777),We=n(375),Ue=n(775),Je=n(789),Ke=n(756),Ye=n(727),Xe=n(728),Qe=n(780),Ze=n(381),$e=n(0),et=(window.google||{maps:{}}).maps,tt=et.Map,nt=et.Marker,at=et.InfoWindow,rt=et.Size,it=function(e,t,n,a,r){var i=new at({content:'<div id="infoWindow-'.concat(r,'" />'),position:n.position,pixelOffset:new rt(0,-42)});i.addListener("domready",(function(e){Object(Ne.render)(Object($e.jsx)(ot,{history:a,marker:n}),document.getElementById("infoWindow-".concat(r)))}));var o=!1,c=!1;return document.querySelector("infoWindow-".concat(r," button")),t.addListener("mouseover",(function(n){i.open(e),c=!0,t.addListener("mouseout",(function(e){c&&!o&&i.close(),c&&(c=!1)})),t.addListener("click",(function(t){o=!0,i.open(e)})),window.google.maps.event.addListener(i,"closeclick",(function(e){o=!1}))})),i};function ot(e){var t=e.marker,n=e.history,a=t.title,r=t.link,i=t.content;return Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)(Qe.a,{style:{cursor:"pointer"},onClick:function(){return r?n.push(r):null},children:Object($e.jsx)(ze.a,{children:a})}),Object($e.jsx)(ze.a,{color:"textSecondary",children:i})]})}var ct=tt?function(e){var t=Object(Fe.g)(),n=Object(we.useMemo)((function(){return{lat:43.687,lng:-79.4132}}),[]),a=e.zoom,r=void 0===a?11:a,i=e.center,o=void 0===i?n:i,c=e.markers,s=void 0===c?[]:c,l=Object(we.useState)(null),d=Object(De.a)(l,2),u=d[0],b=d[1];return Object(we.useEffect)((function(){b(new tt(document.getElementById("map"),{center:o,zoom:r}))}),[r,o]),Object(we.useEffect)((function(){for(var e=0;e<s.length;e++){var n=s[e],a=new nt({position:n.position,map:u,title:n.title});it(u,a,n,t,e)}}),[s,u,t]),Object(we.useMemo)((function(){return Object($e.jsx)(Ze.a,{elevation:5,style:{width:"100%",height:"40vh",marginTop:5},id:"map"})}),[])}:function(){return console.info("Google maps javascript is not loaded. Are you offline?"),Object($e.jsx)(Ze.a,{elevation:5,style:{width:"100%",height:"40vh",marginTop:5}})},st=n(712),lt=n(716),dt=n(781),ut=n(54),bt=n(782);function jt(e){var t=e.show,n=e.onHide,a=e.submit;return Object($e.jsxs)(st.a,{open:t,onClose:n,children:[Object($e.jsx)(lt.a,{id:"form-dialog-title",children:"Upload CSV"}),Object($e.jsx)(dt.a,{children:Object($e.jsx)(ut.c,{type:"file"})}),Object($e.jsxs)(bt.a,{children:[Object($e.jsx)(Ve.a,{color:"primary",onClick:a,children:"Submit"}),Object($e.jsx)(Ve.a,{onClick:n,children:"Close"})]})]})}var ht=n(783),pt=["show","onHide","title","objectId"];function mt(e){var t=e.show,n=e.onHide,a=e.title,r=e.objectId,i=Object(qe.a)(e,pt),o=Object(we.useState)({reason:""}),c=Object(De.a)(o,2),s=c[0],l=c[1];return Object($e.jsxs)(st.a,{open:t,onClose:n,fullWidth:!0,children:[Object($e.jsx)(lt.a,{children:a}),Object($e.jsx)(dt.a,{children:Object($e.jsx)(ht.a,{value:s.reason,label:"Reason",sx:{mt:2},onChange:function(e){return l({reason:e.target.value})},fullWidth:!0})}),Object($e.jsxs)(bt.a,{children:[Object($e.jsx)(Ve.a,{color:"secondary",onClick:function(){return i.delete(r,s)},children:"Confirm"}),Object($e.jsx)(Ve.a,{onClick:n,children:"Close"})]})]})}var ft=n(649),Ot=n(722),gt=n(721),vt=n(723),xt=n(724),yt=n(725);function _t(e){var t=e.urlPrefix,n=e.objectId,a=e.handleDelete,r=e.hideViewOption,i=Object(Fe.g)(),o=Object(we.useState)(null),c=Object(De.a)(o,2),s=c[0],l=c[1],d=Boolean(s),u=function(){l(null)},b=function(e){return function(){i.push(e)}};return Object($e.jsxs)("div",{children:[Object($e.jsx)(ft.a,{onClick:function(e){l(e.currentTarget)},size:"small",children:Object($e.jsx)(gt.a,{})}),Object($e.jsxs)(We.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:u,PaperProps:{style:{maxHeight:216,width:150}},children:[!r&&Object($e.jsxs)(Ue.a,{onClick:b("/".concat(t,"/").concat(n)),children:[Object($e.jsx)(Ot.a,{children:Object($e.jsx)(vt.a,{fontSize:"small",color:"primary"})}),Object($e.jsx)(ze.a,{variant:"inherit",children:"View"})]}),Object($e.jsxs)(Ue.a,{onClick:b("/".concat(t,"/").concat(n,"/edit")),children:[Object($e.jsx)(Ot.a,{children:Object($e.jsx)(xt.a,{fontSize:"small",color:"primary"})}),"Edit"]}),Object($e.jsxs)(Ue.a,{onClick:function(){u(),a(n)},children:[Object($e.jsx)(Ot.a,{children:Object($e.jsx)(yt.a,{fontSize:"small",color:"secondary"})}),"Delete"]})]})]})}var Ct=n(639),St=n(776);function kt(e){var t=e.fetchData,n=e.deleteItem,a=e.generateMarkers,r=e.type,i=e.nameFormatter,c=e.columnsWithoutOptions,l=r.charAt(0).toUpperCase()+r.slice(1),d=Object(Ee.c)(),u=Object(Fe.g)(),b=Object(we.useState)({showUploadDialog:!1,showDeleteDialog:!1,deleteId:null,deleteDialogTitle:"",data:[],pageNumber:1,rowsPerPage:10,loading:!0}),j=Object(De.a)(b,2),h=j[0],p=j[1];Object(we.useEffect)((function(){t().then((function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e,loading:!1})}))}))}),[t]);var m=function(){p((function(e){return Object(s.a)(Object(s.a)({},e),{},{showUploadDialog:!1,showDeleteDialog:!1})}))},f=Object(we.useCallback)(function(){var e=Object(w.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,a);case 2:e.sent.success&&(m(),p((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:e.data.filter((function(t){return t.id!==e.deleteId}))})})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[d,n]),O=Object(we.useCallback)((function(e){var t=h.data[e];p((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!0,deleteId:t.id,deleteDialogTitle:"Delete ".concat(l," ")+i(t)})}))}),[h.data,i,l]),g=Object(we.useMemo)((function(){return[].concat(Object(o.a)(c),[{label:" ",body:function(e){var t=e.id;return Object($e.jsx)(_t,{urlPrefix:r,objectId:t,handleDelete:O})}}])}),[O,c,r]),v=Object(s.a)({customToolbar:Object($e.jsx)(xa,{type:r,handleAdd:function(){return u.push("/".concat(r,"/new"))},handleUpload:function(){return p((function(e){return Object(s.a)(Object(s.a)({},e),{},{showUploadDialog:!0})}))}}),onDelete:function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(t),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChangePage:function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{pageNumber:e})}))},onChangeRowsPerPage:function(e){return p((function(t){return Object(s.a)(Object(s.a)({},t),{},{rowsPerPage:e})}))}},e.tableOptions),x=Object(we.useMemo)((function(){return a(h.data,h.pageNumber,h.rowsPerPage)}),[a,h.data,h.pageNumber,h.rowsPerPage]);return h.loading?Object($e.jsx)(ya,{message:"Loading ".concat(l,"...")}):Object($e.jsx)(Ct.a,{in:!0,children:Object($e.jsxs)(St.a,{children:[Object($e.jsx)(fa,Object(s.a)({columns:g,data:h.data,title:l},v)),Object($e.jsx)(jt,{show:h.showUploadDialog,onHide:m,submit:function(e){}}),Object($e.jsx)(mt,{contentType:"Provider",objectId:h.deleteId,title:h.deleteDialogTitle,show:h.showDeleteDialog,onHide:m,delete:f}),Object($e.jsx)(ct,{markers:x})]})})}var wt=n(772),It=n(788),Nt=n(760),Tt=n(762),Et=Object(Ke.a)((function(e){return{buttons:{width:"80%",margin:"auto",paddingTop:20,paddingBottom:40},button:{marginRight:e.spacing(1)},backButton:{marginRight:e.spacing(1)},alert:{width:"80%",margin:"auto"},title:{color:"#4b4b4b",width:"80%",margin:"auto"}}}));function At(e){var t=e.stepNames,n=e.handleFinish,a=e.getStepContent,r=e.error,i=e.title,o=Et(),c=Ie.a.useState(0),s=Object(De.a)(c,2),l=s[0],d=s[1];return Object($e.jsxs)("div",{children:[Object($e.jsx)(wt.a,{alternativeLabel:!0,nonLinear:!0,activeStep:l,children:t.map((function(e,t){return Object($e.jsx)(It.a,{children:Object($e.jsx)(Nt.a,{onClick:(n=t,function(){d(n)}),children:e})},e);var n}))}),Object($e.jsxs)("div",{children:[i&&Object($e.jsx)(ze.a,{color:"textSecondary",variant:"h6",className:o.title,children:i}),r&&r.map((function(e,t){return Object($e.jsx)(Tt.a,{className:o.alert,severity:"error",children:e},t)})),a(l),Object($e.jsxs)("div",{className:o.buttons,children:[Object($e.jsx)(Ve.a,{disabled:0===l,onClick:function(){d((function(e){return e-1}))},className:o.backButton,children:"Back"}),Object($e.jsx)(Ve.a,{variant:"contained",color:"primary",onClick:function(){l!==t.length-1?d((function(e){return e+1})):n()},children:l===t.length-1?"Finish":"Next"})]})]})]})}var Pt=Object(Ke.a)((function(e){return{root:{paddingTop:16},paper:{display:"inline-block",position:"relative",paddingLeft:28,paddingBottom:20,minWidth:380}}})),Dt=function(e){var t=e.label,n=e.children,a=Pt();return Object($e.jsxs)("div",{className:t&&a.root,children:[t&&Object($e.jsx)(ze.a,{color:"textSecondary",variant:"body1",gutterBottom:!0,children:t}),Object($e.jsx)(Ze.a,{variant:"outlined",className:a.paper,children:n})]})},Ft=n(719),Lt=n(753),Mt=n(376),Bt=n(377),Rt=n(362),Gt=n(771),zt=n(759),Vt=["type","onChange","value"],qt="yyyy-MM-dd";function Ht(e){var t=e.type,n=e.onChange,a=e.value,r=Object(qe.a)(e,Vt),i=Object(we.useState)((function(){return"date"===t?a?Object(Mt.a)(a,qt,new Date):null:a||""})),o=Object(De.a)(i,2),c=o[0],l=o[1],d=Object(we.useCallback)((function(e){var t=e.target.value;l(t),n({target:{value:t}})}),[n,t]),u=function(e){l(e)},b=function(e){l(e);var t=Object(Bt.a)(e,qt);try{n({target:{value:t}})}catch(a){}};return"date"===t?Object($e.jsx)("div",{children:Object($e.jsx)(Rt.a,{dateAdapter:Lt.a,children:Object($e.jsx)(Gt.a,Object(s.a)({value:c,onAccept:b,onChange:u,renderInput:function(e){return Object($e.jsx)(ht.a,Object(s.a)(Object(s.a)({},e),{},{sx:{minWidth:350},margin:"normal"}))}},r))})}):"time"===t?Object($e.jsx)("div",{children:Object($e.jsx)(Rt.a,{dateAdapter:Lt.a,children:Object($e.jsx)(zt.a,Object(s.a)({value:c,onAccept:b,onChange:u,renderInput:function(e){return Object($e.jsx)(ht.a,Object(s.a)(Object(s.a)({},e),{},{sx:{minWidth:350},margin:"normal"}))}},r))})}):Object($e.jsx)("div",{children:Object($e.jsx)(ht.a,Object(s.a)(Object(s.a)({sx:{mt:"16px",minWidth:350},type:t},r),{},{onChange:d,value:c}))})}var Wt=n(785),Ut=n(786),Jt=n(765),Kt=n(787),Yt="UN_SET",Xt={label:"",type:"text",component:Ht,validator:null,required:!1},Qt=["label","InputLabelProps","className","options","noDefaultStyle","noEmpty","controlled","defaultOptionTitle","onChange","formControlProps","helperText"],Zt=Object(Ke.a)((function(e){return{formControl:{margin:"16px 0 0",minWidth:350}}}));function $t(e){var t=e.label,n=e.InputLabelProps,a=e.className,r=e.options,i=e.noDefaultStyle,o=e.noEmpty,c=e.controlled,l=e.defaultOptionTitle,d=void 0===l?"Not Set":l,u=e.onChange,b=e.formControlProps,j=e.helperText,h=Object(qe.a)(e,Qt),p=Zt(),m=Object(we.useState)(o?"":Yt),f=Object(De.a)(m,2),O=f[0],g=f[1],v=Object(we.useCallback)((function(e){var t=e.target.value;g(t),u({target:{value:t===Yt?void 0:t}})}),[u]);return Object(we.useEffect)((function(){g(void 0===h.value?Yt:h.value)}),[h.value]),Object($e.jsx)("div",{children:Object($e.jsxs)(Wt.a,Object(s.a)(Object(s.a)({className:i||a?a:p.formControl,error:h.error,required:h.required},b),{},{children:[t&&Object($e.jsx)(Ut.a,Object(s.a)(Object(s.a)({},n),{},{children:t})),Object($e.jsxs)(Jt.a,Object(s.a)(Object(s.a)({margin:"none",label:t},h),{},{value:c?h.value:O,onChange:c?u:v,children:[!o&&Object($e.jsx)(Ue.a,{value:Yt,children:d},"key0"),Array.isArray(r)?r.map((function(e){return Object($e.jsx)(Ue.a,{value:e,children:e},e)})):Object.entries(r).map((function(e){var t=Object(De.a)(e,2),n=t[0],a=t[1];return Object($e.jsx)(Ue.a,{value:n,children:a},n)}))]})),j&&Object($e.jsx)(Kt.a,{children:j})]}))})}function en(e){var t=e.address,n=e.required,a=e.errMsg,r=void 0===a?{}:a,i=function(e){return function(n){return t[e]=n.target.value}};return Object($e.jsxs)("div",{children:[Object($e.jsx)(Ht,{label:"Apt. #",type:"text",value:t.apt_number,onChange:i("apt_number"),error:!!r.apt_number,helperText:r.apt_number}),Object($e.jsx)(Ht,{label:"Street Address",type:"text",value:t.street_address,onChange:i("street_address"),required:n,error:!!r.street_address,helperText:r.street_address}),Object($e.jsx)(Ht,{label:"City",type:"text",value:t.city,onChange:i("city"),required:n,error:!!r.city,helperText:r.city}),Object($e.jsx)($t,{label:"Province",value:t.province,options:u.provinceOptions,onChange:i("province"),required:n,error:!!r.province,helperText:r.province}),Object($e.jsx)(Ht,{label:"Postal Code",type:"text",value:t.postal_code,onChange:i("postal_code"),required:n,error:!!r.postal_code,helperText:r.postal_code})]})}for(var tn={start_time:"",end_time:""},nn={Monday:[Object(s.a)({},tn)],Tuesday:[Object(s.a)({},tn)],Wednesday:[Object(s.a)({},tn)],Thursday:[Object(s.a)({},tn)],Friday:[Object(s.a)({},tn)],Saturday:[Object(s.a)({},tn)],Sunday:[Object(s.a)({},tn)]},an={},rn=1;rn<=12;rn++)for(var on=rn/10<1?"0"+rn:rn,cn=0;cn<=45;cn+=30){var sn=on+":"+(0===cn?"00":cn);an[100*rn+cn]=sn+" AM"}for(var ln=1;ln<=12;ln++)for(var dn=0;dn<=45;dn+=30){var un=(ln/10<1?"0"+ln:ln)+":"+(0===dn?"00":dn);an[100*(ln+12)+dn]=un+" PM"}var bn=an;function jn(e){var t={};return k.a.each(e,(function(e){var n=e.week_day;t[n]||(t[n]=[]),t[n].push({start_time:e.start_time,end_time:e.end_time})})),t}function hn(e){var t=[];return k.a.each(e,(function(e,n){k.a.each(e,(function(e){t.push({week_day:n,start_time:e.start_time,end_time:e.end_time})}))})),t}function pn(e){var t=e.operationHourObj;return Object($e.jsx)("table",{className:"operation-hour-table",children:Object($e.jsx)("tbody",{children:k.a.map(t,(function(e,t){return Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:t}),Object($e.jsx)("td",{children:k.a.map(e,(function(e,n){return Object($e.jsx)("div",{children:"".concat(bn[e.start_time]," -\n                        ").concat(bn[e.end_time])},t+e.start_time)}))})]},t)}))})})}var mn=n(29),fn=function(e){var t=[];if(!e)return t;var n,a=Object(mn.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value.condition_clauses,i=[];t.push(i);var o,c=Object(mn.a)(r);try{for(c.s();!(o=c.n()).done;){var s,l=o.value,d=(l.field_name,l.clauses),u=Object(mn.a)(d);try{for(u.s();!(s=u.n()).done;){var b=s.value,j=b.left_operand,h=b.right_operand,p=b.operator;i.push([j,p,h])}}catch(m){u.e(m)}finally{u.f()}}}catch(m){c.e(m)}finally{c.f()}}}catch(m){a.e(m)}finally{a.f()}return t};function On(e){return'"'+e.replace(/[\\"]/g,"\\$&")+'"'}function gn(e){try{var t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(n){return[]}}var vn=function e(t,n){return Object.entries(n).forEach((function(n){var a=Object(De.a)(n,2),r=a[0],i=a[1];if("object"===typeof i&&null!=i&&t[r])return e(t[r],i);null!=i&&(t[r]=i)})),t};function xn(e){return null==e||0===e.length}function yn(e){if(null==e)return!0;for(var t=0,n=Object.keys(e);t<n.length;t++){var a,r=n[t],i=Object(mn.a)(e[r]);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.start_time.length>0&&o.end_time.length>0)return!1}}catch(c){i.e(c)}finally{i.f()}}return!0}function _n(e,t){for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(De.a)(a[n],2),i=r[0],o=r[1];"apt_number"!==i&&(xn(o)&&(t[i]="This field is required"))}}function Cn(e,t){var n,a=0,r=Object(mn.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[a]={},_n(i,t[a]),0===Object.entries(t[a]).length&&delete t[a],a++}}catch(o){r.e(o)}finally{r.f()}}function Sn(e,t,n){if(e){/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/.test(e)||(t[n]=Object(s.a)(Object(s.a)({},t[n]),{},{postal_code:"Invalid postal code! They are in the format A1A 1A1, where A is a letter and 1 is a digit"}))}}function kn(e,t,n){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(n[t]="Invalid email! ".concat("They are in the format of jsmith@example.com"))}function wn(e,t,n){e&&!/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/.test(e)&&(n[t]="Invalid phone number! They are in the format of NPA-NXX-XXXX ".concat("where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number"))}function In(e,t){e.email&&kn(e.email,"email",t),(e.primary_phone_number||e.alt_phone_number)&&(wn(e.primary_phone_number,"primary_phone_number",t),wn(e.alt_phone_number,"alt_phone_number",t))}function Nn(e,t){var n,a=0,r=Object(mn.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[a]={},xn(i.relationship)&&(t[a].relationship="This field is required");for(var o=0,c=Object.entries(i.person);o<c.length;o++){var s=Object(De.a)(c[o],2),l=s[0];xn(s[1])&&(t[a][l]="This field is required")}0===Object.entries(t[a]).length&&delete t[a],a++}}catch(d){r.e(d)}finally{r.f()}}var Tn=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,En=/^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/,An=/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,Pn=/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,Dn={email:function(e){if(!Tn.test(e))return"Invalid email! They are in the format of jsmith@example.com"},phone:function(e){if(!En.test(e))return"Invalid phone number! They are in the format of NPA-NXX-XXXX where NPA is the three digit area code and NXX-XXXX is the seven digit subscriber number"},password:function(e){if(!An.test(e))return"Please enter a secure and strong password"},postalCode:function(e){if(!Pn.test(e))return"Invalid postal code! They are in the format A1A 1A1, where A is a letter and 1 is a digit"}},Fn={organization:"Organization",volunteer:"Volunteer",goods_donor:"Goods Donor",professional_service_provider:"Professional Service Provider"},Ln=Object(s.a)({client:"Client"},Fn),Mn=function(e){var t={};return Object.keys(e).forEach((function(n){t[e[n]]=n})),t}(Fn),Bn={alt_phone_number:{component:"GeneralField",type:"tel",label:"Alternative phone number"},availability:{label:"Availability"},commitment:{component:"SelectField",label:"Commitment length",options:["Short term","Six months","One year"]},company:{component:"GeneralField",type:"text",label:"Company/Organization Name"},email:{component:"GeneralField",type:"email",label:"Email"},first_name:{component:"GeneralField",type:"text",label:"First Name"},gender:{component:"SelectField",label:"Gender",options:u.genderOptions},languages:{component:"MultiSelectField",label:"Languages"},last_name:{component:"GeneralField",type:"text",label:"Last Name"},main_address:{label:"Address"},notes:{component:"GeneralField",type:"text",label:"Additional notes "},other_addresses:{label:"Other Addresses"},own_car:{component:"RadioField",label:"Own a car?",options:{Yes:!0,No:!1}},primary_contact:{label:"Primary Contact"},primary_phone_number:{component:"GeneralField",type:"tel",label:"Primary phone number"},reference1_email:{component:"GeneralField",type:"text",label:"Reference 1 Email"},reference1_name:{component:"GeneralField",type:"text",label:"Reference 1 Name"},reference1_phone:{component:"GeneralField",type:"text",label:"Reference 1 phone"},reference2_email:{component:"GeneralField",type:"text",label:"Reference 2 Email"},reference2_name:{component:"GeneralField",type:"text",label:"Reference 2 Name"},reference2_phone:{component:"GeneralField",type:"text",label:"Reference 2 phone"},referrer:{component:"GeneralField",type:"text",label:"Referrer"},secondary_contact:{label:"Secondary Contact"},skills:{component:"GeneralField",type:"text",label:"Skills"},start_date:{component:"GeneralField",type:"date",label:"Start date for availability"},status:{component:"SelectField",label:"Status",options:["External","Internal","Home Agency"]},visibility:{component:"RadioField",label:"Allow other agencies to see this provider?",options:{Yes:!0,No:!1}},sponsor:{component:"GeneralField",type:"text",label:"Sponsor"}},Rn={first_name:"",middle_name:"",last_name:"",preferred_name:"",gender:"",birth_date:null,email:"",primary_phone_number:"",alt_phone_number:""},Gn={first_name:"",last_name:"",email:"",primary_phone_number:"",alt_phone_number:""},zn={street_address:"",apt_number:"",city:"",province:"",postal_code:""},Vn={first_name:"",last_name:"",username:"",email:"",is_superuser:!1,primary_phone_number:"",alt_phone_number:"",password:""},qn=Object(Ke.a)((function(e){return{button:{margin:"10px 0"}}}));function Hn(e){var t=e.index,n=e.location,a=e.handleRemove,r=e.required,i=e.errMsg,o=void 0===i?{}:i,c=Object(we.useState)(!0),s=Object(De.a)(c,2),l=s[0],d=s[1];return Object($e.jsxs)("div",{style:{paddingBottom:10},children:[Object($e.jsxs)(Ft.a,{component:"legend",children:["Other address #",t+1+"  ",Object($e.jsx)(Ve.a,{onClick:function(e){a(t),d(!l)},color:"secondary",children:"Remove"})]}),Object($e.jsx)(Dt,{children:Object($e.jsx)(en,{address:n,handleChange:function(e){return function(t){n[e]=t.target.value}},required:r,errMsg:o})},"main_address")]})}function Wn(e){var t=e.otherLocations,n=e.clientId,a=e.required,r=e.errMsg,i=void 0===r?{}:r,o=qn(),c=Object(we.useState)(t),l=Object(De.a)(c,2),d=l[0],u=l[1],b=function(){return u(!d)},j=function(e){console.log("remove",e,t[e]),t.splice(e,1),b()};return Object($e.jsxs)("div",{children:[i&&"string"===typeof i&&Object($e.jsx)(Tt.a,{severity:"error",children:i}),t.map((function(e,r){return Object($e.jsx)(Hn,{index:r,location:e,clientId:n,handleRemove:j,required:a,size:t.length,errMsg:i[r]},r)})),Object($e.jsx)(Ve.a,{className:o.button,onClick:function(){t.push(Object(s.a)({},zn)),b()},variant:"outlined",children:"Add other address"})]})}var Un=n(635),Jn=n(794),Kn=n(795),Yn=n(796),Xn=n(791),Qn=n(792),Zn=n(766),$n=n(767),ea=n(729),ta=n(790),na=n(778);function aa(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,r=e.orderBy,i=e.numSelected,o=e.rowCount,c=e.onRequestSort,s=e.columns;return Object($e.jsx)(ta.a,{children:Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{padding:"checkbox",children:Object($e.jsx)(Zn.a,{color:"primary",indeterminate:i>0&&i<o,checked:o>0&&i===o,onChange:n,inputProps:{"aria-label":"select all desserts"}})},0),s.map((function(e,n){return Object($e.jsx)(Qn.a,{style:e.style,sortDirection:r===(e.sortBy||e.body)&&a,children:Object($e.jsxs)(na.a,{active:r===(e.sortBy||e.body),direction:r===(e.sortBy||e.body)?a:"asc",onClick:(i=e.sortBy||e.body,function(e){c(e,i)}),children:[e.label,r===e.label?Object($e.jsx)("span",{className:t.sortSpan,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},n+1);var i}))]})})}var ra=n(779),ia=n(8),oa=n(364),ca=n.n(oa),sa=n(365),la=n.n(sa),da=Object(Ke.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.mode?{color:e.palette.primary.main,backgroundColor:Object(Un.d)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),ua=function(e){var t=da(),n=e.numSelected,a=e.title,r=e.onDelete,i=e.customToolbar;return Object($e.jsxs)(Re.a,{className:Object(ia.a)(t.root,Object(c.a)({},t.highlight,n>0)),children:[n>0?Object($e.jsxs)(ze.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object($e.jsx)(ze.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:a}),n>0&&Object($e.jsx)(ra.a,{title:"Delete",children:Object($e.jsx)(ft.a,{"aria-label":"delete",onClick:r,size:"large",children:Object($e.jsx)(ca.a,{})})}),Object($e.jsx)(ra.a,{title:"Search",children:Object($e.jsx)(ft.a,{"aria-label":"search list",size:"large",children:Object($e.jsx)(la.a,{})})}),i]})},ba=["data","title","columns","height"];function ja(e,t,n,a){return(t=n(t,a)||"")<(e=n(e,a)||"")?-1:t>e?1:0}function ha(e,t,n){return"desc"===e?function(e,a){return ja(e,a,t,n)}:function(e,a){return-ja(e,a,t,n)}}function pa(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ma=Object(Ke.a)((function(e){return{paper:{width:"100%"},table:{minWidth:750},sortSpan:ea.a,tableRow:{"&.Mui-selected":{backgroundColor:Object(Un.d)(e.palette.primary.light,.85)},"&.Mui-selected:hover":{backgroundColor:Object(Un.d)(e.palette.primary.light,.8)}}}}));function fa(e){var t=e.data,n=e.title,a=e.columns,r=e.height,i=Object(qe.a)(e,ba),o=i.rowsPerPageOptions,c=void 0===o?[10,25,100]:o,s=i.idField,l=void 0===s?"_id":s,d=i.defaultOrderBy,u=void 0===d?a[0].sortBy||a[0].body:d,b=i.extraData,j=void 0===b?{}:b,h=i.rowStyle,p=i.onDelete,m=i.onChangePage,f=i.onChangeRowsPerPage,O=i.customToolbar,g=ma(),v=Ie.a.useState("asc"),x=Object(De.a)(v,2),y=x[0],_=x[1],C=Ie.a.useState((function(){return u})),S=Object(De.a)(C,2),k=S[0],I=S[1],T=Ie.a.useState([]),E=Object(De.a)(T,2),A=E[0],P=E[1],D=Ie.a.useState(0),F=Object(De.a)(D,2),L=F[0],M=F[1],B=Ie.a.useState(c[0]),R=Object(De.a)(B,2),G=R[0],z=R[1],V=function(){var e=Object(w.a)(N.a.mark((function e(){var n,a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return e.next=3,p(A);case 3:n=Object(mn.a)(A);try{for(r=function(){var e=a.value;t.splice(t.findIndex((function(t){return t._id===e})),1)},n.s();!(a=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}P([]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=L>0?Math.max(0,(1+L)*G-t.length):0;return Object($e.jsxs)(Ze.a,{elevation:5,className:g.paper,children:[Object($e.jsx)(ua,{title:n,numSelected:A.length,onDelete:V,customToolbar:O}),Object($e.jsx)(Jn.a,{style:{maxHeight:r||"calc(100vh - 228px)"},children:Object($e.jsxs)(Kn.a,{stickyHeader:!0,className:g.table,size:"medium",children:[Object($e.jsx)(aa,{classes:g,numSelected:A.length,order:y,orderBy:k,onSelectAllClick:function(e){e.target.checked?P(t.map((function(e){return e[l]}))):P([])},onRequestSort:function(e,t){_(k===t&&"asc"===y?"desc":"asc"),I((function(){return t}))},rowCount:t.length,columns:a}),Object($e.jsxs)(Yn.a,{children:[pa(t,ha(y,k,j)).slice(L*G,L*G+G).map((function(e){var t=e[l],n=function(e){return-1!==A.indexOf(e)}(t);return Object($e.jsxs)(Xn.a,{className:g.tableRow,hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,style:h&&h(e),children:[Object($e.jsx)(Qn.a,{padding:"checkbox",children:Object($e.jsx)(Zn.a,{color:"primary",onClick:function(e){return function(e,t){var n=A.indexOf(t),a=[];-1===n?a=a.concat(A,t):0===n?a=a.concat(A.slice(1)):n===A.length-1?a=a.concat(A.slice(0,-1)):n>0&&(a=a.concat(A.slice(0,n),A.slice(n+1))),P(a)}(0,t)},checked:n})},0),a.map((function(t,n){return Object($e.jsx)(Qn.a,{style:t.style,children:t.body(e,j)},n+1)}))]},t)})),q>0&&Object($e.jsx)(Xn.a,{style:{height:53*q},children:Object($e.jsx)(Qn.a,{colSpan:6})})]})]})}),Object($e.jsx)($n.a,{rowsPerPageOptions:c,component:"div",count:t.length,rowsPerPage:G,page:L,onPageChange:function(e,t){M(t),m&&m(t)},onRowsPerPageChange:function(e){var t=parseInt(e.target.value,10);z(t),M(0),m&&m(0),f&&f(t)}})]})}var Oa=["className","color"],ga=Object(Ke.a)((function(e){return{link:{color:"inherit",textDecorationLine:"none"},linkWithHover:{fontWeight:500,color:"inherit","&:hover":{textDecorationLine:"underline",color:"#2f5ac7"}},progress:{margin:e.spacing(2),marginTop:50},chipButton:{paddingLeft:6,marginLeft:6}}}));function va(e){var t=e.className,n=void 0===t?"":t,a=e.color,r=Object(qe.a)(e,Oa),i=ga();return Object($e.jsx)(Ae.b,Object(s.a)(Object(s.a)({},r),{},{className:a?i.linkWithHover:i.link+" "+n}))}function xa(e){var t=e.handleAdd,n=e.handleUpload,a=e.type,r=Object(Fe.g)(),i=ga(),o=Object(we.useState)(null),c=Object(De.a)(o,2),s=c[0],l=c[1],d=Boolean(s);return Object($e.jsxs)($e.Fragment,{children:[Object($e.jsx)(He.a,{onClick:n,color:"default",icon:Object($e.jsx)(Ye.a,{}),label:"Upload",variant:"outlined",className:i.chipButton}),Object($e.jsx)(He.a,{onClick:"providers"===a?function(e){l(e.currentTarget)}:t,color:"primary",icon:Object($e.jsx)(Xe.a,{}),label:"Add",variant:"outlined",className:i.chipButton}),"providers"===a&&Object($e.jsx)(We.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:function(){l(null)},children:Object.entries(Fn).map((function(e){var t,n=Object(De.a)(e,2),a=n[0],i=n[1];return Object($e.jsx)(Ue.a,{onClick:(t="/providers/".concat(a,"/new"),function(){r.push(t)}),children:i},i)}))})]})}function ya(e){var t=e.message,n=void 0===t?"Loading Components...":t,a=ga();return Object($e.jsxs)("div",{style:{textAlign:"center"},children:[Object($e.jsx)(Je.a,{className:a.progress}),Object($e.jsx)(ze.a,{variant:"subtitle2",color:"textSecondary",children:n})]})}var _a=n(181),Ca=Object(_a.a)(Le.a)({"& .MuiTabs-indicator":{display:"flex",justifyContent:"center",backgroundColor:"#ccc",transition:"none"}}),Sa=Object(_a.a)(Me.a)((function(e){var t=e.theme;return{textTransform:"none",fontWeight:t.typography.fontWeightRegular,fontSize:t.typography.pxToRem(15),marginRight:t.spacing(1),minWidth:60,color:"rgba(255, 255, 255, 0.8)","&.Mui-selected":{color:"#fff",fontWeight:500,backgroundColor:"#cccccc26"}}}));function ka(e){var t=Object(Fe.g)();return Object($e.jsx)(Sa,Object(s.a)(Object(s.a)({},e),{},{onClick:function(){return t.push(e.value)}}))}var wa=function(){var e=Object(Fe.g)(),t=Object(Ee.c)(),n=Object(Ee.d)((function(e){return e.auth})).isLoggedin,a=["/clients","/services","/goods","/providers","/reporting"],r=Object(we.useState)(-1!==a.indexOf(e.location.pathname)&&e.location.pathname),i=Object(De.a)(r,2),o=i[0],c=i[1];return Object(we.useEffect)((function(){c(-1!==a.indexOf(e.location.pathname)&&e.location.pathname)}),[e.location.pathname,a]),Object($e.jsx)(Be.a,{position:"fixed",sx:{backgroundColor:"rgb(39, 44, 52)"},children:Object($e.jsxs)(Re.a,{variant:"dense",children:[n?Object($e.jsxs)(Ca,{sx:{flexGrow:2},value:o,onChange:function(t,n){c(n),e.push(n)},variant:"scrollable",indicatorColor:"secondary",children:[Object($e.jsx)(ka,{label:"Clients",value:"/clients"}),Object($e.jsx)(ka,{label:"Services",value:"/services"}),Object($e.jsx)(ka,{label:"Goods",value:"/goods"}),Object($e.jsx)(ka,{label:"Providers",value:"/providers"}),Object($e.jsx)(ka,{label:"Reporting",value:"/reporting"}),Object($e.jsx)(Me.a,{sx:{display:"none"},label:"",value:"none"})]}):null,n&&Object($e.jsx)(Ge.a,{sx:{paddingRight:"20px",whiteSpace:"pre",textDecorationLine:"none"},children:Object($e.jsx)(va,{to:"/dashboard",onClick:function(){return c("none")},children:Object($e.jsx)(ze.a,{children:"Dashboard"})})}),Object($e.jsx)(Ve.a,{color:"inherit",onClick:function(){return n?t(L()):e.push("/login")},sx:{marginLeft:"auto",textDecorationLine:"none",whiteSpace:"pre"},children:n?"Log out":"Login"})]})})},Ia=function(){return Object($e.jsx)(Ge.a,{sx:{position:"fixed",left:"0",bottom:"0",width:"100%",backgroundColor:"#222",color:"#aaa",textAlign:"center",borderRadius:"2px 2px 0 0",alignContent:"center",padding:"4px","@media print":{display:"none"}},children:Object($e.jsxs)(ze.a,{variant:"caption",children:[Object($e.jsx)(Qe.a,{href:"https://csse.utoronto.ca/",target:"_blank",sx:{color:"#ababab",textDecoration:"none"},children:"Centre for Social Services Engineering"}),", University of Toronto"]})})},Na=n(374),Ta=n(630),Ea=n(806),Aa=n(147),Pa=n(751),Da=n(23),Fa=n(21),La=n(31),Ma=n(32),Ba=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(){return Object(Da.a)(this,n),t.apply(this,arguments)}return Object(Fa.a)(n,[{key:"render",value:function(){return Object($e.jsx)("div",{className:"landing",children:Object($e.jsx)("div",{className:"container",children:Object($e.jsx)("div",{className:"intro-placeholder"})})})}}]),n}(we.Component),Ra=Ba,Ga=n(647),za=Object(Ke.a)((function(){return{container:{paddingTop:80,maxWidth:"500px"},button:{width:300}}}));var Va=function(){var e=za();return Object($e.jsx)(St.a,{className:e.container,children:Object($e.jsxs)(Ga.a,{container:!0,direction:"column",spacing:3,alignItems:"center",children:[Object($e.jsx)(Ga.a,{item:!0,children:Object($e.jsx)(ze.a,{variant:"h5",children:"Log in to your Dashboard"})}),Object($e.jsx)(Ga.a,{item:!0,children:Object($e.jsx)(va,{to:"/login-pane",children:Object($e.jsx)(Ve.a,{variant:"outlined",className:e.button,children:"Sign in with SNM account"})})}),Object($e.jsx)(Ga.a,{item:!0,children:Object($e.jsx)(va,{to:"/login-pane",children:Object($e.jsx)(Ve.a,{color:"primary",variant:"outlined",className:e.button,children:"Facebook"})})}),Object($e.jsx)(Ga.a,{item:!0,children:Object($e.jsx)(va,{to:"/login-pane",children:Object($e.jsx)(Ve.a,{color:"secondary",variant:"outlined",className:e.button,children:"Google"})})})]})})},qa=n(730),Ha=Object(Ke.a)((function(){return{container:{paddingTop:80,maxWidth:"500px"},paper:{padding:30},item:{marginTop:20},button:{marginTop:30,marginBottom:20},link:{marginTop:10,color:"#007dff"}}}));var Wa=function(){var e=Ha(),t=Object(Fe.g)(),n=Object(Ee.c)(),a=Object(we.useState)({username:"",password:"",alert:""}),r=Object(De.a)(a,2),i=r[0],o=r[1],l=function(e){return function(t){var n=t.target.value;o((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e,n))}))}},d=function(){var e=Object(w.a)(N.a.mark((function e(){var a,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(F(i));case 2:a=e.sent,r=a.status,c=a.message,r===E?t.push("/dashboard"):o((function(e){return Object(s.a)(Object(s.a)({},e),{},{alert:c})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($e.jsx)(St.a,{className:e.container,onKeyPress:function(e){"Enter"===e.key&&d()},children:Object($e.jsxs)(Ze.a,{elevation:5,className:e.paper,children:[Object($e.jsx)(ze.a,{variant:"h6",children:"Sign in"}),Object($e.jsx)(ht.a,{fullWidth:!0,variant:"outlined",label:"Username",type:"text",value:i.username,onChange:l("username"),className:e.item}),Object($e.jsx)("br",{}),Object($e.jsx)(ht.a,{fullWidth:!0,variant:"outlined",label:"Password",type:"password",value:i.password,onChange:l("password"),className:e.item}),Object($e.jsx)("br",{}),Object($e.jsx)(ze.a,{variant:"caption",children:Object($e.jsx)("span",{style:{color:"red"},children:i.alert})}),Object($e.jsx)("br",{}),Object($e.jsx)(Ve.a,{variant:"outlined",color:"primary",className:e.button,onClick:d,children:" Log in"}),Object($e.jsx)(qa.a,{}),Object($e.jsx)(va,{to:"/login-pane",children:Object($e.jsx)(ze.a,{variant:"body2",className:e.link,children:"Don't have an account?"})}),Object($e.jsx)(va,{to:"/login-pane",children:Object($e.jsx)(ze.a,{variant:"body2",className:e.link,children:"Forget password?"})})]})})},Ua=n(731),Ja=n(732),Ka=n(733),Ya=n(734);function Xa(e){var t=e.to,n=e.text,a=e.icon;return Object($e.jsx)(va,{to:t,children:Object($e.jsx)(Ve.a,{sx:{width:300,height:100,textTransform:"none",margin:1,color:"#535353"},color:"inherit",variant:"outlined",startIcon:a,size:"large",children:n})})}var Qa=function(){var e=Object(Ee.d)((function(e){return e.auth})),t=e.isLoggedin,n=e.currentUser,a=e.organization;return t&&n.is_admin?Object($e.jsxs)(St.a,{maxWidth:"md",sx:{paddingTop:8,textAlign:"center"},children:[!a.id&&Object($e.jsx)(Xa,{to:{pathname:"/providers/organization/new",state:{status:"Home Agency"}},text:"Create Organization Profile for Home Agency",icon:Object($e.jsx)(Ua.a,{})}),a.id&&Object($e.jsx)(Xa,{to:"/provider/".concat(a.id,"/edit/organization"),icon:Object($e.jsx)(xt.a,{}),text:"Edit Organization Profile for Home Agency"}),Object($e.jsx)(Xa,{to:"/users",icon:Object($e.jsx)(Ja.a,{}),text:"Manage Users"}),Object($e.jsx)(Xa,{to:"/admin-logs",icon:Object($e.jsx)(Ka.a,{}),text:"Admin Logs"}),Object($e.jsx)(Xa,{to:"/eligibility-criteria",icon:Object($e.jsx)(Ya.a,{}),text:"Manage Eligibility Criteria"}),Object($e.jsx)(Xa,{to:"/settings/manage-fields",icon:Object($e.jsx)(xt.a,{}),text:"Manage Client/Provider Fields"}),Object($e.jsx)(Xa,{to:"/questions",icon:Object($e.jsx)(xt.a,{}),text:"Manage Questions"})]}):Object($e.jsx)("span",{children:'"You don\'t have the permission to view this page."'})},Za=function(){function e(t,n){Object(Da.a)(this,e),this.name=t;var a=localStorage.getItem(this.name);this.store=a&&JSON.parse(a)||n}return Object(Fa.a)(e,[{key:"value",get:function(){return console.log("GET ",this.name,this.store),this.store},set:function(e){console.log("SET ",this.name,e),this.store=e,localStorage.setItem(this.name,JSON.stringify(e))}},{key:"save",value:function(){localStorage.setItem(this.name,JSON.stringify(this.store))}}]),e}(),$a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Da.a)(this,e),this.name=t+"-cnt",this.store=Number(localStorage.getItem(this.name))||n-1}return Object(Fa.a)(e,[{key:"nextCnt",get:function(){return this.store++,localStorage.setItem(this.name,this.store),this.store}}]),e}(),er=(n(633),"JWT ".concat(localStorage.getItem("jwt_token")),function e(t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=Object(De.a)(a[n],2),i=r[0],o=r[1];null==o||"object"!==typeof o||Array.isArray(o)?t[i]=o[0]:t[i]=e(o)}return t});function tr(e){return nr.apply(this,arguments)}function nr(){return(nr=Object(w.a)(N.a.mark((function e(t){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.serverHost+t,e.next=3,d()(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}});case 3:if(!((n=e.sent).status>=400&&n.status<600)){e.next=12;break}return a=new Error("Bad response from server: "+n.status),e.t0=er,e.next=9,n.json();case 9:throw e.t1=e.sent,a.json=(0,e.t0)(e.t1),a;case 12:return e.abrupt("return",n.json());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e,t,n){return rr.apply(this,arguments)}function rr(){return rr=Object(w.a)(N.a.mark((function e(t,n,a){var r,i,o,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>3&&void 0!==c[3]&&c[3],t=u.serverHost+t,e.next=4,d()(t,{method:a,body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}});case 4:if(!((i=e.sent).status>=400&&i.status<600)){e.next=13;break}return o=new Error("Bad response from server: "+i.status),e.t0=er,e.next=10,i.json();case 10:throw e.t1=e.sent,o.json=(0,e.t0)(e.t1),o;case 13:if(!r){e.next=15;break}return e.abrupt("return",i);case 15:return e.abrupt("return",i.json());case 16:case"end":return e.stop()}}),e)}))),rr.apply(this,arguments)}function ir(e,t){return or.apply(this,arguments)}function or(){return(or=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ar(t,n,"POST"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t){return sr.apply(this,arguments)}function sr(){return(sr=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ar(t,n,"PUT"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(e,t){return dr.apply(this,arguments)}function dr(){return(dr=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ar(t,n,"DELETE",!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}var br=new Za("clients",[]),jr=new $a("client");function hr(){return pr.apply(this,arguments)}function pr(){return(pr=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(br.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mr(e){return fr.apply(this,arguments)}function fr(){return(fr=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(br.value.find((function(e){return e.id===Number(t)})))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e){return gr.apply(this,arguments)}function gr(){return(gr=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return n=Object(s.a)({id:jr.nextCnt,need_groups:[],appointments:[]},t),br.value=[].concat(Object(o.a)(br.value),[n]),e.abrupt("return",{success:!0,clientId:n.id});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e,t){return xr.apply(this,arguments)}function xr(){return(xr=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return Object.assign(br.value.find((function(e){return e.id===Number(t)})),n),br.save(),e.abrupt("return",{success:!0,clientId:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e){return _r.apply(this,arguments)}function _r(){return(_r=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return n=br.value.findIndex((function(e){return e.id===t.id})),br.value.splice(n,1),br.save(),e.abrupt("return",{success:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e){if(1===Object.keys(e).length)return"Not Provided";var t="";return void 0!==e.apt_number&&(t+="".concat(e.apt_number,"-")),void 0!==e.street_address&&(t+="".concat(e.street_address,", ")),void 0!==e.city&&(t+="".concat(e.city,", ")),void 0!==e.province&&(t+="".concat(e.province,", ")),void 0!==e.postal_code&&(t+="".concat(e.postal_code)),t}function Sr(e){try{var t=e.match(/^(\d{3})(\d{3})(\d{4})$/);return"("+t[1]+") "+t[2]+"-"+t[3]}catch(n){return e}}var kr="clients",wr=[{label:"First Name",body:function(e){var t=e.id,n=e.profile;return Object($e.jsx)(va,{color:!0,to:"/".concat(kr,"/").concat(t),children:n.first_name})}},{label:"Last Name",body:function(e){return e.profile.last_name}},{name:"profile.primary_phone_number",label:"Phone Number",body:function(e){var t=e.profile;return t.primary_phone_number?Sr(t.primary_phone_number):"Not Provided"}},{label:"Email",body:function(e){return e.profile.email}},{label:"Address",body:function(e){var t=e.profile;return t.address?Cr(t.address):"Not Provided"}}];var Ir=n(738),Nr=n(768),Tr=n(800),Er=n(801),Ar=n(735),Pr=n(736),Dr=n(737);function Fr(e){var t=e.needGroupCategory,n=e.needs,a=e.needGroupId,r=e.status,i=e.clientId,o=e.handleShow,c=Object(Ee.c)(),l=Object(we.useState)({status:r,hasUrgentNeed:Mr(n)}),d=Object(De.a)(l,2),u=d[0],b=d[1],j=Lr(),h=n.map((function(e){return Object($e.jsxs)(Ze.a,{variant:"outlined",children:[Object($e.jsxs)(Ga.a,{container:!0,spacing:3,className:j.innerBox,children:[Object($e.jsx)(Ga.a,{item:!0,xs:!0,children:Object($e.jsx)(ze.a,{color:"primary",children:e.type})}),Object($e.jsx)(Ga.a,{item:!0,xs:!0}),e.is_urgent&&Object($e.jsx)(Ga.a,{item:!0,xs:!0,children:Object($e.jsxs)(Ge.a,{display:"flex",flexDirection:"row",children:[Object($e.jsx)(Ar.a,{className:j.highPriority}),Object($e.jsx)(ze.a,{className:j.highPriority,children:"Urgent"})]})})]}),Object($e.jsxs)(Ge.a,{className:j.innerBox,children:[Object($e.jsx)(va,{color:!0,to:"/needs/".concat(e.id),children:"Find Services/Goods"}),Object($e.jsx)("p",{children:e.description})]}),Object($e.jsxs)(Ge.a,{display:"flex",className:j.innerBox,children:[Object($e.jsx)(Ge.a,{children:Object($e.jsx)(va,{to:"/needs/".concat(e.id,"/edit"),children:Object($e.jsx)(Ve.a,{startIcon:Object($e.jsx)(xt.a,{}),children:"Edit"})})}),Object($e.jsx)(Ge.a,{children:Object($e.jsx)(Ve.a,{startIcon:Object($e.jsx)(yt.a,{}),onClick:function(){return o(e.id)},children:"Delete"})}),Object($e.jsx)(Ge.a,{children:Object($e.jsx)(Ve.a,{color:"secondary",onClick:function(){return function(){var e={category:t,status:"Unmet"===u.status?"Met":"Unmet",client_id:i,id:a};b((function(t){return Object(s.a)(Object(s.a)({},t),{},{status:e.status})})),c(y(i,e.id,e))}()},children:u.status})})]})]},e.id)}));return Object($e.jsx)("div",{children:Object($e.jsxs)(Nr.a,{className:j.panel,children:[Object($e.jsxs)(Tr.a,{expandIcon:Object($e.jsx)(Pr.a,{}),"aria-controls":t+"-content",id:t+"-header",children:[Object($e.jsxs)(Ge.a,{display:"flex",flexDirection:"row",className:j.column,children:[Object($e.jsx)(ze.a,{className:j.heading,children:t}),u.hasUrgentNeed&&Object($e.jsx)(Dr.a,{className:j.highPriority})]}),Object($e.jsx)("div",{className:j.column,children:Object($e.jsxs)(ze.a,{className:j.secondaryHeading,children:[n.length," need(s) inside "]})})]}),Object($e.jsx)(Er.a,{className:j.panelDetail,children:Object($e.jsx)(Ge.a,{className:j.outerBox,children:h})})]})})}var Lr=Object(Ke.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},secondaryHeading:{fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary},column:{flexBasis:"50%"},panel:{width:"35%"},panelDetail:{padding:0},outerBox:{width:"100%"},innerBox:{padding:"10px"},highPriority:{color:"#f44336"}}}));function Mr(e){var t,n=Object(mn.a)(e);try{for(n.s();!(t=n.n()).done;){if(t.value.is_urgent)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}function Br(e){var t=e.clientId,n=e.needGroups,a=Object(Ee.c)(),r=Object(we.useState)({show:!1,selectedId:null,needGroupData:n}),i=Object(De.a)(r,2),c=i[0],l=i[1],d=function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{showDeletedDiaglog:!0,selectedId:e})}))},u=c.needGroupData.map((function(e){return Object($e.jsx)(Fr,{needGroupCategory:e.category,needs:e.needs,needGroupId:e.id,status:e.status,clientId:t,handleShow:d},e.id)})),b=function(e){var t,n=Object(o.a)(c.needGroupData),a=Object(mn.a)(n);try{for(a.s();!(t=a.n()).done;){var r,i=t.value,s=Object(mn.a)(i.needs);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(l.id===c.selectedId){var d=i.needs.indexOf(l);d>-1&&i.needs.splice(d,1)}}}catch(b){s.e(b)}finally{s.f()}if(0===i.needs.length){var u=n.indexOf(i);u>-1&&n.splice(u,1)}}}catch(b){a.e(b)}finally{a.f()}return n};return c?Object($e.jsxs)("div",{children:[u,Object($e.jsx)(mt,{contentType:"Need",objectId:c.selectedId,show:c.showDeletedDiaglog,onHide:function(){l((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeletedDiaglog:!1})}))},delete:function(e,n){a(_(t,e,n)).then((function(e){"ERROR"===e||l((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeletedDiaglog:!1,needGroupData:b(e.selectedId)})}))}))},title:"Delete this need?"})]}):""}function Rr(e){var t=e.title,n=e.value;return n?Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{component:"th",scope:"row",children:t}),Object($e.jsx)(Qn.a,{align:"left",children:n})]},t):null}var Gr=Object(Ke.a)({table:{marginTop:20,marginBottom:40,width:"80%"},title:{backgroundColor:"#ececec",width:"30%"},title2:{backgroundColor:"#ececec",width:"70%"}});function zr(e){var t,n,a=e.step,r=e.client,i=e.infoFields,o=e.clientFields,c=k.a.map(i,(function(e){switch(t=o[e].label,e){case"first_name":case"middle_name":case"last_name":case"preferred_name":case"gender":case"birth_date":case"email":case"primary_phone_number":void 0===r.profile||(n=r.profile[e]);break;case"alt_phone_number":void 0===r.profile||(n=r.profile[e]?Sr(r.profile[e]):"None provided");break;case"address":void 0===r.profile||(n=r[e]?Cr(r[e]):"None provided");break;case"has_children":void 0===r.profile||(n=r[e]?"Yes":"No");break;case"other_languages":r.profile,n=r.profile[e];break;case"eligibilities":void 0===r.profile||(n=(r[e]||[]).join(", "));break;default:n=r[e]}return Object($e.jsx)(Rr,{title:t,value:n},e)})),s=Gr();return Object($e.jsx)(Jn.a,{className:s.table,component:Ze.a,children:Object($e.jsxs)(Kn.a,{"aria-label":"Profile table",children:[Object($e.jsx)(ta.a,{children:Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{className:s.title,children:a}),Object($e.jsx)(Qn.a,{className:s.title2})]})}),Object($e.jsx)(Yn.a,{children:c})]})})}var Vr=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(){return Object(Da.a)(this,n),t.apply(this,arguments)}return Object(Fa.a)(n,[{key:"render",value:function(){var e=this.props.appointment;return Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{component:"th",scope:"row",children:e.category}),Object($e.jsx)(Qn.a,{align:"left",children:e.date}),Object($e.jsx)(Qn.a,{align:"left",children:"".concat(e.start_time," - ").concat(e.end_time)}),Object($e.jsx)(Qn.a,{align:"left",children:e.description})]})}}]),n}(we.Component),qr=new Za("client-fields",{steps_order:["info"],form_structure:{info:{first_name:!1,last_name:!1,gender:!1,first_language:!1,birth_date:!1,ngo_conditions:!1,status_in_canada:!1,country_of_origin:!1,has_children:!1}}});function Hr(){return Wr.apply(this,arguments)}function Wr(){return(Wr=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(qr.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ur(e){return Jr.apply(this,arguments)}function Jr(){return(Jr=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:qr.value=t;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kr={address:{label:"Address"},alt_phone_number:{component:"GeneralField",type:"tel",label:"Alternative Phone Number"},arrival_date:{component:"GeneralField",type:"date",label:"Arrival Date (if different from landing_date)"},birth_date:{component:"GeneralField",type:"date",label:"Date of Birth"},completed_education_level:{component:"SelectField",label:"Completed Education Level",options:u.educationLevelOptions},country_of_last_residence:{component:"GeneralField",type:"text",label:"Country of Last Residence"},country_of_origin:{component:"GeneralField",type:"text",label:"Country of Origin"},current_education_level:{component:"SelectField",label:"Current Education Level",options:u.educationLevelOptions},ngo_conditions:{component:"CheckboxField",label:"NGO Conditions"},email:{component:"GeneralField",type:"email",label:"Email"},family:{label:"Family"},file_id:{component:"GeneralField",type:"text",label:"File ID"},first_language:{component:"SelectField",label:"First Language"},first_name:{component:"GeneralField",type:"text",label:"First Name"},gender:{component:"SelectField",label:"Gender",options:u.genderOptions},has_children:{component:"RadioField",label:"Do you have children?",options:{Yes:!0,No:!1}},immigration_doc_number:{component:"GeneralField",type:"text",label:"Immigration Document Number (if different from PR card)"},income_source:{component:"SelectField",label:"Income Source",options:u.incomeSourceOptions},landing_date:{component:"GeneralField",type:"date",label:"Landing Date"},last_name:{component:"GeneralField",type:"text",label:"Last Name"},marital_status:{component:"SelectField",label:"Marital Status",options:u.maritalStatusOptions},middle_name:{component:"GeneralField",type:"text",label:"Middle Name"},num_of_children:{component:"GeneralField",type:"number",label:"Number of Children"},num_of_dependants:{component:"GeneralField",type:"number",label:"Number of Dependants"},other_languages:{component:"MultiSelectField",label:"Other languages"},preferred_name:{component:"GeneralField",type:"text",label:"Preferred Name"},primary_phone_number:{component:"GeneralField",type:"tel",label:"Telephone"},pr_number:{component:"GeneralField",type:"text",label:"Permanent Residence Card Number (PR card)"},status_in_canada:{component:"SelectField",label:"Status in Canada",options:u.statusInCanadaOptions}};function Yr(){return tr("/eligibility_criteria/")}function Xr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr("/eligibility_criteria/"+t+"/",n);case 2:if(204===e.sent.status){e.next=5;break}throw Error("Server does not return correct code.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zr=Object(Ke.a)((function(e){return{root:{},paper:{position:"relative",paddingLeft:28,paddingBottom:20,marginBottom:20,width:380}}}));function $r(e){var t=e.index,n=e.clientId,a=e.member,r=e.handleRemoveFamily,i=e.errMsg,o=void 0===i?{}:i,c=Zr(),s=function(e){return function(t){a.person[e]=t.target.value}},l=n&&a.person.id===n;return Object($e.jsxs)("div",{className:c.root,children:[Object($e.jsxs)(Ft.a,{component:"legend",children:["Family Member #",t+1+"  ",Object($e.jsx)(Ve.a,{disabled:l,onClick:function(e){return r(t)},color:"secondary",children:"Remove"})]}),Object($e.jsxs)(Ze.a,{variant:"outlined",className:c.paper,children:[Object($e.jsx)(Ht,{type:"text",onChange:s("first_name"),value:a.person.first_name,label:"First name",disabled:l,error:!!o.first_name,helperText:o.first_name}),Object($e.jsx)(Ht,{type:"text",value:a.person.last_name,onChange:s("last_name"),label:"Last name",disabled:l,error:!!o.last_name,helperText:o.last_name}),Object($e.jsx)(Ht,{type:"date",value:a.person.birth_date,onChange:s("birth_date"),label:"Birth date",disabled:l,error:!!o.birth_date,helperText:o.birth_date}),Object($e.jsx)($t,{options:u.genderOptions,value:a.person.gender,onChange:s("gender"),label:"Gender",disabled:l,error:!!o.gender,helperText:o.gender}),Object($e.jsx)($t,{options:u.familyRelationshipOptions,value:a.relationship,onChange:function(e){return a.relationship=e.target.value},label:n&&a.person.id===n?"Self":"Relationship",disabled:l,error:!!o.relationship,helperText:o.relationship})]})]})}function ei(e){var t=e.family,n=e.clientId,a=e.errMsg,r=void 0===a?{}:a,i=Object(we.useState)(!0),o=Object(De.a)(i,2),c=o[0],s=o[1],l=function(){return s(!c)},d=function(e){t.members.splice(e,1),l()};return Object($e.jsxs)("div",{children:[r&&"string"===typeof r&&Object($e.jsx)(Tt.a,{severity:"error",children:r}),t.members.map((function(e,t){return Object($e.jsx)($r,{index:t,member:e,clientId:n,handleRemoveFamily:d,errMsg:r[t]},t)})),Object($e.jsx)(Ve.a,{onClick:function(){t.members.push({person:{first_name:"",last_name:"",birth_date:null,gender:""},relationship:""}),l()},variant:"outlined",children:"Add Family Member"})]})}var ti=n(739),ni=n(802),ai=n(763),ri=["row","noStar","label","required","options","onChange","value","helperText"],ii=Object(Ke.a)((function(e){return{formControl:{position:"relative",top:16},formControlRow:{position:"relative",flexDirection:"row",alignItems:"center"},labelRow:{width:200,marginRight:20}}}));function oi(e){var t=e.row,n=e.noStar,a=e.label,r=e.required,i=e.options,o=e.onChange,c=e.value,s=void 0===c?Yt:c,l=e.helperText,d=Object(qe.a)(e,ri),u=ii(),b=Object(we.useState)(s),j=Object(De.a)(b,2),h=j[0],p=j[1],m=Object(we.useCallback)((function(e){var t=function(e){return"true"===e||"false"!==e&&e}(e.target.value);p(t),o({target:{value:t===Yt?null:t}})}),[o]);return Object($e.jsxs)(Wt.a,{className:t?u.formControlRow:u.formControl,error:d.error,children:[Object($e.jsx)(Ft.a,{className:t&&u.labelRow,required:r&&!n,component:"legend",children:a}),Object($e.jsx)(ti.a,{value:h,onChange:m,row:!0,children:Object.entries(i).map((function(e){var t=Object(De.a)(e,2),n=t[0],a=t[1];return Object($e.jsx)(ni.a,{value:a,control:Object($e.jsx)(ai.a,{color:"primary"}),label:n,labelPlacement:"end"},a)}))}),l&&Object($e.jsx)(Kt.a,{children:l})]})}var ci=n(650),si=["label","required","options","onChange","helperText"],li=Object(Ke.a)((function(e){return{formControl:{marginTop:16}}}));function di(e){var t=e.label,n=e.required,a=e.options,r=e.onChange,i=e.helperText,o=Object(qe.a)(e,si),l=Object(we.useMemo)((function(){return Array.isArray(a)?a:Object.values(a)}),[a]),d=Object(we.useState)((function(){var e={};return l.forEach((function(t){e[t]=o.value.includes(t)})),e})),u=Object(De.a)(d,2),b=u[0],j=u[1],h=Object(we.useCallback)((function(e){return function(t){var n=t.target.checked,a=Object(s.a)(Object(s.a)({},b),{},Object(c.a)({},e,n));j(a);var i=[];Object.entries(a).forEach((function(e){var t=Object(De.a)(e,2),n=t[0];t[1]&&i.push(n)})),r({target:{value:i}})}}),[r,b]),p=li();return Object($e.jsxs)(Wt.a,{component:"fieldset",className:p.formControl,error:o.error,children:[Object($e.jsx)(Ft.a,{required:n,component:"legend",children:t}),Object($e.jsx)(ci.a,{row:!0,children:l.map((function(e){return Object($e.jsx)(ni.a,{label:e,control:Object($e.jsx)(Zn.a,{color:"primary",checked:b[e],onChange:h(e)})},e)}))}),i&&Object($e.jsx)(Kt.a,{children:i})]})}var ui=n(769);function bi(e){var t=e.options,n=e.label,a=e.value,r=e.onChange,i=e.helperText,o=Object(we.useCallback)((function(e,t){r({target:{value:t}})}),[r]);return Object($e.jsx)(ui.a,{sx:{mt:"16px"},multiple:!0,options:t,onChange:o,getOptionLabel:function(e){return e},defaultValue:a,renderInput:function(e){return Object($e.jsx)(ht.a,Object(s.a)(Object(s.a)({},e),{},{label:n,sx:{minWidth:350},fullWidth:!1,helperText:i}))}})}var ji=["component","options","value"];function hi(e){var t=e.component,n=e.options,a=e.value,r=Object(qe.a)(e,ji);return"GeneralField"===t?Object($e.jsx)(Ht,Object(s.a)(Object(s.a)({},r),{},{value:a})):"SelectField"===t?Object($e.jsx)($t,Object(s.a)(Object(s.a)({options:n},r),{},{value:a})):"MultiSelectField"===t?Object($e.jsx)(bi,Object(s.a)({options:n,value:a},r)):"RadioField"===t?Object($e.jsx)(oi,Object(s.a)({options:n,value:a},r)):"CheckboxField"===t?Object($e.jsx)(di,Object(s.a)({options:n,value:a},r)):Object($e.jsxs)("div",{children:["Unknown field ",t]})}function pi(e,t){var n=function(e){var t={};Sn(e.address.postal_code,t,"address"),e.profile&&In(e.profile,t);return t}(e),a=function(e,t){var n,a={},r=Object(mn.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,c=Object.entries(i);o<c.length;o++){var s=Object(De.a)(c[o],2),l=s[0];s[1]&&(l in e&&xn(e[l])||l in e.profile&&xn(e.profile[l])?a[l]="This field is required":"family"===l&&l in e?0===e[l].length?a.family="Please add at least one family member!":(a[l]={},Nn(e[l].members,a[l]),0===Object.entries(a[l]).length&&delete a[l]):"address"===l&&(a[l]={},_n(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]))}}catch(d){r.e(d)}finally{r.f()}return a}(e,t);return vn(a,n)}var mi=Object(Ke.a)((function(e){return{content:{width:"80%",margin:"auto",paddingBottom:10}}}));function fi(){var e=mi(),t=Object(Fe.g)(),n=Object(Ee.c)(),a=Object(Fe.h)().id,r=a?"edit":"new",i=Object(we.useState)({loading:!0,languageOptions:[],all_ngo_conditions:[],stepNames:[],steps:[],client:null,dispatchErrorMsg:[],fieldErrorMsg:{}}),o=Object(De.a)(i,2),c=o[0],l=o[1],d=Object(we.useMemo)((function(){return function(e){var t={profile:Object(s.a)({},Rn),address:Object(s.a)({},zn),family:{members:[]},marital_status:"",has_children:!1,num_of_children:"",country_of_origin:"",country_of_last_residence:"",first_language:"",other_languages:[],pr_number:"",immigration_doc_number:"",landing_date:null,arrival_date:null,status_in_canada:"",income_source:"",current_education_level:"",completed_education_level:"",num_of_dependants:"",file_id:"",ngo_conditions:[]};return e?vn(t,e):t}(c.client)}),[c.client]);Object(we.useEffect)((function(){var e=[];e.push(n(R("languages")).then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{languageOptions:e})}))}))),e.push(Yr().then((function(e){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{all_ngo_conditions:e.map((function(e){return e.title}))})}))}))),e.push(Hr().then((function(e){null==e||0===e.steps_order.length||0===Object.values(e.form_structure).length?l((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0,dispatchErrorMsg:["No fields are available."]})})):l((function(t){return Object(s.a)(Object(s.a)({},t),{},{stepNames:e.steps_order,steps:Object.values(e.form_structure)})}))}))),a&&e.push(mr(a).then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{client:e})}))}))),Promise.all(e).then((function(){return l((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[n,a]);var u=function(){var e=Object(w.a)(N.a.mark((function e(){var n,i,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=pi(d,c.steps),0===Object.keys(n).length){e.next=4;break}return l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fieldErrorMsg:n})})),e.abrupt("return");case 4:if("edit"!==r){e.next=11;break}return e.next=7,vr(a,d);case 7:(i=e.sent).success?t.push("/clients/".concat(i.clientId)):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{dispatchErrorMsg:[i.error]})})),e.next=15;break;case 11:return e.next=13,Or(d);case 13:(o=e.sent).success?t.push("/clients/".concat(o.clientId)):l((function(e){return Object(s.a)(Object(s.a)({},e),{},{dispatchErrorMsg:[o.error]})}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(we.useCallback)((function(e){return function(t){var n=t.target.value,a=e.split(".");if(1===a.length)d[e]=n;else{for(var r=d,i=0;i<a.length-1;i++)r=r[a[i]];r[a[a.length-1]]=n||""}}}),[d]);return c.loading?Object($e.jsx)(ya,{message:"Loading..."}):Object($e.jsx)(St.a,{children:Object($e.jsx)(At,{getStepContent:function(t){var n=c.steps[t];return Object($e.jsx)("div",{className:e.content,children:Object.entries(n).map((function(e){var t,n=Object(De.a)(e,2),r=n[0],i=n[1],o=c.fieldErrorMsg[r];if("first_language"===r?t=c.languageOptions:"other_languages"===r?t=c.languageOptions.filter((function(e){return e!==d.first_language})):"ngo_conditions"===r&&(t=c.all_ngo_conditions),"address"===r)return Object($e.jsx)(en,{address:d.address,required:i,errMsg:o},"address");if("family"===r)return Object($e.jsx)(ei,{family:d.family,clientId:a,required:i,errMsg:o},"family");var s=Object.keys(Rn).includes(r);return Object($e.jsx)(hi,{label:Kr[r].label,type:Kr[r].type,component:Kr[r].component,value:s?d.profile[r]:d[r],onChange:b(s?"profile."+r:r),required:i,options:Kr[r].options||t,error:null!=o,helperText:o},r)}))})},handleFinish:u,stepNames:c.stepNames,error:c.dispatchErrorMsg})})}var Oi=n(740);function gi(e,t){return cr("/user/"+e+"/",t)}function vi(e){return tr("/user/"+e+"/")}function xi(e,t,n){if(204!==lr("/user/"+e+"/").status)throw Error("Server does not return correct code.")}var yi={is_superuser:Object(s.a)(Object(s.a)({},Xt),{},{label:"Admin?",component:oi,options:{Yes:!0,No:!1},required:!0}),username:Object(s.a)(Object(s.a)({},Xt),{},{label:"Username",required:!0}),password:Object(s.a)(Object(s.a)({},Xt),{},{label:"Password",type:"password",required:!0,validator:Dn.password}),first_name:Object(s.a)(Object(s.a)({},Xt),{},{label:"First name"}),last_name:Object(s.a)(Object(s.a)({},Xt),{},{label:"Last name"}),email:Object(s.a)(Object(s.a)({},Xt),{},{label:"Email",type:"email",validator:Dn.email}),primary_phone_number:Object(s.a)(Object(s.a)({},Xt),{},{label:"Telephone",validator:Dn.phone}),alt_phone_number:Object(s.a)(Object(s.a)({},Xt),{},{label:"Alternate phone number",validator:Dn.phone})},_i=Object(Ke.a)((function(){return{root:{width:"80%"},button:{marginTop:12,marginBottom:12}}}));function Ci(){var e=_i(),t=Object(Fe.g)(),n=Object(Fe.h)().id,a=null==n?"new":"edit",r=Object(we.useState)({form:Object(s.a)({},Vn),errors:{},loading:!0}),i=Object(De.a)(r,2),o=i[0],c=i[1];Object(we.useEffect)((function(){"edit"===a?vi(n).then((function(e){c((function(t){return Object(s.a)(Object(s.a)({},t),{},{form:Object(s.a)(Object(s.a)({},t.form),e),loading:!1})}))})):c((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}),[a,n]);var l=function(){for(var e={},t=0,n=Object.entries(yi);t<n.length;t++){var a=Object(De.a)(n[t],2),r=a[0],i=a[1],l=xn(o.form[r]);i.required&&l&&(e[r]="This field is required");var d=void 0;!l&&i.validator&&(d=i.validator(o.form[r]))&&(e[r]=d)}return 0===Object.keys(e).length||(c((function(t){return Object(s.a)(Object(s.a)({},t),{},{errors:e})})),!1)},d=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l()){e.next=16;break}if(e.prev=1,"new"!==a){e.next=8;break}return e.next=5,ir("/users/",o.form);case 5:t.push("/users/"),e.next=11;break;case 8:return e.next=10,gi(n,o.form);case 10:t.push("/users/"+n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.json&&c((function(t){return Object(s.a)(Object(s.a)({},t),{},{errors:e.t0.json})}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return o.loading?Object($e.jsx)(ya,{message:"Loading user form..."}):Object($e.jsxs)(St.a,{className:e.root,children:[Object($e.jsx)(ze.a,{variant:"h5",children:"new"===a?"Create new user":"Edit user"}),Object.entries(yi).map((function(e){var t=Object(De.a)(e,2),n=t[0],a=t[1];return Object($e.jsx)(a.component,{label:a.label,type:a.type,options:a.options,value:o.form[n],required:a.required,onChange:function(e){return o.form[n]=e.target.value},error:!!o.errors[n],helperText:o.errors[n]},n)})),Object($e.jsx)(Ve.a,{variant:"contained",color:"primary",className:e.button,onClick:d,children:"Submit"})]})}var Si=n(36);var ki=n(741),wi=n(742),Ii=n(366),Ni=n(757),Ti=n(367),Ei=n(369),Ai=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;Object(Da.a)(this,n);var r={};return(a=t.call(this,e)).props.match.params.need_id&&(r=a.props.needsById[a.props.match.params.need_id]),a.state={needId:r.id,mode:r.id?"edit":"new",form:{type:r.type||void 0,category:r.category||"",description:r.description||"",needed_by:r.needed_by||"",condition:r.condition||"",status:r.status||"",is_urgent:r.is_urgent||!1,languages:r.languages||[]}},a.formValChange=a.formValChange.bind(Object(Si.a)(a)),a.submit=a.submit.bind(Object(Si.a)(a)),a.handleMultiSelectChange=a.handleMultiSelectChange.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(R("needs"))}},{key:"formValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.target.value,a=Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},t,n));this.setState({form:a})}},{key:"handleMultiSelectChange",value:function(e,t,n){var a=function(e,t,n){var a;switch(n.action){case"pop-value":case"remove-value":k.a.remove(e,(function(e){return e===n.removedValue.value})),a=e;break;case"clear":a=[];break;default:e.push(n.option.value),a=e}return a}(this.state.form[e],0,n);this.setState({form:Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},e,a))})}},{key:"submit",value:function(){var e,t,n;"edit"===this.state.mode?this.props.dispatch((e=this.props.clientId,t=this.state.needId,n=this.state.form,function(a){var r=u.serverHost+"/clients/"+e+"/needs/"+t+"/";return d()(r,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return a(v(e,t.need,t.need_group))}))})):this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/clients/"+e+"/needs/";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return n(v(e,t.need,t.need_group))}))}}(this.props.clientId,this.state.form)),this.props.history.push("/clients/".concat(this.props.clientId))}},{key:"render",value:function(){var e=this,t=this.props,n="edit"===this.state.mode?"Edit Need":"Create Need";return void 0===this.state.form.type?Object($e.jsx)("div",{className:"outer",children:Object($e.jsx)("div",{className:"middle",children:Object($e.jsxs)("div",{className:"need-type-buttons",children:[Object($e.jsx)(ki.a,{onClick:function(t){return e.formValChange(t,"type","Good")},children:"Goods"}),Object($e.jsx)(ki.a,{onClick:function(t){return e.formValChange(t,"type","Service")},children:"Service"})]})})}):Object($e.jsxs)(wi.a,{className:"content",children:[Object($e.jsxs)(Ii.a,{sm:12,children:[Object($e.jsx)("h3",{children:n}),Object($e.jsx)("hr",{})]}),Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsxs)(Ni.a,{horizontal:!0,children:[Object($e.jsxs)(Ti.a,{controlId:"type",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Type"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)("div",{className:"need-type",children:this.state.form.type})})]}),Object($e.jsxs)(Ti.a,{controlId:"is_urgent",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Urgent?"}),Object($e.jsxs)(Ii.a,{sm:9,children:[Object($e.jsx)(Ni.a.Check,{name:"radioGroup",value:"1",onChange:function(t){return e.formValChange(t,"is_urgent")},defaultChecked:!0===this.state.form.is_urgent,type:"radio",inline:!0,children:"Yes"})," ",Object($e.jsxs)(Ni.a.Check,{name:"radioGroup",value:"0",onChange:function(t){return e.formValChange(t,"is_urgent")},defaultChecked:!1===this.state.form.is_urgent,type:"radio",inline:!0,children:["No",!1===this.state.form.is_urgent]})," "]})]}),Object($e.jsx)($t,{label:"Category",options:t.needsCategories,value:this.state.form.category,onChange:function(t){return e.formValChange(t,"category")},required:!0}),Object($e.jsx)(Ht,{label:"Needed By",type:"date",value:this.state.form.needed_by,onChange:function(t){return e.formValChange(t,"needed_by")}}),Object($e.jsx)(bi,{label:"Languages",options:t.languagesCategories,value:this.state.form.languages,onChange:function(t){return e.handleMultiSelectChange(t,null,null)}}),Object($e.jsx)(Ht,{label:"Description",value:this.state.form.description,onChange:function(t){return e.formValChange(t,"description")},required:!0,multiline:!0,fullWidth:!0}),"Good"===this.state.form.type&&Object($e.jsx)(Ht,{label:"Condition",type:"textarea",value:this.state.form.condition,onChange:function(t){return e.formValChange(t,"condition")}}),Object($e.jsx)(Ti.a,{children:Object($e.jsx)(Ii.a,{smOffset:3,sm:9,children:Object($e.jsx)(ki.a,{onClick:this.submit,children:"Submit"})})})]})})]})}}]),n}(we.Component),Pi=Object(Ee.b)((function(e){return{needsById:e.needs.byId,clientId:e.needs.clientId,needsCategories:e.ontology.needs.categories,languagesCategories:e.ontology.languages.categories,categoriesLoaded:e.ontology.needs.loaded}}))(Object(Fe.i)(Ai)),Di=n(755);var Fi=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;return Object(Da.a)(this,n),(a=t.call(this,e)).state={form:{type:"",category:"",status:"",description:"",date:"",start_time:"",end_time:"",reminder_type:"",reminder_frequency:""}},a.formValChange=a.formValChange.bind(Object(Si.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"handleSubmit",value:function(){var e,t,n=this,a=Object.assign({},this.state.form);a.service_id=this.props.serviceId,a.client_id=this.props.clientId,this.props.dispatch((e=a,t=function(e,t,a){n.props.onHide()},function(n){var a=u.serverHost+"/appointments/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){t(u.ACTION_SUCCESS,null,e)})).catch((function(e){t(u.ACTION_ERROR,e)}))}))}},{key:"formValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id,n=Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},t,e.target.value));this.setState({form:n})}},{key:"render",value:function(){return Object($e.jsxs)(Di.a,{show:this.props.show,onHide:this.props.onHide,bsSize:"large","aria-labelledby":"contained-modal-title-sm",children:[Object($e.jsx)(Di.a.Header,{closeButton:!0,children:Object($e.jsxs)(Di.a.Title,{id:"contained-modal-title-sm",children:["Appointment",this.state.form.service_id,this.state.form.provider_id]})}),Object($e.jsx)(Di.a.Body,{children:Object($e.jsxs)(Ni.a,{horizontal:!0,children:[Object($e.jsx)($t,{id:"type",label:"Type",options:["External","Internal"],componentClass:"select",value:this.state.form.type,onChange:this.formValChange,required:!0}),Object($e.jsx)(Ht,{id:"category",label:"Category",type:"text",value:this.state.form.category,onChange:this.formValChange}),Object($e.jsx)(Ht,{id:"status",label:"Status",type:"text",value:this.state.form.status,onChange:this.formValChange}),Object($e.jsx)(Ht,{id:"description",label:"Description",type:"text",value:this.state.form.description,onChange:this.formValChange}),Object($e.jsx)(Ht,{id:"date",label:"Date",type:"date",value:this.state.form.date,onChange:this.formValChange,required:!0}),Object($e.jsx)(Ht,{id:"start_time",label:"Start Time",type:"time",value:this.state.form.start_time,onChange:this.formValChange,required:!0}),Object($e.jsx)(Ht,{id:"end_time",label:"End Time",type:"time",value:this.state.form.end_time,onChange:this.formValChange,required:!0}),Object($e.jsx)($t,{id:"reminder_type",label:"Reminder Type",options:["Email","Text","Phone"],componentClass:"select",value:this.state.form.reminder_type,onChange:this.formValChange}),Object($e.jsx)(Ht,{id:"reminder_frequency",label:"Reminder Frequecy",type:"text",value:this.state.form.reminder_frequency,onChange:this.formValChange})]})}),Object($e.jsx)(Di.a.Footer,{children:Object($e.jsx)(ki.a,{onClick:this.handleSubmit,children:"Submit"})})]})}}]),n}(we.Component),Li=Object(Ee.b)()(Fi),Mi=n(770),Bi=n(803),Ri=n(368),Gi=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;return Object(Da.a)(this,n),(a=t.call(this,e)).state={activeKey:null,matchStatusForm:{},noteForm:{},modalShow:!1,appointmentServiceId:null},a.handleSelect=a.handleSelect.bind(Object(Si.a)(a)),a.matchStatusChange=a.matchStatusChange.bind(Object(Si.a)(a)),a.textAreaChange=a.textAreaChange.bind(Object(Si.a)(a)),a.submitMatchStatus=a.submitMatchStatus.bind(Object(Si.a)(a)),a.submitNote=a.submitNote.bind(Object(Si.a)(a)),a.handleModalHide=a.handleModalHide.bind(Object(Si.a)(a)),a.handleModalShow=a.handleModalShow.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"submitMatchStatus",value:function(e){this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/matches/"+e+"/";return d()(a,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(e){return n(x(e.client_id,e.id,e))}))}}(e,this.state.matchStatusForm[e]))}},{key:"submitNote",value:function(e){var t,n=Object(s.a)(Object(s.a)({},this.state.noteForm[e]),{},{object_id:e,model:"match"});this.props.dispatch((t=n,function(e){var n=u.serverHost+"/notes/";return d()(n,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){return e(x(t.client_id,t.id,t))}))}))}},{key:"matchStatusChange",value:function(e,t){var n=Object(s.a)(Object(s.a)({},this.state.matchStatusForm),{},Object(c.a)({},t,{status:e.target.value}));this.setState({matchStatusForm:n})}},{key:"textAreaChange",value:function(e,t){var n=Object(s.a)(Object(s.a)({},this.state.noteForm),{},Object(c.a)({},t,{text:e.target.value}));this.setState({noteForm:n})}},{key:"handleModalHide",value:function(){this.setState({modalshow:!1})}},{key:"handleModalShow",value:function(e){this.setState({modalshow:!0,appointmentServiceId:e})}},{key:"handleSelect",value:function(e){this.setState({activeKey:e})}},{key:"render",value:function(){var e=this,t=this.props.matches;return Object($e.jsxs)("div",{children:[Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsx)("h3",{children:"Matched Services"})}),Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsx)(Mi.a,{id:"accordion",activeKey:this.state.activeKey,children:k.a.map(t,(function(t,n){return Object($e.jsxs)(Bi.a,{eventKey:t.id,bsStyle:"info",children:[Object($e.jsxs)(Bi.a.Header,{onClick:function(){return e.handleSelect(n)},children:[Object($e.jsx)(Ii.a,{sm:11,children:Object($e.jsxs)(Bi.a.Title,{toggle:!0,children:[n+1,". ",t.service.name," "]})}),Object($e.jsx)(Ni.a.Label,{bsStyle:"primary",children:t.status})]}),Object($e.jsx)(Mi.a.Collapse,{eventKey:n,children:Object($e.jsxs)(Bi.a.Body,{collapsible:!0,children:[Object($e.jsxs)(Ii.a,{sm:8,children:[Object($e.jsxs)(Ti.a,{controlId:"match_status",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Status"}),Object($e.jsx)(Ii.a,{sm:6,children:Object($e.jsxs)(Ri.a,{componentClass:"select",placeholder:"select",defaultValue:t.status,onChange:function(n){return e.matchStatusChange(n,t.id)},children:[Object($e.jsx)("option",{value:"select",children:"--- Not Set ---"}),u.matchStatusOptions.map((function(e){return Object($e.jsx)("option",{value:e,children:e},e)}))]})}),Object($e.jsx)(Ii.a,{sm:3,children:Object($e.jsx)(ki.a,{disabled:e.state.activeKey!==t.id||!e.state.matchStatusForm[t.id],onClick:function(n){return e.submitMatchStatus(t.id)},children:"Update Status"})})]}),Object($e.jsxs)(Ni.a.Label,{className:"note-form",children:[Object($e.jsxs)(Ti.a,{controlId:"notes",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Notes"}),Object($e.jsxs)(Ii.a,{sm:9,children:[k.a.map(t.notes,(function(e,t){return Object($e.jsx)("div",{children:e},t)})),Object($e.jsx)(Ri.a,{componentClass:"textarea",onChange:function(n){return e.textAreaChange(n,t.id)}})]})]}),Object($e.jsx)(Ti.a,{children:Object($e.jsx)(Ii.a,{smOffset:3,sm:9,children:Object($e.jsx)(ki.a,{disabled:e.state.activeKey!==t.id||!e.state.noteForm[t.id],onClick:function(n){return e.submitNote(t.id)},children:"Add Note"})})})]}),Object($e.jsx)(ki.a,{bsStyle:"default",onClick:function(n){return e.handleModalShow(t.service.id)},children:"Add appointment"})]}),Object($e.jsxs)(Ii.a,{sm:4,children:[Object($e.jsx)(Ae.b,{to:"/service/".concat(t.service.id),target:"_blank",children:Object($e.jsx)("h5",{children:"View Service Detail"})}),Object($e.jsx)(Ae.b,{to:"/provider/".concat(t.service.provider.id),target:"_blank",children:Object($e.jsx)("h5",{children:"View Provider Detail"})})]})]})})]},t.id)}))})}),Object($e.jsx)(Li,{clientId:this.props.clientId,serviceId:this.state.appointmentServiceId,show:this.state.modalshow,onHide:this.handleModalHide})]})}}]),n}(we.Component),zi=Object(Ee.b)()(Object(Fe.i)(Gi)),Vi=n(255),qi=n(743),Hi=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;return Object(Da.a)(this,n),(a=t.call(this,e)).submit=a.submit.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"submit",value:function(e,t){var n={service_id:t};this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/needs/"+e+"/matches/";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()})).then((function(t){n(x(t.client_id,e,t))}))}}(e,n))}},{key:"render",value:function(){var e=this,t=this.props.service,n=this.props.needId,a=this.props.label;return Object($e.jsx)(qi.a,{className:"recommended-service",children:Object($e.jsxs)(wi.a,{children:[Object($e.jsxs)(Ii.a,{sm:8,children:[Object($e.jsxs)("h5",{children:[a,"."]}),Object($e.jsx)(Ae.b,{to:"/service/".concat(t.id),children:Object($e.jsx)("h5",{children:t.name})}),Object($e.jsx)(ze.a,{children:t.category})," ",Object($e.jsxs)(ze.a,{children:[Math.round(100*t.distance)/100," km"]}),Object($e.jsx)("p",{children:t.desc}),Object($e.jsx)("p",{children:Cr(t.location)})]}),Object($e.jsxs)(Ii.a,{sm:4,children:[Object($e.jsx)("h5",{children:"Provider"}),Object($e.jsx)(ze.a,{color:"primary",children:t.provider.type}),Object($e.jsx)(Ae.b,{to:"/provider/".concat(t.provider.id),children:"Individual"===t.provider.type?Object($e.jsx)("p",{children:"".concat(t.provider.profile.first_name," ").concat(t.provider.profile.last_name)}):Object($e.jsx)("p",{children:t.provider.company})})]}),Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsx)(ki.a,{bsStyle:"default",onClick:function(a){return e.submit(n,t.id)},children:"Select"})})]})})}}]),n}(we.Component),Wi=Object(Ee.b)()(Object(Fe.i)(Hi)),Ui=Object(Vi.withGoogleMap)((function(e){return Object($e.jsx)(Vi.GoogleMap,{zoom:10,center:e.latlng,children:k.a.map(e.services,(function(e,t){return Object($e.jsx)(Vi.Marker,{label:(t+1).toString(),position:{lat:parseFloat(e.location.lat),lng:parseFloat(e.location.lng)}},e.id)}))})}));function Ji(e){var t=e.need,n=e.services,a=e.latlng;return Object($e.jsxs)(wi.a,{children:[Object($e.jsx)(Ii.a,{sm:8,children:k.a.map(n,(function(e,n){return Object($e.jsx)(Wi,{needId:t.id,label:n+1,service:e},e.id)}))}),Object($e.jsx)(Ii.a,{sm:4,children:Object($e.jsx)("div",{style:{width:"100%",height:"400px"},children:Object($e.jsx)(Ui,{containerElement:Object($e.jsx)("div",{style:{height:"100%"}}),mapElement:Object($e.jsx)("div",{style:{height:"100%"}}),latlng:a,services:n})})})]})}var Ki=n(744),Yi=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;return Object(Da.a)(this,n),(a=t.call(this,e)).state={queryTerm:"",location:e.location.street_address},a.handleFormValChange=a.handleFormValChange.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"handleFormValChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id;this.setState(Object(c.a)({},t,e.target.value))}},{key:"render",value:function(){var e=this;return Object($e.jsx)(Ni.a,{horizontal:!0,children:Object($e.jsx)(Ti.a,{children:Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsxs)(Ki.a,{children:[this.props.enableQueryTerm&&Object($e.jsx)(Ki.a.Addon,{children:"Find"}),this.props.enableQueryTerm&&Object($e.jsx)(Ri.a,{type:"text",value:this.state.queryTerm,onChange:function(t){return e.handleFormValChange(t,"queryTerm")},placeholder:"Dental service, language class..."}),Object($e.jsx)(Ki.a.Addon,{children:"Near"}),Object($e.jsx)(Ri.a,{type:"text",value:this.state.location,onChange:function(t){return e.handleFormValChange(t,"location")}}),Object($e.jsx)(Ki.a.Button,{children:this.props.enableQueryTerm?Object($e.jsx)(ki.a,{onClick:function(t){return e.props.search(e.state.queryTerm,e.state.location)},children:"Search"}):Object($e.jsx)(ki.a,{onClick:function(t){return e.props.search(e.state.location,e.props.needId)},children:"Search"})})]})})})})}}]),n}(we.Component),Xi=n(745),Qi=n(746),Zi=n(758),$i=n(747),eo=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;Object(Da.a)(this,n),a=t.call(this,e);var r=e.needsById[e.match.params.need_id];return a.state={searchResult:[],location:e.client.address?{lat:parseFloat(e.client.address.lat),lng:parseFloat(e.client.address.lng)}:u.torontoCoordinates,recommendedServices:r&&r.recommended_services||[]},a.handleSearchService=a.handleSearchService.bind(Object(Si.a)(a)),a.handleSearchRecommendedServices=a.handleSearchRecommendedServices.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.need_id;this.props.dispatch(C(t,(function(t){e.setState({recommendedServices:t.recommended_services})})))}},{key:"handleSearchService",value:function(e,t){var n=this,a=u.serverHost+"/services/search?query_term="+e+"&location="+t;fetch(a,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(e){n.setState({searchResult:e.data,location:e.location})}))}},{key:"handleSearchRecommendedServices",value:function(e,t){var n=this,a=u.serverHost+"/needs/"+t+"/recommended_services?location="+e;fetch(a,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(e){n.setState({recommendedServices:e.data,location:e.location})}))}},{key:"render",value:function(){var e=this.props,t=e.match.params.need_id,n=e.needsById[t],a=e.client;function r(e){return e.is_deleted?Object($e.jsx)("h4",{children:Object($e.jsx)("div",{style:{color:"rgb(213,87,79)"},children:"Deleted"})}):null}function i(e){return e.is_urgent?Object($e.jsx)("h4",{children:Object($e.jsx)("div",{style:{color:"rgb(213,87,79)"},children:"Urgent"})}):null}return Object($e.jsx)(Xi.a,{className:"content",children:n&&n.loaded&&Object($e.jsxs)(wi.a,{children:[Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsx)("h3",{children:"Need"})}),Object($e.jsxs)(Ii.a,{sm:12,children:[Object($e.jsx)(r,{is_deleted:n.is_deleted}),Object($e.jsx)(i,{is_urgent:n.is_urgent}),Object($e.jsx)(Qi.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object($e.jsxs)("tbody",{children:[Object($e.jsx)(Rr,{title:"Type",value:n.type}),Object($e.jsx)(Rr,{title:"Category",value:n.category}),Object($e.jsx)(Rr,{title:"Needed By",value:n.needed_by}),Object($e.jsx)(Rr,{title:"Description",value:n.description}),Object($e.jsx)(Rr,{title:"Condition",value:n.condition}),Object($e.jsx)(Rr,{title:"Status",value:n.status}),Object($e.jsx)(Rr,{title:"Languages",value:(n.languages||[]).join(", ")})]})})]}),n.matches.length>0&&Object($e.jsx)(zi,{clientId:a.id,matches:n.matches}),Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsxs)(Zi.a,{defaultActiveKey:1,id:"serviceList",children:[Object($e.jsxs)($i.a,{eventKey:1,title:"RecommendedServices",children:[Object($e.jsx)(Yi,{search:this.handleSearchRecommendedServices,location:a.address,needId:n.id}),n.recommended_services&&n.recommended_services.length>0&&Object($e.jsx)(Ji,{need:n,services:this.state.recommendedServices,latlng:this.state.location})]}),Object($e.jsxs)($i.a,{eventKey:2,title:"Search for Services",children:[Object($e.jsx)(Yi,{search:this.handleSearchService,location:a.address,enableQueryTerm:!0}),this.state.searchResult&&this.state.searchResult.length>0&&Object($e.jsx)(Ji,{need:n,services:this.state.searchResult,latlng:this.state.location})]})]})})]})})}}]),n}(we.Component),to=Object(Ee.b)((function(e){return{needsById:e.needs.byId,client:e.clients.byId[e.needs.clientId]}}))(eo),no=["component","isLoggedin"],ao=Object(Ee.b)((function(e){return{isLoggedin:e.auth.isLoggedin}}))((function(e){var t=e.component,n=e.isLoggedin,a=Object(qe.a)(e,no);return Object($e.jsx)(Fe.b,Object(s.a)(Object(s.a)({},a),{},{render:function(e){return!0===n?Object($e.jsx)(t,Object(s.a)({},e)):Object($e.jsx)(Fe.a,{to:"/login-pane"})}}))})),ro=["component","isLoggedin","isAdmin"],io=Object(Ee.b)((function(e){return{isAdmin:e.auth.currentUser&&e.auth.currentUser.is_admin,isLoggedin:e.auth.isLoggedin}}))((function(e){var t=e.component,n=e.isLoggedin,a=e.isAdmin,r=Object(qe.a)(e,ro);return Object($e.jsx)(Fe.b,Object(s.a)(Object(s.a)({},r),{},{render:function(e){return!0===n&&!0===a?Object($e.jsx)(t,Object(s.a)({},e)):Object($e.jsx)(Fe.a,{to:"/login-pane"})}}))})),oo=new Za("providers",[]),co=new $a("provider");function so(){return lo.apply(this,arguments)}function lo(){return(lo=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(oo.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(e){return bo.apply(this,arguments)}function bo(){return(bo=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(oo.value.find((function(e){return e.id===Number(t)})))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e){return ho.apply(this,arguments)}function ho(){return(ho=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return n=Object(s.a)({id:co.nextCnt,reviews:[]},t),oo.value=[].concat(Object(o.a)(oo.value),[n]),e.abrupt("return",{success:!0,providerId:n.id});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t){return mo.apply(this,arguments)}function mo(){return(mo=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return Object.assign(oo.value.find((function(e){return e.id===Number(t)})),n),oo.save(),e.abrupt("return",{success:!0,providerId:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(e){return Oo.apply(this,arguments)}function Oo(){return(Oo=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return n=oo.value.findIndex((function(e){return e.id===t.id})),oo.value.splice(n,1),oo.save(),e.abrupt("return",{success:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var go="providers",vo=function(e){var t=e.profile;return"Individual"===e.type?t&&t.first_name+" "+t.last_name:e.company},xo=[{label:"Name",body:function(e){var t=e.id,n=e.profile,a=e.company,r=e.type;return Object($e.jsx)(va,{color:!0,to:"/".concat(go,"/").concat(t),children:vo({company:a,type:r,profile:n})})}},{label:"Type",body:function(e){return e.type}},{label:"Email",body:function(e){return e.profile.email}},{label:"Phone Number",body:function(e){var t=e.profile;return t.primary_phone_number?Sr(t.primary_phone_number):"Not Provided"}},{name:"main_address",label:"Address",body:function(e){var t=e.main_address;return t?Cr(t):"Not Provided"}}];var yo=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(){return Object(Da.a)(this,n),t.apply(this,arguments)}return Object(Fa.a)(n,[{key:"render",value:function(){return Object($e.jsx)(wi.a,{className:"content",children:Object($e.jsxs)(Ii.a,{sm:12,children:[Object($e.jsx)("h2",{children:"Would you like to add a service for this provider?"}),Object($e.jsx)("hr",{}),Object($e.jsx)(Ae.b,{to:"/service/new",children:Object($e.jsx)(ki.a,{bsStyle:"default",children:"Yes"})})," ",Object($e.jsx)(Ae.b,{to:"/providers",children:Object($e.jsx)(ki.a,{bsStyle:"default",children:"No"})})]})})}}]),n}(we.Component);function _o(e,t){var n=function(e){var t={};if(Sn(e.main_address.postal_code,t,"main_address"),e.other_addresses.length>0){t.other_addresses={};var n,a=0,r=Object(mn.a)(e.other_addresses);try{for(r.s();!(n=r.n()).done;){Sn(n.value.postal_code,t.other_addresses,a),a++}}catch(i){r.e(i)}finally{r.f()}0===Object.entries(t.other_addresses).length&&delete t.other_addresses}e.primary_contact.profile&&(t.primary_contact||(t.primary_contact={}),In(e.primary_contact.profile,t.primary_contact),0===Object.entries(t.primary_contact).length&&delete t.primary_contact);e.secondary_contact.profile&&(t.secondary_contact||(t.secondary_contact={}),In(e.secondary_contact.profile,t.secondary_contact),0===Object.entries(t.secondary_contact).length&&delete t.secondary_contact);0!==e.reference1_email.length&&kn(e.reference1_email,"reference1_email",t);0!==e.reference2_email.length&&kn(e.reference2_email,"reference2_email",t);0!==e.reference1_phone.length&&wn(e.reference1_phone,"reference1_phone",t);0!==e.reference2_phone.length&&wn(e.reference2_phone,"reference2_phone",t);"Individual"===e.type&&(0!==e.profile.email.length&&kn(e.profile.email,"email",t),0!==e.profile.primary_phone_number.length&&wn(e.profile.primary_phone_number,"primary_phone_number",t),0!==e.profile.alt_phone_number.length&&wn(e.profile.alt_phone_number,"alt_phone_number",t));return t}(e),a=function(e,t){var n,a={},r=Object(mn.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,c=Object.entries(i);o<c.length;o++){var s=Object(De.a)(c[o],2),l=s[0];s[1]&&("availability"===l&&yn(e.operation_hours)?a.availability="Please fill in at least one availability time slot!":"main_address"===l?(a[l]={},_n(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]):"other_addresses"===l?0===e[l].length?a[l]="Please create at least one other address form!":(a[l]={},Cn(e[l],a[l]),0===Object.entries(a[l]).length&&delete a[l]):"primary_contact"===l?Co(l,e,a,"primary_contact"):"secondary_contact"===l?Co(l,e,a,"secondary_contact"):So(l,e,a))}}catch(d){r.e(d)}finally{r.f()}return a}(e,t);return vn(a,n)}function Co(e,t,n,a){for(var r=0,i=Object.keys(t[a].profile);r<i.length;r++){var o=i[r];xn(t[a].profile[o])&&(n[a]||(n[a]={}),n[a][o]="This field is required")}}function So(e,t,n){"Individual"===t.type?(e in t.profile&&xn(t.profile[e])||e in t&&!["email","primary_phone_number","alt_phone_number"].includes(e)&&xn(t[e]))&&(n[e]="This field is required"):"Organization"===t.type&&e in t&&!["email","primary_phone_number","alt_phone_number","profile"].includes(e)&&xn(t[e])&&(n[e]="This field is required")}var ko=new Za("provider-fields",{organization:{steps_order:["s1"],form_structure:{s1:{company:{type:"field",required:!1},status:{type:"field",required:!1}}}},volunteer:{steps_order:["s1"],form_structure:{s1:{first_name:{type:"field",required:!1},last_name:{type:"field",required:!1}}}},goods_donor:{steps_order:[],form_structure:{}},professional_service_provider:{steps_order:[],form_structure:{}}});function wo(){return Io.apply(this,arguments)}function Io(){return Io=Object(w.a)(N.a.mark((function e(){var t,n,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(a.length>0&&void 0!==a[0])||a[0],e.next=3,ur(200);case 3:if(n=JSON.parse(JSON.stringify(ko.value)),!t){e.next=8;break}return Object.keys(n).forEach((function(e){var t=n[e].form_structure;Object.keys(t).forEach((function(e){var n=t[e];t&&Object.keys(n).forEach((function(e){"field"===n[e].type&&(n[e]=n[e].required,console.log(e))}))}))})),console.log("fetchProviderFields",n),e.abrupt("return",n);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function No(e){return To.apply(this,arguments)}function To(){return(To=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:ko.value=t;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eo=n(748),Ao=Object(Ke.a)((function(e){return{weekday:{minWidth:110,alignSelf:"start",top:28,position:"relative"},day:{display:"flex",alignItems:"center"},times:{display:"flex",minWidth:350,alignItems:"start",flexDirection:"column"},date:{display:"flex",width:170},time:{display:"flex",alignItems:"center",flexDirection:"row"},select:{minWidth:120,margin:10},button:{position:"relative",top:8},arrow:{paddingTop:24,marginLeft:12,marginRight:12}}}));function Po(e){var t=e.operationHours,n=e.operationDates,a=e.errMsg,r=Ao(),i=Object(we.useState)(!0),o=Object(De.a)(i,2),c=o[0],l=o[1],d=function(){return l(!c)},u=function(e,n,a){"add"===a?t[n].push(Object(s.a)({},tn)):t[n].pop(),d()},b=function(e,n,a,r){var i=e.target.value;t[n][a][r]=null==i?"":i,d()};return Object($e.jsxs)(Dt,{label:"Availability",children:[n.map((function(e,t){var a=e.start_date,i=e.end_date;return null==a&&(a=n[t].start_date=Object(Bt.a)(new Date,qt)),Object($e.jsxs)(Ga.a,{container:!0,direction:"row",alignItems:"center",children:[Object($e.jsx)(Ht,{label:"Start Date",className:r.date,type:"date",value:a,onChange:function(e){return n[t].start_date=e.target.value}}),Object($e.jsx)(Eo.a,{className:r.arrow}),Object($e.jsx)(Ht,{label:"End Date",className:r.date,type:"date",value:i,onChange:function(e){return n[t].end_date=e.target.value},helperText:"leave empty if not sure"}),t===n.length-1&&Object($e.jsx)(ft.a,{className:r.button,onClick:function(e){n.push({start_date:null,end_date:null}),d()},size:"large",children:Object($e.jsx)(Xe.a,{})}),0!==t&&t===n.length-1&&Object($e.jsx)(ft.a,{className:r.button,onClick:function(e){n.splice(t,1),d()},size:"large",children:Object($e.jsx)(yt.a,{})})]},t)})),Object.entries(t).map((function(e){var t=Object(De.a)(e,2),n=t[0],a=t[1];return Object($e.jsxs)("div",{className:r.day,children:[Object($e.jsx)(ze.a,{color:"textSecondary",variant:"subtitle1",className:r.weekday,children:n}),Object($e.jsx)("div",{className:r.times,children:a.map((function(e,t){return Object($e.jsxs)("div",{className:r.time,children:[Object($e.jsx)($t,{className:r.select,value:e.start_time,label:"Start",options:bn,onChange:function(e){return b(e,n,t,"start_time")}}),Object($e.jsx)($t,{className:r.select,value:e.end_time,label:"End",options:bn,onChange:function(e){return b(e,n,t,"end_time")}}),t===a.length-1&&Object($e.jsx)(ft.a,{className:r.button,onClick:function(e){return u(0,n,"add")},size:"large",children:Object($e.jsx)(Xe.a,{})}),0!==t&&t===a.length-1&&Object($e.jsx)(ft.a,{className:r.button,onClick:function(e){return u(0,n,"remove")},size:"large",children:Object($e.jsx)(yt.a,{})})]},t)}))})]},n)})),a&&Object($e.jsx)(Tt.a,{severity:"error",children:a})]})}var Do=Object(Ke.a)((function(e){return{content:{width:"80%",margin:"auto",paddingBottom:10},addressPaper:{position:"relative",paddingLeft:28,paddingBottom:20,width:380}}}));function Fo(){var e=Do(),t=Object(Fe.g)(),n=Object(Ee.c)(),a=Object(Fe.h)(),r=a.id,i=a.formType,o=r?"edit":"new",c=Object(we.useState)({loading:!0,category:i,languageOptions:[],eligibilities:[],stepNames:[],steps:[],provider:null,dispatchErrorMsg:[],fieldErrorMsg:{}}),l=Object(De.a)(c,2),d=l[0],u=l[1],b=Object(we.useMemo)((function(){return"new"===o?"organization"===i?"Organization":"Individual":d.provider?"organization"===d.provider.category?"Organization":"Individual":void 0}),[d.provider,i,o]),j=Object(we.useMemo)((function(){return function(e,t,n){var a={type:e,category:Fn[t]||"",languages:[],company:"",email:"",primary_phone_number:"",alt_phone_number:"",primary_contact:{profile:Object(s.a)({},Gn)},secondary_contact:{profile:Object(s.a)({},Gn)},main_address:Object(s.a)({},zn),other_addresses:[],operation_hours:Object(s.a)({},nn),operation_dates:[{start_date:null,end_date:null}],profile:Object(s.a)({},Rn),referrer:"",own_car:!1,skills:"",visibility:!1,status:"",notes:"",commitment:"",start_date:"",reference1_name:"",reference1_phone:"",reference1_email:"",reference2_name:"",reference2_phone:"",reference2_email:"",responses:[]};if(n){var r=Object(s.a)({},vn(a,n));return r.operation_hours=Object(s.a)(Object(s.a)({},nn),jn(n.operation_hours)),console.log(r),r}return a}(b,d.category,d.provider)}),[b,d.category,d.provider]),h=Object(we.useCallback)((function(e){console.log(e);var t=[];t.push(n(R("languages")).then((function(e){return u((function(t){return Object(s.a)(Object(s.a)({},t),{},{languageOptions:e})}))}))),t.push(wo().then((function(t){console.log("provider form",t),null==t[e]||0===t[e].steps_order.length||0===Object.values(t[e].form_structure).length?u((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0,errorMessage:["No fields are available."]})})):u((function(n){return Object(s.a)(Object(s.a)({},n),{},{stepNames:t[e].steps_order,steps:Object.values(t[e].form_structure)})}))}))),Promise.all(t).then((function(){return u((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})}))}))}),[n]);Object(we.useEffect)((function(){r?uo(r).then((function(e){console.log(e);var t="Organization"===e.type?"organization":Mn[e.category];u((function(n){return Object(s.a)(Object(s.a)({},n),{},{provider:e,category:t})})),h(t)})):h(i)}),[n,r,i,h]);var p=function(){var e=Object(w.a)(N.a.mark((function e(){var n,a,i,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(s.a)({},j)).operation_hours=hn(n.operation_hours),""===n.status&&(n.status=void 0),console.log(n),a=_o(j,d.steps),0===Object.keys(a).length){e.next=8;break}return u((function(e){return Object(s.a)(Object(s.a)({},e),{},{fieldErrorMsg:a})})),e.abrupt("return");case 8:if("edit"!==o){e.next=15;break}return e.next=11,po(r,n);case 11:(i=e.sent).success?t.push("/providers/".concat(i.providerId)):u((function(e){return Object(s.a)(Object(s.a)({},e),{},{errorMessage:[i.error]})})),e.next=19;break;case 15:return e.next=17,jo(n);case 17:(c=e.sent).success?t.push("/providers/".concat(c.providerId)):u((function(e){return Object(s.a)(Object(s.a)({},e),{},{errorMessage:[c.error]})}));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(we.useCallback)((function(e){return function(t){var n=t.target.value,a=e.split(".");if(1===a.length)j[e]=n;else{for(var r=j,i=0;i<a.length-1;i++)r=r[a[i]];r[a[a.length-1]]=n||""}}}),[j]);return d.loading?Object($e.jsx)(ya,{message:"Loading..."}):(console.log(d.category),Object($e.jsx)(St.a,{children:Object($e.jsx)(At,{getStepContent:function(t){var n=d.steps[t];return n?Object($e.jsx)("div",{className:e.content,children:Object.entries(n).map((function(e){var t,n=Object(De.a)(e,2),a=n[0],r=n[1],i=d.fieldErrorMsg[a];if("languages"===a&&(t=d.languageOptions),"main_address"===a)return Object($e.jsx)(Dt,{label:"Main address",children:Object($e.jsx)(en,{address:j.main_address,required:r,errMsg:i})},a);if("other_addresses"===a)return Object($e.jsx)(Wn,{otherLocations:j.other_addresses,required:r,errMsg:i},a);if("primary_contact"===a||"secondary_contact"===a)return Object($e.jsx)(Dt,{label:Bn[a].label,children:Object.keys(Gn).map((function(e){return Object($e.jsx)(hi,{label:Bn[e].label,type:Bn[e].type,component:Bn[e].component,value:j[a].profile[e],onChange:m(a+"."+e),error:null!=i&&null!=i[e],helperText:i?i[e]:null},e)}))},a);if("availability"===a)return Object($e.jsx)(Po,{operationHours:j.operation_hours,operationDates:j.operation_dates,errMsg:i},a);if("notes"===a)return Object($e.jsx)(Ht,{label:Bn[a].label,value:j[a],onChange:m(a),required:r,multiline:!0,variant:"outlined",fullWidth:!0,error:null!=i,helperText:i},a);var o=Object.keys(Rn).includes(a);if(o&&"Individual"!==b)return null;var c=Bn[a];return null==c&&(c={}),Object($e.jsx)(hi,{label:Bn[a].label,type:Bn[a].type,component:Bn[a].component,value:o?j.profile[a]:j[a],onChange:m(o?"profile."+a:a),required:r,options:Bn[a].options||t,error:null!=i,helperText:i},a)}))}):null},handleFinish:p,stepNames:d.stepNames,error:d.dispatchErrorMsg,title:("new"===o?"Create ":"Edit ")+Fn[d.category]})}))}var Lo=n(773),Mo=n(749);function Bo(e){var t,n,a=e.step,r=e.provider,i=e.infoFields,o=e.providerFields,c=k.a.map(i,(function(e,a){if("field"===e.type)switch(t=o[a].label,a){case"first_name":case"middle_name":case"last_name":case"preferred_name":case"gender":case"birth_date":case"email":n="Individual"===r.type?r.profile[a]:r[a];break;case"primary_phone_number":case"alt_phone_number":n="Individual"===r.type?r.profile[a]?Sr(r.profile[a]):"None provided":r[a]?Sr(r[a]):"None provided";break;case"main_address":n=r[a]?Cr(r[a]):"None provided";break;case"other_addresses":n=r[a]?k.a.map(r[a],(function(e,t){return Object($e.jsx)("p",{children:Cr(e)},t)})):null;break;case"languages":n=(r[a]||[]).join(", ");break;case"availability":var i=jn(r.operation_hours);n=Object($e.jsx)(pn,{operationHourObj:i});break;case"primary_contact":case"secondary_contact":n=r[a]?k.a.map(k.a.keys(Gn),(function(e){if(r[a].profile[e])return Object($e.jsx)("li",{children:"".concat(o[e].label,": ").concat(r[a].profile[e])},e)})):null;break;default:n=r[a]}else if("question"===e.type){t=a;var c=k.a.find(r.responses,(function(t){return t.question_id===e.id.toString()}));n=c?c.text:null}return Object($e.jsx)(Rr,{title:t,value:n},a)})),s=Gr();return Object($e.jsx)(Jn.a,{className:s.table,component:Ze.a,children:Object($e.jsxs)(Kn.a,{"aria-label":"Profile table",children:[Object($e.jsx)(ta.a,{children:Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{className:s.title,children:a}),Object($e.jsx)(Qn.a,{className:s.title2})]})}),Object($e.jsx)(Yn.a,{children:c})]})})}var Ro=n(373),Go=n.n(Ro),zo=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;Object(Da.a)(this,n),(a=t.call(this,e)).handleStarSelection=a.handleStarSelection.bind(Object(Si.a)(a)),a.handleCommentChange=a.handleCommentChange.bind(Object(Si.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Si.a)(a)),a.handleTextRating=a.handleTextRating.bind(Object(Si.a)(a));var r=a.props.match.params.id;return a.state={id:r,rating:0,comment:""},a}return Object(Fa.a)(n,[{key:"handleStarSelection",value:function(e,t){this.setState({rating:e})}},{key:"handleTextRating",value:function(e){this.setState({rating:e.target.value})}},{key:"handleCommentChange",value:function(e){this.setState({comment:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.match.params.id;this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/provider/"+e+"/rate";return d()(a,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then((function(e){return e.json()}))}}(t,this.state)),this.props.history.push("/provider/"+t)}},{key:"render",value:function(){return Object($e.jsxs)("div",{className:"content",children:[Object($e.jsxs)(Ii.a,{sm:9,children:[Object($e.jsx)("h3",{children:" Rate Provider "}),Object($e.jsx)("hr",{})]}),Object($e.jsxs)(Ti.a,{controlId:"rating",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:5,children:"Rate this provider (0-5)"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",placeholder:"A number between 0 and 5",value:this.state.rating,onChange:this.handleTextRating})})]}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Go.a,{name:"rating",starCount:5,value:this.state.rating,onStarClick:this.handleStarSelection})}),Object($e.jsxs)(Ii.a,{sm:9,children:[Object($e.jsx)("hr",{}),Object($e.jsxs)(Ti.a,{controlId:"comments",children:[Object($e.jsx)(Ei.a,{children:"Comments"}),Object($e.jsx)(Ri.a,{componentClass:"textarea",placeholder:"Comments about this provider...",onChange:this.handleCommentChange})]})]}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(ki.a,{type:"submit",onClick:this.handleSubmit,children:" Submit "})})]})}}]),n}(we.Component),Vo=Object(Ee.b)((function(e){return{providersById:e.providers.byId||{},providerLoaded:e.providers.indexLoaded}}))(zo),qo=new Za("services",[]),Ho=new $a("service");function Wo(){return Uo.apply(this,arguments)}function Uo(){return(Uo=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(qo.value)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(){return(Jo=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return e.abrupt("return",JSON.parse(JSON.stringify(qo.value.find((function(e){return e.id===Number(t)})))));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(){return(Ko=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return n=Object(s.a)({id:Ho.nextCnt,reviews:[]},t),qo.value=[].concat(Object(o.a)(qo.value),[n]),e.abrupt("return",{success:!0,serviceId:n.id});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(){return(Yo=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return Object.assign(qo.value.find((function(e){return e.id===Number(t)})),n),qo.save(),e.abrupt("return",{success:!0,serviceId:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(e){return Qo.apply(this,arguments)}function Qo(){return(Qo=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(200);case 2:return n=qo.value.findIndex((function(e){return e.id===t.id})),qo.value.splice(n,1),qo.save(),e.abrupt("return",{success:!0});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zo="services",$o=function(e){var t=e.provider;return"Organization"===t.type?t.company:t.profile?"".concat(t.profile.first_name," ").concat(t.profile.last_name):"Not provided"},ec=[{label:"Name",body:function(e){var t=e.id,n=e.name;return Object($e.jsx)(va,{color:!0,to:"/".concat(Zo,"/").concat(t),children:n})}},{label:"Provider",body:function(e){var t=e.provider;return Object($e.jsx)(va,{color:!0,to:"/providers/".concat(t.id),children:$o({provider:t})})}},{label:"Description",body:function(e){return e.desc}},{label:"Category",body:function(e){return e.category}}];function tc(e,t){return t instanceof Array?"".concat(e,": ").concat(t.join(", ")):"".concat(e,": ").concat(t)}var nc=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(){return Object(Da.a)(this,n),t.apply(this,arguments)}return Object(Fa.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(function(e){return Jo.apply(this,arguments)}(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.servicesById[t];return Object($e.jsxs)("div",{className:"content client",children:[Object($e.jsx)("h3",{children:"Service Profile"}),Object($e.jsx)(Ae.b,{to:"/services/".concat(n.id,"/edit"),children:Object($e.jsx)(ki.a,{bsStyle:"primary",children:"Edit"})})," ",Object($e.jsx)(ki.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object($e.jsx)(Ir.a,{fontSize:"small"})}),n&&n.servicesLoaded&&Object($e.jsx)(Qi.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object($e.jsxs)("tbody",{children:[Object($e.jsx)(Rr,{title:"Name",value:n.name}),Object($e.jsx)(Rr,{title:"Type",value:n.type}),Object($e.jsx)(Rr,{title:"Description",value:n.desc}),Object($e.jsx)(Rr,{title:"Category",value:n.category}),Object($e.jsx)(Rr,{title:"Eligibility",value:n.eligibility}),Object($e.jsx)(Rr,{title:"Available from",value:n.available_from}),Object($e.jsx)(Rr,{title:"Available until",value:n.available_to}),Object($e.jsx)(Rr,{title:"Languages",value:(n.languages||[]).join(", ")}),Object($e.jsx)(Rr,{title:"Max Capacity",value:n.max_capacity}),Object($e.jsx)(Rr,{title:"Current capacity",value:n.current_capacity}),Object($e.jsx)(Rr,{title:"Frequency",value:n.frequency}),Object($e.jsx)(Rr,{title:"Billable",value:n.billable}),Object($e.jsx)(Rr,{title:"Price",value:n.price}),Object($e.jsx)(Rr,{title:"Method of delivery",value:n.method_of_delivery}),Object($e.jsx)(Rr,{title:"Method of registration",value:n.method_of_registration}),Object($e.jsx)(Rr,{title:"Registration",value:n.registration}),Object($e.jsx)(Rr,{title:"Contact Person Email",value:n.email}),Object($e.jsx)(Rr,{title:"Contact Person Phone",value:n.primary_phone_number}),Object($e.jsx)(Rr,{title:"Secondary Phone",value:n.alt_phone_number}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Location"})}),Object($e.jsx)("td",{children:Cr(n.location)})]}),k.a.keys(k.a.omit(n.eligibility_conditions,["lower_age_limit","upper_age_limit"]))>0&&Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Eligibility Conditions"})}),Object($e.jsxs)("td",{children:[k.a.map(k.a.omit(n.eligibility_conditions,["lower_age_limit","upper_age_limit"]),(function(e,t){return Object($e.jsx)("li",{children:tc(t,e)},t)})),n.eligibility_conditions.lower_age_limit&&Object($e.jsx)("li",{children:tc("Age greater than",n.eligibility_conditions.lower_age_limit)}),n.eligibility_conditions.upper_age_limit&&Object($e.jsx)("li",{children:tc("Age less than",n.eligibility_conditions.upper_age_limit)})]})]}),Object($e.jsx)(Rr,{title:"Public?",value:n.is_public?"Yes":"No"}),Object($e.jsx)(Rr,{title:"Share with",value:(n.share_with||[]).join(", ")}),Object($e.jsx)(Rr,{title:"Notes",value:n.notes}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Provider"})}),Object($e.jsx)("td",{children:Object($e.jsx)(Ae.b,{to:"/provider/".concat(n.provider.id),children:"Organization"===n.provider.type?n.provider.company:"".concat(n.provider.profile.first_name," ").concat(n.provider.profile.last_name)})})]})]})})]})}}]),n}(we.Component),ac=Object(Ee.b)((function(e){return{servicesById:e.services.byId,serviceLoaded:e.services.indexLoaded}}))(nc),rc={languages:["Japanese","Chinese","Vietnamese","Turkish","French","Polish","Spanish","English","Arabic","Korean","Hindi"],services:["Financial planning help service","Field trips","Child and family service","Aboriginal people service","Math help service","Legal aid service","Social assistance service","Language classes","Homework club","Emergency and crisis service","Computer access service","Consumer protection and complaints service","Transportation","Abuse and assault service","Newcomers service","Disability service","Government and legal service","Public library service","Special interest classes","Employment and training service","Special events","Human rights service","Youth service","Dental service","Older adults service","Healthcare service","Community information service","Support group service","LGBTQ service","Food service","Mental health service","Household help service","Francophone service","Income support service","Housing service","Interpretation and translation service","Homelessness service","French as a second language service"]};function ic(e){return oc.apply(this,arguments)}function oc(){return(oc=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Fetch categories: ",t),rc[t]){e.next=4;break}return console.error("No Category available: ",t),e.abrupt("return",[]);case 4:return e.abrupt("return",{categories:rc[t]});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cc=n(805);var sc=["<",">","<=",">=","=="],lc=["in"],dc=1,uc=2,bc=3,jc=5,hc={operators:[].concat(sc,lc),type:bc},pc=["alt_phone_number","apt_number","city","landing_date","last_name","middle_name","phone_numbers","postal_code","pr_number","preferred_name","primary_phone_number","service_set","street_address"],mc={age:{operators:sc,type:dc},arrival_date:{operators:sc,type:uc},birth_date:{operators:sc,type:uc},completed_education_level:{operators:lc,type:jc,options:u.educationLevelOptions,multipleSelect:!0},country_of_last_residence:{operators:lc,type:jc,options:u.countryOptions,multipleSelect:!0},country_of_origin:{operators:lc,type:jc,options:u.countryOptions,multipleSelect:!0},current_education_level:{operators:lc,type:jc,options:u.educationLevelOptions,multipleSelect:!0},first_language:{operators:lc,type:jc,options:[],multipleSelect:!0},gender:{operators:lc,type:jc,options:u.genderOptions,multipleSelect:!0},has_children:{operators:lc,type:jc,options:["True","False"],multipleSelect:!0},income_source:{operators:lc,type:jc,options:u.incomeSourceOptions,multipleSelect:!0},landing_date:{operators:sc,type:uc},lat:{operators:sc,type:dc},lng:{operators:sc,type:dc},marital_status:{operators:lc,type:jc,options:u.maritalStatusOptions,multipleSelect:!0},ngo_conditions:{operators:lc,type:jc,options:["example"],multipleSelect:!0},num_of_children:{operators:sc,type:dc},num_of_dependants:{operators:sc,type:dc},other_languages:{operators:lc,type:jc,options:u.languageOptions,multipleSelect:!0},province:{operators:lc,type:jc,options:u.provinceOptions,multipleSelect:!0},status_in_canada:{operators:lc,type:jc,options:u.statusInCanadaOptions,multipleSelect:!0}};function fc(e){var t,n,a=e.value,r=e.handleChange,i=e.fields,o=e.onDelete,c=Object(we.useState)(Object(s.a)({operator:a[1]||""},mc[a[0]]||hc)),l=Object(De.a)(c,2),d=l[0],u=l[1];return t=d.type===bc?Object($e.jsx)(ht.a,{style:{marginLeft:20},label:"Right Operand",defaultValue:(n=a[2],n.slice(1,-1).replace(/\\([\\"])/g,"$1")),onChange:function(e){return r({rightOperand:On(e.target.value)})}}):d.type===dc?Object($e.jsx)(ht.a,{style:{marginLeft:20},label:"Right Operand",defaultValue:"number"===typeof+a[2]?a[2]:0,onChange:function(e){return r({rightOperand:e.target.value})}}):d.type===jc&&d.multipleSelect?Object($e.jsx)(bi,{label:"Right Operand",options:d.options,value:gn(a[2])||[],onChange:function(e){return r({rightOperand:(t=e.target.value,JSON.stringify(t))});var t},noDefaultStyle:!0}):d.type!==jc||d.multipleSelect?"Not implemented":Object($e.jsx)($t,{style:{marginRight:20},noEmpty:!0,noDefaultStyle:!0,options:d.options,value:a[2],label:"Right Operand",onChange:function(e){return r({rightOperand:e.target.value})}}),Object($e.jsx)("div",{style:{padding:20},children:Object($e.jsxs)(Ga.a,{container:!0,direction:"row",spacing:1,children:[Object($e.jsx)($t,{style:{marginRight:20},noEmpty:!0,noDefaultStyle:!0,options:i,value:a[0],label:"Field",onChange:function(e){var t=e.target.value,n={leftOperand:t,rightOperand:""},i=mc[t]||hc,o=i.operators;o.includes(a[1])?u((function(e){return Object(s.a)(Object(s.a)({},e),i)})):(n.operator=o[0],u((function(e){return Object(s.a)(Object(s.a)({},e),{},{operator:o[0]},i)}))),r(n),a[2]=""}}),Object($e.jsx)($t,{style:{width:60},noEmpty:!0,noDefaultStyle:!0,options:d.operators,label:"Operator",value:d.operator,controlled:!0,onChange:function(e){var t=e.target.value;u((function(e){return Object(s.a)(Object(s.a)({},e),{},{operator:t})})),r({operator:t})}}),t,Object($e.jsx)(ft.a,{onClick:o,size:"large",children:Object($e.jsx)(yt.a,{})})]})})}function Oc(e){var t=e.value,n=e.formValChange,a=Object(we.useState)(t),r=Object(De.a)(a,2),i=r[0],c=r[1],s=Object(we.useState)({}),l=Object(De.a)(s,2),d=l[0],u=l[1];Object(we.useEffect)((function(){tr("/formula/fields/").then((function(e){var t=e.fields,n=(e.dynamic_fields,e.functions,{});console.log(t),t.forEach((function(e){pc.includes(e)||(n[e]=e.replace(/(^\w|_\w)/g,(function(e){return e.toUpperCase().replace("_"," ")})).replace("In","in").replace("Of","of"))})),u(n)}))}),[]);for(var b=function(e){return function(t){var n=t.leftOperand,a=t.operator,r=t.rightOperand;e[0]=n||e[0],e[1]=void 0===a?e[1]:a,e[2]=r||e[2]}},j=function(e){return function(){c((function(t){return t[e].push(["age","==",""]),n({target:{value:t}}),Object(o.a)(t)}))}},h=function(e,t){return function(){c((function(a){return a[e].splice(t,1),n({target:{value:a}}),Object(o.a)(a)}))}},p=function(e){return function(){c((function(t){return t.splice(e,1),n({target:{value:t}}),Object(o.a)(t)}))}},m=[],f=0;f<i.length;f++){var O=i[f],g=[];m.push(g);for(var v=0;v<O.length;v++){var x=Object(De.a)(O[v],3);x[0],x[1],x[2];g.push(Object($e.jsx)(Ga.a,{item:!0,xs:12,children:Object($e.jsx)(fc,{value:O[v],handleChange:b(O[v]),fields:d,onDelete:h(f,v)})},v))}}return Object($e.jsxs)("div",{children:[m.map((function(e,t){return Object($e.jsx)(Ze.a,{variant:"outlined",children:Object($e.jsxs)(Ga.a,{container:!0,children:[e,Object($e.jsxs)(Ga.a,{item:!0,xs:12,children:[Object($e.jsx)(Ve.a,{onClick:p(t),style:{margin:12,float:"right"},variant:"contained",startIcon:Object($e.jsx)(yt.a,{}),children:"Remove"}),Object($e.jsx)(Ve.a,{style:{margin:12,float:"right"},variant:"contained",startIcon:Object($e.jsx)(Xe.a,{}),onClick:j(t),children:"And"})]})]})},t)})),Object($e.jsx)(Ve.a,{style:{margin:12},variant:"contained",onClick:function(){c((function(e){return e.push([]),n({target:{value:e}}),Object(o.a)(e)}))},startIcon:Object($e.jsx)(Xe.a,{}),children:"OR"})]})}var gc=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;Object(Da.a)(this,n),(a=t.call(this,e)).formValChange=function(e,t){return function(n){var r=n.target.value,i=e.split("."),o=a.state.form;if(1===i.length)o[e]=r;else{for(var c=a.state.form,l=0;l<i.length-1;l++)c=c[i[l]];c[i[i.length-1]]=r||""}t&&a.setState((function(e){return{form:Object(s.a)({},e.form)}}))}},a.submit=function(){console.log(a.state.form);var e=Object.assign({},a.state.form);e.eligibility_conditions.age=[e.eligibility_conditions.lower_age_limit||null,e.eligibility_conditions.upper_age_limit||null],delete e.eligibility_conditions.lower_age_limit,delete e.eligibility_conditions.upper_age_limit,e.eligibility_criteria=function(e){var t,n=[],a=Object(mn.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=[];n.push({condition_clauses:i});var o,c=Object(mn.a)(r);try{var s=function(){var e=Object(De.a)(o.value,3),t=e[0],n=e[1],a=e[2],r=i.findIndex((function(e){return e.field_name===t}));-1!==r?i[r].clauses.push({left_operand:t,right_operand:a,operator:n}):i.push({field_name:t,clauses:[{left_operand:t,right_operand:a,operator:n}]})};for(c.s();!(o=c.n()).done;)s()}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}return n}(e.eligibility_criteria),a.validateForm()&&("edit"===a.state.mode?a.props.dispatch(function(e,t){return Yo.apply(this,arguments)}(a.state.serviceId,e,(function(e,t,n){e===u.ACTION_SUCCESS&&(a.props.history.push("/services"),a.forceUpdate())}))):a.props.dispatch(function(e){return Ko.apply(this,arguments)}(a.state.form,(function(e,t,n){a.props.history.push("/services"),a.forceUpdate()}))))},a.validateForm=function(){var e={},t=!0;if(a.state.form.provider_id||(t=!1,e.provider_id="*Please enter a provider."),a.state.form.type||(t=!1,e.type="*Please enter the type."),a.state.form.name||(t=!1,e.name="*Please enter the name."),a.state.form.category||(t=!1,e.category="*Please enter the category."),a.state.form.primary_phone_number){var n=Dn.phone(a.state.form.primary_phone_number);n&&(e.primary_phone_number="*"+n)}if(a.state.form.alt_phone_number){var r=Dn.phone(a.state.form.alt_phone_number);r&&(e.alt_phone_number="*"+r)}if(a.state.form.email){var i=Dn.email(a.state.form.email);i&&(e.email="*"+i)}if(a.state.form.location.postal_code){var o=Dn.postalCode(a.state.form.location.postal_code);o&&(e.postal_code="*"+o)}return a.setState({errors:e}),t};var r={};return a.props.match.params.id&&(r=a.props.servicesById[a.props.match.params.id]),a.state={errors:{},serviceId:r.id,mode:r.id?"edit":"new",form:{name:r.name||"",type:r.type||"",desc:r.desc||"",category:r.category||"",available_from:r.available_from||"",available_to:r.available_to||"",languages:r.languages||[],max_capacity:r.max_capacity||"",current_capacity:r.current_capacity||0,frequency:r.frequency||"",billable:r.billable||"No",price:r.price||"",method_of_delivery:r.method_of_delivery||"",method_of_registration:r.method_of_registration||"",registration:r.registration||"",email:r.email||"",primary_phone_number:r.primary_phone_number||"",alt_phone_number:r.alt_phone_number||"",location:Object.assign({id:"",street_address:"",apt_number:"",city:"",province:"",postal_code:""},r.location),location_same_as_provider:r.location_same_as_provider||!1,share_with:r.share_with||[],notes:r.notes||"",eligibility_conditions:Object.assign({upper_age_limit:"",lower_age_limit:"",immigration_status:[],current_education_level:[],completed_education_level:[]},r.eligibility_conditions),provider_id:r.provider&&r.provider.id||"",is_public:r.is_public||!1,eligibility_criteria:fn(r.eligibility_criteria)||[]}},a.props.dispatch(ic("services")),a.props.dispatch(ic("languages")),a.props.dispatch(so()),a}return Object(Fa.a)(n,[{key:"render",value:function(){var e,t,n,a=this,r=this.props.classes,i=this.props,o="edit"===this.state.mode?"Edit Service Profile":"New Service";n=this.state.form.provider_id,isNaN(n)||parseInt(Number(n))!==n||isNaN(parseInt(n,10))||(t=(e=this.props.providersById&&this.props.providersById.providersById[this.state.form.provider_id]).other_addresses?e.other_addresses.concat([e.main_address]):[]);var c={},l={};return t&&t.forEach((function(e,t){var n=Cr(e);c[n]=n,l[n]=e})),Object($e.jsxs)(St.a,{className:r.root,children:[Object($e.jsx)(ze.a,{variant:"h5",className:r.title,children:o}),this.state.showAlert&&this.state.error_messages.map((function(e,t){return Object($e.jsx)(Tt.a,{severity:"error",children:e},t)})),Object($e.jsx)(qa.a,{className:r.divider}),Object($e.jsx)(ze.a,{variant:"h5",children:"Service Information"}),Object($e.jsx)($t,{label:"Provider",options:k.a.reduce(i.providers,(function(e,t){return"Individual"===t.type?e[t.id]=t.profile&&t.profile.first_name+" "+t.profile.last_name:e[t.id]=t.company,e}),{}),value:this.state.form.provider_id,onChange:this.formValChange("provider_id"),required:!0}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.provider_id}),Object($e.jsx)(va,{to:"/providers",color:!0,children:Object($e.jsx)(ze.a,{children:"Add new provider"})}),Object($e.jsx)($t,{label:"Type",options:u.serviceTypeOptions,value:this.state.form.type,onChange:this.formValChange("type"),required:!0}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.type}),Object($e.jsx)(Ht,{label:"Name",type:"text",value:this.state.form.name,onChange:this.formValChange("name"),required:!0}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.name}),Object($e.jsx)(Ht,{label:"Description",type:"text",value:this.state.form.desc,onChange:this.formValChange("desc")}),Object($e.jsx)($t,{label:"Category",options:i.servicesCategories,value:this.state.form.category,onChange:this.formValChange("category"),required:!0}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.category}),Object($e.jsx)(Ht,{label:"Available from",type:"date",value:this.state.form.available_from,onChange:this.formValChange("available_from")}),Object($e.jsx)(Ht,{label:"Available until",type:"date",value:this.state.form.available_to,onChange:this.formValChange("available_to")}),Object($e.jsx)(bi,{label:"Languages",options:i.languagesCategories,value:this.state.form.languages,onChange:this.formValChange("languages")}),Object($e.jsx)(Ht,{label:"Max Capacity",type:"number",value:this.state.form.max_capacity,min:"0",onChange:this.formValChange("max_capacity")}),parseInt(this.state.form.max_capacity,10)>0&&Object($e.jsx)(Ht,{label:"Current Capacity",type:"number",value:this.state.form.current_capacity,min:"0",onChange:this.formValChange("current_capacity")}),Object($e.jsx)($t,{label:"Frequency",value:this.state.form.frequency,onChange:this.formValChange("frequency"),options:["Weekly","Biweekly","Monthly","Non-repeated"]}),Object($e.jsx)(oi,{label:"Billable",value:this.state.form.billable,onChange:this.formValChange("billable",!0),options:{Yes:"Yes",No:"No"}}),"Yes"===this.state.form.billable&&Object($e.jsx)(Ht,{label:"Price",type:"text",value:this.state.form.price,onChange:this.formValChange("price")}),Object($e.jsx)($t,{label:"Method of delivery",value:this.state.form.method_of_delivery,onChange:this.formValChange("method_of_delivery"),options:{Online:"Online","One on one (In person)":"One on one (In person)",Group:"Group (In person)"}}),Object($e.jsx)($t,{label:"Method of registration",value:this.state.form.method_of_registration,onChange:this.formValChange("method_of_registration"),options:["Self registration","Registration by social worker","No registration"]}),Object($e.jsx)($t,{label:"Registration",placeholder:"select",value:this.state.form.registration,onChange:this.formValChange("registration"),options:["Online","In person","By phone"]}),Object($e.jsx)(qa.a,{className:r.divider}),Object($e.jsx)(ze.a,{variant:"h5",children:"Eligibility"}),Object($e.jsx)(Oc,{value:this.state.form.eligibility_criteria,formValChange:this.formValChange("eligibility_criteria")}),Object($e.jsx)(bi,{label:"Immigration Status",options:u.statusInCanadaOptions,value:this.state.form.eligibility_conditions.immigration_status,onChange:this.formValChange("eligibility_conditions.immigration_status")}),Object($e.jsx)(Ht,{label:"Age greater than",type:"text",value:this.state.form.eligibility_conditions.lower_age_limit,onChange:this.formValChange("eligibility_conditions.lower_age_limit")}),Object($e.jsx)(Ht,{id:"upper_age_limit",label:"Age less than",type:"text",value:this.state.form.eligibility_conditions.upper_age_limit,onChange:this.formValChange("eligibility_conditions.upper_age_limit")}),Object($e.jsx)(bi,{label:"Current Education",options:u.educationLevelOptions,value:this.state.form.eligibility_conditions.current_education_level,onChange:this.formValChange("eligibility_conditions.current_education_level")}),Object($e.jsx)(bi,{label:"Completed Education Level",options:u.educationLevelOptions,value:this.state.form.eligibility_conditions.completed_education_level,onChange:this.formValChange("eligibility_conditions.completed_education_level")}),Object($e.jsx)(qa.a,{className:r.divider}),Object($e.jsx)(ze.a,{variant:"h5",children:"Contact Information"}),Object($e.jsx)(Ht,{label:"Contact Person Email",type:"email",value:this.state.form.email,onChange:this.formValChange("email")}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.email}),Object($e.jsx)(Ht,{label:"Telephone",type:"tel",value:this.state.form.primary_phone_number,onChange:this.formValChange("primary_phone_number")}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.primary_phone_number}),Object($e.jsx)(Ht,{label:"Alternative Phone Number",type:"tel",value:this.state.form.alt_phone_number,onChange:this.formValChange("alt_phone_number")}),Object($e.jsx)("div",{className:r.errorText,children:this.state.errors.alt_phone_number}),Object($e.jsx)(oi,{label:"Location",options:{"Same as provider":!0,Other:!1},onChange:this.formValChange("location_same_as_provider",!0),value:this.state.form.location_same_as_provider}),this.state.form.location_same_as_provider&&this.state.form.provider_id&&Object($e.jsxs)("div",{children:[Object($e.jsx)(oi,{label:"Select the location this service is provided at",value:this.state.form.location,options:c,onChange:function(e){a.state.form.location=Object(s.a)({},c[e.target.value]),a.formValChange("location")}}),!k.a.includes(k.a.map(t,"id"),this.state.form.location.id)&&Object($e.jsx)(ze.a,{style:{marginTop:10},children:"The current location of service is at\n                          ".concat(Cr(this.state.form.location),", which has\n                          been removed from provider locations. Please select a\n                          new location.")})]}),!this.state.form.location_same_as_provider&&Object($e.jsx)(en,{address:this.state.form.location,errMsg:this.state.errors},"address"),Object($e.jsx)(oi,{label:"Public?",options:{Yes:!0,No:!1},onChange:this.formValChange("is_public"),value:this.state.form.is_public}),Object($e.jsx)(qa.a,{className:r.divider}),Object($e.jsx)(ze.a,{variant:"h5",children:"Other Information"}),Object($e.jsx)(bi,{label:"Share with",options:u.serviceSharedWithOptions,value:this.state.form.share_with,onChange:this.formValChange("share_with")}),Object($e.jsx)(Ht,{label:"Notes",type:"text",value:this.state.form.notes,onChange:this.formValChange("notes"),multiline:!0,variant:"outlined",fullWidth:!0}),Object($e.jsx)(Ve.a,{onClick:this.submit,variant:"outlined",color:"primary",style:{margin:"12px 0"},children:"Submit"})]})}}]),n}(we.Component);var vc=Object(Ee.b)((function(e){return{servicesById:e.services.byId,servicesCategories:e.ontology.services.categories,categoriesLoaded:e.ontology.services.loaded,languagesCategories:e.ontology.languages.categories,languagesLoaded:e.ontology.languages.loaded,providers:e.providers.filteredProviders||[],providersById:e.providers.byId,providersLoaded:e.providers.loaded,providerIndex:e.providers.index}}))(Object(Fe.i)(Object(cc.a)({root:{width:"80%"},divider:{margin:"20px 0"},errorText:{color:"#e41919"},title:{fontWeight:600}})(gc))),xc="goods",yc=function(e){var t=e.provider;return"Organization"===t.type?t.company:t.profile?"".concat(t.profile.first_name," ").concat(t.profile.last_name):"Not provided"},_c=[{name:"id",options:{sort:!1,viewColumns:!1,display:"excluded",searchable:!1,filter:!1}},{name:"name",label:"Name",options:{sort:!0,customBodyRender:function(e,t){var n=t.rowData;return Object($e.jsx)(va,{color:!0,to:"/".concat(xc,"/").concat(n[0]),children:e})}}},{name:"provider",label:"Provider",options:{sort:!0,customBodyRender:function(e){return Object($e.jsx)(va,{color:!0,to:"/".concat(xc,"/").concat(e.id),children:yc({provider:e})})}}},{name:"desc",label:"Description"},{name:"category",label:"Category"}];var Cc=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(){return Object(Da.a)(this,n),t.apply(this,arguments)}return Object(Fa.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.dispatch(Oe(e))}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.goodsById[t];return Object($e.jsxs)("div",{className:"content client",children:[Object($e.jsx)("h3",{children:"Good Profile"}),Object($e.jsx)(Ae.b,{to:"/goods/".concat(n.id,"/edit"),children:Object($e.jsx)(ki.a,{bsStyle:"primary",children:"Edit"})})," ",Object($e.jsx)(ki.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object($e.jsx)(Ir.a,{fontSize:"small"})}),n&&n.goodsLoaded&&Object($e.jsx)(Qi.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,children:Object($e.jsxs)("tbody",{children:[Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Name"})}),Object($e.jsx)("td",{children:n.name})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Description"})}),Object($e.jsx)("td",{children:n.desc})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Category"})}),Object($e.jsx)("td",{children:n.category})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Available from"})}),Object($e.jsx)("td",{children:n.available_from})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Available until"})}),Object($e.jsx)("td",{children:n.available_to})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Transportation"})}),Object($e.jsx)("td",{children:n.transportation})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Condition"})}),Object($e.jsx)("td",{children:n.condition})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Material"})}),Object($e.jsx)("td",{children:n.material})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Quantity"})}),Object($e.jsx)("td",{children:n.quantity})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Length"})}),Object($e.jsx)("td",{children:n.length})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Width"})}),Object($e.jsx)("td",{children:n.width})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Height"})}),Object($e.jsx)("td",{children:n.height})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Diameter"})}),Object($e.jsx)("td",{children:n.diameter})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Contact Person Email"})}),Object($e.jsx)("td",{children:n.email})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Contact Person Phone"})}),Object($e.jsx)("td",{children:n.primary_phone_number})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Secondary Phone"})}),Object($e.jsx)("td",{children:n.alt_phone_number})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Location"})}),Object($e.jsx)("td",{children:Cr(n.location)})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Share with"})}),Object($e.jsx)("td",{children:(n.share_with||[]).join(", ")})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Notes"})}),Object($e.jsx)("td",{children:n.notes})]}),Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Provider"})}),Object($e.jsx)("td",{children:Object($e.jsx)(Ae.b,{to:"/provider/".concat(n.provider.id),children:"".concat(n.provider.profile.first_name," ").concat(n.provider.profile.last_name)})})]})]})})]})}}]),n}(we.Component),Sc=Object(Ee.b)((function(e){return{goodsById:e.goods.byId,goodLoaded:e.goods.indexLoaded}}))(Cc),kc=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;Object(Da.a)(this,n);var r={};return(a=t.call(this,e)).props.match.params.id&&(r=a.props.goodsById[a.props.match.params.id]),a.state={goodId:r.id,mode:r.id?"edit":"new",is_provider_location:!1,form:{name:r.name||"",desc:r.desc||"",category:r.category||"",available_from:r.available_from||"",available_to:r.available_to||"",transportation:r.transportation||"",condition:r.condition||"",material:r.material||"",quantity:r.quantity||"",length:r.length||"",width:r.width||"",height:r.height||"",diameter:r.diameter||"",email:r.email||"",primary_phone_number:r.primary_phone_number||"",alt_phone_number:r.alt_phone_number||"",location:Object.assign({street_address:"",apt_number:"",city:"",province:"",postal_code:""},r.location),share_with:r.share_with||"",notes:r.notes||"",provider_id:r.provider&&r.provider.id||""}},a.formValChange=a.formValChange.bind(Object(Si.a)(a)),a.locationChange=a.locationChange.bind(Object(Si.a)(a)),a.submit=a.submit.bind(Object(Si.a)(a)),a.indicatorChange=a.indicatorChange.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(R("goods")),this.props.dispatch(oe())}},{key:"formValChange",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.target.id;t="location"===n?Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},n,JSON.parse(e.target.value))):Object(s.a)(Object(s.a)({},this.state.form),{},Object(c.a)({},n,e.target.value)),this.setState({form:t})}},{key:"locationChange",value:function(e){var t=k.a.clone(this.state.form);t.location[e.target.id]=e.target.value,this.setState({form:t})}},{key:"indicatorChange",value:function(e,t){this.setState(Object(c.a)({},t,JSON.parse(e.target.value)))}},{key:"submit",value:function(){var e,t,n,a=this,r=Object.assign({},this.state.form);"edit"===this.state.mode?this.props.dispatch((e=this.state.goodId,t=r,n=function(e,t,n){if(e===he)a.props.history.push("/goods/");else{var r=k.a.reduce(JSON.parse(t.message),(function(e,t,n){var a=(n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" ");return k.a.each(t,(function(t){e.push(t.replace("This field",a))})),e}),[]);a.setState({showAlert:!0,error_messages:r})}},function(a){var r=u.serverHost+"/good/"+e+"/";return d()(r,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){a(me(e.id,e)),n(he,null,e.id)})).catch((function(e){n(je,e)}))})):this.props.dispatch(function(e,t){return function(n){var a=u.serverHost+"/goods/";return d()(a,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))}}).then(function(){var e=Object(w.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.status){e.next=4;break}return e.abrupt("return",t.json());case 4:return e.next=6,t.json();case 6:throw n=e.sent,new Error(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n(me(e.id,e)),t(he,null,e.id)})).catch((function(e){t(je,e)}))}}(this.state.form,(function(e,t,n){if(e===he)a.props.history.push("/goods/");else{var r=k.a.reduce(JSON.parse(t.message),(function(e,t,n){var a=(n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" ");return k.a.each(t,(function(t){e.push(t.replace("This field",a))})),e}),[]);a.setState({showAlert:!0,error_messages:r})}})))}},{key:"render",value:function(){var e,t=this,n=this.props,a="edit"===this.state.mode?"Edit Good Profile":"New Good";return this.state.form.provider_id&&(e=this.props.providersById&&this.props.providersById[this.state.form.provider_id]),Object($e.jsxs)(wi.a,{className:"content",children:[Object($e.jsxs)(Ii.a,{sm:12,children:[Object($e.jsx)("h3",{children:a}),Object($e.jsx)("hr",{})]}),Object($e.jsx)(Ii.a,{sm:12,children:Object($e.jsxs)(Ni.a,{horizontal:!0,children:[this.state.showAlert&&Object($e.jsx)(Ii.a,{sm:12,className:"flash-error",children:k.a.map(this.state.error_messages,(function(e,t){return Object($e.jsx)("li",{children:e},t)}))}),Object($e.jsx)($t,{id:"provider_id",label:"Provider",options:k.a.reduce(n.providers,(function(e,t){return"Individual"===t.type?e[t.id]=t.profile.first_name+" "+t.profile.last_name:e[t.id]=t.company,e}),{}),componentClass:"select",value:this.state.form.provider_id,onChange:this.formValChange,required:!0}),Object($e.jsx)(Ti.a,{children:Object($e.jsx)(Ii.a,{smOffset:3,sm:9,children:Object($e.jsx)(Ae.b,{to:"/providers/new",children:Object($e.jsx)(ki.a,{children:"Add new provider"})})})}),Object($e.jsx)(Ht,{id:"name",label:"Name",type:"text",value:this.state.form.name,onChange:this.formValChange,required:!0}),Object($e.jsxs)(Ti.a,{controlId:"desc",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Description"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.desc,onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"category",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Category *"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsxs)(Ri.a,{componentClass:"select",placeholder:"select",value:this.state.form.category,onChange:this.formValChange,required:!0,children:[Object($e.jsx)("option",{value:"select",children:"-- Not Set --"}),Object($e.jsx)("option",{value:"Furniture",children:"Furniture"}),Object($e.jsx)("option",{value:"Food",children:"Food"}),Object($e.jsx)("option",{value:"Clothing",children:"Clothing"}),Object($e.jsx)("option",{value:"Utensils",children:"Utensils"}),Object($e.jsx)("option",{value:"Books",children:"Books"})]})})]}),Object($e.jsxs)(Ti.a,{controlId:"transportation",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Transportation"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.transportation,onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"available_from",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Available from"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"date",value:this.state.form.available_from,onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"available_to",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Available until"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"date",value:this.state.form.available_to,onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"condition",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Condition"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.condition,onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"material",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Material"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.material,onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"quantity",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Quantity"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.quantity,placeholder:"",onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"length",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Length"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.length,placeholder:"",onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"width",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Width"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.width,placeholder:"",onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"height",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Height"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.height,placeholder:"",onChange:this.formValChange})})]}),Object($e.jsxs)(Ti.a,{controlId:"diameter",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Diameter"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.diameter,placeholder:"",onChange:this.formValChange})})]}),Object($e.jsx)(Ht,{id:"email",label:"Contact Person Email",type:"email",value:this.state.form.email,onChange:this.formValChange,required:!0}),Object($e.jsx)(Ht,{id:"primary_phone_number",label:"Telephone",type:"tel",value:this.state.form.primary_phone_number,onChange:this.formValChange,required:!0}),Object($e.jsx)(Ht,{id:"alt_phone_number",label:"Alternative Phone Number",type:"tel",value:this.state.form.alt_phone_number,onChange:this.formValChange,required:!0}),Object($e.jsx)(oi,{id:"is_provider_location",label:"Location",options:{"Same as provider":!0,Other:!1},onChange:this.indicatorChange,defaultChecked:this.state.is_provider_location,required:!0}),this.state.is_provider_location&&this.state.form.provider_id&&Object($e.jsx)("div",{children:Object($e.jsxs)(Ti.a,{controlId:"location",children:[Object($e.jsx)(Ii.a,{className:"required",componentClass:Ei.a,sm:3,children:"Select the location this good is provided at"}),Object($e.jsxs)(Ii.a,{sm:9,children:[Object($e.jsx)(Ni.a.Check,{name:"provider_address",value:JSON.stringify(e.main_address),onChange:function(e){return t.formValChange(e,"location")},type:"radio",children:Cr(e.main_address)})," ",e.other_addresses.map((function(e,n){return Object($e.jsx)(Ni.a.Check,{name:"provider_address",value:JSON.stringify(e),onChange:function(e){return t.formValChange(e,"location")},type:"radio",children:Cr(e)},n)}))]})]})}),!this.state.is_provider_location&&Object($e.jsxs)("div",{children:[Object($e.jsx)(Ht,{id:"street_address",label:"Street Address",type:"text",value:this.state.form.location.street_address,onChange:this.locationChange}),Object($e.jsx)(Ht,{id:"apt_number",label:"Apt. #",type:"text",value:this.state.form.location.apt_number,onChange:this.locationChange}),Object($e.jsx)(Ht,{id:"city",label:"City",type:"text",value:this.state.form.location.city,onChange:this.locationChange}),Object($e.jsx)($t,{id:"province",label:"Province",options:u.provinceOptions,componentClass:"select",value:this.state.form.location.province,onChange:this.locationChange}),Object($e.jsx)(Ht,{id:"postal_code",label:"Postal Code",type:"text",value:this.state.form.location.postal_code,onChange:this.locationChange})]}),Object($e.jsxs)(Ti.a,{controlId:"share_with",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Share with"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsxs)(Ri.a,{componentClass:"select",placeholder:"select",value:this.state.form.share_with,onChange:this.formValChange,children:[Object($e.jsx)("option",{value:"select",children:"-- Not Set --"}),Object($e.jsx)("option",{value:"Private",children:"Private"}),Object($e.jsx)("option",{value:"Public",children:"Public"}),Object($e.jsx)("option",{value:"Boost Child & Youth Advocacy Centre",children:"Boost Child & Youth Advocacy Centre"}),Object($e.jsx)("option",{value:"Children's Aid Society of Toronto",children:"Children's Aid Society of Toronto"}),Object($e.jsx)("option",{value:"Abrigo Centre",children:"Abrigo Centre"}),Object($e.jsx)("option",{value:"Barbra Schlifer Commemorative Clinic",children:"Barbra Schlifer Commemorative Clinic"}),Object($e.jsx)("option",{value:"Durham Rape Crisis Centre",children:"Durham Rape Crisis Centre"}),Object($e.jsx)("option",{value:"Durham Children's Aid Society",children:"Durham Children's Aid Society"}),Object($e.jsx)("option",{value:"Alexandra Park Community Centre",children:"Alexandra Park Community Centre"}),Object($e.jsx)("option",{value:"Applegrove Community Complex",children:"Applegrove Community Complex"}),Object($e.jsx)("option",{value:"Albion Neighbourhood Goods",children:"Albion Neighbourhood Goods"}),Object($e.jsx)("option",{value:"Applegrove Community Complex",children:"Applegrove Community Complex"}),Object($e.jsx)("option",{value:"Kababayan Multicultural Centre",children:"Kababayan Multicultural Centre"}),Object($e.jsx)("option",{value:"Central Toronto Youth Goods",children:"Central Toronto Youth Goods"}),Object($e.jsx)("option",{value:"Covenant House Toronto",children:"Covenant House Toronto"}),Object($e.jsx)("option",{value:"Durham Youth Housing and Support Goods",children:"Durham Youth Housing and Support Goods"}),Object($e.jsx)("option",{value:"Eva's Initiatives",children:"Eva's Initiatives"}),Object($e.jsx)("option",{value:"Horizons for Youth",children:"Horizons for Youth"}),Object($e.jsx)("option",{value:"AIDS Committee of Durham Region",children:"AIDS Committee of Durham Region"}),Object($e.jsx)("option",{value:"Arab Community Centre of Toronto",children:"Arab Community Centre of Toronto"}),Object($e.jsx)("option",{value:"Pediatric Oncology Group of Ontario",children:"Pediatric Oncology Group of Ontario"}),Object($e.jsx)("option",{value:"Adventist community goods",children:"Adventist community goods"}),Object($e.jsx)("option",{value:"Aurora Food Pantry",children:"Aurora Food Pantry"}),Object($e.jsx)("option",{value:"Bluffs Food Bank",children:"Bluffs Food Bank"}),Object($e.jsx)("option",{value:"Brock Community Food Bank",children:"Brock Community Food Bank"}),Object($e.jsx)("option",{value:"Markham Food Bank",children:"Markham Food Bank"}),Object($e.jsx)("option",{value:"Parkdale Community Food Bank",children:"Parkdale Community Food Bank"})]})})]}),Object($e.jsxs)(Ti.a,{controlId:"notes",children:[Object($e.jsx)(Ii.a,{componentClass:Ei.a,sm:3,children:"Notes"}),Object($e.jsx)(Ii.a,{sm:9,children:Object($e.jsx)(Ri.a,{type:"text",value:this.state.form.notes,onChange:this.formValChange})})]}),Object($e.jsx)(Ti.a,{children:Object($e.jsx)(Ii.a,{smOffset:3,sm:9,children:Object($e.jsx)(ki.a,{onClick:this.submit,children:"Submit"})})})]})})]})}}]),n}(we.Component),wc=Object(Ee.b)((function(e){return{goodsById:e.goods.byId,servicesCategories:e.ontology.services.categories,categoriesLoaded:e.ontology.services.loaded,providers:e.providers.filteredProviders||[],providersById:e.providers.byId,providersLoaded:e.providers.loaded,providerIndex:e.providers.index}}))(Object(Fe.i)(kc));function Ic(){return(Ic=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tr("/admin_logs/"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nc=[{label:"Time",body:function(e){var t=e.action_time;return new Date(t).toLocaleString()}},{label:"Username",body:function(e){var t=e.user;return Object($e.jsx)(va,{color:!0,to:"/users/".concat(t.id),children:t.username})}},{label:"Action",body:function(e){var t,n,a=e.action,r=e.object_id,i=e.object_repr;return Object($e.jsxs)("span",{children:[a+" ",Object($e.jsx)(va,{color:!0,to:(t=i,n=r,"Person"===t?"/clients/".concat(n):"EligibilityCriteria"===t?"/eligibility-criteria/".concat(n):"/".concat(t.toLowerCase(),"s/").concat(n)),children:r})]})}},{label:"Message",body:function(e){var t=e.change_message;if(t)try{if(null!=(t=JSON.parse(t)).reason)return"Reason: "+t.reason}catch(n){}return"N/A"}}];var Tc=n(132),Ec=(n(628),[1931,1941,1951,1961,1971,1981,1991,2001,2011]),Ac=function(e){Object(La.a)(n,e);var t=Object(Ma.a)(n);function n(e){var a;return Object(Da.a)(this,n),(a=t.call(this,e)).state={total_clients:0,number_of_clients_by_gender:{},number_of_clients_by_birth_year:{},number_of_clients_by_marital_status:{},number_of_clients_by_language:{},number_of_providers_by_status:{},number_of_providers_by_type:{},number_of_individual_providers_by_category:{},selectedCategory:"",selectedAttribute:""},a.handleSelectChange=a.handleSelectChange.bind(Object(Si.a)(a)),a}return Object(Fa.a)(n,[{key:"componentWillMount",value:function(){var e=this,t=u.serverHost+"/reporting?years="+Ec;fetch(t,{method:"get",headers:new Headers({Authorization:"JWT ".concat(localStorage.getItem("jwt_token"))})}).then((function(e){return e.json()})).then((function(t){e.setState({total_clients:t.total_clients,number_of_clients_by_gender:t.number_of_clients_by_gender,number_of_clients_by_birth_year:t.number_of_clients_by_birth_year,number_of_clients_by_marital_status:t.number_of_clients_by_marital_status,number_of_clients_by_language:t.number_of_clients_by_language,number_of_providers_by_status:t.number_of_providers_by_status,number_of_providers_by_type:t.number_of_providers_by_type,number_of_individual_providers_by_category:t.number_of_individual_providers_by_category})}))}},{key:"handleSelectChange",value:function(e){this.setState(Object(c.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e={labels:k.a.map(Ec,(function(e){return"".concat(e,"-").concat(e+9)})),datasets:[{data:Object.values(this.state.number_of_clients_by_birth_year)}]},t={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},n={labels:Object.keys(this.state.number_of_clients_by_language),datasets:[{data:Object.values(this.state.number_of_clients_by_language)}]},a=[{value:this.state.number_of_clients_by_gender.Female,color:"#F7464A",highlight:"#FF5A5E",label:"Female"},{value:this.state.number_of_clients_by_gender.Male,color:"#46BFBD",highlight:"#5AD3D1",label:"Male"},{value:this.state.number_of_clients_by_gender.Other,color:"#FDB45C",highlight:"#FFC870",label:"Other"}],r=[{value:this.state.number_of_providers_by_status.Internal,color:"#46BFBD",highlight:"#5AD3D1",label:"Internal"},{value:this.state.number_of_providers_by_status.External,color:"#FDB45C",highlight:"#FFC870",label:"External"}],i=[{value:this.state.number_of_individual_providers_by_category["Volunteer/Goods Donor"],color:"#46BFBD",highlight:"#5AD3D1",label:"Volunteer/Goods Donor"},{value:this.state.number_of_individual_providers_by_category["Professional Service Provider"],color:"#FDB45C",highlight:"#FFC870",label:"Professional Service Provider"}],o=[{value:this.state.number_of_providers_by_type.Individual,color:"#46BFBD",highlight:"#5AD3D1",label:"Individual"},{value:this.state.number_of_providers_by_type.Organization,color:"#FDB45C",highlight:"#FFC870",label:"Organization"}],c={labels:Object.keys(this.state.number_of_clients_by_marital_status),datasets:[{data:Object.values(this.state.number_of_clients_by_marital_status)}]},s={maintainAspectRatio:!1,responsive:!1,legend:{display:!0,position:"right",labels:{boxWidth:10}}};return Object($e.jsxs)("div",{className:"content client",children:[Object($e.jsx)(ki.a,{bsStyle:"primary",onClick:function(){return window.print()},className:"print-button",children:Object($e.jsx)(Ir.a,{fontSize:"small"})}),Object($e.jsx)($t,{id:"selectedCategory",componentClass:"select",label:"Get a report on",value:this.state.selectedCategory,options:["Clients","Providers","Services","Matches"],onChange:this.handleSelectChange}),Object($e.jsx)("br",{}),Object($e.jsx)("br",{}),Object($e.jsx)($t,{id:"selectedAttribute",componentClass:"select",label:"Select attribute",value:this.state.selectedAttribute,options:""!==this.state.selectedCategory?{Clients:["Birth Year","Gender","Language","Marital Status"],Providers:["Individuals by Category","Status","Type"],Services:["Category","Type"],Matches:["Time between selected and matched","Time between selected and fulfilled"]}[this.state.selectedCategory]:[],onChange:this.handleSelectChange}),Object($e.jsx)("br",{}),Object($e.jsx)("br",{}),Object($e.jsx)("br",{}),Object($e.jsx)("br",{}),"Clients"===this.state.selectedCategory&&"Gender"===this.state.selectedAttribute&&Object($e.jsx)(Pc,{data:a,options:s,totalClientsCount:this.state.total_clients,ClientsCountByGender:this.state.number_of_clients_by_gender}),"Clients"===this.state.selectedCategory&&"Language"===this.state.selectedAttribute&&Object($e.jsx)(Mc,{data:n,options:t,totalClientsCount:this.state.total_clients,ClientsCountByLanguage:this.state.number_of_clients_by_language}),"Clients"===this.state.selectedCategory&&"Marital Status"===this.state.selectedAttribute&&Object($e.jsx)(Bc,{data:c,options:t,totalClientsCount:this.state.total_clients,ClientsCountByMaritalStatus:this.state.number_of_clients_by_marital_status}),"Clients"===this.state.selectedCategory&&"Birth Year"===this.state.selectedAttribute&&Object($e.jsx)(Rc,{data:e,options:t,ClientsCountByBirthYear:this.state.number_of_clients_by_birth_year}),"Providers"===this.state.selectedCategory&&"Status"===this.state.selectedAttribute&&Object($e.jsx)(Dc,{data:r,options:s,ProvidersCountByStatus:this.state.number_of_providers_by_status}),"Providers"===this.state.selectedCategory&&"Type"===this.state.selectedAttribute&&Object($e.jsx)(Lc,{data:o,options:s,ProvidersCountByType:this.state.number_of_providers_by_type}),"Providers"===this.state.selectedCategory&&"Individuals by Category"===this.state.selectedAttribute&&Object($e.jsx)(Fc,{data:i,options:s,IndividualProvidersCountByCategory:this.state.number_of_individual_providers_by_category})]})}}]),n}(we.Component);function Pc(e){var t=e.data,n=e.options,a=e.totalClientsCount,r=e.ClientsCountByGender;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Breakdown of clients by Gender"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Pie,{data:t,options:n}),Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:["Total = ",a]})}),k.a.map(r,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Dc(e){var t=e.data,n=e.options,a=e.ProvidersCountByStatus;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Breakdown of providers by Status"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Fc(e){var t=e.data,n=e.options,a=e.IndividualProvidersCountByCategory;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Breakdown of individual providers by Category"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Lc(e){var t=e.data,n=e.options,a=e.ProvidersCountByType;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Breakdown of providers by type"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Pie,{data:t,options:n}),k.a.map(a,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Mc(e){var t=e.data,n=e.options,a=e.ClientsCountByLanguage;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Breakdown of clients by Language"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Bc(e){var t=e.data,n=e.options,a=e.ClientsCountByMaritalStatus;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Breakdown of clients by Marital Status"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:[t," = ",e]})},t)}))]})]})})})}function Rc(e){var t=e.data,n=e.options,a=e.ClientsCountByBirthYear;return Object($e.jsx)(Qi.a,{bordered:!0,condensed:!0,className:"profile-table",children:Object($e.jsx)("tbody",{children:Object($e.jsxs)("tr",{children:[Object($e.jsx)("td",{children:Object($e.jsx)("b",{children:"Distribution of clients by Birth Year"})}),Object($e.jsxs)("td",{children:[Object($e.jsx)(Tc.Bar,{data:t,options:n}),k.a.map(a,(function(e,t){return Object($e.jsx)("div",{children:Object($e.jsxs)("b",{children:["Clients born between ",t," and ",parseInt(t,10)+9," = ",e]})},t)}))]})]})})})}var Gc=Object(Ke.a)((function(){return{button:{padding:4}}})),zc="Add Eligibility Criteria";function Vc(e){var t=e.open,n=e.title,a=e.value,r=e.handleConfirm,i=e.handleClose,o=Object(we.useState)({title:""}),c=Object(De.a)(o,2),s=c[0],l=c[1];return Object($e.jsxs)(st.a,{open:t,onClose:i,fullWidth:!0,children:[Object($e.jsx)(lt.a,{children:n}),Object($e.jsx)(dt.a,{children:Object($e.jsx)(Ht,{autoFocus:!0,label:"Eligible criteria",value:a.title,onChange:function(e){return a.title=e.target.value},error:!!s.title,helperText:s.title,fullWidth:!0,InputLabelProps:{}})}),Object($e.jsxs)(bt.a,{children:[Object($e.jsx)(Ve.a,{onClick:function(){(function(){var e={};return""===a.title&&(e.title="This field is required"),l(e),""!==a.title})()&&r()},color:"primary",children:"Confirm"}),Object($e.jsx)(Ve.a,{onClick:i,children:"Cancel"})]})]})}function qc(){return tr("/questions/")}function Hc(e,t){return Wc.apply(this,arguments)}function Wc(){return(Wc=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr("/questions/"+t+"/",n);case 2:if(204===e.sent.status){e.next=5;break}throw Error("Server does not return correct code.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uc=n(257),Jc=n(750),Kc=Object(Ke.a)((function(e){return{root:{paddingTop:8},droppable:{display:"flex",flexDirection:"column"},submitButton:{margin:"10px 0"}}})),Yc={Mandatory:!0,"Not mandatory":!1};function Xc(e){var t=e.stepFields,n=e.fields,a=e.stepName,r=e.handleRadioChange,i=e.handleDeleteField;return t.map((function(e,t){var o=e.field,c=e.required;e.type;return Object($e.jsx)(Uc.b,{draggableId:o,index:t,children:function(e,l){return Object($e.jsxs)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{style:Object(s.a)({backgroundColor:l.isDragging?"#bbb":null},e.draggableProps.style),children:[Object($e.jsx)(oi,{required:!0,noStar:!0,row:!0,label:n[o]&&n[o].label||o,onChange:r(o,a),options:Yc,value:c},o),Object($e.jsx)(ft.a,{onClick:function(){return!l.isDragging&&i(t,a)},size:"large",children:Object($e.jsx)(Jc.a,{})})]}))}},o)}))}var Qc=Object(Ke.a)((function(){return{button:{padding:4},formControl:{margin:null}}})),Zc="Add Question",$c="Edit Question",es={provider:"Provider"};function ts(e){var t=e.open,n=e.title,a=e.value,r=(e.objectId,e.handleConfirm),i=e.handleClose,o=Object(we.useState)({type:"",value:""}),c=Object(De.a)(o,2),s=c[0],l=c[1];return Object($e.jsxs)(st.a,{open:t,onClose:i,fullWidth:!0,children:[Object($e.jsx)(lt.a,{children:n}),Object($e.jsxs)(dt.a,{children:[Object($e.jsx)(Ge.a,{sx:{mt:2}}),Object($e.jsx)($t,{label:"Content type",value:a.content_type,options:es,onChange:function(e){return a.content_type=e.target.value},disabled:n===$c,formControlProps:{fullWidth:!0},error:!!s.content_type,helperText:s.content_type,required:!0,noDefaultStyle:!0,noEmpty:!0}),Object($e.jsx)(Ht,{label:"Question",value:a.text,onChange:function(e){return a.text=e.target.value},error:!!s.text,helperText:s.text,fullWidth:!0})]}),Object($e.jsxs)(bt.a,{children:[Object($e.jsx)(Ve.a,{onClick:function(){(function(){var e={};return""===a.content_type&&(e.content_type="This field is required"),""===a.text&&(e.text="This field is required"),l(e),""!==a.content_type&&""!==a.text})()&&r()},color:"primary",children:"Confirm"}),Object($e.jsx)(Ve.a,{onClick:i,children:"Cancel"})]})]})}var ns=Object($e.jsxs)(Fe.d,{children:[Object($e.jsx)(Fe.b,{exact:!0,path:"/",component:Ra}),Object($e.jsx)(Fe.b,{path:"/login",component:Va}),Object($e.jsx)(Fe.b,{path:"/login-pane",component:Wa}),Object($e.jsx)(ao,{path:"/dashboard",component:Qa}),Object($e.jsx)(ao,{path:"/clients/:id/edit",component:fi}),Object($e.jsx)(ao,{path:"/clients/:id/needs/new",component:Pi}),Object($e.jsx)(ao,{path:"/clients/new",component:fi}),Object($e.jsx)(ao,{path:"/clients/:id",component:function(){var e=Object(Ee.c)(),t=Object(Fe.h)().id,n=Object(we.useState)({data:null,CF:null,CN:null}),a=Object(De.a)(n,2),r=a[0],i=a[1];if(Object(we.useEffect)((function(){mr(t).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e})}))}))}),[e,t]),Object(we.useEffect)((function(){null==r.CF&&Hr().then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{CF:e})}))}))}),[e,r.CF]),r.data&&r.CF){var o=r.data,c=r.CF.form_structure;if(o.family){var l=k.a.clone(o.family.members);k.a.remove(l,{person:{id:t}})}return Object($e.jsxs)(St.a,{children:[Object($e.jsx)(ze.a,{variant:"h3",paddingY:2,children:"Client Profile"}),Object($e.jsxs)("div",{children:[Object($e.jsx)(va,{to:"/clients/".concat(t,"/edit/"),children:Object($e.jsx)(Ve.a,{variant:"contained",startIcon:Object($e.jsx)(xt.a,{}),children:"Edit"})}),"\xa0",Object($e.jsx)(Ve.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},startIcon:Object($e.jsx)(Ir.a,{}),children:"Print"}),Object($e.jsxs)("div",{children:[o.is_deleted&&Object($e.jsx)(Tt.a,{variant:"filled",severity:"error",children:"The client has been deleted"}),k.a.map(c,(function(e,t){return Object($e.jsx)(zr,{step:t,client:o,infoFields:k.a.keys(k.a.omit(e,"family")),clientFields:Kr},t)})),o.family&&o.family.members.length>0&&Object($e.jsx)(Jn.a,{children:Object($e.jsxs)(Kn.a,{children:[Object($e.jsx)(ta.a,{children:Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{children:"First name"}),Object($e.jsx)(Qn.a,{children:"Last name"}),Object($e.jsx)(Qn.a,{children:"Date of Birth"}),Object($e.jsx)(Qn.a,{children:"Gender"}),Object($e.jsx)(Qn.a,{children:"Relationship"})]})}),k.a.map(k.a.filter(o.family.members,(function(e){return e.person.id!==o.id})),(function(e,t){return Object($e.jsx)("clientFamilyTableRow",{member:e,index:t})}))]})})]}),Object($e.jsx)(ze.a,{variant:"h4",paddingY:2,children:"Needs"}),Object($e.jsx)(va,{to:"/clients/".concat(o.id,"/needs/new"),children:Object($e.jsx)(Ve.a,{variant:"contained",children:"Add need"})}),o&&o.need_groups.length>0&&Object($e.jsx)(Br,{clientId:o.id,needGroups:o.need_groups}),Object($e.jsx)(ze.a,{variant:"h4",paddingY:2,children:"Appointments"}),o&&o.appointments.length>0&&Object($e.jsx)(Jn.a,{children:Object($e.jsxs)(Kn.a,{children:[Object($e.jsx)(ta.a,{children:Object($e.jsxs)(Xn.a,{children:[Object($e.jsx)(Qn.a,{children:"Category"}),Object($e.jsx)(Qn.a,{children:"Date"}),Object($e.jsx)(Qn.a,{children:"Time"}),Object($e.jsx)(Qn.a,{children:"Description"})]})}),Object($e.jsx)(Yn.a,{children:o.appointments.map((function(e){return Object($e.jsx)(Vr,{appointment:e},e.id)}))})]})}),Object($e.jsx)("hr",{})]})]})}return null}}),Object($e.jsx)(ao,{path:"/clients",component:function(){var e=function(e){return e.profile.first_name+" "+e.profile.last_name};return Object($e.jsx)(kt,{type:kr,columnsWithoutOptions:wr,fetchData:hr,deleteItem:yr,generateMarkers:function(t,n,a){return t.slice((n-1)*a,n*a).map((function(t){return{position:{lat:Number(t.address.lat),lng:Number(t.address.lng)},title:e(t),link:"/".concat(kr,"/").concat(t.id),content:t.address&&Cr(t.address)}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:e,tableOptions:{idField:"id"}})}}),Object($e.jsx)(io,{path:"/users/:id/edit",component:Ci}),Object($e.jsx)(io,{path:"/users/new",component:Ci}),Object($e.jsx)(io,{path:"/users/:id",component:function(){var e=Object(we.useState)(!0),t=Object(De.a)(e,2),n=t[0],a=t[1],r=Object(we.useState)({}),i=Object(De.a)(r,2),o=i[0],c=i[1],s=Object(Fe.h)().id;return Object(we.useEffect)((function(){vi(s).then((function(e){c(e),a(!1)}))}),[s]),n?Object($e.jsx)(ya,{message:"Loading user..."}):Object($e.jsxs)(St.a,{children:[Object($e.jsx)(ze.a,{variant:"h5",gutterBottom:!0,children:"User profile"}),Object($e.jsx)(va,{to:"/users/".concat(s,"/edit"),children:Object($e.jsx)(Ve.a,{color:"primary",variant:"contained",style:{marginBottom:12},children:"Edit"})}),Object($e.jsx)(Ze.a,{elevation:4,children:Object($e.jsx)(Kn.a,{children:Object($e.jsxs)(Yn.a,{children:[Object($e.jsx)(Rr,{title:"First Name",value:o.first_name}),Object($e.jsx)(Rr,{title:"Last Name",value:o.last_name}),Object($e.jsx)(Rr,{title:"Username",value:o.username}),Object($e.jsx)(Rr,{title:"Email",value:o.email}),Object($e.jsx)(Rr,{title:"Role",value:o.is_superuser?"Admin":"User"}),Object($e.jsx)(Rr,{title:"Phone Number",value:o.primary_phone_number}),Object($e.jsx)(Rr,{title:"Alternative Phone Number",value:o.alt_phone_number})]})})})]})}}),Object($e.jsx)(io,{path:"/users",component:function(){var e=Object(Fe.g)(),t=Object(we.useState)({loading:!0,data:[],selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1}),n=Object(De.a)(t,2),a=n[0],r=n[1];Object(we.useEffect)((function(){tr("/users/").then((function(e){r((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(){var e=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xi(t);case 3:r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),o=[{label:"Username",body:function(e){var t=e.id,n=e.username;return Object($e.jsx)(va,{color:!0,to:"/users/".concat(t),children:n})}},{label:"Email",body:function(e){return e.email}},{label:"First name",body:function(e){return e.first_name}},{label:"Last name",body:function(e){return e.last_name}},{label:"Primary phone",body:function(e){var t=e.primary_phone_number;return t?Sr(t):"Not Provided"}},{label:"Primary phone",body:function(e){var t=e.secondary_phone_number;return t?Sr(t):"Not Provided"}},{label:"Admin",body:function(e){if(e.is_superuser)return Object($e.jsx)(Oi.a,{color:"primary"})}},{label:" ",body:function(e){var t=e.username,n=e.id;return Object($e.jsx)(_t,{urlPrefix:"users",objectId:n,handleDelete:function(){return function(e,t){return function(){r((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}}(n,t)}})}}];return a.loading?Object($e.jsx)(ya,{message:"Loading users..."}):Object($e.jsxs)(St.a,{children:[Object($e.jsx)(fa,{title:"Users",data:a.data,columns:o,idField:"id",customToolbar:Object($e.jsx)(He.a,{onClick:function(){return e.push("/users/new")},color:"primary",icon:Object($e.jsx)(Xe.a,{}),label:"Add",variant:"outlined"})}),Object($e.jsx)(mt,{objectId:a.selectedId,title:a.deleteDialogTitle,show:a.showDeleteDialog,onHide:function(){return r((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:i})]})}}),Object($e.jsx)(io,{path:"/admin-logs",component:function(){var e=Object(we.useState)(!0),t=Object(De.a)(e,2),n=t[0],a=t[1],r=Object(we.useState)([]),i=Object(De.a)(r,2),o=i[0],c=i[1];return Object(we.useEffect)((function(){(function(){return Ic.apply(this,arguments)})().then((function(e){c(e),a(!1)}))}),[]),n?Object($e.jsx)(ya,{message:"Loading admin logs..."}):Object($e.jsx)(St.a,{children:Object($e.jsx)(fa,{title:"Admin Logs",data:o,columns:Nc,idField:"id"})})}}),Object($e.jsx)(ao,{path:"/needs/:need_id/edit",component:Pi}),Object($e.jsx)(ao,{path:"/needs/:need_id",component:to}),Object($e.jsx)(ao,{path:"/providers/:id/rate",component:Vo}),Object($e.jsx)(ao,{path:"/providers/new/add-service",component:yo}),Object($e.jsx)(ao,{path:"/providers/:formType/new",component:Fo}),Object($e.jsx)(ao,{path:"/providers/:id/edit/",component:Fo}),Object($e.jsx)(ao,{path:"/providers/:id",component:function(){var e=Object(Ee.c)(),t=Object(Fe.h)().id,n=Object(we.useState)({data:null,formSetting:null}),a=Object(De.a)(n,2),r=a[0],i=a[1];if(Object(we.useEffect)((function(){uo(t).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{data:e})}))}))}),[t]),Object(we.useEffect)((function(){null==r.formSetting&&wo(!1).then((function(e){i((function(t){return Object(s.a)(Object(s.a)({},t),{},{formSetting:e})}))}))}),[e,r.formSetting]),r.data&&r.formSetting){var o,c=r.data,l=r.formSetting;"Organization"===c.type?o="organization":"Individual"===c.type&&(o=c.category.split(" ").join("_").toLowerCase());var d=c.reviews.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0)/c.reviews.length;return Object($e.jsxs)(St.a,{children:[Object($e.jsx)("h3",{children:"Provider Profile"}),Object($e.jsxs)("div",{children:[Object($e.jsx)(va,{to:"/providers/".concat(t,"/edit/"),children:Object($e.jsx)(Ve.a,{variant:"contained",startIcon:Object($e.jsx)(xt.a,{}),children:"Edit"})}),"\xa0",Object($e.jsx)(va,{to:"/providers/".concat(t,"/rate"),children:Object($e.jsx)(Ve.a,{variant:"contained",startIcon:Object($e.jsx)(Mo.a,{}),children:"Rate Provider"})})," ",Object($e.jsx)(Ve.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},startIcon:Object($e.jsx)(Ir.a,{}),children:"Print"}),l[o]&&k.a.map(l[o].form_structure,(function(e,t){return Object($e.jsx)(Bo,{step:t,provider:c,providerFields:Bn,infoFields:e},t)})),Object($e.jsx)("h3",{children:" Reviews "}),Object($e.jsx)(Ge.a,{component:"fieldset",mb:3,borderColor:"transparent",children:Object($e.jsx)(Lo.a,{size:"large",name:"provider-rating",value:d})}),Object($e.jsx)("h3",{children:"Services"}),Object($e.jsx)(va,{to:"/services/new",children:Object($e.jsx)(Ve.a,{variant:"contained",children:"Add Service"})})]})]})}return""}}),Object($e.jsx)(ao,{path:"/providers",component:function(){return Object($e.jsx)(kt,{type:go,columnsWithoutOptions:xo,fetchData:so,deleteItem:fo,generateMarkers:function(e,t,n){return e.slice((t-1)*n,t*n).map((function(e){return{position:{lat:Number(e.main_address.lat),lng:Number(e.main_address.lng)},title:vo(e),link:"/".concat(go,"/").concat(e.id),content:e.main_address&&Cr(e.main_address)}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:vo,tableOptions:{idField:"id"}})}}),Object($e.jsx)(ao,{path:"/services/:id/edit",component:vc}),Object($e.jsx)(ao,{path:"/services/new",component:vc}),Object($e.jsx)(ao,{path:"/services/:id",component:ac}),Object($e.jsx)(ao,{path:"/services",component:function(){return Object($e.jsx)(kt,{type:Zo,columnsWithoutOptions:ec,fetchData:Wo,deleteItem:Xo,generateMarkers:function(e,t,n){return e.slice((t-1)*n,t*n).map((function(e){return{position:{lat:Number(e.location.lat),lng:Number(e.location.lng)},title:e.name,link:"/".concat(Zo,"/").concat(e.id),content:e.desc}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:function(e){return e.name},tableOptions:{idField:"id"}})}}),Object($e.jsx)(ao,{path:"/goods/:id/edit",component:wc}),Object($e.jsx)(ao,{path:"/goods/new",component:wc}),Object($e.jsx)(ao,{path:"/goods/:id",component:Sc}),Object($e.jsx)(ao,{path:"/goods",component:function(){var e=function(e){return e.name};return Object($e.jsx)(kt,{type:xc,columnsWithoutOptions:_c,fetchData:ge,deleteItem:ve,generateMarkers:function(t,n,a){t.slice((n-1)*a,n*a).map((function(t){return{position:{lat:Number(t.location.lat),lng:Number(t.location.lng)},title:e(t),link:"/".concat(xc,"/").concat(t.id),content:t.desc}})).filter((function(e){return e.position.lat&&e.position.lng}))},nameFormatter:e})}}),Object($e.jsx)(ao,{path:"/reporting",component:Ac}),Object($e.jsx)(ao,{path:"/eligibility-criteria",component:function(){var e=Object(we.useState)({loading:!0,data:[],value:{},selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1,dialogTitle:"",showAddEditDialog:!1}),t=Object(De.a)(e,2),n=t[0],a=t[1],r=Gc();Object(we.useEffect)((function(){Yr().then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(e,t){return function(){a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}},c=function(e,t){return function(){return a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:t,value:{title:e,id:t},showAddEditDialog:!0,dialogTitle:"Edit Eligibility Criteria"})}))}},l=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ir("/eligibility_criteria/",n.value);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:[].concat(Object(o.a)(e.data),[t])})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xr(t,n);case 3:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=n.value.id,i=n.value,cr("/eligibility_criteria/"+r+"/",i);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:e.data.map((function(n){return n.id===e.selectedId?t:n}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var r,i}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=[{label:"Title",body:function(e){var t=e.title;return Object($e.jsx)(Ge.a,{sx:{width:"80%"},children:t})}},{label:" ",body:function(e){var t=e.id,n=e.title;return Object($e.jsxs)("span",{children:[Object($e.jsx)(ft.a,{onClick:c(n,t),className:r.button,size:"large",children:Object($e.jsx)(xt.a,{fontSize:"small",color:"primary"})}),Object($e.jsx)(ft.a,{onClick:i(t,n),className:r.button,size:"large",children:Object($e.jsx)(yt.a,{fontSize:"small",color:"secondary"})})]})}}];return n.loading?Object($e.jsx)(ya,{message:"Loading eligibilities..."}):Object($e.jsxs)(St.a,{children:[Object($e.jsx)(fa,{title:"Eligibility Criteria",data:n.data,columns:b,customToolbar:Object($e.jsx)(He.a,{onClick:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:{title:""},showAddEditDialog:!0,dialogTitle:zc})}))},color:"primary",icon:Object($e.jsx)(Xe.a,{}),label:"Add",variant:"outlined"})}),Object($e.jsx)(mt,{objectId:n.selectedId,title:n.deleteDialogTitle,show:n.showDeleteDialog,onHide:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:d}),Object($e.jsx)(Vc,{open:n.showAddEditDialog,value:n.value,title:n.dialogTitle,handleClose:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1})}))},handleConfirm:n.dialogTitle===zc?l:u})]})}}),Object($e.jsx)(ao,{path:"/questions",component:function(){var e=Object(we.useState)({loading:!0,data:[],value:{},selectedId:null,deleteDialogTitle:"",showDeleteDialog:!1,dialogTitle:"",showAddEditDialog:!1}),t=Object(De.a)(e,2),n=t[0],a=t[1],r=Qc();Object(we.useEffect)((function(){qc().then((function(e){a((function(t){return Object(s.a)(Object(s.a)({},t),{},{loading:!1,data:e})}))}))}),[]);var i=function(e,t){return function(){a((function(n){return Object(s.a)(Object(s.a)({},n),{},{selectedId:e,showDeleteDialog:!0,deleteDialogTitle:"Delete "+t+" ?"})}))}},c=function(e,t,n){return function(){return a((function(a){return Object(s.a)(Object(s.a)({},a),{},{value:{id:n,text:e,content_type:t},selectedId:n,showAddEditDialog:!0,dialogTitle:$c})}))}},l=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ir("/questions/",n.value);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:[].concat(Object(o.a)(e.data),[t])})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(w.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hc(t,n);case 3:a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1,data:e.data.filter((function(t){return t.id!==e.selectedId}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=n.value.id,i=n.value,cr("/questions/"+r+"/",i);case 3:t=e.sent,a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1,data:e.data.map((function(n){return n.id===e.selectedId?t:n}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var r,i}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=[{label:"Text",body:function(e){var t=e.text;return Object($e.jsx)(Ge.a,{sx:{width:"60%"},children:t})}},{label:"Content type",body:function(e){return e.content_type}},{label:" ",body:function(e){var t=e.id,n=e.text,a=e.content_type;return Object($e.jsxs)("span",{children:[Object($e.jsx)(ft.a,{onClick:c(n,a,t),className:r.button,size:"large",children:Object($e.jsx)(xt.a,{fontSize:"small",color:"primary"})}),Object($e.jsx)(ft.a,{onClick:i(t,n),className:r.button,size:"large",children:Object($e.jsx)(yt.a,{fontSize:"small",color:"secondary"})})]})}}];return n.loading?Object($e.jsx)(ya,{message:"Loading questions..."}):Object($e.jsxs)(St.a,{children:[Object($e.jsx)(fa,{title:"Questions",data:n.data,columns:b,customToolbar:Object($e.jsx)(He.a,{onClick:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{value:{text:"",content_type:""},showAddEditDialog:!0,dialogTitle:Zc})}))},color:"primary",icon:Object($e.jsx)(Xe.a,{}),label:"Add",variant:"outlined"})}),Object($e.jsx)(mt,{objectId:n.selectedId,title:n.deleteDialogTitle,show:n.showDeleteDialog,onHide:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showDeleteDialog:!1})}))},delete:d}),Object($e.jsx)(ts,{open:n.showAddEditDialog,value:n.value,objectId:n.selectedId,title:n.dialogTitle,handleClose:function(){return a((function(e){return Object(s.a)(Object(s.a)({},e),{},{showAddEditDialog:!1})}))},handleConfirm:n.dialogTitle===Zc?l:u})]})}}),Object($e.jsx)(io,{path:"/settings/manage-fields",component:function(){var e=Kc(),t=Object(Fe.g)(),n=Object(Ee.c)(),a=Object(we.useState)({category:"",stepToAdd:"",selectedStep:"",selectedField:"",questions:{},fields:{}}),r=Object(De.a)(a,2),i=r[0],l=r[1];Object(we.useEffect)((function(){qc().then((function(e){return l((function(t){return Object(s.a)(Object(s.a)({},t),{},{questions:e})}))})),wo(!1).then((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a,r=n[t],i=e[r].form_structure,o=e[r].steps_order,c=Object(mn.a)(o);try{for(c.s();!(a=c.n()).done;){for(var d=a.value,u=[],b=i[d],j=0,h=Object.entries(b);j<h.length;j++){var p=Object(De.a)(h[j],2),m=p[0],f=p[1];u.push(Object(s.a)({field:m},f))}e[r].form_structure[d]=u}}catch(x){c.e(x)}finally{c.f()}}for(var O=0,g=Object.keys(Fn);O<g.length;O++){var v=g[O];e[v]||(e[v]={form_structure:[],steps_order:[]})}l((function(t){return Object(s.a)(Object(s.a)({},t),{},{fields:Object(s.a)(Object(s.a)({},t.fields),e)})}))})),Hr().then((function(e){for(var t=e.form_structure,n=0,a=Object.keys(t);n<a.length;n++){for(var r=a[n],i=[],o=0,c=Object.entries(t[r]);o<c.length;o++){var d=Object(De.a)(c[o],2),u=d[0],b=d[1];i.push({field:u,type:"field",required:b})}t[r]=i}l((function(t){return Object(s.a)(Object(s.a)({},t),{},{fields:Object(s.a)(Object(s.a)({},t.fields),{},{client:e})})}))}))}),[n]);var d=function(){var e=Object(w.a)(N.a.mark((function e(){var n,a,r,o,c,s,l,d,u,b,j,h,p,m,f,O,g,v,x,y,_,C,S,k,w;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},"client"===i.category)for(a=Ur,n={steps_order:i.fields.client.steps_order,form_structure:{}},r=i.fields.client.form_structure,o=0,c=Object.keys(r);o<c.length;o++){s=c[o],l=n.form_structure[s]={},d=Object(mn.a)(r[s]);try{for(d.s();!(u=d.n()).done;)b=u.value,j=b.field,h=b.required,l[j]=h}catch(I){d.e(I)}finally{d.f()}}else{for(a=No,p=0,m=Object.keys(i.fields);p<m.length;p++)for(f=m[p],n[f]={steps_order:i.fields[f].steps_order,form_structure:{}},O=i.fields[f].form_structure,g=0,v=Object.keys(O);g<v.length;g++){x=v[g],y=n[f].form_structure[x]={},_=Object(mn.a)(O[x]);try{for(_.s();!(C=_.n()).done;)S=C.value,k=S.field,w=S.required,y[k]={type:"field",required:w}}catch(I){_.e(I)}finally{_.f()}}delete n.client}return console.log(n),e.prev=3,e.next=6,a(n);case 6:t.push("/dashboard"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),u=Object(we.useMemo)((function(){for(var e={},t="client"===i.category?Kr:Bn,n=0,a=Object.entries(t);n<a.length;n++){var r=Object(De.a)(a[n],2),o=r[0],c=r[1].label;e[o]=c}return e}),[i.category]),b=Object(we.useMemo)((function(){if(!i.category)return{};for(var e=Object(s.a)({},u),t=0,n=Object.values(i.fields[i.category].form_structure);t<n.length;t++){var a,r=n[t],o=Object(mn.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value.field;Object.keys(e).includes(c)&&delete e[c]}}catch(l){o.e(l)}finally{o.f()}}return e}),[i.fields,i.category,u]),j=Object(we.useCallback)((function(e){return function(t){var n=t.target.value;"category"===e?i.fields[n]&&l((function(t){var a;return Object(s.a)(Object(s.a)({},t),{},(a={},Object(c.a)(a,e,n),Object(c.a)(a,"selectedField",""),Object(c.a)(a,"selectedStep",""),Object(c.a)(a,"stepToAdd",""),a))})):l((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e,n))}))}}),[i.fields]),h=Object(we.useCallback)((function(e,t){return function(n){var a,r=i.fields[i.category].form_structure[t],o=Object(mn.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value;c.field===e&&(c.required=n.target.value)}}catch(s){o.e(s)}finally{o.f()}}}),[i.fields,i.category]),p=Object(we.useCallback)((function(e,t){var n=Object(o.a)(i.fields[i.category].form_structure[t]);n.splice(e,1),i.fields[i.category].form_structure[t]=n,l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))}),[i.fields,i.category]),m=Object(we.useCallback)((function(){for(var e=i.fields[i.category].form_structure,t=0,n=Object.values(e);t<n.length;t++){var a,r=n[t],o=Object(mn.a)(r);try{for(o.s();!(a=o.n()).done;){if(a.value.field===i.selectedField)return}}catch(c){o.e(c)}finally{o.f()}}i.fields[i.category].form_structure[i.selectedStep].push({field:i.selectedField,type:"field",required:!1}),l((function(e){return Object(s.a)(Object(s.a)({},e),{},{selectedField:"",fields:Object(s.a)({},e.fields)})}))}),[i.fields,i.category,i.selectedStep,i.selectedField]),f=Object(we.useCallback)((function(e,t){return function(){i.fields[i.category].steps_order.splice(e,1),delete i.fields[i.category].form_structure[t],l((function(e){return Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))}}),[i.fields,i.category]),O=Object(we.useMemo)((function(){return i.category?Object($e.jsxs)(Ga.a,{container:!0,alignItems:"flex-end",spacing:2,className:e.root,children:[Object($e.jsx)(Ga.a,{item:!0,children:Object($e.jsx)(ht.a,{label:"New step name",value:i.stepToAdd,onChange:j("stepToAdd")})}),Object($e.jsx)(Ga.a,{item:!0,children:Object($e.jsx)(Ve.a,{variant:"outlined",color:"primary",disabled:!i.stepToAdd,onClick:function(){l((function(e){return e.fields[e.category].form_structure[e.stepToAdd]=[],e.fields[e.category].steps_order.push(e.stepToAdd),Object(s.a)(Object(s.a)({},e),{},{fields:Object(s.a)({},e.fields)})}))},children:"Add Step"})})]}):null}),[i.stepToAdd,i.category,e.root,j]),g=Object(we.useMemo)((function(){return i.category?Object($e.jsxs)(Ga.a,{container:!0,alignItems:"flex-end",spacing:2,children:[Object($e.jsx)(Ga.a,{item:!0,sm:3,xs:4,children:Object($e.jsx)($t,{label:"Choose step",value:i.selectedStep,onChange:j("selectedStep"),options:i.fields[i.category].steps_order,noDefaultStyle:!0,formControlProps:{fullWidth:!0},noEmpty:!0,controlled:!0})}),Object($e.jsx)(Ga.a,{item:!0,sm:7,xs:8,children:Object($e.jsx)($t,{label:"Choose field",value:i.selectedField,onChange:j("selectedField"),options:b,noDefaultStyle:!0,formControlProps:{fullWidth:!0},noEmpty:!0,controlled:!0})}),Object($e.jsx)(Ga.a,{item:!0,sm:2,children:Object($e.jsx)(Ve.a,{variant:"outlined",color:"primary",onClick:m,disabled:!i.selectedField||!i.selectedStep,children:"Add Field"})})]}):null}),[i.fields,i.category,j,m,i.selectedField,i.selectedStep,b]),v=Object(we.useMemo)((function(){if(!i.fields[i.category])return null;var t=i.fields[i.category].form_structure;return Object.keys(t).map((function(n,a){return Object($e.jsxs)("div",{className:e.root,children:[Object($e.jsxs)(ze.a,{variant:"h6",color:"textSecondary",children:[n,Object($e.jsx)(ft.a,{onClick:f(a,n),size:"large",children:Object($e.jsx)(Jc.a,{})})]}),Object($e.jsx)(Uc.c,{droppableId:n,className:e.droppable,children:function(e,a){return Object($e.jsxs)("div",Object(s.a)(Object(s.a)({},e.droppableProps),{},{ref:e.innerRef,children:[Object($e.jsx)(Xc,{stepName:n,stepFields:t[n],handleRadioChange:h,handleDeleteField:p,fields:"client"===i.category?Kr:Bn}),e.placeholder]}))}}),Object($e.jsx)(qa.a,{})]},a)}))}),[i.fields,i.category,e.root,e.droppable,h,p,f]);return Object($e.jsxs)(St.a,{children:[Object($e.jsx)(ze.a,{variant:"h5",children:"Manage Fields"}),Object($e.jsx)($t,{label:"Please select",value:i.category,onChange:j("category"),options:Ln,noEmpty:!0}),O,g,Object($e.jsx)(Uc.a,{onDragEnd:function(e){var t=e.source,n=e.destination;if(n){var a=n.droppableId,r=t.droppableId;if(t.droppableId!==n.droppableId){var o=i.fields[i.category].form_structure[r],c=i.fields[i.category].form_structure[a],s=o.splice(t.index,1),l=Object(De.a)(s,1)[0];c.splice(n.index,0,l)}else!function(e,t,n){var a=e.splice(t,1),r=Object(De.a)(a,1)[0];e.splice(n,0,r)}(i.fields[i.category].form_structure[a],t.index,n.index)}},children:v}),i.category&&Object($e.jsx)(Ve.a,{variant:"outlined",color:"primary",onClick:d,className:e.submitButton,children:"Submit"})]})}})]}),as=ns,rs=(n(629),Object(Na.a)({palette:{primary:{main:Aa.a[700]},secondary:Pa.a}}));function is(){return Object($e.jsx)("div",{className:"App",children:Object($e.jsx)(Ta.a,{injectFirst:!0,children:Object($e.jsxs)(Ea.a,{theme:rs,children:[Object($e.jsx)(wa,{}),Object($e.jsx)("div",{style:{paddingTop:50,paddingBottom:22},children:as}),Object($e.jsx)(Ia,{})]})})})}var os=function(e){console.log("File: store.js - Function: configureStore  Parameters: preloadedState ->  ",e);var t=Object(a.e)(Se,e,Object(a.a)(i.a,ke));return{store:t,persistor:Object(r.b)(t)}}(),cs=os.store,ss=os.persistor;Te.a.render(Object($e.jsx)(Ee.a,{store:cs,children:Object($e.jsx)(Pe.a,{loading:null,persistor:ss,children:Object($e.jsx)(Ae.a,{children:Object($e.jsx)(is,{})})})}),document.getElementById("root"))}},[[631,1,2]]]);
//# sourceMappingURL=main.107490b5.chunk.js.map